/*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2012 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
/* global G_IS_HOOKED:false */
(function($, window) {
    "use strict";

    var http;

    window.Granite = window.Granite || {};
    window.Granite.$ = window.Granite.$ || $;

    // for deprecated "shared" support (GRANITE-1602)
    window._g = window._g || {};
    window._g.$ = window._g.$ || $;

    http = Granite.HTTP;

    // necessary global modifications for ajax calls
    $.ajaxSetup({
        externalize: true,
        encodePath: true,
        hook: true,
        beforeSend: function(jqXHR, s) {
            // s: settings provided by the ajax call or default values
            if (typeof G_IS_HOOKED === "undefined" || !G_IS_HOOKED(s.url)) {
                if (s.externalize) {
                    s.url = http.externalize(s.url);
                }
                if (s.encodePath) {
                    s.url = http.encodePathOfURI(s.url);
                }
            }
            if (s.hook) {
                // portlet XHR hook
                var hook = http.getXhrHook(s.url, s.type, s.data);
                if (hook) {
                    s.url = hook.url;
                    if (hook.params) {
                        if (s.type.toUpperCase() === "GET") {
                            s.url += "?" + $.param(hook.params);
                        } else {
                            s.data = $.param(hook.params);
                        }
                    }
                }
            }
        },
        statusCode: {
            403: function(jqXHR) {
                if (jqXHR.getResponseHeader("X-Reason") === "Authentication Failed") {
                    http.handleLoginRedirect();
                }
            }
        }
    });

    $.ajaxSettings.traditional = true;
}(jQuery, this));

/*
 * ADOBE CONFIDENTIAL
 *
 * Copyright 2015 Adobe Systems Incorporated
 * All Rights Reserved.
 *
 * NOTICE:  All information contained herein is, and remains
 * the property of Adobe Systems Incorporated and its suppliers,
 * if any.  The intellectual and technical concepts contained
 * herein are proprietary to Adobe Systems Incorporated and its
 * suppliers and may be covered by U.S. and Foreign Patents,
 * patents in process, and are protected by trade secret or copyright law.
 * Dissemination of this information or reproduction of this material
 * is strictly forbidden unless prior written permission is obtained
 * from Adobe Systems Incorporated.
 *
 */
(function(factory) {
    "use strict";

    // GRANITE-22281 Check for multiple initialization
    if (window.Granite.csrf) {
        return;
    }

    window.Granite.csrf = factory(window.Granite.HTTP);
}(function(http) {
    "use strict";

    // AdobePatentID="P5296"

    function Promise() {
        this._handler = [];
    }

    Promise.prototype = {
        then: function(resolveFn, rejectFn) {
            this._handler.push({ resolve: resolveFn, reject: rejectFn });
        },
        resolve: function() {
            this._execute("resolve", arguments);
        },
        reject: function() {
            this._execute("reject", arguments);
        },
        _execute: function(result, args) {
            if (this._handler === null) {
                throw new Error("Promise already completed.");
            }

            for (var i = 0, ln = this._handler.length; i < ln; i++) {
                this._handler[i][result].apply(window, args);
            }

            this.then = function(resolveFn, rejectFn) {
                (result === "resolve" ? resolveFn : rejectFn).apply(window, args);
            };

            this._handler = null;
        }
    };

    function verifySameOrigin(url) {
        // url could be relative or scheme relative or absolute
        // host + port
        var host = document.location.host;
        var protocol = document.location.protocol;
        var relativeOrigin = "//" + host;
        var origin = protocol + relativeOrigin;

        // Allow absolute or scheme relative URLs to same origin
        return (url === origin || url.slice(0, origin.length + 1) === origin + "/") ||
                (url === relativeOrigin || url.slice(0, relativeOrigin.length + 1) === relativeOrigin + "/") ||
                // or any other URL that isn't scheme relative or absolute i.e relative.
                !(/^(\/\/|http:|https:).*/.test(url));
    }

    var FIELD_NAME = ":cq_csrf_token";
    var HEADER_NAME = "CSRF-Token";
    var TOKEN_SERVLET = http.externalize("/libs/granite/csrf/token.json");

    var promise;
    var globalToken;

    function logFailRequest(error) {
        if (window.console) {
            // eslint-disable-next-line no-console
            console.warn("CSRF data not available;" +
                    "The data may be unavailable by design, such as during non-authenticated requests: " + error);
        }
    }

    function getToken() {
        var localPromise = new Promise();
        promise = localPromise;

        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                try {
                    var data = JSON.parse(xhr.responseText);
                    globalToken = data.token;
                    localPromise.resolve(globalToken);
                } catch (ex) {
                    logFailRequest(ex);
                    localPromise.reject(xhr.responseText);
                }
            }
        };
        xhr.open("GET", TOKEN_SERVLET, true);
        xhr.send();

        return localPromise;
    }

    function getTokenSync() {
        var xhr = new XMLHttpRequest();
        xhr.open("GET", TOKEN_SERVLET, false);
        xhr.send();

        try {
            return globalToken = JSON.parse(xhr.responseText).token;
        } catch (ex) {
            logFailRequest(ex);
        }
    }

    function clearToken() {
        globalToken = undefined;
        getToken();
    }

    function addField(form) {
        var action = form.getAttribute("action");
        if (form.method.toUpperCase() === "GET" || (action && !verifySameOrigin(action))) {
            return;
        }

        if (!globalToken) {
            getTokenSync();
        }

        if (!globalToken) {
            return;
        }

        var input = form.querySelector('input[name="' + FIELD_NAME + '"]');

        if (!input) {
            input = document.createElement("input");
            input.setAttribute("type", "hidden");
            input.setAttribute("name", FIELD_NAME);
            form.appendChild(input);
        }

        input.setAttribute("value", globalToken);
    }

    function handleForm(document) {
        var handler = function(ev) {
            var t = ev.target;

            if (t.nodeName === "FORM") {
                addField(t);
            }
        };

        if (document.addEventListener) {
            document.addEventListener("submit", handler, true);
        } else if (document.attachEvent) {
            document.attachEvent("submit", handler);
        }
    }

    handleForm(document);

    var open = XMLHttpRequest.prototype.open;

    XMLHttpRequest.prototype.open = function(method, url, async) {
        if (method.toLowerCase() !== "get" && verifySameOrigin(url)) {
            this._csrf = true;
            this._async = async;
        }

        return open.apply(this, arguments);
    };

    var send = XMLHttpRequest.prototype.send;

    XMLHttpRequest.prototype.send = function() {
        if (!this._csrf) {
            send.apply(this, arguments);
            return;
        }

        if (globalToken) {
            this.setRequestHeader(HEADER_NAME, globalToken);
            send.apply(this, arguments);
            return;
        }

        if (this._async === false) {
            getTokenSync();

            if (globalToken) {
                this.setRequestHeader(HEADER_NAME, globalToken);
            }

            send.apply(this, arguments);
            return;
        }

        var self = this;
        var args = Array.prototype.slice.call(arguments);

        promise.then(function(token) {
            self.setRequestHeader(HEADER_NAME, token);
            send.apply(self, args);
        }, function() {
            send.apply(self, args);
        });
    };

    var submit = HTMLFormElement.prototype.submit;

    HTMLFormElement.prototype.submit = function() {
        addField(this);
        return submit.apply(this, arguments);
    };

    if (window.Node) {
        var ac = Node.prototype.appendChild;

        Node.prototype.appendChild = function() {
            var result = ac.apply(this, arguments);

            if (result.nodeName === "IFRAME") {
                try {
                    if (result.contentWindow && !result._csrf) {
                        result._csrf = true;
                        handleForm(result.contentWindow.document);
                    }
                } catch (ex) {
                    if (result.src && result.src.length && verifySameOrigin(result.src)) {
                        if (window.console) {
                            // eslint-disable-next-line no-console
                            console.error("Unable to attach CSRF token to an iframe element on the same origin");
                        }
                    }

                    // Potential error: Access is Denied
                    // we can safely ignore CORS security errors here
                    // because we do not want to expose the csrf anyways to another domain
                }
            }

            return result;
        };
    }

    // refreshing csrf token periodically
    getToken();

    setInterval(function() {
        getToken();
    }, 300000);

    return {
        initialised: false,
        refreshToken: getToken,
        _clearToken: clearToken
    };
}));

/*! For license information please see components.bundle.js.LICENSE.txt */
var Project_Component_Library;(()=>{var __webpack_modules__={2692:(module,exports,__webpack_require__)=>{var __WEBPACK_AMD_DEFINE_RESULT__,root,factory;"undefined"!=typeof navigator&&(root=window||{},factory=function(window){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",initialDefaultFrame=-999999,subframeEnabled=!0,expressionsPlugin,isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),cachedColors={},bm_rounder=Math.round,bm_rnd,bm_pow=Math.pow,bm_sqrt=Math.sqrt,bm_abs=Math.abs,bm_floor=Math.floor,bm_max=Math.max,bm_min=Math.min,blitter=10,BMMath={};function ProjectInterface(){return{}}!function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],n=t.length;for(e=0;e<n;e+=1)BMMath[t[e]]=Math[t[e]]}(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"==typeof e&&e.length){var t,n=createSizedArray(e.length),r=e.length;for(t=0;t<r;t+=1)n[t]=Math.abs(e[t]);return n}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){bm_rnd=e?Math.round:function(e){return e}}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin=e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility=e.style.webkitBackfaceVisibility="visible",e.style.transformStyle=e.style.webkitTransformStyle=e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,n,r){this.type=e,this.currentTime=t,this.totalTime=n,this.direction=r<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,n,r){this.type=e,this.currentLoop=n,this.totalLoops=t,this.direction=r<0?-1:1}function BMSegmentStartEvent(e,t,n){this.type=e,this.firstFrame=t,this.totalFrames=n}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t,this.currentTime=currentTime}roundValues(!1);var createElementID=(_count=0,function(){return"__lottie_element_"+ ++_count}),_count;function HSVtoRGB(e,t,n){var r,i,o,a,s,l,c,u;switch(l=n*(1-t),c=n*(1-(s=6*e-(a=Math.floor(6*e)))*t),u=n*(1-(1-s)*t),a%6){case 0:r=n,i=u,o=l;break;case 1:r=c,i=n,o=l;break;case 2:r=l,i=n,o=u;break;case 3:r=l,i=c,o=n;break;case 4:r=u,i=l,o=n;break;case 5:r=n,i=l,o=c}return[r,i,o]}function RGBtoHSV(e,t,n){var r,i=Math.max(e,t,n),o=Math.min(e,t,n),a=i-o,s=0===i?0:a/i,l=i/255;switch(i){case o:r=0;break;case e:r=t-n+a*(t<n?6:0),r/=6*a;break;case t:r=n-e+2*a,r/=6*a;break;case n:r=e-t+4*a,r/=6*a}return[r,s,l]}function addSaturationToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[1]+=t,n[1]>1?n[1]=1:n[1]<=0&&(n[1]=0),HSVtoRGB(n[0],n[1],n[2])}function addBrightnessToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[2]+=t,n[2]>1?n[2]=1:n[2]<0&&(n[2]=0),HSVtoRGB(n[0],n[1],n[2])}function addHueToRGB(e,t){var n=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return n[0]+=t/360,n[0]>1?n[0]-=1:n[0]<0&&(n[0]+=1),HSVtoRGB(n[0],n[1],n[2])}var rgbToHex=function(){var e,t,n=[];for(e=0;e<256;e+=1)t=e.toString(16),n[e]=1==t.length?"0"+t:t;return function(e,t,r){return e<0&&(e=0),t<0&&(t=0),r<0&&(r=0),"#"+n[e]+n[t]+n[r]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var n=this._cbs[e].length,r=0;r<n;r++)this._cbs[e][r](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),function(){this.removeEventListener(e,t)}.bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var n=0,r=this._cbs[e].length;n<r;)this._cbs[e][n]===t&&(this._cbs[e].splice(n,1),n-=1,r-=1),n+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var createTypedArray="function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?function(e,t){return"float32"===e?new Float32Array(t):"int16"===e?new Int16Array(t):"uint8c"===e?new Uint8ClampedArray(t):void 0}:function(e,t){var n,r=0,i=[];switch(e){case"int16":case"uint8c":n=1;break;default:n=1.1}for(r=0;r<t;r+=1)i.push(n);return i};function createSizedArray(e){return Array.apply(null,{length:e})}function createNS(e){return document.createElementNS(svgNS,e)}function createTag(e){return document.createElement(e)}function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var getBlendMode=(blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"},function(e){return blendModeEnums[e]||""}),blendModeEnums,Matrix=function(){var e=Math.cos,t=Math.sin,n=Math.tan,r=Math.round;function i(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function o(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function a(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(1,0,0,0,0,r,-i,0,0,i,r,0,0,0,0,1)}function s(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,0,i,0,0,1,0,0,-i,0,r,0,0,0,0,1)}function l(n){if(0===n)return this;var r=e(n),i=t(n);return this._t(r,-i,0,0,i,r,0,0,0,0,1,0,0,0,0,1)}function c(e,t){return this._t(1,t,e,1,0,0)}function u(e,t){return this.shear(n(e),n(t))}function h(r,i){var o=e(i),a=t(i);return this._t(o,a,0,0,-a,o,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,n(r),1,0,0,0,0,1,0,0,0,0,1)._t(o,-a,0,0,a,o,0,0,0,0,1,0,0,0,0,1)}function d(e,t,n){return n||0===n||(n=1),1===e&&1===t&&1===n?this:this._t(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)}function p(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=n,this.props[3]=r,this.props[4]=i,this.props[5]=o,this.props[6]=a,this.props[7]=s,this.props[8]=l,this.props[9]=c,this.props[10]=u,this.props[11]=h,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(e,t,n){return n=n||0,0!==e||0!==t||0!==n?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1):this}function m(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){var v=this.props;if(1===e&&0===t&&0===n&&0===r&&0===i&&1===o&&0===a&&0===s&&0===l&&0===c&&1===u&&0===h)return v[12]=v[12]*e+v[15]*d,v[13]=v[13]*o+v[15]*p,v[14]=v[14]*u+v[15]*f,v[15]=v[15]*m,this._identityCalculated=!1,this;var g=v[0],y=v[1],_=v[2],b=v[3],w=v[4],x=v[5],S=v[6],E=v[7],k=v[8],T=v[9],A=v[10],C=v[11],M=v[12],L=v[13],R=v[14],P=v[15];return v[0]=g*e+y*i+_*l+b*d,v[1]=g*t+y*o+_*c+b*p,v[2]=g*n+y*a+_*u+b*f,v[3]=g*r+y*s+_*h+b*m,v[4]=w*e+x*i+S*l+E*d,v[5]=w*t+x*o+S*c+E*p,v[6]=w*n+x*a+S*u+E*f,v[7]=w*r+x*s+S*h+E*m,v[8]=k*e+T*i+A*l+C*d,v[9]=k*t+T*o+A*c+C*p,v[10]=k*n+T*a+A*u+C*f,v[11]=k*r+T*s+A*h+C*m,v[12]=M*e+L*i+R*l+P*d,v[13]=M*t+L*o+R*c+P*p,v[14]=M*n+L*a+R*u+P*f,v[15]=M*r+L*s+R*h+P*m,this._identityCalculated=!1,this}function v(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function g(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function y(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t]}function _(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function b(e,t,n){return{x:e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}}function w(e,t,n){return e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12]}function x(e,t,n){return e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13]}function S(e,t,n){return e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]}function E(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,n=-this.props[1]/e,r=-this.props[4]/e,i=this.props[0]/e,o=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,s=new Matrix;return s.props[0]=t,s.props[1]=n,s.props[4]=r,s.props[5]=i,s.props[12]=o,s.props[13]=a,s}function k(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function T(e){var t,n=e.length,r=[];for(t=0;t<n;t+=1)r[t]=k(e[t]);return r}function A(e,t,n){var r=createTypedArray("float32",6);if(this.isIdentity())r[0]=e[0],r[1]=e[1],r[2]=t[0],r[3]=t[1],r[4]=n[0],r[5]=n[1];else{var i=this.props[0],o=this.props[1],a=this.props[4],s=this.props[5],l=this.props[12],c=this.props[13];r[0]=e[0]*i+e[1]*a+l,r[1]=e[0]*o+e[1]*s+c,r[2]=t[0]*i+t[1]*a+l,r[3]=t[0]*o+t[1]*s+c,r[4]=n[0]*i+n[1]*a+l,r[5]=n[0]*o+n[1]*s+c}return r}function C(e,t,n){return this.isIdentity()?[e,t,n]:[e*this.props[0]+t*this.props[4]+n*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+n*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+n*this.props[10]+this.props[14]]}function M(e,t){if(this.isIdentity())return e+","+t;var n=this.props;return Math.round(100*(e*n[0]+t*n[4]+n[12]))/100+","+Math.round(100*(e*n[1]+t*n[5]+n[13]))/100}function L(){for(var e=0,t=this.props,n="matrix3d(";e<16;)n+=r(1e4*t[e])/1e4,n+=15===e?")":",",e+=1;return n}function R(e){return e<1e-6&&e>0||e>-1e-6&&e<0?r(1e4*e)/1e4:e}function P(){var e=this.props;return"matrix("+R(e[0])+","+R(e[1])+","+R(e[4])+","+R(e[5])+","+R(e[12])+","+R(e[13])+")"}return function(){this.reset=i,this.rotate=o,this.rotateX=a,this.rotateY=s,this.rotateZ=l,this.skew=u,this.skewFromAxis=h,this.shear=c,this.scale=d,this.setTransform=p,this.translate=f,this.transform=m,this.applyToPoint=b,this.applyToX=w,this.applyToY=x,this.applyToZ=S,this.applyToPointArray=C,this.applyToTriplePoints=A,this.applyToPointStringified=M,this.toCSS=L,this.to2dCSS=P,this.clone=y,this.cloneFromProps=_,this.equals=g,this.inversePoints=T,this.inversePoint=k,this.getInverseMatrix=E,this._t=this.transform,this.isIdentity=v,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();!function(e,t){var n,r=this,i=256,o="random",a=t.pow(i,6),s=t.pow(2,52),l=2*s,c=255;function u(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=c&a+e[o%n]+(t=s[o])],s[a]=t;r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=c&o+1],n=n*i+s[c&(s[o]=s[a=c&a+t])+(s[a]=t)];return r.i=o,r.j=a,n}}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(d(e[n],t-1))}catch(e){}return r.length?r:"string"==i?e:e+"\0"}function p(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return f(t)}function f(e){return String.fromCharCode.apply(0,e)}t["seed"+o]=function(c,m,v){var g=[],y=p(d((m=!0===m?{entropy:!0}:m||{}).entropy?[c,f(e)]:null===c?function(){try{n;var t=new Uint8Array(i);return(r.crypto||r.msCrypto).getRandomValues(t),f(t)}catch(t){var o=r.navigator,a=o&&o.plugins;return[+new Date,r,a,r.screen,f(e)]}}():c,3),g),_=new u(g),b=function(){for(var e=_.g(6),t=a,n=0;e<s;)e=(e+n)*i,t*=i,n=_.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|_.g(4)},b.quick=function(){return _.g(4)/4294967296},b.double=b,p(f(_.S),e),(m.pass||v||function(e,n,r,i){return i&&(i.S&&h(i,_),e.state=function(){return h(_,{})}),r?(t[o]=e,n):e})(b,y,"global"in m?m.global:this==t,m.state)},p(t.random(),e)}([],BMMath);var BezierFactory=function(){var e={getBezierEasing:function(e,n,r,i,o){var a=o||("bez_"+e+"_"+n+"_"+r+"_"+i).replace(/\./g,"p");if(t[a])return t[a];var s=new u([e,n,r,i]);return t[a]=s,s}},t={},n=11,r=1/(n-1),i="function"==typeof Float32Array;function o(e,t){return 1-3*t+3*e}function a(e,t){return 3*t-6*e}function s(e){return 3*e}function l(e,t,n){return((o(t,n)*e+a(t,n))*e+s(t))*e}function c(e,t,n){return 3*o(t,n)*e*e+2*a(t,n)*e+s(t)}function u(e){this._p=e,this._mSampleValues=i?new Float32Array(n):new Array(n),this._precomputed=!1,this.get=this.get.bind(this)}return u.prototype={get:function(e){var t=this._p[0],n=this._p[1],r=this._p[2],i=this._p[3];return this._precomputed||this._precompute(),t===n&&r===i?e:0===e?0:1===e?1:l(this._getTForX(e),n,i)},_precompute:function(){var e=this._p[0],t=this._p[1],n=this._p[2],r=this._p[3];this._precomputed=!0,e===t&&n===r||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<n;++i)this._mSampleValues[i]=l(i*r,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],o=this._mSampleValues,a=0,s=1,u=n-1;s!==u&&o[s]<=e;++s)a+=r;var h=a+(e-o[--s])/(o[s+1]-o[s])*r,d=c(h,t,i);return d>=.001?function(e,t,n,r){for(var i=0;i<4;++i){var o=c(t,n,r);if(0===o)return t;t-=(l(t,n,r)-e)/o}return t}(e,h,t,i):0===d?h:function(e,t,n,r,i){var o,a,s=0;do{(o=l(a=t+(n-t)/2,r,i)-e)>0?n=a:t=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,a,a+r,t,i)}},e}();function extendPrototype(e,t){var n,r,i=e.length;for(n=0;n<i;n+=1)for(var o in r=e[n].prototype)r.hasOwnProperty(o)&&(t.prototype[o]=r[o])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}function bezFunction(){function e(e,t,n,r,i,o){var a=e*r+t*i+n*o-i*r-o*e-n*t;return a>-.001&&a<.001}Math;var t=function(e,t,n,r){var i,o,a,s,l,c,u=defaultCurveSegments,h=0,d=[],p=[],f=bezier_length_pool.newElement();for(a=n.length,i=0;i<u;i+=1){for(l=i/(u-1),c=0,o=0;o<a;o+=1)s=bm_pow(1-l,3)*e[o]+3*bm_pow(1-l,2)*l*n[o]+3*(1-l)*bm_pow(l,2)*r[o]+bm_pow(l,3)*t[o],d[o]=s,null!==p[o]&&(c+=bm_pow(d[o]-p[o],2)),p[o]=d[o];c&&(h+=c=bm_sqrt(c)),f.percents[i]=l,f.lengths[i]=h}return f.addedLength=h,f};function n(e){this.segmentLength=0,this.points=new Array(e)}function r(e,t){this.partialLength=e,this.point=t}var i,o=(i={},function(t,o,a,s){var l=(t[0]+"_"+t[1]+"_"+o[0]+"_"+o[1]+"_"+a[0]+"_"+a[1]+"_"+s[0]+"_"+s[1]).replace(/\./g,"p");if(!i[l]){var c,u,h,d,p,f,m,v=defaultCurveSegments,g=0,y=null;2===t.length&&(t[0]!=o[0]||t[1]!=o[1])&&e(t[0],t[1],o[0],o[1],t[0]+a[0],t[1]+a[1])&&e(t[0],t[1],o[0],o[1],o[0]+s[0],o[1]+s[1])&&(v=2);var _=new n(v);for(h=a.length,c=0;c<v;c+=1){for(m=createSizedArray(h),p=c/(v-1),f=0,u=0;u<h;u+=1)d=bm_pow(1-p,3)*t[u]+3*bm_pow(1-p,2)*p*(t[u]+a[u])+3*(1-p)*bm_pow(p,2)*(o[u]+s[u])+bm_pow(p,3)*o[u],m[u]=d,null!==y&&(f+=bm_pow(m[u]-y[u],2));g+=f=bm_sqrt(f),_.points[c]=new r(f,m),y=m}_.segmentLength=g,i[l]=_}return i[l]});function a(e,t){var n=t.percents,r=t.lengths,i=n.length,o=bm_floor((i-1)*e),a=e*t.addedLength,s=0;if(o===i-1||0===o||a===r[o])return n[o];for(var l=r[o]>a?-1:1,c=!0;c;)if(r[o]<=a&&r[o+1]>a?(s=(a-r[o])/(r[o+1]-r[o]),c=!1):o+=l,o<0||o>=i-1){if(o===i-1)return n[o];c=!1}return n[o]+(n[o+1]-n[o])*s}var s=createTypedArray("float32",8);return{getSegmentsLength:function(e){var n,r=segments_length_pool.newElement(),i=e.c,o=e.v,a=e.o,s=e.i,l=e._length,c=r.lengths,u=0;for(n=0;n<l-1;n+=1)c[n]=t(o[n],o[n+1],a[n],s[n+1]),u+=c[n].addedLength;return i&&l&&(c[n]=t(o[n],o[0],a[n],s[0]),u+=c[n].addedLength),r.totalLength=u,r},getNewSegment:function(e,t,n,r,i,o,l){var c,u=a(i=i<0?0:i>1?1:i,l),h=a(o=o>1?1:o,l),d=e.length,p=1-u,f=1-h,m=p*p*p,v=u*p*p*3,g=u*u*p*3,y=u*u*u,_=p*p*f,b=u*p*f+p*u*f+p*p*h,w=u*u*f+p*u*h+u*p*h,x=u*u*h,S=p*f*f,E=u*f*f+p*h*f+p*f*h,k=u*h*f+p*h*h+u*f*h,T=u*h*h,A=f*f*f,C=h*f*f+f*h*f+f*f*h,M=h*h*f+f*h*h+h*f*h,L=h*h*h;for(c=0;c<d;c+=1)s[4*c]=Math.round(1e3*(m*e[c]+v*n[c]+g*r[c]+y*t[c]))/1e3,s[4*c+1]=Math.round(1e3*(_*e[c]+b*n[c]+w*r[c]+x*t[c]))/1e3,s[4*c+2]=Math.round(1e3*(S*e[c]+E*n[c]+k*r[c]+T*t[c]))/1e3,s[4*c+3]=Math.round(1e3*(A*e[c]+C*n[c]+M*r[c]+L*t[c]))/1e3;return s},getPointInSegment:function(e,t,n,r,i,o){var s=a(i,o),l=1-s;return[Math.round(1e3*(l*l*l*e[0]+(s*l*l+l*s*l+l*l*s)*n[0]+(s*s*l+l*s*s+s*l*s)*r[0]+s*s*s*t[0]))/1e3,Math.round(1e3*(l*l*l*e[1]+(s*l*l+l*s*l+l*l*s)*n[1]+(s*s*l+l*s*s+s*l*s)*r[1]+s*s*s*t[1]))/1e3]},buildBezierData:o,pointOnLine2D:e,pointOnLine3D:function(t,n,r,i,o,a,s,l,c){if(0===r&&0===a&&0===c)return e(t,n,i,o,s,l);var u,h=Math.sqrt(Math.pow(i-t,2)+Math.pow(o-n,2)+Math.pow(a-r,2)),d=Math.sqrt(Math.pow(s-t,2)+Math.pow(l-n,2)+Math.pow(c-r,2)),p=Math.sqrt(Math.pow(s-i,2)+Math.pow(l-o,2)+Math.pow(c-a,2));return(u=h>d?h>p?h-d-p:p-d-h:p>d?p-d-h:d-h-p)>-1e-4&&u<1e-4}}}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),o=setTimeout((function(){t(r+i)}),i);return e=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var bez=bezFunction();function dataFunctionManager(){function e(i,o,a){var s,l,c,u,h,d,p,f=i.length;for(l=0;l<f;l+=1)if("ks"in(s=i[l])&&!s.completed){if(s.completed=!0,s.tt&&(i[l-1].td=s.tt),s.hasMask){var m=s.masksProperties;for(u=m.length,c=0;c<u;c+=1)if(m[c].pt.k.i)r(m[c].pt.k);else for(d=m[c].pt.k.length,h=0;h<d;h+=1)m[c].pt.k[h].s&&r(m[c].pt.k[h].s[0]),m[c].pt.k[h].e&&r(m[c].pt.k[h].e[0])}0===s.ty?(s.layers=t(s.refId,o),e(s.layers,o,a)):4===s.ty?n(s.shapes):5==s.ty&&(0!==(p=s).t.a.length||"m"in p.t.p||(p.singleShape=!0))}}function t(e,t){for(var n=0,r=t.length;n<r;){if(t[n].id===e)return t[n].layers.__used?JSON.parse(JSON.stringify(t[n].layers)):(t[n].layers.__used=!0,t[n].layers);n+=1}}function n(e){var t,i,o;for(t=e.length-1;t>=0;t-=1)if("sh"==e[t].ty)if(e[t].ks.k.i)r(e[t].ks.k);else for(o=e[t].ks.k.length,i=0;i<o;i+=1)e[t].ks.k[i].s&&r(e[t].ks.k[i].s[0]),e[t].ks.k[i].e&&r(e[t].ks.k[i].e[0]);else"gr"==e[t].ty&&n(e[t].it)}function r(e){var t,n=e.i.length;for(t=0;t<n;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function i(e,t){var n=t?t.split("."):[100,100,100];return e[0]>n[0]||!(n[0]>e[0])&&(e[1]>n[1]||!(n[1]>e[1])&&(e[2]>n[2]||!(n[2]>e[2])&&void 0))}var o,a=function(){var e=[4,4,14];function t(e){var t,n,r,i=e.length;for(t=0;t<i;t+=1)5===e[t].ty&&(void 0,r=(n=e[t]).t.d,n.t.d={k:[{s:r,t:0}]})}return function(n){if(i(e,n.v)&&(t(n.layers),n.assets)){var r,o=n.assets.length;for(r=0;r<o;r+=1)n.assets[r].layers&&t(n.assets[r].layers)}}}(),s=(o=[4,7,99],function(e){if(e.chars&&!i(o,e.v)){var t,n,a,s,l,c=e.chars.length;for(t=0;t<c;t+=1)if(e.chars[t].data&&e.chars[t].data.shapes)for(a=(l=e.chars[t].data.shapes[0].it).length,n=0;n<a;n+=1)(s=l[n].ks.k).__converted||(r(l[n].ks.k),s.__converted=!0)}}),l=function(){var e=[4,1,9];function t(e){var n,r,i,o=e.length;for(n=0;n<o;n+=1)if("gr"===e[n].ty)t(e[n].it);else if("fl"===e[n].ty||"st"===e[n].ty)if(e[n].c.k&&e[n].c.k[0].i)for(i=e[n].c.k.length,r=0;r<i;r+=1)e[n].c.k[r].s&&(e[n].c.k[r].s[0]/=255,e[n].c.k[r].s[1]/=255,e[n].c.k[r].s[2]/=255,e[n].c.k[r].s[3]/=255),e[n].c.k[r].e&&(e[n].c.k[r].e[0]/=255,e[n].c.k[r].e[1]/=255,e[n].c.k[r].e[2]/=255,e[n].c.k[r].e[3]/=255);else e[n].c.k[0]/=255,e[n].c.k[1]/=255,e[n].c.k[2]/=255,e[n].c.k[3]/=255}function n(e){var n,r=e.length;for(n=0;n<r;n+=1)4===e[n].ty&&t(e[n].shapes)}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,o=t.assets.length;for(r=0;r<o;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),c=function(){var e=[4,4,18];function t(e){var n,r,i;for(n=e.length-1;n>=0;n-=1)if("sh"==e[n].ty)if(e[n].ks.k.i)e[n].ks.k.c=e[n].closed;else for(i=e[n].ks.k.length,r=0;r<i;r+=1)e[n].ks.k[r].s&&(e[n].ks.k[r].s[0].c=e[n].closed),e[n].ks.k[r].e&&(e[n].ks.k[r].e[0].c=e[n].closed);else"gr"==e[n].ty&&t(e[n].it)}function n(e){var n,r,i,o,a,s,l=e.length;for(r=0;r<l;r+=1){if((n=e[r]).hasMask){var c=n.masksProperties;for(o=c.length,i=0;i<o;i+=1)if(c[i].pt.k.i)c[i].pt.k.c=c[i].cl;else for(s=c[i].pt.k.length,a=0;a<s;a+=1)c[i].pt.k[a].s&&(c[i].pt.k[a].s[0].c=c[i].cl),c[i].pt.k[a].e&&(c[i].pt.k[a].e[0].c=c[i].cl)}4===n.ty&&t(n.shapes)}}return function(t){if(i(e,t.v)&&(n(t.layers),t.assets)){var r,o=t.assets.length;for(r=0;r<o;r+=1)t.assets[r].layers&&n(t.assets[r].layers)}}}(),u={completeData:function(t,n){t.__complete||(l(t),a(t),s(t),c(t),e(t.layers,t.assets,n),t.__complete=!0)}};return u.checkColors=l,u.checkChars=s,u.checkShapes=c,u.completeLayers=e,u}var dataManager=dataFunctionManager(),FontManager=function(){var e={w:0,size:0,shapes:[]},t=[];function n(e,t){var n=createTag("span");n.style.fontFamily=t;var r=createTag("span");r.innerHTML="giItT1WQy@!-/#",n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.style.fontSize="300px",n.style.fontVariant="normal",n.style.fontStyle="normal",n.style.fontWeight="normal",n.style.letterSpacing="0",n.appendChild(r),document.body.appendChild(n);var i=r.offsetWidth;return r.style.fontFamily=e+", "+t,{node:r,w:i,parent:n}}function r(e,t){var n=createNS("text");return n.style.fontSize="100px",n.setAttribute("font-family",t.fFamily),n.setAttribute("font-style",t.fStyle),n.setAttribute("font-weight",t.fWeight),n.textContent="1",t.fClass?(n.style.fontFamily="inherit",n.setAttribute("class",t.fClass)):n.style.fontFamily=t.fFamily,e.appendChild(n),createTag("canvas").getContext("2d").font=t.fWeight+" "+t.fStyle+" 100px "+t.fFamily,n}t=t.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this.initTime=Date.now()};return i.getCombinedCharacterCodes=function(){return t},i.prototype.addChars=function(e){if(e){this.chars||(this.chars=[]);var t,n,r,i=e.length,o=this.chars.length;for(t=0;t<i;t+=1){for(n=0,r=!1;n<o;)this.chars[n].style===e[t].style&&this.chars[n].fFamily===e[t].fFamily&&this.chars[n].ch===e[t].ch&&(r=!0),n+=1;r||(this.chars.push(e[t]),o+=1)}}},i.prototype.addFonts=function(e,t){if(e){if(this.chars)return this.isLoaded=!0,void(this.fonts=e.list);var i,o=e.list,a=o.length,s=a;for(i=0;i<a;i+=1){var l,c,u=!0;if(o[i].loaded=!1,o[i].monoCase=n(o[i].fFamily,"monospace"),o[i].sansCase=n(o[i].fFamily,"sans-serif"),o[i].fPath){if("p"===o[i].fOrigin||3===o[i].origin){if((l=document.querySelectorAll('style[f-forigin="p"][f-family="'+o[i].fFamily+'"], style[f-origin="3"][f-family="'+o[i].fFamily+'"]')).length>0&&(u=!1),u){var h=createTag("style");h.setAttribute("f-forigin",o[i].fOrigin),h.setAttribute("f-origin",o[i].origin),h.setAttribute("f-family",o[i].fFamily),h.type="text/css",h.innerHTML="@font-face {font-family: "+o[i].fFamily+"; font-style: normal; src: url('"+o[i].fPath+"');}",t.appendChild(h)}}else if("g"===o[i].fOrigin||1===o[i].origin){for(l=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),c=0;c<l.length;c++)-1!==l[c].href.indexOf(o[i].fPath)&&(u=!1);if(u){var d=createTag("link");d.setAttribute("f-forigin",o[i].fOrigin),d.setAttribute("f-origin",o[i].origin),d.type="text/css",d.rel="stylesheet",d.href=o[i].fPath,document.body.appendChild(d)}}else if("t"===o[i].fOrigin||2===o[i].origin){for(l=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),c=0;c<l.length;c++)o[i].fPath===l[c].src&&(u=!1);if(u){var p=createTag("link");p.setAttribute("f-forigin",o[i].fOrigin),p.setAttribute("f-origin",o[i].origin),p.setAttribute("rel","stylesheet"),p.setAttribute("href",o[i].fPath),t.appendChild(p)}}}else o[i].loaded=!0,s-=1;o[i].helper=r(t,o[i]),o[i].cache={},this.fonts.push(o[i])}0===s?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}else this.isLoaded=!0},i.prototype.getCharData=function(t,n,r){for(var i=0,o=this.chars.length;i<o;){if(this.chars[i].ch===t&&this.chars[i].style===n&&this.chars[i].fFamily===r)return this.chars[i];i+=1}return("string"==typeof t&&13!==t.charCodeAt(0)||!t)&&console&&console.warn&&console.warn("Missing character from exported characters list: ",t,n,r),e},i.prototype.getFontByName=function(e){for(var t=0,n=this.fonts.length;t<n;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]},i.prototype.measureText=function(e,t,n){var r=this.getFontByName(t),i=e.charCodeAt(0);if(!r.cache[i+1]){var o=r.helper;if(" "===e){o.textContent="|"+e+"|";var a=o.getComputedTextLength();o.textContent="||";var s=o.getComputedTextLength();r.cache[i+1]=(a-s)/100}else o.textContent=e,r.cache[i+1]=o.getComputedTextLength()/100}return r.cache[i+1]*n},i.prototype.checkLoadedFonts=function(){var e,t,n,r=this.fonts.length,i=r;for(e=0;e<r;e+=1)this.fonts[e].loaded?i-=1:"n"===this.fonts[e].fOrigin||0===this.fonts[e].origin?this.fonts[e].loaded=!0:(t=this.fonts[e].monoCase.node,n=this.fonts[e].monoCase.w,t.offsetWidth!==n?(i-=1,this.fonts[e].loaded=!0):(t=this.fonts[e].sansCase.node,n=this.fonts[e].sansCase.w,t.offsetWidth!==n&&(i-=1,this.fonts[e].loaded=!0)),this.fonts[e].loaded&&(this.fonts[e].sansCase.parent.parentNode.removeChild(this.fonts[e].sansCase.parent),this.fonts[e].monoCase.parent.parentNode.removeChild(this.fonts[e].monoCase.parent)));0!==i&&Date.now()-this.initTime<5e3?setTimeout(this.checkLoadedFonts.bind(this),20):setTimeout(function(){this.isLoaded=!0}.bind(this),0)},i.prototype.loaded=function(){return this.isLoaded},i}(),PropertyFactory=function(){var e=initialDefaultFrame,t=Math.abs;function n(e,t){var n,i=this.offsetTime;"multidimensional"===this.propType&&(n=createTypedArray("float32",this.pv.length));for(var o,a,s,l,c,u,h,d,p=t.lastIndex,f=p,m=this.keyframes.length-1,v=!0;v;){if(o=this.keyframes[f],a=this.keyframes[f+1],f===m-1&&e>=a.t-i){o.h&&(o=a),p=0;break}if(a.t-i>e){p=f;break}f<m-1?f+=1:(p=0,v=!1)}var g,y,_,b,w,x,S,E,k,T,A=a.t-i,C=o.t-i;if(o.to){o.bezierData||(o.bezierData=bez.buildBezierData(o.s,a.s||o.e,o.to,o.ti));var M=o.bezierData;if(e>=A||e<C){var L=e>=A?M.points.length-1:0;for(l=M.points[L].point.length,s=0;s<l;s+=1)n[s]=M.points[L].point[s]}else{o.__fnct?d=o.__fnct:(d=BezierFactory.getBezierEasing(o.o.x,o.o.y,o.i.x,o.i.y,o.n).get,o.__fnct=d),c=d((e-C)/(A-C));var R,P=M.segmentLength*c,I=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastAddedLength:0;for(h=t.lastFrame<e&&t._lastKeyframeIndex===f?t._lastPoint:0,v=!0,u=M.points.length;v;){if(I+=M.points[h].partialLength,0===P||0===c||h===M.points.length-1){for(l=M.points[h].point.length,s=0;s<l;s+=1)n[s]=M.points[h].point[s];break}if(P>=I&&P<I+M.points[h+1].partialLength){for(R=(P-I)/M.points[h+1].partialLength,l=M.points[h].point.length,s=0;s<l;s+=1)n[s]=M.points[h].point[s]+(M.points[h+1].point[s]-M.points[h].point[s])*R;break}h<u-1?h+=1:v=!1}t._lastPoint=h,t._lastAddedLength=I-M.points[h].partialLength,t._lastKeyframeIndex=f}}else{var D,O,F,N,j;if(m=o.s.length,g=a.s||o.e,this.sh&&1!==o.h)if(e>=A)n[0]=g[0],n[1]=g[1],n[2]=g[2];else if(e<=C)n[0]=o.s[0],n[1]=o.s[1],n[2]=o.s[2];else{y=n,_=function(e,t,n){var r,i,o,a,s,l=[],c=e[0],u=e[1],h=e[2],d=e[3],p=t[0],f=t[1],m=t[2],v=t[3];return(i=c*p+u*f+h*m+d*v)<0&&(i=-i,p=-p,f=-f,m=-m,v=-v),1-i>1e-6?(r=Math.acos(i),o=Math.sin(r),a=Math.sin((1-n)*r)/o,s=Math.sin(n*r)/o):(a=1-n,s=n),l[0]=a*c+s*p,l[1]=a*u+s*f,l[2]=a*h+s*m,l[3]=a*d+s*v,l}(r(o.s),r(g),(e-C)/(A-C)),b=_[0],w=_[1],x=_[2],S=_[3],E=Math.atan2(2*w*S-2*b*x,1-2*w*w-2*x*x),k=Math.asin(2*b*w+2*x*S),T=Math.atan2(2*b*S-2*w*x,1-2*b*b-2*x*x),y[0]=E/degToRads,y[1]=k/degToRads,y[2]=T/degToRads}else for(f=0;f<m;f+=1)1!==o.h&&(e>=A?c=1:e<C?c=0:(o.o.x.constructor===Array?(o.__fnct||(o.__fnct=[]),o.__fnct[f]?d=o.__fnct[f]:(D=void 0===o.o.x[f]?o.o.x[0]:o.o.x[f],O=void 0===o.o.y[f]?o.o.y[0]:o.o.y[f],F=void 0===o.i.x[f]?o.i.x[0]:o.i.x[f],N=void 0===o.i.y[f]?o.i.y[0]:o.i.y[f],d=BezierFactory.getBezierEasing(D,O,F,N).get,o.__fnct[f]=d)):o.__fnct?d=o.__fnct:(D=o.o.x,O=o.o.y,F=o.i.x,N=o.i.y,d=BezierFactory.getBezierEasing(D,O,F,N).get,o.__fnct=d),c=d((e-C)/(A-C)))),g=a.s||o.e,j=1===o.h?o.s[f]:o.s[f]+(g[f]-o.s[f])*c,"multidimensional"===this.propType?n[f]=j:n=j}return t.lastIndex=p,n}function r(e){var t=e[0]*degToRads,n=e[1]*degToRads,r=e[2]*degToRads,i=Math.cos(t/2),o=Math.cos(n/2),a=Math.cos(r/2),s=Math.sin(t/2),l=Math.sin(n/2),c=Math.sin(r/2);return[s*l*a+i*o*c,s*o*a+i*l*c,i*l*a-s*o*c,i*o*a-s*l*c]}function i(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(t===this._caching.lastFrame||this._caching.lastFrame!==e&&(this._caching.lastFrame>=r&&t>=r||this._caching.lastFrame<n&&t<n))){this._caching.lastFrame>=t&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(t,this._caching);this.pv=i}return this._caching.lastFrame=t,this.pv}function o(e){var n;if("unidimensional"===this.propType)n=e*this.mult,t(this.v-n)>1e-5&&(this.v=n,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)n=e[r]*this.mult,t(this.v[r]-n)>1e-5&&(this.v[r]=n,this._mdf=!0),r+=1}function a(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=this._isFirstFrame;var e,t=this.effectsSequence.length,n=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)n=this.effectsSequence[e](n);this.setVValue(n),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(e,t,n,r){this.propType="unidimensional",this.mult=n||1,this.data=t,this.v=n?t.k*n:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.addEffect=s}function c(e,t,n,r){this.propType="multidimensional",this.mult=n||1,this.data=t,this._mdf=!1,this.elem=e,this.container=r,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var i,l=t.k.length;for(this.v=createTypedArray("float32",l),this.pv=createTypedArray("float32",l),createTypedArray("float32",l),this.vel=createTypedArray("float32",l),i=0;i<l;i+=1)this.v[i]=t.k[i]*this.mult,this.pv[i]=t.k[i];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=a,this.setVValue=o,this.addEffect=s}function u(t,r,l,c){this.propType="unidimensional",this.keyframes=r.k,this.offsetTime=t.data.st,this.frameId=-1,this._caching={lastFrame:e,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=r,this.mult=l||1,this.elem=t,this.container=c,this.comp=t.comp,this.v=e,this.pv=e,this._isFirstFrame=!0,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.effectsSequence=[i.bind(this)],this.addEffect=s}function h(t,r,l,c){this.propType="multidimensional";var u,h,d,p,f,m=r.k.length;for(u=0;u<m-1;u+=1)r.k[u].to&&r.k[u].s&&r.k[u+1]&&r.k[u+1].s&&(h=r.k[u].s,d=r.k[u+1].s,p=r.k[u].to,f=r.k[u].ti,(2===h.length&&(h[0]!==d[0]||h[1]!==d[1])&&bez.pointOnLine2D(h[0],h[1],d[0],d[1],h[0]+p[0],h[1]+p[1])&&bez.pointOnLine2D(h[0],h[1],d[0],d[1],d[0]+f[0],d[1]+f[1])||3===h.length&&(h[0]!==d[0]||h[1]!==d[1]||h[2]!==d[2])&&bez.pointOnLine3D(h[0],h[1],h[2],d[0],d[1],d[2],h[0]+p[0],h[1]+p[1],h[2]+p[2])&&bez.pointOnLine3D(h[0],h[1],h[2],d[0],d[1],d[2],d[0]+f[0],d[1]+f[1],d[2]+f[2]))&&(r.k[u].to=null,r.k[u].ti=null),h[0]===d[0]&&h[1]===d[1]&&0===p[0]&&0===p[1]&&0===f[0]&&0===f[1]&&(2===h.length||h[2]===d[2]&&0===p[2]&&0===f[2])&&(r.k[u].to=null,r.k[u].ti=null));this.effectsSequence=[i.bind(this)],this.keyframes=r.k,this.offsetTime=t.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=l||1,this.elem=t,this.container=c,this.comp=t.comp,this.getValue=a,this.setVValue=o,this.interpolateValue=n,this.frameId=-1;var v=r.k[0].s.length;for(this.v=createTypedArray("float32",v),this.pv=createTypedArray("float32",v),u=0;u<v;u+=1)this.v[u]=e,this.pv[u]=e;this._caching={lastFrame:e,lastIndex:0,value:createTypedArray("float32",v)},this.addEffect=s}return{getProp:function(e,t,n,r,i){var o;if(t.k.length)if("number"==typeof t.k[0])o=new c(e,t,r,i);else switch(n){case 0:o=new u(e,t,r,i);break;case 1:o=new h(e,t,r,i)}else o=new l(e,t,r,i);return o.effectsSequence.length&&i.addDynamicProperty(o),o}}}(),TransformPropertyFactory=function(){var e=[0,0];function t(e,t,n){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(n||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var r,i=t.or.k.length;for(r=0;r<i;r+=1)t.or.k[r].to=t.or.k[r].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return t.prototype={applyToMatrix:function(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])},getValue:function(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var n,r,i=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(n=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/i,0),r=this.p.getValueAtTime(this.p.keyframes[0].t/i,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(n=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/i,0),r=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/i,0)):(n=this.p.pv,r=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/i,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){n=[],r=[];var o=this.px,a=this.py;o._caching.lastFrame+o.offsetTime<=o.keyframes[0].t?(n[0]=o.getValueAtTime((o.keyframes[0].t+.01)/i,0),n[1]=a.getValueAtTime((a.keyframes[0].t+.01)/i,0),r[0]=o.getValueAtTime(o.keyframes[0].t/i,0),r[1]=a.getValueAtTime(a.keyframes[0].t/i,0)):o._caching.lastFrame+o.offsetTime>=o.keyframes[o.keyframes.length-1].t?(n[0]=o.getValueAtTime(o.keyframes[o.keyframes.length-1].t/i,0),n[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/i,0),r[0]=o.getValueAtTime((o.keyframes[o.keyframes.length-1].t-.01)/i,0),r[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/i,0)):(n=[o.pv,a.pv],r[0]=o.getValueAtTime((o._caching.lastFrame+o.offsetTime-.01)/i,o.offsetTime),r[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/i,a.offsetTime))}else n=r=e;this.v.rotate(-Math.atan2(n[1]-r[1],n[0]-r[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}},precalculateMatrix:function(){if(!this.a.k&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}if(this.r){if(this.r.effectsSequence.length)return;this.pre.rotate(-this.r.v),this.appliedTransformations=4}else this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}},autoOrient:function(){}},extendPrototype([DynamicPropertyContainer],t),t.prototype.addDynamicProperty=function(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0},t.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,n,r){return new t(e,n,r)}}}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var n=0;n<t;)this.v[n]=point_pool.newElement(),this.o[n]=point_pool.newElement(),this.i[n]=point_pool.newElement(),n+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,n,r,i){var o;switch(this._length=Math.max(this._length,r+1),this._length>=this._maxLength&&this.doubleArrayLength(),n){case"v":o=this.v;break;case"i":o=this.i;break;case"o":o=this.o}(!o[r]||o[r]&&!i)&&(o[r]=point_pool.newElement()),o[r][0]=e,o[r][1]=t},ShapePath.prototype.setTripleAt=function(e,t,n,r,i,o,a,s){this.setXYAt(e,t,"v",a,s),this.setXYAt(n,r,"o",a,s),this.setXYAt(i,o,"i",a,s)},ShapePath.prototype.reverse=function(){var e=new ShapePath;e.setPathData(this.c,this._length);var t=this.v,n=this.o,r=this.i,i=0;this.c&&(e.setTripleAt(t[0][0],t[0][1],r[0][0],r[0][1],n[0][0],n[0][1],0,!1),i=1);var o,a=this._length-1,s=this._length;for(o=i;o<s;o+=1)e.setTripleAt(t[a][0],t[a][1],r[a][0],r[a][1],n[a][0],n[a][1],o,!1),a-=1;return e};var ShapePropertyFactory=function(){var e=-999999;function t(e,t,n){var r,i,o,a,s,l,c,u,h,d=n.lastIndex,p=this.keyframes;if(e<p[0].t-this.offsetTime)r=p[0].s[0],o=!0,d=0;else if(e>=p[p.length-1].t-this.offsetTime)r=p[p.length-1].s?p[p.length-1].s[0]:p[p.length-2].e[0],o=!0;else{for(var f,m,v=d,g=p.length-1,y=!0;y&&(f=p[v],!((m=p[v+1]).t-this.offsetTime>e));)v<g-1?v+=1:y=!1;if(d=v,!(o=1===f.h)){if(e>=m.t-this.offsetTime)u=1;else if(e<f.t-this.offsetTime)u=0;else{var _;f.__fnct?_=f.__fnct:(_=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,f.__fnct=_),u=_((e-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))}i=m.s?m.s[0]:f.e[0]}r=f.s[0]}for(l=t._length,c=r.i[0].length,n.lastIndex=d,a=0;a<l;a+=1)for(s=0;s<c;s+=1)h=o?r.i[a][s]:r.i[a][s]+(i.i[a][s]-r.i[a][s])*u,t.i[a][s]=h,h=o?r.o[a][s]:r.o[a][s]+(i.o[a][s]-r.o[a][s])*u,t.o[a][s]=h,h=o?r.v[a][s]:r.v[a][s]+(i.v[a][s]-r.v[a][s])*u,t.v[a][s]=h}function n(){var t=this.comp.renderedFrame-this.offsetTime,n=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime,i=this._caching.lastFrame;return i!==e&&(i<n&&t<n||i>r&&t>r)||(this._caching.lastIndex=i<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function r(){this.paths=this.localShapeCollection}function i(e){(function(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var n,r=e._length;for(n=0;n<r;n+=1)if(e.v[n][0]!==t.v[n][0]||e.v[n][1]!==t.v[n][1]||e.o[n][0]!==t.o[n][0]||e.o[n][1]!==t.o[n][1]||e.i[n][0]!==t.i[n][0]||e.i[n][1]!==t.i[n][1])return!1;return!0})(this.v,e)||(this.v=shape_pool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function o(){if(this.elem.globalData.frameId!==this.frameId)if(this.effectsSequence.length)if(this.lock)this.setVValue(this.pv);else{this.lock=!0,this._mdf=!1;var e,t=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k,n=this.effectsSequence.length;for(e=0;e<n;e+=1)t=this.effectsSequence[e](t);this.setVValue(t),this.lock=!1,this.frameId=this.elem.globalData.frameId}else this._mdf=!1}function a(e,t,n){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var i=3===n?t.pt.k:t.ks.k;this.v=shape_pool.clone(i),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=r,this.effectsSequence=[]}function s(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function l(t,i,o){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===o?i.pt.k:i.ks.k,this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.keyframes[0].s[0].i[0].length,this.v=shape_pool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shape_pool.clone(this.v),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=r,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[n.bind(this)]}a.prototype.interpolateShape=t,a.prototype.getValue=o,a.prototype.setVValue=i,a.prototype.addEffect=s,l.prototype.getValue=o,l.prototype.interpolateShape=t,l.prototype.setVValue=i,l.prototype.addEffect=s;var c=function(){var e=roundCorner;function t(e,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],n=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,o=3!==this.d,a=this.v;a.v[0][0]=t,a.v[0][1]=n-i,a.v[1][0]=o?t+r:t-r,a.v[1][1]=n,a.v[2][0]=t,a.v[2][1]=n+i,a.v[3][0]=o?t-r:t+r,a.v[3][1]=n,a.i[0][0]=o?t-r*e:t+r*e,a.i[0][1]=n-i,a.i[1][0]=o?t+r:t-r,a.i[1][1]=n-i*e,a.i[2][0]=o?t+r*e:t-r*e,a.i[2][1]=n+i,a.i[3][0]=o?t-r:t+r,a.i[3][1]=n+i*e,a.o[0][0]=o?t+r*e:t-r*e,a.o[0][1]=n-i,a.o[1][0]=o?t+r:t-r,a.o[1][1]=n+i*e,a.o[2][0]=o?t-r*e:t+r*e,a.o[2][1]=n+i,a.o[3][0]=o?t-r:t+r,a.o[3][1]=n-i*e}},extendPrototype([DynamicPropertyContainer],t),t}(),u=function(){function e(e,t){this.v=shape_pool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:r,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,n,r,i=2*Math.floor(this.pt.v),o=2*Math.PI/i,a=!0,s=this.or.v,l=this.ir.v,c=this.os.v,u=this.is.v,h=2*Math.PI*s/(2*i),d=2*Math.PI*l/(2*i),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(this.v._length=0,e=0;e<i;e+=1){n=a?c:u,r=a?h:d;var m=(t=a?s:l)*Math.cos(p),v=t*Math.sin(p),g=0===m&&0===v?0:v/Math.sqrt(m*m+v*v),y=0===m&&0===v?0:-m/Math.sqrt(m*m+v*v);m+=+this.p.v[0],v+=+this.p.v[1],this.v.setTripleAt(m,v,m-g*r*n*f,v-y*r*n*f,m+g*r*n*f,v+y*r*n*f,e,!0),a=!a,p+=o*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),n=2*Math.PI/t,r=this.or.v,i=this.os.v,o=2*Math.PI*r/(4*t),a=-Math.PI/2,s=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=r*Math.cos(a),c=r*Math.sin(a),u=0===l&&0===c?0:c/Math.sqrt(l*l+c*c),h=0===l&&0===c?0:-l/Math.sqrt(l*l+c*c);l+=+this.p.v[0],c+=+this.p.v[1],this.v.setTripleAt(l,c,l-u*o*i*s,c-h*o*i*s,l+u*o*i*s,c+h*o*i*s,e,!0),a+=n*s}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),h=function(){function e(e,t){this.v=shape_pool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollection_pool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],n=this.s.v[0]/2,r=this.s.v[1]/2,i=bm_min(n,r,this.r.v),o=i*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+i,e+n,t-r+o,0,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-o,e+n,t+r-i,1,!0),0!==i?(this.v.setTripleAt(e+n-i,t+r,e+n-i,t+r,e+n-o,t+r,2,!0),this.v.setTripleAt(e-n+i,t+r,e-n+o,t+r,e-n+i,t+r,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-i,e-n,t+r-o,4,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+o,e-n,t-r+i,5,!0),this.v.setTripleAt(e-n+i,t-r,e-n+i,t-r,e-n+o,t-r,6,!0),this.v.setTripleAt(e+n-i,t-r,e+n-o,t-r,e+n-i,t-r,7,!0)):(this.v.setTripleAt(e-n,t+r,e-n+o,t+r,e-n,t+r,2),this.v.setTripleAt(e-n,t-r,e-n,t-r+o,e-n,t-r,3))):(this.v.setTripleAt(e+n,t-r+i,e+n,t-r+o,e+n,t-r+i,0,!0),0!==i?(this.v.setTripleAt(e+n-i,t-r,e+n-i,t-r,e+n-o,t-r,1,!0),this.v.setTripleAt(e-n+i,t-r,e-n+o,t-r,e-n+i,t-r,2,!0),this.v.setTripleAt(e-n,t-r+i,e-n,t-r+i,e-n,t-r+o,3,!0),this.v.setTripleAt(e-n,t+r-i,e-n,t+r-o,e-n,t+r-i,4,!0),this.v.setTripleAt(e-n+i,t+r,e-n+i,t+r,e-n+o,t+r,5,!0),this.v.setTripleAt(e+n-i,t+r,e+n-o,t+r,e+n-i,t+r,6,!0),this.v.setTripleAt(e+n,t+r-i,e+n,t+r-i,e+n,t+r-o,7,!0)):(this.v.setTripleAt(e-n,t-r,e-n+o,t-r,e-n,t-r,1,!0),this.v.setTripleAt(e-n,t+r,e-n,t+r-o,e-n,t+r,2,!0),this.v.setTripleAt(e+n,t+r,e+n-o,t+r,e+n,t+r,3,!0)))},getValue:function(e){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:r},extendPrototype([DynamicPropertyContainer],e),e}();return{getShapeProp:function(e,t,n){var r;return 3===n||4===n?r=(3===n?t.pt:t.ks).k.length?new l(e,t,n):new a(e,t,n):5===n?r=new h(e,t):6===n?r=new c(e,t):7===n&&(r=new u(e,t)),r.k&&e.addDynamicProperty(r),r},getConstructorFunction:function(){return a},getKeyframedConstructorFunction:function(){return l}}}(),ShapeModifiers=function(){var e={},t={};return e.registerModifier=function(e,n){t[e]||(t[e]=n)},e.getModifier=function(e,n,r){return new t[e](n,r)},e}();function ShapeModifier(){}function TrimModifier(){}function RoundCornersModifier(){}function RepeaterModifier(){}function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}function DashProperty(e,t,n,r){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=n,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(r);var i,o,a=t.length||0;for(i=0;i<a;i+=1)o=PropertyFactory.getProp(e,t[i].v,0,0,this),this.k=o.k||this.k,this.dataProps[i]={n:t[i].n,p:o};this.k||this.getValue(!0),this._isAnimated=this.k}function GradientProperty(e,t,n){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var r=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",r),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=r,this.initDynamicPropertyContainer(n),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,n,r,i){var o=[];t<=1?o.push({s:e,e:t}):e>=1?o.push({s:e-1,e:t-1}):(o.push({s:e,e:1}),o.push({s:0,e:t-1}));var a,s,l=[],c=o.length;for(a=0;a<c;a+=1){var u,h;(s=o[a]).e*i<r||s.s*i>r+n||(u=s.s*i<=r?0:(s.s*i-r)/n,h=s.e*i>=r+n?1:(s.e*i-r)/n,l.push([u,h]))}return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,n=e.length;for(t=0;t<n;t+=1)segments_length_pool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){var t,n,r;if(this._mdf||e){var i=this.o.v%360/360;if(i<0&&(i+=1),(t=(this.s.v>1?1:this.s.v<0?0:this.s.v)+i)>(n=(this.e.v>1?1:this.e.v<0?0:this.e.v)+i)){var o=t;t=n,n=o}t=1e-4*Math.round(1e4*t),n=1e-4*Math.round(1e4*n),this.sValue=t,this.eValue=n}else t=this.sValue,n=this.eValue;var a,s,l,c,u,h,d=this.shapes.length,p=0;if(n===t)for(a=0;a<d;a+=1)this.shapes[a].localShapeCollection.releaseShapes(),this.shapes[a].shape._mdf=!0,this.shapes[a].shape.paths=this.shapes[a].localShapeCollection;else if(1===n&&0===t||0===n&&1===t){if(this._mdf)for(a=0;a<d;a+=1)this.shapes[a].pathsData.length=0,this.shapes[a].shape._mdf=!0}else{var f,m,v=[];for(a=0;a<d;a+=1)if((f=this.shapes[a]).shape._mdf||this._mdf||e||2===this.m){if(l=(r=f.shape.paths)._length,h=0,!f.shape._mdf&&f.pathsData.length)h=f.totalShapeLength;else{for(c=this.releasePathsData(f.pathsData),s=0;s<l;s+=1)u=bez.getSegmentsLength(r.shapes[s]),c.push(u),h+=u.totalLength;f.totalShapeLength=h,f.pathsData=c}p+=h,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var g,y=t,_=n,b=0;for(a=d-1;a>=0;a-=1)if((f=this.shapes[a]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&d>1?(g=this.calculateShapeEdges(t,n,f.totalShapeLength,b,p),b+=f.totalShapeLength):g=[[y,_]],l=g.length,s=0;s<l;s+=1){y=g[s][0],_=g[s][1],v.length=0,_<=1?v.push({s:f.totalShapeLength*y,e:f.totalShapeLength*_}):y>=1?v.push({s:f.totalShapeLength*(y-1),e:f.totalShapeLength*(_-1)}):(v.push({s:f.totalShapeLength*y,e:f.totalShapeLength}),v.push({s:0,e:f.totalShapeLength*(_-1)}));var w=this.addShapes(f,v[0]);if(v[0].s!==v[0].e){if(v.length>1)if(f.shape.paths.shapes[f.shape.paths._length-1].c){var x=w.pop();this.addPaths(w,m),w=this.addShapes(f,v[1],x)}else this.addPaths(w,m),w=this.addShapes(f,v[1]);this.addPaths(w,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t.addShape(e[n])},TrimModifier.prototype.addSegment=function(e,t,n,r,i,o,a){i.setXYAt(t[0],t[1],"o",o),i.setXYAt(n[0],n[1],"i",o+1),a&&i.setXYAt(e[0],e[1],"v",o),i.setXYAt(r[0],r[1],"v",o+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,n,r){t.setXYAt(e[1],e[5],"o",n),t.setXYAt(e[2],e[6],"i",n+1),r&&t.setXYAt(e[0],e[4],"v",n),t.setXYAt(e[3],e[7],"v",n+1)},TrimModifier.prototype.addShapes=function(e,t,n){var r,i,o,a,s,l,c,u,h=e.pathsData,d=e.shape.paths.shapes,p=e.shape.paths._length,f=0,m=[],v=!0;for(n?(s=n._length,u=n._length):(n=shape_pool.newElement(),s=0,u=0),m.push(n),r=0;r<p;r+=1){for(l=h[r].lengths,n.c=d[r].c,o=d[r].c?l.length:l.length+1,i=1;i<o;i+=1)if(f+(a=l[i-1]).addedLength<t.s)f+=a.addedLength,n.c=!1;else{if(f>t.e){n.c=!1;break}t.s<=f&&t.e>=f+a.addedLength?(this.addSegment(d[r].v[i-1],d[r].o[i-1],d[r].i[i],d[r].v[i],n,s,v),v=!1):(c=bez.getNewSegment(d[r].v[i-1],d[r].v[i],d[r].o[i-1],d[r].i[i],(t.s-f)/a.addedLength,(t.e-f)/a.addedLength,l[i-1]),this.addSegmentFromArray(c,n,s,v),v=!1,n.c=!1),f+=a.addedLength,s+=1}if(d[r].c&&l.length){if(a=l[i-1],f<=t.e){var g=l[i-1].addedLength;t.s<=f&&t.e>=f+g?(this.addSegment(d[r].v[i-1],d[r].o[i-1],d[r].i[0],d[r].v[0],n,s,v),v=!1):(c=bez.getNewSegment(d[r].v[i-1],d[r].v[0],d[r].o[i-1],d[r].i[0],(t.s-f)/g,(t.e-f)/g,l[i-1]),this.addSegmentFromArray(c,n,s,v),v=!1,n.c=!1)}else n.c=!1;f+=a.addedLength,s+=1}if(n._length&&(n.setXYAt(n.v[u][0],n.v[u][1],"i",u),n.setXYAt(n.v[n._length-1][0],n.v[n._length-1][1],"o",n._length-1)),f>t.e)break;r<p-1&&(n=shape_pool.newElement(),v=!0,m.push(n),s=0)}return m},ShapeModifiers.registerModifier("tm",TrimModifier),extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var n=shape_pool.newElement();n.c=e.c;var r,i,o,a,s,l,c,u,h,d,p,f,m,v=e._length,g=0;for(r=0;r<v;r+=1)i=e.v[r],a=e.o[r],o=e.i[r],i[0]===a[0]&&i[1]===a[1]&&i[0]===o[0]&&i[1]===o[1]?0!==r&&r!==v-1||e.c?(s=0===r?e.v[v-1]:e.v[r-1],c=(l=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(l/2,t)/l:0,u=f=i[0]+(s[0]-i[0])*c,h=m=i[1]-(i[1]-s[1])*c,d=u-(u-i[0])*roundCorner,p=h-(h-i[1])*roundCorner,n.setTripleAt(u,h,d,p,f,m,g),g+=1,s=r===v-1?e.v[0]:e.v[r+1],c=(l=Math.sqrt(Math.pow(i[0]-s[0],2)+Math.pow(i[1]-s[1],2)))?Math.min(l/2,t)/l:0,u=d=i[0]+(s[0]-i[0])*c,h=p=i[1]+(s[1]-i[1])*c,f=u-(u-i[0])*roundCorner,m=h-(h-i[1])*roundCorner,n.setTripleAt(u,h,d,p,f,m,g),g+=1):(n.setTripleAt(i[0],i[1],a[0],a[1],o[0],o[1],g),g+=1):(n.setTripleAt(e.v[r][0],e.v[r][1],e.o[r][0],e.o[r][1],e.i[r][0],e.i[r][1],g),g+=1);return n},RoundCornersModifier.prototype.processShapes=function(e){var t,n,r,i,o,a,s=this.shapes.length,l=this.rd.v;if(0!==l)for(n=0;n<s;n+=1){if((o=this.shapes[n]).shape.paths,a=o.localShapeCollection,o.shape._mdf||this._mdf||e)for(a.releaseShapes(),o.shape._mdf=!0,t=o.shape.paths.shapes,i=o.shape.paths._length,r=0;r<i;r+=1)a.addShape(this.processPath(t[r],l));o.shape.paths=o.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},ShapeModifiers.registerModifier("rd",RoundCornersModifier),extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,n,r,i,o){var a=o?-1:1,s=r.s.v[0]+(1-r.s.v[0])*(1-i),l=r.s.v[1]+(1-r.s.v[1])*(1-i);e.translate(r.p.v[0]*a*i,r.p.v[1]*a*i,r.p.v[2]),t.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),t.rotate(-r.r.v*a*i),t.translate(r.a.v[0],r.a.v[1],r.a.v[2]),n.translate(-r.a.v[0],-r.a.v[1],r.a.v[2]),n.scale(o?1/s:s,o?1/l:l),n.translate(r.a.v[0],r.a.v[1],r.a.v[2])},RepeaterModifier.prototype.init=function(e,t,n,r){for(this.elem=e,this.arr=t,this.pos=n,this.elemsData=r,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[n]);n>0;)n-=1,this._elements.unshift(t[n]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){e.length;var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]._render=t,"gr"===e[n].ty&&this.changeGroupRender(e[n].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t,n,r,i,o;if(this._mdf||e){var a,s=Math.ceil(this.c.v);if(this._groups.length<s){for(;this._groups.length<s;){var l={it:this.cloneElements(this._elements),ty:"gr"};l.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,l),this._groups.splice(0,0,l),this._currentCopies+=1}this.elem.reloadShapes()}for(o=0,r=0;r<=this._groups.length-1;r+=1)a=o<s,this._groups[r]._render=a,this.changeGroupRender(this._groups[r].it,a),o+=1;this._currentCopies=s;var c=this.o.v,u=c%1,h=c>0?Math.floor(c):Math.ceil(c),d=(this.tr.v.props,this.pMatrix.props),p=this.rMatrix.props,f=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var m,v,g=0;if(c>0){for(;g<h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),g+=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,u,!1),g+=u)}else if(c<0){for(;g>h;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),g-=1;u&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-u,!0),g-=u)}for(r=1===this.data.m?0:this._currentCopies-1,i=1===this.data.m?1:-1,o=this._currentCopies;o;){if(v=(n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props).length,t[t.length-1].transform.mProps._mdf=!0,t[t.length-1].transform.op._mdf=!0,t[t.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(r/(this._currentCopies-1)),0!==g){for((0!==r&&1===i||r!==this._currentCopies-1&&-1===i)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),this.matrix.transform(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15]),this.matrix.transform(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15]),m=0;m<v;m+=1)n[m]=this.matrix.props[m];this.matrix.reset()}else for(this.matrix.reset(),m=0;m<v;m+=1)n[m]=this.matrix.props[m];g+=1,o-=1,r+=i}}else for(o=this._currentCopies,r=0,i=1;o;)n=(t=this.elemsData[r].it)[t.length-1].transform.mProps.v.props,t[t.length-1].transform.mProps._mdf=!1,t[t.length-1].transform.op._mdf=!1,o-=1,r+=i},RepeaterModifier.prototype.addShape=function(){},ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shape_pool.release(this.shapes[e]);this._length=0},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,n=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<n;t+=1)"o"!=this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),GradientProperty.prototype.comparePoints=function(e,t){for(var n=0,r=this.o.length/2;n<r;){if(Math.abs(e[4*n]-e[4*t+2*n])>.01)return!1;n+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,n,r,i=4*this.data.p;for(t=0;t<i;t+=1)n=t%4==0?100:255,r=Math.round(this.prop.v[t]*n),this.c[t]!==r&&(this.c[t]=r,this._cmdf=!e);if(this.o.length)for(i=this.prop.v.length,t=4*this.data.p;t<i;t+=1)n=t%2==0?100:1,r=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==r&&(this.o[t-4*this.data.p]=r,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(e,t,n,r){if(0===t)return"";var i,o=e.o,a=e.i,s=e.v,l=" M"+r.applyToPointStringified(s[0][0],s[0][1]);for(i=1;i<t;i+=1)l+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[i][0],a[i][1])+" "+r.applyToPointStringified(s[i][0],s[i][1]);return n&&t&&(l+=" C"+r.applyToPointStringified(o[i-1][0],o[i-1][1])+" "+r.applyToPointStringified(a[0][0],a[0][1])+" "+r.applyToPointStringified(s[0][0],s[0][1]),l+="z"),l},ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function n(t){var n=function(e,t,n){var r="";if(e.e)r=e.p;else if(t){var i=e.p;-1!==i.indexOf("images/")&&(i=i.split("/")[1]),r=t+i}else r=n,r+=e.u?e.u:"",r+=e.p;return r}(t,this.assetsPath,this.path),r=createTag("img");r.crossOrigin="anonymous",r.addEventListener("load",this._imageLoaded.bind(this),!1),r.addEventListener("error",function(){i.img=e,this._imageLoaded()}.bind(this),!1),r.src=n;var i={img:r,assetData:t};return i}function r(e,t){this.imagesLoadedCb=t;var n,r=e.length;for(n=0;n<r;n+=1)e[n].layers||(this.totalImages+=1,this.images.push(this._createImageData(e[n])))}function i(e){this.path=e||""}function o(e){this.assetsPath=e||""}function a(e){for(var t=0,n=this.images.length;t<n;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}}function s(){this.imagesLoadedCb=null,this.images.length=0}function l(){return this.totalImages===this.loadedAssets}return function(){this.loadAssets=r,this.setAssetsPath=o,this.setPath=i,this.loaded=l,this.destroy=s,this.getImage=a,this._createImageData=n,this._imageLoaded=t,this.assetsPath="",this.path="",this.totalImages=0,this.loadedAssets=0,this.imagesLoadedCb=null,this.images=[]}}(),featureSupport=function(){var e={maskType:!0};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),e}(),filtersFactory={createFilter:function(e){var t=createNS("filter");return t.setAttribute("id",e),t.setAttribute("filterUnits","objectBoundingBox"),t.setAttribute("x","0%"),t.setAttribute("y","0%"),t.setAttribute("width","100%"),t.setAttribute("height","100%"),t},createAlphaToLuminanceFilter:function(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}},assetLoader=function(){function e(e){return e.response&&"object"==typeof e.response?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):void 0}return{load:function(t,n,r){var i,o=new XMLHttpRequest;o.open("GET",t,!0);try{o.responseType="json"}catch(e){}o.send(),o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status)i=e(o),n(i);else try{i=e(o),n(i)}catch(e){r&&r(e)}}}}}();function TextAnimatorProperty(e,t,n){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=n,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(n)}function TextAnimatorDataProperty(e,t,n){var r={propType:!1},i=PropertyFactory.getProp,o=t.a;this.a={r:o.r?i(e,o.r,0,degToRads,n):r,rx:o.rx?i(e,o.rx,0,degToRads,n):r,ry:o.ry?i(e,o.ry,0,degToRads,n):r,sk:o.sk?i(e,o.sk,0,degToRads,n):r,sa:o.sa?i(e,o.sa,0,degToRads,n):r,s:o.s?i(e,o.s,1,.01,n):r,a:o.a?i(e,o.a,1,0,n):r,o:o.o?i(e,o.o,0,.01,n):r,p:o.p?i(e,o.p,1,0,n):r,sw:o.sw?i(e,o.sw,0,0,n):r,sc:o.sc?i(e,o.sc,1,0,n):r,fc:o.fc?i(e,o.fc,1,0,n):r,fh:o.fh?i(e,o.fh,0,0,n):r,fs:o.fs?i(e,o.fs,0,.01,n):r,fb:o.fb?i(e,o.fb,0,.01,n):r,t:o.t?i(e,o.t,0,0,n):r},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,n),this.s.t=t.s.t}function LetterProps(e,t,n,r,i,o){this.o=e,this.sw=t,this.sc=n,this.fc=r,this.m=i,this.p=o,this._mdf={o:!0,sw:!!t,sc:!!n,fc:!!r,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,n=this._textData.a.length,r=PropertyFactory.getProp;for(e=0;e<n;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={f:r(this._elem,this._textData.p.f,0,0,this),l:r(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=r(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var n,r,i,o,a,s,l,c,u,h,d,p,f,m,v,g,y,_,b,w=this._moreOptions.alignment.v,x=this._animatorsData,S=this._textData,E=this.mHelper,k=this._renderType,T=this.renderedLetters.length,A=(this.data,e.l);if(this._hasMaskedPath){if(b=this._pathData.m,!this._pathData.n||this._pathData._mdf){var C,M=b.v;for(this._pathData.r&&(M=M.reverse()),a={tLength:0,segments:[]},o=M._length-1,g=0,i=0;i<o;i+=1)C=bez.buildBezierData(M.v[i],M.v[i+1],[M.o[i][0]-M.v[i][0],M.o[i][1]-M.v[i][1]],[M.i[i+1][0]-M.v[i+1][0],M.i[i+1][1]-M.v[i+1][1]]),a.tLength+=C.segmentLength,a.segments.push(C),g+=C.segmentLength;i=o,b.v.c&&(C=bez.buildBezierData(M.v[i],M.v[0],[M.o[i][0]-M.v[i][0],M.o[i][1]-M.v[i][1]],[M.i[0][0]-M.v[0][0],M.i[0][1]-M.v[0][1]]),a.tLength+=C.segmentLength,a.segments.push(C),g+=C.segmentLength),this._pathData.pi=a}if(a=this._pathData.pi,s=this._pathData.f.v,d=0,h=1,c=0,u=!0,m=a.segments,s<0&&b.v.c)for(a.tLength<Math.abs(s)&&(s=-Math.abs(s)%a.tLength),h=(f=m[d=m.length-1].points).length-1;s<0;)s+=f[h].partialLength,(h-=1)<0&&(h=(f=m[d-=1].points).length-1);p=(f=m[d].points)[h-1],v=(l=f[h]).partialLength}o=A.length,n=0,r=0;var L,R,P,I,D=1.2*e.finalSize*.714,O=!0;P=x.length;var F,N,j,B,U,z,G,H,q,V,W,Y,X,K=-1,$=s,J=d,Z=h,Q=-1,ee="",te=this.defaultPropsArray;if(2===e.j||1===e.j){var ne=0,re=0,ie=2===e.j?-.5:-1,oe=0,ae=!0;for(i=0;i<o;i+=1)if(A[i].n){for(ne&&(ne+=re);oe<i;)A[oe].animatorJustifyOffset=ne,oe+=1;ne=0,ae=!0}else{for(R=0;R<P;R+=1)(L=x[R].a).t.propType&&(ae&&2===e.j&&(re+=L.t.v*ie),(F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars)).length?ne+=L.t.v*F[0]*ie:ne+=L.t.v*F*ie);ae=!1}for(ne&&(ne+=re);oe<i;)A[oe].animatorJustifyOffset=ne,oe+=1}for(i=0;i<o;i+=1){if(E.reset(),U=1,A[i].n)n=0,r+=e.yOffset,r+=O?1:0,s=$,O=!1,this._hasMaskedPath&&(h=Z,p=(f=m[d=J].points)[h-1],v=(l=f[h]).partialLength,c=0),X=V=Y=ee="",te=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Q!==A[i].line){switch(e.j){case 1:s+=g-e.lineWidths[A[i].line];break;case 2:s+=(g-e.lineWidths[A[i].line])/2}Q=A[i].line}K!==A[i].ind&&(A[K]&&(s+=A[K].extra),s+=A[i].an/2,K=A[i].ind),s+=w[0]*A[i].an/200;var se=0;for(R=0;R<P;R+=1)(L=x[R].a).p.propType&&((F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars)).length?se+=L.p.v[0]*F[0]:se+=L.p.v[0]*F),L.a.propType&&((F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars)).length?se+=L.a.v[0]*F[0]:se+=L.a.v[0]*F);for(u=!0;u;)c+v>=s+se||!f?(y=(s+se-c)/l.partialLength,j=p.point[0]+(l.point[0]-p.point[0])*y,B=p.point[1]+(l.point[1]-p.point[1])*y,E.translate(-w[0]*A[i].an/200,-w[1]*D/100),u=!1):f&&(c+=l.partialLength,(h+=1)>=f.length&&(h=0,m[d+=1]?f=m[d].points:b.v.c?(h=0,f=m[d=0].points):(c-=l.partialLength,f=null)),f&&(p=l,v=(l=f[h]).partialLength));N=A[i].an/2-A[i].add,E.translate(-N,0,0)}else N=A[i].an/2-A[i].add,E.translate(-N,0,0),E.translate(-w[0]*A[i].an/200,-w[1]*D/100,0);for(A[i].l,R=0;R<P;R+=1)(L=x[R].a).t.propType&&(F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars),0===n&&0===e.j||(this._hasMaskedPath?F.length?s+=L.t.v*F[0]:s+=L.t.v*F:F.length?n+=L.t.v*F[0]:n+=L.t.v*F));for(A[i].l,e.strokeWidthAnim&&(G=e.sw||0),e.strokeColorAnim&&(z=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(H=[e.fc[0],e.fc[1],e.fc[2]]),R=0;R<P;R+=1)(L=x[R].a).a.propType&&((F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars)).length?E.translate(-L.a.v[0]*F[0],-L.a.v[1]*F[1],L.a.v[2]*F[2]):E.translate(-L.a.v[0]*F,-L.a.v[1]*F,L.a.v[2]*F));for(R=0;R<P;R+=1)(L=x[R].a).s.propType&&((F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars)).length?E.scale(1+(L.s.v[0]-1)*F[0],1+(L.s.v[1]-1)*F[1],1):E.scale(1+(L.s.v[0]-1)*F,1+(L.s.v[1]-1)*F,1));for(R=0;R<P;R+=1){if(L=x[R].a,F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars),L.sk.propType&&(F.length?E.skewFromAxis(-L.sk.v*F[0],L.sa.v*F[1]):E.skewFromAxis(-L.sk.v*F,L.sa.v*F)),L.r.propType&&(F.length?E.rotateZ(-L.r.v*F[2]):E.rotateZ(-L.r.v*F)),L.ry.propType&&(F.length?E.rotateY(L.ry.v*F[1]):E.rotateY(L.ry.v*F)),L.rx.propType&&(F.length?E.rotateX(L.rx.v*F[0]):E.rotateX(L.rx.v*F)),L.o.propType&&(F.length?U+=(L.o.v*F[0]-U)*F[0]:U+=(L.o.v*F-U)*F),e.strokeWidthAnim&&L.sw.propType&&(F.length?G+=L.sw.v*F[0]:G+=L.sw.v*F),e.strokeColorAnim&&L.sc.propType)for(q=0;q<3;q+=1)F.length?z[q]=z[q]+(L.sc.v[q]-z[q])*F[0]:z[q]=z[q]+(L.sc.v[q]-z[q])*F;if(e.fillColorAnim&&e.fc){if(L.fc.propType)for(q=0;q<3;q+=1)F.length?H[q]=H[q]+(L.fc.v[q]-H[q])*F[0]:H[q]=H[q]+(L.fc.v[q]-H[q])*F;L.fh.propType&&(H=F.length?addHueToRGB(H,L.fh.v*F[0]):addHueToRGB(H,L.fh.v*F)),L.fs.propType&&(H=F.length?addSaturationToRGB(H,L.fs.v*F[0]):addSaturationToRGB(H,L.fs.v*F)),L.fb.propType&&(H=F.length?addBrightnessToRGB(H,L.fb.v*F[0]):addBrightnessToRGB(H,L.fb.v*F))}}for(R=0;R<P;R+=1)(L=x[R].a).p.propType&&(F=x[R].s.getMult(A[i].anIndexes[R],S.a[R].s.totalChars),this._hasMaskedPath?F.length?E.translate(0,L.p.v[1]*F[0],-L.p.v[2]*F[1]):E.translate(0,L.p.v[1]*F,-L.p.v[2]*F):F.length?E.translate(L.p.v[0]*F[0],L.p.v[1]*F[1],-L.p.v[2]*F[2]):E.translate(L.p.v[0]*F,L.p.v[1]*F,-L.p.v[2]*F));if(e.strokeWidthAnim&&(V=G<0?0:G),e.strokeColorAnim&&(W="rgb("+Math.round(255*z[0])+","+Math.round(255*z[1])+","+Math.round(255*z[2])+")"),e.fillColorAnim&&e.fc&&(Y="rgb("+Math.round(255*H[0])+","+Math.round(255*H[1])+","+Math.round(255*H[2])+")"),this._hasMaskedPath){if(E.translate(0,-e.ls),E.translate(0,w[1]*D/100+r,0),S.p.p){_=(l.point[1]-p.point[1])/(l.point[0]-p.point[0]);var le=180*Math.atan(_)/Math.PI;l.point[0]<p.point[0]&&(le+=180),E.rotate(-le*Math.PI/180)}E.translate(j,B,0),s-=w[0]*A[i].an/200,A[i+1]&&K!==A[i+1].ind&&(s+=A[i].an/2,s+=e.tr/1e3*e.finalSize)}else{switch(E.translate(n,r,0),e.ps&&E.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:E.translate(A[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[A[i].line]),0,0);break;case 2:E.translate(A[i].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[A[i].line])/2,0,0)}E.translate(0,-e.ls),E.translate(N,0,0),E.translate(w[0]*A[i].an/200,w[1]*D/100,0),n+=A[i].l+e.tr/1e3*e.finalSize}"html"===k?ee=E.toCSS():"svg"===k?ee=E.to2dCSS():te=[E.props[0],E.props[1],E.props[2],E.props[3],E.props[4],E.props[5],E.props[6],E.props[7],E.props[8],E.props[9],E.props[10],E.props[11],E.props[12],E.props[13],E.props[14],E.props[15]],X=U}T<=i?(I=new LetterProps(X,V,W,Y,ee,te),this.renderedLetters.push(I),T+=1,this.lettersChangedFlag=!0):(I=this.renderedLetters[i],this.lettersChangedFlag=I.update(X,V,W,Y,ee,te)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),LetterProps.prototype.update=function(e,t,n,r,i,o){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,a=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,a=!0),this.sc!==n&&(this.sc=n,this._mdf.sc=!0,a=!0),this.fc!==r&&(this.fc=r,this._mdf.fc=!0,a=!0),this.m!==i&&(this.m=i,this._mdf.m=!0,a=!0),!o.length||this.p[0]===o[0]&&this.p[1]===o[1]&&this.p[4]===o[4]&&this.p[5]===o[5]&&this.p[12]===o[12]&&this.p[13]===o[13]||(this.p=o,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t=this.currentData,n=this.keysIndex;if(this.lock)this.setCurrentData(this.currentData);else{this.lock=!0,this._mdf=!1;var r,i=this.effectsSequence.length,o=e||this.data.d.k[this.keysIndex].s;for(r=0;r<i;r+=1)o=n!==this.keysIndex?this.effectsSequence[r](o,o.t):this.effectsSequence[r](this.currentData,o.t);t!==o&&this.setCurrentData(o),this.pv=this.v=this.currentData,this.lock=!1,this.frameId=this.elem.globalData.frameId}}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,n=0,r=e.length;n<=r-1&&(e[n].s,!(n===r-1||e[n+1].t>t));)n+=1;return this.keysIndex!==n&&(this.keysIndex=n),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,n=FontManager.getCombinedCharacterCodes(),r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i),-1!==n.indexOf(t)?r[r.length-1]+=e.charAt(i):t>=55296&&t<=56319&&(t=e.charCodeAt(i+1))>=56320&&t<=57343?(r.push(e.substr(i,2)),++i):r.push(e.charAt(i)),i+=1;return r},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t,n,r,i,o,a,s,l=this.elem.globalData.fontManager,c=this.data,u=[],h=0,d=c.m.g,p=0,f=0,m=0,v=[],g=0,y=0,_=l.getFontByName(e.f),b=0,w=_.fStyle?_.fStyle.split(" "):[],x="normal",S="normal";for(n=w.length,t=0;t<n;t+=1)switch(w[t].toLowerCase()){case"italic":S="italic";break;case"bold":x="700";break;case"black":x="900";break;case"medium":x="500";break;case"regular":case"normal":x="400";break;case"light":case"thin":x="200"}e.fWeight=_.fWeight||x,e.fStyle=S,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),n=e.finalText.length,e.finalLineHeight=e.lh;var E,k=e.tr/1e3*e.finalSize;if(e.sz)for(var T,A,C=!0,M=e.sz[0],L=e.sz[1];C;){T=0,g=0,n=(A=this.buildFinalText(e.t)).length,k=e.tr/1e3*e.finalSize;var R=-1;for(t=0;t<n;t+=1)E=A[t].charCodeAt(0),r=!1," "===A[t]?R=t:13!==E&&3!==E||(g=0,r=!0,T+=e.finalLineHeight||1.2*e.finalSize),l.chars?(s=l.getCharData(A[t],_.fStyle,_.fFamily),b=r?0:s.w*e.finalSize/100):b=l.measureText(A[t],e.f,e.finalSize),g+b>M&&" "!==A[t]?(-1===R?n+=1:t=R,T+=e.finalLineHeight||1.2*e.finalSize,A.splice(t,R===t?1:0,"\r"),R=-1,g=0):(g+=b,g+=k);T+=_.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&L<T?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=A,n=e.finalText.length,C=!1)}g=-k,b=0;var P,I=0;for(t=0;t<n;t+=1)if(r=!1,E=(P=e.finalText[t]).charCodeAt(0)," "===P?i=" ":13===E||3===E?(I=0,v.push(g),y=g>y?g:y,g=-2*k,i="",r=!0,m+=1):i=e.finalText[t],l.chars?(s=l.getCharData(P,_.fStyle,l.getFontByName(e.f).fFamily),b=r?0:s.w*e.finalSize/100):b=l.measureText(i,e.f,e.finalSize)," "===P?I+=b+k:(g+=b+k+I,I=0),u.push({l:b,an:b,add:p,n:r,anIndexes:[],val:i,line:m,animatorJustifyOffset:0}),2==d){if(p+=b,""===i||" "===i||t===n-1){for(""!==i&&" "!==i||(p-=b);f<=t;)u[f].an=p,u[f].ind=h,u[f].extra=b,f+=1;h+=1,p=0}}else if(3==d){if(p+=b,""===i||t===n-1){for(""===i&&(p-=b);f<=t;)u[f].an=p,u[f].ind=h,u[f].extra=b,f+=1;p=0,h+=1}}else u[h].ind=h,u[h].extra=0,h+=1;if(e.l=u,y=g>y?g:y,v.push(g),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=y,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=v;var D,O,F=c.a;a=F.length;var N,j,B=[];for(o=0;o<a;o+=1){for((D=F[o]).a.sc&&(e.strokeColorAnim=!0),D.a.sw&&(e.strokeWidthAnim=!0),(D.a.fc||D.a.fh||D.a.fs||D.a.fb)&&(e.fillColorAnim=!0),j=0,N=D.s.b,t=0;t<n;t+=1)(O=u[t]).anIndexes[o]=j,(1==N&&""!==O.val||2==N&&""!==O.val&&" "!==O.val||3==N&&(O.n||" "==O.val||t==n-1)||4==N&&(O.n||t==n-1))&&(1===D.s.rn&&B.push(j),j+=1);c.a[o].s.totalChars=j;var U,z=-1;if(1===D.s.rn)for(t=0;t<n;t+=1)z!=(O=u[t]).anIndexes[o]&&(z=O.anIndexes[o],U=B.splice(Math.floor(Math.random()*B.length),1)[0]),O.anIndexes[o]=U}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=_.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var n=this.copyData({},this.data.d.k[t].s);n=this.copyData(n,e),this.data.d.k[t].s=n,this.recalculate(t),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,n=Math.floor;function r(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),this.e="e"in t?PropertyFactory.getProp(e,t.e,0,0,this):{v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return r.prototype={getMult:function(r){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var i=0,o=0,a=1,s=1;this.ne.v>0?i=this.ne.v/100:o=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:s=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(i,o,a,s).get,c=0,u=this.finalS,h=this.finalE,d=this.data.sh;if(2===d)c=l(c=h===u?r>=h?1:0:e(0,t(.5/(h-u)+(r-u)/(h-u),1)));else if(3===d)c=l(c=h===u?r>=h?0:1:1-e(0,t(.5/(h-u)+(r-u)/(h-u),1)));else if(4===d)h===u?c=0:(c=e(0,t(.5/(h-u)+(r-u)/(h-u),1)))<.5?c*=2:c=1-2*(c-.5),c=l(c);else if(5===d){if(h===u)c=0;else{var p=h-u,f=-p/2+(r=t(e(0,r+.5-u),h-u)),m=p/2;c=Math.sqrt(1-f*f/(m*m))}c=l(c)}else 6===d?(h===u?c=0:(r=t(e(0,r+.5-u),h-u),c=(1+Math.cos(Math.PI+2*Math.PI*r/(h-u)))/2),c=l(c)):(r>=n(u)&&(c=e(0,t(r-u<0?t(h,1)-(u-r):h-r,1))),c=l(c));return c*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,n=this.o.v/t,r=this.s.v/t+n,i=this.e.v/t+n;if(r>i){var o=r;r=i,i=o}this.finalS=r,this.finalE=i}},extendPrototype([DynamicPropertyContainer],r),{getTextSelectorProp:function(e,t,n){return new r(e,t,n)}}}(),pool_factory=function(e,t,n,r){var i=0,o=e,a=createSizedArray(o);return{newElement:function(){return i?a[i-=1]:t()},release:function(e){i===o&&(a=pooling.double(a),o*=2),n&&n(e),a[i]=e,i+=1}}},pooling={double:function(e){return e.concat(createSizedArray(e.length))}},point_pool=pool_factory(8,(function(){return createTypedArray("float32",2)})),shape_pool=(factory=pool_factory(4,(function(){return new ShapePath}),(function(e){var t,n=e._length;for(t=0;t<n;t+=1)point_pool.release(e.v[t]),point_pool.release(e.i[t]),point_pool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1})),factory.clone=function(e){var t,n=factory.newElement(),r=void 0===e._length?e.v.length:e._length;for(n.setLength(r),n.c=e.c,t=0;t<r;t+=1)n.setTripleAt(e.v[t][0],e.v[t][1],e.o[t][0],e.o[t][1],e.i[t][0],e.i[t][1],t);return n},factory),factory,shapeCollection_pool=function(){var e={newShapeCollection:function(){return t?r[t-=1]:new ShapeCollection},release:function(e){var i,o=e._length;for(i=0;i<o;i+=1)shape_pool.release(e.shapes[i]);e._length=0,t===n&&(r=pooling.double(r),n*=2),r[t]=e,t+=1}},t=0,n=4,r=createSizedArray(n);return e}(),segments_length_pool=pool_factory(8,(function(){return{lengths:[],totalLength:0}}),(function(e){var t,n=e.lengths.length;for(t=0;t<n;t+=1)bezier_length_pool.release(e.lengths[t]);e.lengths.length=0})),bezier_length_pool=pool_factory(8,(function(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}));function BaseRenderer(){}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var n="";if(t&&t.title){var r=createNS("title"),i=createElementID();r.setAttribute("id",i),r.textContent=t.title,this.svgElement.appendChild(r),n+=i}if(t&&t.description){var o=createNS("desc"),a=createElementID();o.setAttribute("id",a),o.textContent=t.description,this.svgElement.appendChild(o),n+=" "+a}n&&this.svgElement.setAttribute("aria-labelledby",n);var s=createNS("defs");this.svgElement.appendChild(s);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!t||!1!==t.hideOnTransparent,viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable},this.globalData={_mdf:!1,frameNum:-1,defs:s,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",className:t&&t.className||"",id:t&&t.id||""},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas"}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!t||!1!==t.hideOnTransparent},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function MaskElement(e,t,n){this.data=e,this.element=t,this.globalData=n,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var r,i=this.globalData.defs,o=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(o),this.solidPath="";var a,s,l,c,u,h,d,p=this.masksProperties,f=0,m=[],v=createElementID(),g="clipPath",y="clip-path";for(r=0;r<o;r++)if(("a"!==p[r].mode&&"n"!==p[r].mode||p[r].inv||100!==p[r].o.k||p[r].o.x)&&(g="mask",y="mask"),"s"!=p[r].mode&&"i"!=p[r].mode||0!==f?c=null:((c=createNS("rect")).setAttribute("fill","#ffffff"),c.setAttribute("width",this.element.comp.data.w||0),c.setAttribute("height",this.element.comp.data.h||0),m.push(c)),a=createNS("path"),"n"!=p[r].mode){var _;if(f+=1,a.setAttribute("fill","s"===p[r].mode?"#000000":"#ffffff"),a.setAttribute("clip-rule","nonzero"),0!==p[r].x.k?(g="mask",y="mask",d=PropertyFactory.getProp(this.element,p[r].x,0,null,this.element),_=createElementID(),(u=createNS("filter")).setAttribute("id",_),(h=createNS("feMorphology")).setAttribute("operator","erode"),h.setAttribute("in","SourceGraphic"),h.setAttribute("radius","0"),u.appendChild(h),i.appendChild(u),a.setAttribute("stroke","s"===p[r].mode?"#000000":"#ffffff")):(h=null,d=null),this.storedData[r]={elem:a,x:d,expan:h,lastPath:"",lastOperator:"",filterId:_,lastRadius:0},"i"==p[r].mode){l=m.length;var b=createNS("g");for(s=0;s<l;s+=1)b.appendChild(m[s]);var w=createNS("mask");w.setAttribute("mask-type","alpha"),w.setAttribute("id",v+"_"+f),w.appendChild(a),i.appendChild(w),b.setAttribute("mask","url("+locationHref+"#"+v+"_"+f+")"),m.length=0,m.push(b)}else m.push(a);p[r].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[r]={elem:a,lastPath:"",op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),invRect:c},this.viewData[r].prop.k||this.drawPath(p[r],this.viewData[r].prop.v,this.viewData[r])}else this.viewData[r]={op:PropertyFactory.getProp(this.element,p[r].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,p[r],3),elem:a,lastPath:""},i.appendChild(a);for(this.maskElement=createNS(g),o=m.length,r=0;r<o;r+=1)this.maskElement.appendChild(m[r]);f>0&&(this.maskElement.setAttribute("id",v),this.element.maskedElement.setAttribute(y,"url("+locationHref+"#"+v+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}function HierarchyElement(){}function FrameElement(){}function TransformElement(){}function RenderableElement(){}function RenderableDOMElement(){}function ProcessedElement(e,t){this.elem=e,this.pos=t}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function SVGShapeData(e,t,n){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=n,this.lvl=t,this._isAnimated=!!n.k;for(var r=0,i=e.length;r<i;){if(e[r].mProps.dynamicProperties.length){this._isAnimated=!0;break}r+=1}}function SVGTransformData(e,t,n){this.transform={mProps:e,op:t,container:n},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=n}function SVGGradientFillStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,n)}function SVGGradientStrokeStyleData(e,t,n){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,n),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}BaseRenderer.prototype.checkLayers=function(e){var t,n,r=this.layers.length;for(this.completeLayers=!0,t=r-1;t>=0;t--)this.elements[t]||(n=this.layers[t]).ip-n.st<=e-this.layers[t].st&&n.op-n.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 13:return this.createCamera(e)}return this.createNull(e)},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var t,n,r=e.length,i=this.layers.length;for(t=0;t<r;t+=1)for(n=0;n<i;){if(this.layers[n].id==e[t].id){this.layers[n]=e[t];break}n+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,n){for(var r=this.elements,i=this.layers,o=0,a=i.length;o<a;)i[o].ind==t&&(r[o]&&!0!==r[o]?(n.push(r[o]),r[o].setAsParent(),void 0!==i[o].parent?this.buildElementParenting(e,i[o].parent,n):e.setHierarchy(n)):(this.buildItem(o),this.addPendingElement(e))),o+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length;for(t=0;t<n;t+=1)if(e[t].xt){var r=this.createComp(e[t]);r.initExpressions(),this.globalData.projectInterface.registerComposition(r)}},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}},extendPrototype([BaseRenderer],SVGRenderer),SVGRenderer.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRenderer.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRenderer.prototype.createText=function(e){return new SVGTextElement(e,this.globalData,this)},SVGRenderer.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},SVGRenderer.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRenderer.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)"),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var n=createNS("clipPath"),r=createNS("rect");r.setAttribute("width",e.w),r.setAttribute("height",e.h),r.setAttribute("x",0),r.setAttribute("y",0);var i=createElementID();n.setAttribute("id",i),n.appendChild(r),this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+i+")"),t.appendChild(n),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.layerElement=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e++)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRenderer.prototype.updateContainerSize=function(){},SVGRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){t[e]=!0;var n=this.createItem(this.layers[e]);t[e]=n,expressionsPlugin&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(n),n.initExpressions()),this.appendElementInPos(n,e),this.layers[e].tt&&(this.elements[e-1]&&!0!==this.elements[e-1]?n.setMatte(t[e-1].layerId):(this.buildItem(e-1),this.addPendingElement(n)))}},SVGRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,n=this.elements.length;t<n;){if(this.elements[t]===e){e.setMatte(this.elements[t-1].layerId);break}t+=1}}},SVGRenderer.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var t,n=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=n-1;t>=0;t--)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<n;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){for(var r,i=0;i<t;)this.elements[i]&&!0!==this.elements[i]&&this.elements[i].getBaseElement()&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(n,r):this.layerElement.appendChild(n)}},SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"},SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseRenderer],CanvasRenderer),CanvasRenderer.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRenderer.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRenderer.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},CanvasRenderer.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRenderer.prototype.ctxTransform=function(e){if(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])if(this.renderConfig.clearCanvas){this.transformMat.cloneFromProps(e);var t=this.contextData.cTr.props;this.transformMat.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]),this.contextData.cTr.cloneFromProps(this.transformMat.props);var n=this.contextData.cTr.props;this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13])}else this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRenderer.prototype.ctxOpacity=function(e){if(!this.renderConfig.clearCanvas)return this.canvasContext.globalAlpha*=e<0?0:e,void(this.globalData.currentGlobalAlpha=this.contextData.cO);this.contextData.cO*=e<0?0:e,this.globalData.currentGlobalAlpha!==this.contextData.cO&&(this.canvasContext.globalAlpha=this.contextData.cO,this.globalData.currentGlobalAlpha=this.contextData.cO)},CanvasRenderer.prototype.reset=function(){this.renderConfig.clearCanvas?this.contextData.reset():this.canvasContext.restore()},CanvasRenderer.prototype.save=function(e){if(this.renderConfig.clearCanvas){e&&this.canvasContext.save();var t=this.contextData.cTr.props;this.contextData._length<=this.contextData.cArrPos&&this.contextData.duplicate();var n,r=this.contextData.saved[this.contextData.cArrPos];for(n=0;n<16;n+=1)r[n]=t[n];this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO,this.contextData.cArrPos+=1}else this.canvasContext.save()},CanvasRenderer.prototype.restore=function(e){if(this.renderConfig.clearCanvas){e&&(this.canvasContext.restore(),this.globalData.blendMode="source-over"),this.contextData.cArrPos-=1;var t,n=this.contextData.saved[this.contextData.cArrPos],r=this.contextData.cTr.props;for(t=0;t<16;t+=1)r[t]=n[t];this.canvasContext.setTransform(n[0],n[1],n[4],n[5],n[12],n[13]),n=this.contextData.savedOp[this.contextData.cArrPos],this.contextData.cO=n,this.globalData.currentGlobalAlpha!==n&&(this.canvasContext.globalAlpha=n,this.globalData.currentGlobalAlpha=n)}else this.canvasContext.restore()},CanvasRenderer.prototype.configAnimation=function(e){this.animationItem.wrapper?(this.animationItem.container=createTag("canvas"),this.animationItem.container.style.width="100%",this.animationItem.container.style.height="100%",this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px",this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)):this.canvasContext=this.renderConfig.context,this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRenderer.prototype.updateContainerSize=function(){var e,t,n,r;if(this.reset(),this.animationItem.wrapper&&this.animationItem.container?(e=this.animationItem.wrapper.offsetWidth,t=this.animationItem.wrapper.offsetHeight,this.animationItem.container.setAttribute("width",e*this.renderConfig.dpr),this.animationItem.container.setAttribute("height",t*this.renderConfig.dpr)):(e=this.canvasContext.canvas.width*this.renderConfig.dpr,t=this.canvasContext.canvas.height*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var i=this.renderConfig.preserveAspectRatio.split(" "),o=i[1]||"meet",a=i[0]||"xMidYMid",s=a.substr(0,4),l=a.substr(4);n=e/t,(r=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===o||r<n&&"slice"===o?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=e/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr)),this.transformCanvas.tx="xMid"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===s&&(r<n&&"meet"===o||r>n&&"slice"===o)?(e-this.transformCanvas.w*(t/this.transformCanvas.h))*this.renderConfig.dpr:0,this.transformCanvas.ty="YMid"===l&&(r>n&&"meet"===o||r<n&&"slice"===o)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===l&&(r>n&&"meet"===o||r<n&&"slice"===o)?(t-this.transformCanvas.h*(e/this.transformCanvas.w))*this.renderConfig.dpr:0}else"none"==this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=e/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=t/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRenderer.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&(this.animationItem.wrapper.innerHTML=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRenderer.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var n,r=this.layers.length;for(this.completeLayers||this.checkLayers(e),n=0;n<r;n++)(this.completeLayers||this.elements[n])&&this.elements[n].prepareFrame(e-this.layers[n].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&this.elements[n].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRenderer.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!=this.layers[e].ty){var n=this.createItem(this.layers[e],this,this.globalData);t[e]=n,n.initExpressions()}},CanvasRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"},extendPrototype([BaseRenderer],HybridRenderer),HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRenderer.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRenderer.prototype.appendElementInPos=function(e,t){var n=e.getBaseElement();if(n){var r=this.layers[t];if(r.ddd&&this.supports3d)this.addTo3dContainer(n,t);else if(this.threeDElements)this.addTo3dContainer(n,t);else{for(var i,o,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(o=this.elements[a],i=(this.layers[a].ddd?this.getThreeDContainerByPos(a):o.getBaseElement())||i),a+=1;i?r.ddd&&this.supports3d||this.layerElement.insertBefore(n,i):r.ddd&&this.supports3d||this.layerElement.appendChild(n)}}},HybridRenderer.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRenderer.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextElement(e,this.globalData,this)},HybridRenderer.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRenderer.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},HybridRenderer.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull,HybridRenderer.prototype.getThreeDContainerByPos=function(e){for(var t=0,n=this.threeDElements.length;t<n;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}},HybridRenderer.prototype.createThreeDContainer=function(e,t){var n=createTag("div");styleDiv(n);var r=createTag("div");styleDiv(r),"3d"===t&&(n.style.width=this.globalData.compSize.w+"px",n.style.height=this.globalData.compSize.h+"px",n.style.transformOrigin=n.style.mozTransformOrigin=n.style.webkitTransformOrigin="50% 50%",r.style.transform=r.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"),n.appendChild(r);var i={container:r,perspectiveElem:n,startPos:e,endPos:e,type:t};return this.threeDElements.push(i),i},HybridRenderer.prototype.build3dContainers=function(){var e,t,n=this.layers.length,r="";for(e=0;e<n;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?("3d"!==r&&(r="3d",t=this.createThreeDContainer(e,"3d")),t.endPos=Math.max(t.endPos,e)):("2d"!==r&&(r="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e));for(e=(n=this.threeDElements.length)-1;e>=0;e--)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRenderer.prototype.addTo3dContainer=function(e,t){for(var n=0,r=this.threeDElements.length;n<r;){if(t<=this.threeDElements[n].endPos){for(var i,o=this.threeDElements[n].startPos;o<t;)this.elements[o]&&this.elements[o].getBaseElement&&(i=this.elements[o].getBaseElement()),o+=1;i?this.threeDElements[n].container.insertBefore(e,i):this.threeDElements[n].container.appendChild(e);break}n+=1}},HybridRenderer.prototype.configAnimation=function(e){var t=createTag("div"),n=this.animationItem.wrapper;t.style.width=e.w+"px",t.style.height=e.h+"px",this.resizerElem=t,styleDiv(t),t.style.transformStyle=t.style.webkitTransformStyle=t.style.mozTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),n.appendChild(t),t.style.overflow="hidden";var r=createNS("svg");r.setAttribute("width","1"),r.setAttribute("height","1"),styleDiv(r),this.resizerElem.appendChild(r);var i=createNS("defs");r.appendChild(i),this.data=e,this.setupGlobalData(e,r),this.globalData.defs=i,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="",this.animationItem.container=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e++)this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRenderer.prototype.updateContainerSize=function(){var e,t,n,r,i=this.animationItem.wrapper.offsetWidth,o=this.animationItem.wrapper.offsetHeight,a=i/o;this.globalData.compSize.w/this.globalData.compSize.h>a?(e=i/this.globalData.compSize.w,t=i/this.globalData.compSize.w,n=0,r=(o-this.globalData.compSize.h*(i/this.globalData.compSize.w))/2):(e=o/this.globalData.compSize.h,t=o/this.globalData.compSize.h,n=(i-this.globalData.compSize.w*(o/this.globalData.compSize.h))/2,r=0),this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+n+","+r+",0,1)"},HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"},HybridRenderer.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,n=this.globalData.compSize.h,r=this.threeDElements.length;for(e=0;e<r;e+=1)this.threeDElements[e].perspectiveElem.style.perspective=this.threeDElements[e].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(n,2))+"px"}},HybridRenderer.prototype.searchExtraCompositions=function(e){var t,n=e.length,r=createTag("div");for(t=0;t<n;t+=1)if(e[t].xt){var i=this.createComp(e[t],r,this.globalData.comp,null);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,n=this.element.finalTransform.mat,r=this.masksProperties.length;for(t=0;t<r;t++)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",n.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var i=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[t].filterId+")")),i.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var e="M0,0 ";return e+=" h"+this.globalData.compSize.w,e+=" v"+this.globalData.compSize.h,(e+=" h-"+this.globalData.compSize.w)+" v-"+this.globalData.compSize.h+" "},MaskElement.prototype.drawPath=function(e,t,n){var r,i,o=" M"+t.v[0][0]+","+t.v[0][1];for(i=t._length,r=1;r<i;r+=1)o+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[r][0]+","+t.i[r][1]+" "+t.v[r][0]+","+t.v[r][1];if(t.c&&i>1&&(o+=" C"+t.o[r-1][0]+","+t.o[r-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),n.lastPath!==o){var a="";n.elem&&(t.c&&(a=e.inv?this.solidPath+o:o),n.elem.setAttribute("d",a)),n.lastPath=o}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var n,r=this.dynamicProperties.length;for(n=0;n<r;n+=1)(t||this._isParent&&"transform"===this.dynamicProperties[n].propType)&&(this.dynamicProperties[n].getValue(),this.dynamicProperties[n]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_opMdf:!1,mat:new Matrix},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,n=0,r=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;n<r;){if(this.hierarchy[n].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}n+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),n=0;n<r;n+=1)e=this.hierarchy[n].finalTransform.mProp.v.props,t.transform(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}},globalToLocal:function(e){var t=[];t.push(this.finalTransform);for(var n=!0,r=this.comp;n;)r.finalTransform?(r.data.hasMask&&t.splice(0,0,r.finalTransform),r=r.comp):n=!1;var i,o,a=t.length;for(i=0;i<a;i+=1)o=t[i].mat.applyToPointArray(0,0,0),e=[e[0]-o[0],e[1]-o[1],0];return e},mHelper:new Matrix},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}},extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement),SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,n){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=n,this.stops=[],this.setGradientData(n.pElem,t),this.setGradientOpacity(t,n),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var n=createElementID(),r=createNS(1===t.t?"linearGradient":"radialGradient");r.setAttribute("id",n),r.setAttribute("spreadMethod","pad"),r.setAttribute("gradientUnits","userSpaceOnUse");var i,o,a,s=[];for(a=4*t.g.p,o=0;o<a;o+=4)i=createNS("stop"),r.appendChild(i),s.push(i);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+locationHref+"#"+n+")"),this.gf=r,this.cst=s},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var n,r,i,o=createNS("mask"),a=createNS("path");o.appendChild(a);var s=createElementID(),l=createElementID();o.setAttribute("id",l);var c=createNS(1===e.t?"linearGradient":"radialGradient");c.setAttribute("id",s),c.setAttribute("spreadMethod","pad"),c.setAttribute("gradientUnits","userSpaceOnUse"),i=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var u=this.stops;for(r=4*e.g.p;r<i;r+=2)(n=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),c.appendChild(n),u.push(n);a.setAttribute("gf"===e.ty?"fill":"stroke","url("+locationHref+"#"+s+")"),this.of=c,this.ms=o,this.ost=u,this.maskId=l,t.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function n(e,t,n){(n||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(n||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function r(n,r,i){var o,a,s,l,c,u,h,d,p,f,m,v=r.styles.length,g=r.lvl;for(u=0;u<v;u+=1){if(l=r.sh._mdf||i,r.styles[u].lvl<g){for(d=t.reset(),f=g-r.styles[u].lvl,m=r.transformers.length-1;!l&&f>0;)l=r.transformers[m].mProps._mdf||l,f--,m--;if(l)for(f=g-r.styles[u].lvl,m=r.transformers.length-1;f>0;)p=r.transformers[m].mProps.v.props,d.transform(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15]),f--,m--}else d=e;if(a=(h=r.sh.paths)._length,l){for(s="",o=0;o<a;o+=1)(c=h.shapes[o])&&c._length&&(s+=buildShapeString(c,c._length,c.c,d));r.caches[u]=s}else s=r.caches[u];r.styles[u].d+=!0===n.hd?"":s,r.styles[u]._mdf=l||r.styles[u]._mdf}}function i(e,t,n){var r=t.style;(t.c._mdf||n)&&r.pElem.setAttribute("fill","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("fill-opacity",t.o.v)}function o(e,t,n){a(e,t,n),s(0,t,n)}function a(e,t,n){var r,i,o,a,s,l=t.gf,c=t.g._hasOpacity,u=t.s.v,h=t.e.v;if(t.o._mdf||n){var d="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(d,t.o.v)}if(t.s._mdf||n){var p=1===e.t?"x1":"cx",f="x1"===p?"y1":"cy";l.setAttribute(p,u[0]),l.setAttribute(f,u[1]),c&&!t.g._collapsable&&(t.of.setAttribute(p,u[0]),t.of.setAttribute(f,u[1]))}if(t.g._cmdf||n){r=t.cst;var m=t.g.c;for(o=r.length,i=0;i<o;i+=1)(a=r[i]).setAttribute("offset",m[4*i]+"%"),a.setAttribute("stop-color","rgb("+m[4*i+1]+","+m[4*i+2]+","+m[4*i+3]+")")}if(c&&(t.g._omdf||n)){var v=t.g.o;for(o=(r=t.g._collapsable?t.cst:t.ost).length,i=0;i<o;i+=1)a=r[i],t.g._collapsable||a.setAttribute("offset",v[2*i]+"%"),a.setAttribute("stop-opacity",v[2*i+1])}if(1===e.t)(t.e._mdf||n)&&(l.setAttribute("x2",h[0]),l.setAttribute("y2",h[1]),c&&!t.g._collapsable&&(t.of.setAttribute("x2",h[0]),t.of.setAttribute("y2",h[1])));else if((t.s._mdf||t.e._mdf||n)&&(s=Math.sqrt(Math.pow(u[0]-h[0],2)+Math.pow(u[1]-h[1],2)),l.setAttribute("r",s),c&&!t.g._collapsable&&t.of.setAttribute("r",s)),t.e._mdf||t.h._mdf||t.a._mdf||n){s||(s=Math.sqrt(Math.pow(u[0]-h[0],2)+Math.pow(u[1]-h[1],2)));var g=Math.atan2(h[1]-u[1],h[0]-u[0]),y=s*(t.h.v>=1?.99:t.h.v<=-1?-.99:t.h.v),_=Math.cos(g+t.a.v)*y+u[0],b=Math.sin(g+t.a.v)*y+u[1];l.setAttribute("fx",_),l.setAttribute("fy",b),c&&!t.g._collapsable&&(t.of.setAttribute("fx",_),t.of.setAttribute("fy",b))}}function s(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||n)&&i.dashStr&&(r.pElem.setAttribute("stroke-dasharray",i.dashStr),r.pElem.setAttribute("stroke-dashoffset",i.dashoffset[0])),t.c&&(t.c._mdf||n)&&r.pElem.setAttribute("stroke","rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||n)&&r.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||n)&&(r.pElem.setAttribute("stroke-width",t.w.v),r.msElem&&r.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty,e.ty){case"fl":return i;case"gf":return a;case"gs":return o;case"st":return s;case"sh":case"el":case"rc":case"sr":return r;case"tr":return n}}}}();function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}function CVShapeData(e,t,n,r){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var i=4;"rc"==t.ty?i=5:"el"==t.ty?i=6:"sr"==t.ty&&(i=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,i,e);var o,a,s=n.length;for(o=0;o<s;o+=1)n[o].closed||(a={transforms:r.addTransformSequence(n[o].transforms),trNodes:[]},this.styledShapes.push(a),n[o].elements.push(a))}function BaseElement(){}function NullElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initFrame(),this.initTransform(e,t,n),this.initHierarchy()}function SVGBaseElement(){}function IShapeElement(){}function ITextElement(){}function ICompElement(){}function IImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ISolidElement(e,t,n){this.initElement(e,t,n)}function SVGCompElement(e,t,n){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGTextElement(e,t,n){this.textSpans=[],this.renderType="svg",this.initElement(e,t,n)}function SVGShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,n),this.prevViewData=[]}function SVGTintFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");if(n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n),(n=createNS("feColorMatrix")).setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result","f2"),e.appendChild(n),this.matrixFilter=n,100!==t.effectElements[2].p.v||t.effectElements[2].p.k){var r,i=createNS("feMerge");e.appendChild(i),(r=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),i.appendChild(r),(r=createNS("feMergeNode")).setAttribute("in","f2"),i.appendChild(r)}}function SVGFillFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),e.appendChild(n),this.matrixFilter=n}function SVGGaussianBlurEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var n=createNS("feGaussianBlur");e.appendChild(n),this.feGaussianBlur=n}function SVGStrokeEffect(e,t){this.initialized=!1,this.filterManager=t,this.elem=e,this.paths=[]}function SVGTritoneFilter(e,t){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),n.setAttribute("result","f1"),e.appendChild(n);var r=createNS("feComponentTransfer");r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.matrixFilter=r;var i=createNS("feFuncR");i.setAttribute("type","table"),r.appendChild(i),this.feFuncR=i;var o=createNS("feFuncG");o.setAttribute("type","table"),r.appendChild(o),this.feFuncG=o;var a=createNS("feFuncB");a.setAttribute("type","table"),r.appendChild(a),this.feFuncB=a}function SVGProLevelsFilter(e,t){this.filterManager=t;var n=this.filterManager.effectElements,r=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",r)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",r)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",r)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",r)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),r=createNS("feComponentTransfer")),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&(r.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(r),this.feFuncRComposed=this.createFeFunc("feFuncR",r),this.feFuncGComposed=this.createFeFunc("feFuncG",r),this.feFuncBComposed=this.createFeFunc("feFuncB",r))}function SVGDropShadowEffect(e,t){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","400%"),e.setAttribute("height","400%"),this.filterManager=t;var n=createNS("feGaussianBlur");n.setAttribute("in","SourceAlpha"),n.setAttribute("result","drop_shadow_1"),n.setAttribute("stdDeviation","0"),this.feGaussianBlur=n,e.appendChild(n);var r=createNS("feOffset");r.setAttribute("dx","25"),r.setAttribute("dy","0"),r.setAttribute("in","drop_shadow_1"),r.setAttribute("result","drop_shadow_2"),this.feOffset=r,e.appendChild(r);var i=createNS("feFlood");i.setAttribute("flood-color","#00ff00"),i.setAttribute("flood-opacity","1"),i.setAttribute("result","drop_shadow_3"),this.feFlood=i,e.appendChild(i);var o=createNS("feComposite");o.setAttribute("in","drop_shadow_3"),o.setAttribute("in2","drop_shadow_2"),o.setAttribute("operator","in"),o.setAttribute("result","drop_shadow_4"),e.appendChild(o);var a,s=createNS("feMerge");e.appendChild(s),a=createNS("feMergeNode"),s.appendChild(a),(a=createNS("feMergeNode")).setAttribute("in","SourceGraphic"),this.feMergeNode=a,this.feMerge=s,this.originalNodeAdded=!1,s.appendChild(a)}ShapeTransformManager.prototype={addTransformSequence:function(e){var t,n=e.length,r="_";for(t=0;t<n;t+=1)r+=e[t].transform.key+"_";var i=this.sequences[r];return i||(i={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[r]=i,this.sequenceList.push(i)),i},processSequence:function(e,t){for(var n,r=0,i=e.transforms.length,o=t;r<i&&!t;){if(e.transforms[r].transform.mProps._mdf){o=!0;break}r+=1}if(o)for(e.finalTransform.reset(),r=i-1;r>=0;r-=1)n=e.transforms[r].transform.mProps.v.props,e.finalTransform.transform(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);e._mdf=o},processSequences:function(e){var t,n=this.sequenceList.length;for(t=0;t<n;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return"_"+this.transform_key_count++}},CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var e=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(e),0===this.data.ty||this.data.xt?this.compInterface=CompExpressionInterface(this):4===this.data.ty?(this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=TextExpressionInterface(this),this.layerInterface.text=this.layerInterface.textInterface)},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,n){this.globalData=t,this.comp=n,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e,t,n,r=null;if(this.data.td){if(3==this.data.td||1==this.data.td){var i=createNS("mask");i.setAttribute("id",this.layerId),i.setAttribute("mask-type",3==this.data.td?"luminance":"alpha"),i.appendChild(this.layerElement),r=i,this.globalData.defs.appendChild(i),featureSupport.maskType||1!=this.data.td||(i.setAttribute("mask-type","luminance"),e=createElementID(),t=filtersFactory.createFilter(e),this.globalData.defs.appendChild(t),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(this.layerElement),r=n,i.appendChild(n),n.setAttribute("filter","url("+locationHref+"#"+e+")"))}else if(2==this.data.td){var o=createNS("mask");o.setAttribute("id",this.layerId),o.setAttribute("mask-type","alpha");var a=createNS("g");o.appendChild(a),e=createElementID(),t=filtersFactory.createFilter(e);var s=createNS("feComponentTransfer");s.setAttribute("in","SourceGraphic"),t.appendChild(s);var l=createNS("feFuncA");l.setAttribute("type","table"),l.setAttribute("tableValues","1.0 0.0"),s.appendChild(l),this.globalData.defs.appendChild(t);var c=createNS("rect");c.setAttribute("width",this.comp.data.w),c.setAttribute("height",this.comp.data.h),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("fill","#ffffff"),c.setAttribute("opacity","0"),a.setAttribute("filter","url("+locationHref+"#"+e+")"),a.appendChild(c),a.appendChild(this.layerElement),r=a,featureSupport.maskType||(o.setAttribute("mask-type","luminance"),t.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),a.appendChild(c),n.appendChild(this.layerElement),r=n,a.appendChild(n)),this.globalData.defs.appendChild(o)}}else this.data.tt?(this.matteElement.appendChild(this.layerElement),r=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var u=createNS("clipPath"),h=createNS("path");h.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var d=createElementID();if(u.setAttribute("id",d),u.appendChild(h),this.globalData.defs.appendChild(u),this.checkMasks()){var p=createNS("g");p.setAttribute("clip-path","url("+locationHref+"#"+d+")"),p.appendChild(this.layerElement),this.transformedElement=p,r?r.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+d+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+locationHref+"#"+e+")")}},IShapeElement.prototype={addShapeToModifiers:function(e){var t,n=this.shapeModifiers.length;for(t=0;t<n;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=this.shapeModifiers.length;0<t;)if(this.shapeModifiers[0].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0;e-=1)this.shapeModifiers[e].processShapes(this._isFirstFrame)}},lcEnum:{1:"butt",2:"round",3:"square"},ljEnum:{1:"miter",2:"round",3:"bevel"},searchProcessedElement:function(e){for(var t=this.processedElements,n=0,r=t.length;n<r;){if(t[n].elem===e)return t[n].pos;n+=1}return 0},addProcessedElement:function(e,t){for(var n=this.processedElements,r=n.length;r;)if(n[r-=1].elem===e)return void(n[r].pos=t);n.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}},ITextElement.prototype.initElement=function(e,t,n){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,n),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,n),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)},ITextElement.prototype.createPathShape=function(e,t){var n,r,i=t.length,o="";for(n=0;n<i;n+=1)r=t[n].ks.k,o+=buildShapeString(r,r.i.length,!0,e);return o},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,n,r,i){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[n])/2,0,0)}t.translate(r,i,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initTransform(e,t,n),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),!this.data.xt&&t.progressiveLoad||this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t=this.tm.v;t===this.data.op&&(t=this.data.op-1),this.renderedFrame=t}var n,r=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),n=r-1;n>=0;n-=1)(this.completeLayers||this.elements[n])&&(this.elements[n].prepareFrame(this.renderedFrame-this.layers[n].st),this.elements[n]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement),SVGTextElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextElement.prototype.buildTextContents=function(e){for(var t=0,n=e.length,r=[],i="";t<n;)e[t]===String.fromCharCode(13)||e[t]===String.fromCharCode(3)?(r.push(i),i=""):i+=e[t],t+=1;return r.push(i),r},SVGTextElement.prototype.buildNewText=function(){var e,t,n=this.textProperty.currentData;this.renderedLetters=createSizedArray(n?n.l.length:0),n.fc?this.layerElement.setAttribute("fill",this.buildColor(n.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),n.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(n.sc)),this.layerElement.setAttribute("stroke-width",n.sw)),this.layerElement.setAttribute("font-size",n.finalSize);var r=this.globalData.fontManager.getFontByName(n.f);if(r.fClass)this.layerElement.setAttribute("class",r.fClass);else{this.layerElement.setAttribute("font-family",r.fFamily);var i=n.fWeight,o=n.fStyle;this.layerElement.setAttribute("font-style",o),this.layerElement.setAttribute("font-weight",i)}this.layerElement.setAttribute("aria-label",n.t);var a,s=n.l||[],l=!!this.globalData.fontManager.chars;t=s.length;var c,u=this.mHelper,h="",d=this.data.singleShape,p=0,f=0,m=!0,v=n.tr/1e3*n.finalSize;if(!d||l||n.sz){var g,y,_=this.textSpans.length;for(e=0;e<t;e+=1)l&&d&&0!==e||(a=_>e?this.textSpans[e]:createNS(l?"path":"text"),_<=e&&(a.setAttribute("stroke-linecap","butt"),a.setAttribute("stroke-linejoin","round"),a.setAttribute("stroke-miterlimit","4"),this.textSpans[e]=a,this.layerElement.appendChild(a)),a.style.display="inherit"),u.reset(),u.scale(n.finalSize/100,n.finalSize/100),d&&(s[e].n&&(p=-v,f+=n.yOffset,f+=m?1:0,m=!1),this.applyTextPropertiesToMatrix(n,u,s[e].line,p,f),p+=s[e].l||0,p+=v),l?(c=(g=(y=this.globalData.fontManager.getCharData(n.finalText[e],r.fStyle,this.globalData.fontManager.getFontByName(n.f).fFamily))&&y.data||{}).shapes?g.shapes[0].it:[],d?h+=this.createPathShape(u,c):a.setAttribute("d",this.createPathShape(u,c))):(d&&a.setAttribute("transform","translate("+u.props[12]+","+u.props[13]+")"),a.textContent=s[e].val,a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"));d&&a&&a.setAttribute("d",h)}else{var b=this.textContainer,w="start";switch(n.j){case 1:w="end";break;case 2:w="middle"}b.setAttribute("text-anchor",w),b.setAttribute("letter-spacing",v);var x=this.buildTextContents(n.finalText);for(t=x.length,f=n.ps?n.ps[1]+n.ascent:0,e=0;e<t;e+=1)(a=this.textSpans[e]||createNS("tspan")).textContent=x[e],a.setAttribute("x",0),a.setAttribute("y",f),a.style.display="inherit",b.appendChild(a),this.textSpans[e]=a,f+=n.finalLineHeight;this.layerElement.appendChild(b)}for(;e<this.textSpans.length;)this.textSpans[e].style.display="none",e+=1;this._sizeChanged=!0},SVGTextElement.prototype.sourceRectAtTime=function(e){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var t=this.layerElement.getBBox();this.bbox={top:t.y,left:t.x,width:t.width,height:t.height}}return this.bbox},SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){var e,t;this._sizeChanged=!0;var n,r,i=this.textAnimator.renderedLetters,o=this.textProperty.currentData.l;for(t=o.length,e=0;e<t;e+=1)o[e].n||(n=i[e],r=this.textSpans[e],n._mdf.m&&r.setAttribute("transform",n.m),n._mdf.o&&r.setAttribute("opacity",n.o),n._mdf.sw&&r.setAttribute("stroke-width",n.sw),n._mdf.sc&&r.setAttribute("stroke",n.sc),n._mdf.fc&&r.setAttribute("fill",n.fc))}},extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,n,r,i=this.shapes.length,o=this.stylesList.length,a=[],s=!1;for(n=0;n<o;n+=1){for(r=this.stylesList[n],s=!1,a.length=0,e=0;e<i;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(r)&&(a.push(t),s=t._isAnimated||s);a.length>1&&s&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var n,r=new SVGStyleData(e,t),i=r.pElem;return"st"===e.ty?n=new SVGStrokeStyleData(this,e,r):"fl"===e.ty?n=new SVGFillStyleData(this,e,r):"gf"!==e.ty&&"gs"!==e.ty||(n=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,r),this.globalData.defs.appendChild(n.gf),n.maskId&&(this.globalData.defs.appendChild(n.ms),this.globalData.defs.appendChild(n.of),i.setAttribute("mask","url("+locationHref+"#"+n.maskId+")"))),"st"!==e.ty&&"gs"!==e.ty||(i.setAttribute("stroke-linecap",this.lcEnum[e.lc]||"round"),i.setAttribute("stroke-linejoin",this.ljEnum[e.lj]||"round"),i.setAttribute("fill-opacity","0"),1===e.lj&&i.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&i.setAttribute("fill-rule","evenodd"),e.ln&&i.setAttribute("id",e.ln),e.cl&&i.setAttribute("class",e.cl),e.bm&&(i.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(r),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var n=TransformPropertyFactory.getTransformProperty(this,e,this),r=new SVGTransformData(n,n.o,t);return this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createShapeElement=function(e,t,n){var r=4;"rc"===e.ty?r=5:"el"===e.ty?r=6:"sr"===e.ty&&(r=7);var i=new SVGShapeData(t,n,ShapePropertyFactory.getShapeProp(this,e,r,this));return this.shapes.push(i),this.addShapeToModifiers(i),this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var n=0,r=this.animatedContents.length;n<r;){if(this.animatedContents[n].element===t)return;n+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,n=e.styles,r=this.stylesList.length;for(t=0;t<r;t+=1)this.stylesList[t].closed||n.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,n,r,i,o,a){var s,l,c,u,h,d,p=[].concat(o),f=e.length-1,m=[],v=[];for(s=f;s>=0;s-=1){if((d=this.searchProcessedElement(e[s]))?t[s]=n[d-1]:e[s]._render=a,"fl"==e[s].ty||"st"==e[s].ty||"gf"==e[s].ty||"gs"==e[s].ty)d?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],i),e[s]._render&&r.appendChild(t[s].style.pElem),m.push(t[s].style);else if("gr"==e[s].ty){if(d)for(c=t[s].it.length,l=0;l<c;l+=1)t[s].prevViewData[l]=t[s].it[l];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,t[s].gr,i+1,p,a),e[s]._render&&r.appendChild(t[s].gr)}else"tr"==e[s].ty?(d||(t[s]=this.createTransformElement(e[s],r)),u=t[s].transform,p.push(u)):"sh"==e[s].ty||"rc"==e[s].ty||"el"==e[s].ty||"sr"==e[s].ty?(d||(t[s]=this.createShapeElement(e[s],p,i)),this.setElementStyles(t[s])):"tm"==e[s].ty||"rd"==e[s].ty||"ms"==e[s].ty?(d?(h=t[s]).closed=!1:((h=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=h,this.shapeModifiers.push(h)),v.push(h)):"rp"==e[s].ty&&(d?(h=t[s]).closed=!0:(h=ShapeModifiers.getModifier(e[s].ty),t[s]=h,h.init(this,e,s,t),this.shapeModifiers.push(h),a=!1),v.push(h));this.addProcessedElement(e[s],s+1)}for(f=m.length,s=0;s<f;s+=1)m[s].closed=!0;for(f=v.length,s=0;s<f;s+=1)v[s].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,n=this.animatedContents.length;for(e=0;e<n;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",n[0]-t[0]+" 0 0 0 "+t[0]+" "+(n[1]-t[1])+" 0 0 0 "+t[1]+" "+(n[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 "+r+" 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,n=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+n+" 0")}},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3*this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=3==n?0:t,i=2==n?0:t;this.feGaussianBlur.setAttribute("stdDeviation",r+" "+i);var o=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",o)}},SVGStrokeEffect.prototype.initialize=function(){var e,t,n,r,i=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(r=this.elem.maskManager.masksProperties.length,n=0):r=1+(n=this.filterManager.effectElements[0].p.v-1),(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);n<r;n+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:n});if(3===this.filterManager.effectElements[10].p.v){var o=createNS("mask"),a=createElementID();o.setAttribute("id",a),o.setAttribute("mask-type","alpha"),o.appendChild(t),this.elem.globalData.defs.appendChild(o);var s=createNS("g");for(s.setAttribute("mask","url("+locationHref+"#"+a+")");i[0];)s.appendChild(i[0]);this.elem.layerElement.appendChild(s),this.masker=o,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(i=this.elem.layerElement.children||this.elem.layerElement.childNodes;i.length;)this.elem.layerElement.removeChild(i[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var t,n,r,i=this.paths.length;for(t=0;t<i;t+=1)if(-1!==this.paths[t].m&&(n=this.elem.maskManager.viewData[this.paths[t].m],r=this.paths[t].p,(e||this.filterManager._mdf||n.prop._mdf)&&r.setAttribute("d",n.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||n.prop._mdf)){var o;if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var a=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,s=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100,l=r.getTotalLength();o="0 0 0 "+l*a+" ";var c,u=l*(s-a),h=1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100,d=Math.floor(u/h);for(c=0;c<d;c+=1)o+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100+" ";o+="0 "+10*l+" 0 0"}else o="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v/100;r.setAttribute("stroke-dasharray",o)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var p=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(255*p[0])+","+bm_floor(255*p[1])+","+bm_floor(255*p[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,n=this.filterManager.effectElements[1].p.v,r=this.filterManager.effectElements[2].p.v,i=r[0]+" "+n[0]+" "+t[0],o=r[1]+" "+n[1]+" "+t[1],a=r[2]+" "+n[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",i),this.feFuncG.setAttribute("tableValues",o),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var n=createNS(e);return n.setAttribute("type","table"),t.appendChild(n),n},SVGProLevelsFilter.prototype.getTableValue=function(e,t,n,r,i){for(var o,a,s=0,l=Math.min(e,t),c=Math.max(e,t),u=Array.call(null,{length:256}),h=0,d=i-r,p=t-e;s<=256;)a=(o=s/256)<=l?p<0?i:r:o>=c?p<0?r:i:r+d*Math.pow((o-e)/p,1/n),u[h++]=a,s+=256/255;return u.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,n=this.filterManager.effectElements;this.feFuncRComposed&&(e||n[3].p._mdf||n[4].p._mdf||n[5].p._mdf||n[6].p._mdf||n[7].p._mdf)&&(t=this.getTableValue(n[3].p.v,n[4].p.v,n[5].p.v,n[6].p.v,n[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||n[10].p._mdf||n[11].p._mdf||n[12].p._mdf||n[13].p._mdf||n[14].p._mdf)&&(t=this.getTableValue(n[10].p.v,n[11].p.v,n[12].p.v,n[13].p.v,n[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||n[17].p._mdf||n[18].p._mdf||n[19].p._mdf||n[20].p._mdf||n[21].p._mdf)&&(t=this.getTableValue(n[17].p.v,n[18].p.v,n[19].p.v,n[20].p.v,n[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||n[24].p._mdf||n[25].p._mdf||n[26].p._mdf||n[27].p._mdf||n[28].p._mdf)&&(t=this.getTableValue(n[24].p.v,n[25].p.v,n[26].p.v,n[27].p.v,n[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||n[31].p._mdf||n[32].p._mdf||n[33].p._mdf||n[34].p._mdf||n[35].p._mdf)&&(t=this.getTableValue(n[31].p.v,n[32].p.v,n[33].p.v,n[34].p.v,n[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var n=this.filterManager.effectElements[3].p.v,r=(this.filterManager.effectElements[2].p.v-90)*degToRads,i=n*Math.cos(r),o=n*Math.sin(r);this.feOffset.setAttribute("dx",i),this.feOffset.setAttribute("dy",o)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,n){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=n,n.matteElement=createNS("g"),n.matteElement.appendChild(n.layerElement),n.matteElement.appendChild(n.transformedElement),n.baseElement=n.matteElement}function SVGEffects(e){var t,n,r=e.data.ef?e.data.ef.length:0,i=createElementID(),o=filtersFactory.createFilter(i),a=0;for(this.filters=[],t=0;t<r;t+=1)n=null,20===e.data.ef[t].ty?(a+=1,n=new SVGTintFilter(o,e.effectsManager.effectElements[t])):21===e.data.ef[t].ty?(a+=1,n=new SVGFillFilter(o,e.effectsManager.effectElements[t])):22===e.data.ef[t].ty?n=new SVGStrokeEffect(e,e.effectsManager.effectElements[t]):23===e.data.ef[t].ty?(a+=1,n=new SVGTritoneFilter(o,e.effectsManager.effectElements[t])):24===e.data.ef[t].ty?(a+=1,n=new SVGProLevelsFilter(o,e.effectsManager.effectElements[t])):25===e.data.ef[t].ty?(a+=1,n=new SVGDropShadowEffect(o,e.effectsManager.effectElements[t])):28===e.data.ef[t].ty?n=new SVGMatte3Effect(o,e.effectsManager.effectElements[t],e):29===e.data.ef[t].ty&&(a+=1,n=new SVGGaussianBlurEffect(o,e.effectsManager.effectElements[t])),n&&this.filters.push(n);a&&(e.globalData.defs.appendChild(o),e.layerElement.setAttribute("filter","url("+locationHref+"#"+i+")")),this.filters.length&&e.addRenderableComponent(this)}function CVContextData(){var e;for(this.saved=[],this.cArrPos=0,this.cTr=new Matrix,this.cO=1,this.savedOp=createTypedArray("float32",15),e=0;e<15;e+=1)this.saved[e]=createTypedArray("float32",16);this._length=15}function CVBaseElement(){}function CVImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getImage(this.assetData),this.initElement(e,t,n)}function CVCompElement(e,t,n){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CVMaskElement(e,t){this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var n,r=this.masksProperties.length,i=!1;for(n=0;n<r;n++)"n"!==this.masksProperties[n].mode&&(i=!0),this.viewData[n]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[n],3);this.hasMasks=i,i&&this.element.addRenderableComponent(this)}function CVShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,n)}function CVSolidElement(e,t,n){this.initElement(e,t,n)}function CVTextElement(e,t,n){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,n)}function CVEffects(){}function HBaseElement(e,t,n){}function HSolidElement(e,t,n){this.initElement(e,t,n)}function HCompElement(e,t,n){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,n),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HShapeElement(e,t,n){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,n),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,n){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,n)}function HImageElement(e,t,n){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,n)}function HCameraElement(e,t,n){this.initFrame(),this.initBaseData(e,t,n),this.initHierarchy();var r=PropertyFactory.getProp;if(this.pe=r(this,e.pe,0,0,this),e.ks.p.s?(this.px=r(this,e.ks.p.x,1,0,this),this.py=r(this,e.ks.p.y,1,0,this),this.pz=r(this,e.ks.p.z,1,0,this)):this.p=r(this,e.ks.p,1,0,this),e.ks.a&&(this.a=r(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var i,o=e.ks.or.k.length;for(i=0;i<o;i+=1)e.ks.or.k[i].to=null,e.ks.or.k[i].ti=null}this.or=r(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=r(this,e.ks.rx,0,degToRads,this),this.ry=r(this,e.ks.ry,0,degToRads,this),this.rz=r(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HEffects(){}SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,n=_svgMatteSymbols.length;t<n;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var n=e.layerElement.parentNode;if(n){for(var r,i=n.children,o=0,a=i.length;o<a&&i[o]!==e.layerElement;)o+=1;o<=a-2&&(r=i[o+1]);var s=createNS("use");s.setAttribute("href","#"+t),r?n.insertBefore(s,r):n.appendChild(s)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var n=createElementID(),r=createNS("mask");r.setAttribute("id",t.layerId),r.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var i=e.globalData.defs;i.appendChild(r);var o=createNS("symbol");o.setAttribute("id",n),this.replaceInParent(t,n),o.appendChild(t.layerElement),i.appendChild(o);var a=createNS("use");a.setAttribute("href","#"+n),r.appendChild(a),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,n=0,r=t.length;n<r;)t[n]&&t[n].data.ind===e&&this.setElementAsMask(this.elem,t[n]),n+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGEffects.prototype.renderFrame=function(e){var t,n=this.filters.length;for(t=0;t<n;t+=1)this.filters[t].renderFrame(e)},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=this.savedOp;this.savedOp=createTypedArray("float32",e),this.savedOp.set(t);var n=0;for(n=this._length;n<e;n+=1)this.saved[n]=createTypedArray("float32",16);this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.cO=1},CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext,this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},renderFrame:function(){if(!this.hidden&&!this.data.hd){this.renderTransform(),this.renderRenderable(),this.setBlendMode();var e=0===this.data.ty;this.globalData.renderer.save(e),this.globalData.renderer.ctxTransform(this.finalTransform.mat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v),this.renderInnerContent(),this.globalData.renderer.restore(e),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e=createTag("canvas");e.width=this.assetData.w,e.height=this.assetData.h;var t,n,r=e.getContext("2d"),i=this.img.width,o=this.img.height,a=i/o,s=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>s&&"xMidYMid slice"===l||a<s&&"xMidYMid slice"!==l?t=(n=o)*s:n=(t=i)/s,r.drawImage(this.img,(i-t)/2,(o-n)/2,t,n,0,0,this.assetData.w,this.assetData.h),this.img=e}},CVImageElement.prototype.renderInnerContent=function(e){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e,t,n,r,i=this.element.finalTransform.mat,o=this.element.canvasContext,a=this.masksProperties.length;for(o.beginPath(),e=0;e<a;e++)if("n"!==this.masksProperties[e].mode){this.masksProperties[e].inv&&(o.moveTo(0,0),o.lineTo(this.element.globalData.compSize.w,0),o.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),o.lineTo(0,this.element.globalData.compSize.h),o.lineTo(0,0)),r=this.viewData[e].v,t=i.applyToPointArray(r.v[0][0],r.v[0][1],0),o.moveTo(t[0],t[1]);var s,l=r._length;for(s=1;s<l;s++)n=i.applyToTriplePoints(r.o[s-1],r.i[s],r.v[s]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);n=i.applyToTriplePoints(r.o[s-1],r.i[0],r.v[0]),o.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}this.element.globalData.renderer.save(!0),o.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var n={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},r={};if("fl"==e.ty||"st"==e.ty?(r.c=PropertyFactory.getProp(this,e.c,1,255,this),r.c.k||(n.co="rgb("+bm_floor(r.c.v[0])+","+bm_floor(r.c.v[1])+","+bm_floor(r.c.v[2])+")")):"gf"!==e.ty&&"gs"!==e.ty||(r.s=PropertyFactory.getProp(this,e.s,1,null,this),r.e=PropertyFactory.getProp(this,e.e,1,null,this),r.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),r.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),r.g=new GradientProperty(this,e.g,this)),r.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"==e.ty||"gs"==e.ty){if(n.lc=this.lcEnum[e.lc]||"round",n.lj=this.ljEnum[e.lj]||"round",1==e.lj&&(n.ml=e.ml),r.w=PropertyFactory.getProp(this,e.w,0,null,this),r.w.k||(n.wi=r.w.v),e.d){var i=new DashProperty(this,e.d,"canvas",this);r.d=i,r.d.k||(n.da=r.d.dashArray,n.do=r.d.dashoffset[0])}}else n.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(n),r.style=n,r},CVShapeElement.prototype.createGroupElement=function(e){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,n=this.stylesList.length;for(t=0;t<n;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,n=e.length;for(t=0;t<n;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,n,r,i){var o,a,s,l,c,u,h=e.length-1,d=[],p=[],f=[].concat(i);for(o=h;o>=0;o-=1){if((l=this.searchProcessedElement(e[o]))?t[o]=n[l-1]:e[o]._shouldRender=r,"fl"==e[o].ty||"st"==e[o].ty||"gf"==e[o].ty||"gs"==e[o].ty)l?t[o].style.closed=!1:t[o]=this.createStyleElement(e[o],f),d.push(t[o].style);else if("gr"==e[o].ty){if(l)for(s=t[o].it.length,a=0;a<s;a+=1)t[o].prevViewData[a]=t[o].it[a];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,r,f)}else"tr"==e[o].ty?(l||(u=this.createTransformElement(e[o]),t[o]=u),f.push(t[o]),this.addTransformToStyleList(t[o])):"sh"==e[o].ty||"rc"==e[o].ty||"el"==e[o].ty||"sr"==e[o].ty?l||(t[o]=this.createShapeElement(e[o])):"tm"==e[o].ty||"rd"==e[o].ty?(l?(c=t[o]).closed=!1:((c=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=c,this.shapeModifiers.push(c)),p.push(c)):"rp"==e[o].ty&&(l?(c=t[o]).closed=!0:(c=ShapeModifiers.getModifier(e[o].ty),t[o]=c,c.init(this,e,o,t),this.shapeModifiers.push(c),r=!1),p.push(c));this.addProcessedElement(e[o],o+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),h=p.length,o=0;o<h;o+=1)p[o].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,n,r,i,o,a,s,l,c=this.stylesList.length,u=this.globalData.renderer,h=this.globalData.canvasContext;for(e=0;e<c;e+=1)if(("st"!==(s=(l=this.stylesList[e]).type)&&"gs"!==s||0!==l.wi)&&l.data._shouldRender&&0!==l.coOp&&0!==this.globalData.currentGlobalAlpha){for(u.save(),o=l.elements,"st"===s||"gs"===s?(h.strokeStyle="st"===s?l.co:l.grd,h.lineWidth=l.wi,h.lineCap=l.lc,h.lineJoin=l.lj,h.miterLimit=l.ml||0):h.fillStyle="fl"===s?l.co:l.grd,u.ctxOpacity(l.coOp),"st"!==s&&"gs"!==s&&h.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),n=o.length,t=0;t<n;t+=1){for("st"!==s&&"gs"!==s||(h.beginPath(),l.da&&(h.setLineDash(l.da),h.lineDashOffset=l.do)),i=(a=o[t].trNodes).length,r=0;r<i;r+=1)"m"==a[r].t?h.moveTo(a[r].p[0],a[r].p[1]):"c"==a[r].t?h.bezierCurveTo(a[r].pts[0],a[r].pts[1],a[r].pts[2],a[r].pts[3],a[r].pts[4],a[r].pts[5]):h.closePath();"st"!==s&&"gs"!==s||(h.stroke(),l.da&&h.setLineDash(this.dashResetter))}"st"!==s&&"gs"!==s&&h.fill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,n,r){var i,o;for(o=e,i=t.length-1;i>=0;i-=1)"tr"==t[i].ty?(o=n[i].transform,this.renderShapeTransform(e,o)):"sh"==t[i].ty||"el"==t[i].ty||"rc"==t[i].ty||"sr"==t[i].ty?this.renderPath(t[i],n[i]):"fl"==t[i].ty?this.renderFill(t[i],n[i],o):"st"==t[i].ty?this.renderStroke(t[i],n[i],o):"gf"==t[i].ty||"gs"==t[i].ty?this.renderGradientFill(t[i],n[i],o):"gr"==t[i].ty?this.renderShape(o,t[i].it,n[i].it):t[i].ty;r&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var n,r,i,o=e.trNodes,a=t.paths,s=a._length;o.length=0;var l=e.transforms.finalTransform;for(i=0;i<s;i+=1){var c=a.shapes[i];if(c&&c.v){for(r=c._length,n=1;n<r;n+=1)1===n&&o.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),o.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[n],c.v[n])});1===r&&o.push({t:"m",p:l.applyToPointArray(c.v[0][0],c.v[0][1],0)}),c.c&&r&&(o.push({t:"c",pts:l.applyToTriplePoints(c.o[n-1],c.i[0],c.v[0])}),o.push({t:"z"}))}}e.trNodes=o}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var n,r=t.styledShapes.length;for(n=0;n<r;n+=1)this.renderStyledShape(t.styledShapes[n],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,n){var r=t.style;(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,n){var r=t.style;if(!r.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var i=this.globalData.canvasContext,o=t.s.v,a=t.e.v;if(1===e.t)d=i.createLinearGradient(o[0],o[1],a[0],a[1]);else var s=Math.sqrt(Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)),l=Math.atan2(a[1]-o[1],a[0]-o[0]),c=s*(t.h.v>=1?.99:t.h.v<=-1?-.99:t.h.v),u=Math.cos(l+t.a.v)*c+o[0],h=Math.sin(l+t.a.v)*c+o[1],d=i.createRadialGradient(u,h,0,o[0],o[1],s);var p,f=e.g.p,m=t.g.c,v=1;for(p=0;p<f;p+=1)t.g._hasOpacity&&t.g._collapsable&&(v=t.g.o[2*p+1]),d.addColorStop(m[4*p]/100,"rgba("+m[4*p+1]+","+m[4*p+2]+","+m[4*p+3]+","+v+")");r.grd=d}r.coOp=t.o.v*n.opacity},CVShapeElement.prototype.renderStroke=function(e,t,n){var r=t.style,i=t.d;i&&(i._mdf||this._isFirstFrame)&&(r.da=i.dashArray,r.do=i.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(r.co="rgb("+bm_floor(t.c.v[0])+","+bm_floor(t.c.v[1])+","+bm_floor(t.c.v[2])+")"),(t.o._mdf||n._opMdf||this._isFirstFrame)&&(r.coOp=t.o.v*n.opacity),(t.w._mdf||this._isFirstFrame)&&(r.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){var e=this.canvasContext;e.fillStyle=this.data.sc,e.fillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=!1;e.fc?(t=!0,this.values.fill=this.buildColor(e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=t;var n=!1;e.sc&&(n=!0,this.values.stroke=this.buildColor(e.sc),this.values.sWidth=e.sw);var r,i,o=this.globalData.fontManager.getFontByName(e.f),a=e.l,s=this.mHelper;this.stroke=n,this.values.fValue=e.finalSize+"px "+this.globalData.fontManager.getFontByName(e.f).fFamily,i=e.finalText.length;var l,c,u,h,d,p,f,m,v,g,y=this.data.singleShape,_=e.tr/1e3*e.finalSize,b=0,w=0,x=!0,S=0;for(r=0;r<i;r+=1){for(c=(l=this.globalData.fontManager.getCharData(e.finalText[r],o.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily))&&l.data||{},s.reset(),y&&a[r].n&&(b=-_,w+=e.yOffset,w+=x?1:0,x=!1),f=(d=c.shapes?c.shapes[0].it:[]).length,s.scale(e.finalSize/100,e.finalSize/100),y&&this.applyTextPropertiesToMatrix(e,s,a[r].line,b,w),v=createSizedArray(f),p=0;p<f;p+=1){for(h=d[p].ks.k.i.length,m=d[p].ks.k,g=[],u=1;u<h;u+=1)1==u&&g.push(s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),g.push(s.applyToX(m.o[u-1][0],m.o[u-1][1],0),s.applyToY(m.o[u-1][0],m.o[u-1][1],0),s.applyToX(m.i[u][0],m.i[u][1],0),s.applyToY(m.i[u][0],m.i[u][1],0),s.applyToX(m.v[u][0],m.v[u][1],0),s.applyToY(m.v[u][0],m.v[u][1],0));g.push(s.applyToX(m.o[u-1][0],m.o[u-1][1],0),s.applyToY(m.o[u-1][0],m.o[u-1][1],0),s.applyToX(m.i[0][0],m.i[0][1],0),s.applyToY(m.i[0][0],m.i[0][1],0),s.applyToX(m.v[0][0],m.v[0][1],0),s.applyToY(m.v[0][0],m.v[0][1],0)),v[p]=g}y&&(b+=a[r].l,b+=_),this.textSpans[S]?this.textSpans[S].elem=v:this.textSpans[S]={elem:v},S+=1}},CVTextElement.prototype.renderInnerContent=function(){var e,t,n,r,i,o,a=this.canvasContext;this.finalTransform.mat.props,a.font=this.values.fValue,a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var s,l=this.textAnimator.renderedLetters,c=this.textProperty.currentData.l;t=c.length;var u,h,d=null,p=null,f=null;for(e=0;e<t;e+=1)if(!c[e].n){if((s=l[e])&&(this.globalData.renderer.save(),this.globalData.renderer.ctxTransform(s.p),this.globalData.renderer.ctxOpacity(s.o)),this.fill){for(s&&s.fc?d!==s.fc&&(d=s.fc,a.fillStyle=s.fc):d!==this.values.fill&&(d=this.values.fill,a.fillStyle=this.values.fill),r=(u=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=u[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.fill()}if(this.stroke){for(s&&s.sw?f!==s.sw&&(f=s.sw,a.lineWidth=s.sw):f!==this.values.sWidth&&(f=this.values.sWidth,a.lineWidth=this.values.sWidth),s&&s.sc?p!==s.sc&&(p=s.sc,a.strokeStyle=s.sc):p!==this.values.stroke&&(p=this.values.stroke,a.strokeStyle=this.values.stroke),r=(u=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),n=0;n<r;n+=1)for(o=(h=u[n]).length,this.globalData.canvasContext.moveTo(h[0],h[1]),i=2;i<o;i+=6)this.globalData.canvasContext.bezierCurveTo(h[i],h[i+1],h[i+2],h[i+3],h[i+4],h[i+5]);this.globalData.canvasContext.closePath(),this.globalData.canvasContext.stroke()}s&&this.globalData.renderer.restore()}},CVEffects.prototype.renderFrame=function(){},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._matMdf&&(this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()),this.finalTransform._opMdf&&(this.transformedElement.style.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var n,r=0;r<t;)this.elements[r]&&this.elements[r].getBaseElement&&(n=this.elements[r].getBaseElement()),r+=1;n?this.layerElement.insertBefore(e,n):this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)t=e[n].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var n,r,i,o,a,s=e.sh.v,l=e.transformers,c=s._length;if(!(c<=1)){for(n=0;n<c-1;n+=1)r=this.getTransformedPoint(l,s.v[n]),i=this.getTransformedPoint(l,s.o[n]),o=this.getTransformedPoint(l,s.i[n+1]),a=this.getTransformedPoint(l,s.v[n+1]),this.checkBounds(r,i,o,a,t);s.c&&(r=this.getTransformedPoint(l,s.v[n]),i=this.getTransformedPoint(l,s.o[n]),o=this.getTransformedPoint(l,s.i[0]),a=this.getTransformedPoint(l,s.v[0]),this.checkBounds(r,i,o,a,t))}},HShapeElement.prototype.checkBounds=function(e,t,n,r,i){this.getBoundsOfCurve(e,t,n,r);var o=this.shapeBoundingBox;i.x=bm_min(o.left,i.x),i.xMax=bm_max(o.right,i.xMax),i.y=bm_min(o.top,i.y),i.yMax=bm_max(o.bottom,i.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,n,r){for(var i,o,a,s,l,c,u,h=[[e[0],r[0]],[e[1],r[1]]],d=0;d<2;++d)if(o=6*e[d]-12*t[d]+6*n[d],i=-3*e[d]+9*t[d]-9*n[d]+3*r[d],a=3*t[d]-3*e[d],o|=0,a|=0,0!=(i|=0))(l=o*o-4*a*i)<0||(0<(c=(-o+bm_sqrt(l))/(2*i))&&c<1&&h[d].push(this.calculateF(c,e,t,n,r,d)),0<(u=(-o-bm_sqrt(l))/(2*i))&&u<1&&h[d].push(this.calculateF(u,e,t,n,r,d)));else{if(0===o)continue;0<(s=-a/o)&&s<1&&h[d].push(this.calculateF(s,e,t,n,r,d))}this.shapeBoundingBox.left=bm_min.apply(null,h[0]),this.shapeBoundingBox.top=bm_min.apply(null,h[1]),this.shapeBoundingBox.right=bm_max.apply(null,h[0]),this.shapeBoundingBox.bottom=bm_max.apply(null,h[1])},HShapeElement.prototype.calculateF=function(e,t,n,r,i,o){return bm_pow(1-e,3)*t[o]+3*bm_pow(1-e,2)*e*n[o]+3*(1-e)*bm_pow(e,2)*r[o]+bm_pow(e,3)*i[o]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var n,r=e.length;for(n=0;n<r;n+=1)e[n]&&e[n].sh?this.calculateShapeBoundingBox(e[n],t):e[n]&&e[n].it&&this.calculateBoundingBox(e[n].it,t)},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,this.currentBoxContains(e))return;var n=!1;this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),n=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),n=!0),(n||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y)&&(this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style;t.color=t.fill=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)",e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var n,r,i=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars)if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{t.fontFamily=i.fFamily;var o=e.fWeight,a=e.fStyle;t.fontStyle=a,t.fontWeight=o}var s,l,c,u=e.l;r=u.length;var h,d=this.mHelper,p="",f=0;for(n=0;n<r;n+=1){if(this.globalData.fontManager.chars?(this.textPaths[f]?s=this.textPaths[f]:((s=createNS("path")).setAttribute("stroke-linecap","butt"),s.setAttribute("stroke-linejoin","round"),s.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[f]?c=(l=this.textSpans[f]).children[0]:((l=createTag("div")).style.lineHeight=0,(c=createNS("svg")).appendChild(s),styleDiv(l)))):this.isMasked?s=this.textPaths[f]?this.textPaths[f]:createNS("text"):this.textSpans[f]?(l=this.textSpans[f],s=this.textPaths[f]):(styleDiv(l=createTag("span")),styleDiv(s=createTag("span")),l.appendChild(s)),this.globalData.fontManager.chars){var m,v=this.globalData.fontManager.getCharData(e.finalText[n],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(m=v?v.data:null,d.reset(),m&&m.shapes&&(h=m.shapes[0].it,d.scale(e.finalSize/100,e.finalSize/100),p=this.createPathShape(d,h),s.setAttribute("d",p)),this.isMasked)this.innerElem.appendChild(s);else{if(this.innerElem.appendChild(l),m&&m.shapes){document.body.appendChild(c);var g=c.getBBox();c.setAttribute("width",g.width+2),c.setAttribute("height",g.height+2),c.setAttribute("viewBox",g.x-1+" "+(g.y-1)+" "+(g.width+2)+" "+(g.height+2)),c.style.transform=c.style.webkitTransform="translate("+(g.x-1)+"px,"+(g.y-1)+"px)",u[n].yOffset=g.y-1}else c.setAttribute("width",1),c.setAttribute("height",1);l.appendChild(c)}}else s.textContent=u[n].val,s.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked?this.innerElem.appendChild(s):(this.innerElem.appendChild(l),s.style.transform=s.style.webkitTransform="translate3d(0,"+-e.finalSize/1.2+"px,0)");this.isMasked?this.textSpans[f]=s:this.textSpans[f]=l,this.textSpans[f].style.display="block",this.textPaths[f]=s,f+=1}for(;f<this.textSpans.length;)this.textSpans[f].style.display="none",f+=1},HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;this.isMasked&&this.finalTransform._matMdf&&(this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)")}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var e,t,n,r,i,o=0,a=this.textAnimator.renderedLetters,s=this.textProperty.currentData.l;for(t=s.length,e=0;e<t;e+=1)s[e].n?o+=1:(r=this.textSpans[e],i=this.textPaths[e],n=a[o],o+=1,n._mdf.m&&(this.isMasked?r.setAttribute("transform",n.m):r.style.transform=r.style.webkitTransform=n.m),r.style.opacity=n.o,n.sw&&n._mdf.sw&&i.setAttribute("stroke-width",n.sw),n.sc&&n._mdf.sc&&i.setAttribute("stroke",n.sc),n.fc&&n._mdf.fc&&(i.setAttribute("fill",n.fc),i.style.color=n.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var l=this.innerElem.getBBox();this.currentBBox.w!==l.width&&(this.currentBBox.w=l.width,this.svgElement.setAttribute("width",l.width)),this.currentBBox.h!==l.height&&(this.currentBBox.h=l.height,this.svgElement.setAttribute("height",l.height)),this.currentBBox.w===l.width+2&&this.currentBBox.h===l.height+2&&this.currentBBox.x===l.x-1&&this.currentBBox.y===l.y-1||(this.currentBBox.w=l.width+2,this.currentBBox.h=l.height+2,this.currentBBox.x=l.x-1,this.currentBBox.y=l.y-1,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)")}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,n=this.comp.threeDElements.length;for(e=0;e<n;e+=1)"3d"===(t=this.comp.threeDElements[e]).type&&(t.perspectiveElem.style.perspective=t.perspectiveElem.style.webkitPerspective=this.pe.v+"px",t.container.style.transformOrigin=t.container.style.mozTransformOrigin=t.container.style.webkitTransformOrigin="0px 0px 0px",t.perspectiveElem.style.transform=t.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)")},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e,t,n=this._isFirstFrame;if(this.hierarchy)for(t=this.hierarchy.length,e=0;e<t;e+=1)n=this.hierarchy[e].finalTransform.mProp._mdf||n;if(n||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(e=t=this.hierarchy.length-1;e>=0;e-=1){var r=this.hierarchy[e].finalTransform.mProp;this.mat.translate(-r.p.v[0],-r.p.v[1],r.p.v[2]),this.mat.rotateX(-r.or.v[0]).rotateY(-r.or.v[1]).rotateZ(r.or.v[2]),this.mat.rotateX(-r.rx.v).rotateY(-r.ry.v).rotateZ(r.rz.v),this.mat.scale(1/r.s.v[0],1/r.s.v[1],1/r.s.v[2]),this.mat.translate(r.a.v[0],r.a.v[1],r.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var i;i=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var o=Math.sqrt(Math.pow(i[0],2)+Math.pow(i[1],2)+Math.pow(i[2],2)),a=[i[0]/o,i[1]/o,i[2]/o],s=Math.sqrt(a[2]*a[2]+a[0]*a[0]),l=Math.atan2(a[1],s),c=Math.atan2(a[0],-a[2]);this.mat.rotateY(c).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){var h;for(t=this.comp.threeDElements.length,e=0;e<t;e+=1)"3d"===(h=this.comp.threeDElements[e]).type&&(u&&(h.container.style.transform=h.container.style.webkitTransform=this.mat.toCSS()),this.pe._mdf&&(h.perspectiveElem.style.perspective=h.perspectiveElem.style.webkitPerspective=this.pe.v+"px"));this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},HEffects.prototype.renderFrame=function(){};var animationManager=function(){var e={},t=[],n=0,r=0,i=0,o=!0,a=!1;function s(e){for(var n=0,i=e.target;n<r;)t[n].animation===i&&(t.splice(n,1),n-=1,r-=1,i.isPaused||u()),n+=1}function l(e,n){if(!e)return null;for(var i=0;i<r;){if(t[i].elem==e&&null!==t[i].elem)return t[i].animation;i+=1}var o=new AnimationItem;return h(o,e),o.setData(e,n),o}function c(){i+=1,f()}function u(){i-=1}function h(e,n){e.addEventListener("destroy",s),e.addEventListener("_active",c),e.addEventListener("_idle",u),t.push({elem:n,animation:e}),r+=1}function d(e){var s,l=e-n;for(s=0;s<r;s+=1)t[s].animation.advanceTime(l);n=e,i&&!a?window.requestAnimationFrame(d):o=!0}function p(e){n=e,window.requestAnimationFrame(d)}function f(){!a&&i&&o&&(window.requestAnimationFrame(p),o=!1)}return e.registerAnimation=l,e.loadAnimation=function(e){var t=new AnimationItem;return h(t,null),t.setParams(e),t},e.setSpeed=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setSpeed(e,n)},e.setDirection=function(e,n){var i;for(i=0;i<r;i+=1)t[i].animation.setDirection(e,n)},e.play=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.play(e)},e.pause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.pause(e)},e.stop=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.stop(e)},e.togglePause=function(e){var n;for(n=0;n<r;n+=1)t[n].animation.togglePause(e)},e.searchAnimations=function(e,t,n){var r,i=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),o=i.length;for(r=0;r<o;r+=1)n&&i[r].setAttribute("data-bm-type",n),l(i[r],e);if(t&&0===o){n||(n="svg");var a=document.getElementsByTagName("body")[0];a.innerHTML="";var s=createTag("div");s.style.width="100%",s.style.height="100%",s.setAttribute("data-bm-type",n),a.appendChild(s),l(s,e)}},e.resize=function(){var e;for(e=0;e<r;e+=1)t[e].animation.resize()},e.goToAndStop=function(e,n,i){var o;for(o=0;o<r;o+=1)t[o].animation.goToAndStop(e,n,i)},e.destroy=function(e){var n;for(n=r-1;n>=0;n-=1)t[n].animation.destroy(e)},e.freeze=function(){a=!0},e.unfreeze=function(){a=!1,f()},e.getRegisteredAnimations=function(){var e,n=t.length,r=[];for(e=0;e<n;e+=1)r.push(t[e].animation);return r},e}(),AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.subframeEnabled=subframeEnabled,this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){e.context&&(this.context=e.context),(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t=e.animType?e.animType:e.renderer?e.renderer:"svg";switch(t){case"canvas":this.renderer=new CanvasRenderer(this,e.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,e.rendererSettings);break;default:this.renderer=new HybridRenderer(this,e.rendererSettings)}this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||(!1===e.loop?this.loop=!1:!0===e.loop?this.loop=!0:this.loop=parseInt(e.loop)),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!e.hasOwnProperty("autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,e.animationData?this.configAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),assetLoader.load(e.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this)))},AnimationItem.prototype.setData=function(e,t){var n={wrapper:e,animationData:t?"object"==typeof t?t:JSON.parse(t):null},r=e.attributes;n.path=r.getNamedItem("data-animation-path")?r.getNamedItem("data-animation-path").value:r.getNamedItem("data-bm-path")?r.getNamedItem("data-bm-path").value:r.getNamedItem("bm-path")?r.getNamedItem("bm-path").value:"",n.animType=r.getNamedItem("data-anim-type")?r.getNamedItem("data-anim-type").value:r.getNamedItem("data-bm-type")?r.getNamedItem("data-bm-type").value:r.getNamedItem("bm-type")?r.getNamedItem("bm-type").value:r.getNamedItem("data-bm-renderer")?r.getNamedItem("data-bm-renderer").value:r.getNamedItem("bm-renderer")?r.getNamedItem("bm-renderer").value:"canvas";var i=r.getNamedItem("data-anim-loop")?r.getNamedItem("data-anim-loop").value:r.getNamedItem("data-bm-loop")?r.getNamedItem("data-bm-loop").value:r.getNamedItem("bm-loop")?r.getNamedItem("bm-loop").value:"";""===i||(n.loop="false"!==i&&("true"===i||parseInt(i)));var o=r.getNamedItem("data-anim-autoplay")?r.getNamedItem("data-anim-autoplay").value:r.getNamedItem("data-bm-autoplay")?r.getNamedItem("data-bm-autoplay").value:!r.getNamedItem("bm-autoplay")||r.getNamedItem("bm-autoplay").value;n.autoplay="false"!==o,n.name=r.getNamedItem("data-name")?r.getNamedItem("data-name").value:r.getNamedItem("data-bm-name")?r.getNamedItem("data-bm-name").value:r.getNamedItem("bm-name")?r.getNamedItem("bm-name").value:"","false"===(r.getNamedItem("data-anim-prerender")?r.getNamedItem("data-anim-prerender").value:r.getNamedItem("data-bm-prerender")?r.getNamedItem("data-bm-prerender").value:r.getNamedItem("bm-prerender")?r.getNamedItem("bm-prerender").value:"")&&(n.prerender=!1),this.setParams(n)},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,n,r=this.animationData.layers,i=r.length,o=e.layers,a=o.length;for(n=0;n<a;n+=1)for(t=0;t<i;){if(r[t].id==o[n].id){r[t]=o[n];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(i=e.assets.length,t=0;t<i;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),this.renderer.includeLayers(e.layers),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments)return this.trigger("data_ready"),void(this.timeCompleted=this.totalFrames);var t=e.shift();this.timeCompleted=t.time*this.frameRate;var n=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,assetLoader.load(n,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.firstFrame=Math.round(this.animationData.ip),this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.loaded()?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){this.isLoaded||!this.renderer.globalData.fontManager.loaded()||!this.imagePreloader.loaded()&&"canvas"===this.renderer.rendererType||(this.isLoaded=!0,dataManager.completeData(this.animationData,this.renderer.globalData.fontManager),expressionsPlugin&&expressionsPlugin.initExpressions(this),this.renderer.initItems(),setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0),this.gotoFrame(),this.autoplay&&this.play())},AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()},AnimationItem.prototype.setSubframe=function(e){this.subframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame()},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded)try{this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){e&&this.name!=e||!0===this.isPaused&&(this.isPaused=!1,this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!=e||!1===this.isPaused&&(this.isPaused=!0,this._idle=!0,this.trigger("_idle"))},AnimationItem.prototype.togglePause=function(e){e&&this.name!=e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!=e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.goToAndStop=function(e,t,n){n&&this.name!=n||(t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier),this.pause())},AnimationItem.prototype.goToAndPlay=function(e,t,n){this.goToAndStop(e,t,n),this.play()},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,n=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(n=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(!this.loop||this.playCount--<=0&&!0!==this.loop?(n=!0,t=0):(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0)):this.setCurrentRawFrameValue(t),n&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.timeCompleted=this.totalFrames=e[0]-e[1],this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.timeCompleted=this.totalFrames=e[1]-e[0],this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var n=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?n=e:this.currentRawFrame+this.firstFrame>t&&(n=t-e)),this.firstFrame=e,this.timeCompleted=this.totalFrames=t-e,-1!==n&&this.goToAndStop(n,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"==typeof e[0]){var n,r=e.length;for(n=0;n<r;n+=1)this.segments.push(e[n])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){e&&this.name!=e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null,this.renderer=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),t=this.assetsPath+n}else t=this.path,t+=e.u?e.u:"",t+=e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,n=this.assets.length;t<n;){if(e==this.assets[t].id)return this.assets[t];t+=1}},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var Expressions={initExpressions:function(e){var t=0,n=[];e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=function(){t+=1},e.renderer.globalData.popExpression=function(){0==(t-=1)&&function(){var e,t=n.length;for(e=0;e<t;e+=1)n[e].release();n.length=0}()},e.renderer.globalData.registerExpressionProperty=function(e){-1===n.indexOf(e)&&n.push(e)}}};expressionsPlugin=Expressions;var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null;function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||"boolean"===e||"string"===e||t instanceof Number}function $bm_neg(e){var t=typeof e;if("number"===t||"boolean"===t||e instanceof Number)return-e;if($bm_isInstanceOfArray(e)){var n,r=e.length,i=[];for(n=0;n<r;n+=1)i[n]=-e[n];return i}return e.propType?e.v:void 0}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var n=typeof e,r=typeof t;if("string"===n||"string"===r)return e+t;if(isNumerable(n,e)&&isNumerable(r,t))return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]=e[0]+t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,o=e.length,a=t.length,s=[];i<o||i<a;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?s[i]=e[i]+t[i]:s[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}var add=sum;function sub(e,t){var n=typeof e,r=typeof t;if(isNumerable(n,e)&&isNumerable(r,t))return"string"===n&&(e=parseInt(e)),"string"===r&&(t=parseInt(t)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(r,t))return(e=e.slice(0))[0]=e[0]-t,e;if(isNumerable(n,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var i=0,o=e.length,a=t.length,s=[];i<o||i<a;)("number"==typeof e[i]||e[i]instanceof Number)&&("number"==typeof t[i]||t[i]instanceof Number)?s[i]=e[i]-t[i]:s[i]=void 0===t[i]?e[i]:e[i]||t[i],i+=1;return s}return 0}function mul(e,t){var n,r,i,o=typeof e,a=typeof t;if(isNumerable(o,e)&&isNumerable(a,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]*t;return n}if(isNumerable(o,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e*t[r];return n}return 0}function div(e,t){var n,r,i,o=typeof e,a=typeof t;if(isNumerable(o,e)&&isNumerable(a,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(i=e.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e[r]/t;return n}if(isNumerable(o,e)&&$bm_isInstanceOfArray(t)){for(i=t.length,n=createTypedArray("float32",i),r=0;r<i;r+=1)n[r]=e/t[r];return n}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e)),"string"==typeof t&&(t=parseInt(t)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,n){if(t>n){var r=n;n=t,t=r}return Math.min(Math.max(e,t),n)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);t||(t=helperLengthArray);var n,r=Math.min(e.length,t.length),i=0;for(n=0;n<r;n+=1)i+=Math.pow(t[n]-e[n],2);return Math.sqrt(i)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.max(r,i,o),s=Math.min(r,i,o),l=(a+s)/2;if(a==s)t=n=0;else{var c=a-s;switch(n=l>.5?c/(2-a-s):c/(a+s),a){case r:t=(i-o)/c+(i<o?6:0);break;case i:t=(o-r)/c+2;break;case o:t=(r-i)/c+4}t/=6}return[t,n,l,e[3]]}function hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslToRgb(e){var t,n,r,i=e[0],o=e[1],a=e[2];if(0===o)t=n=r=a;else{var s=a<.5?a*(1+o):a+o-a*o,l=2*a-s;t=hue2rgb(l,s,i+1/3),n=hue2rgb(l,s,i),r=hue2rgb(l,s,i-1/3)}return[t,n,r,e[3]]}function linear(e,t,n,r,i){if(void 0!==r&&void 0!==i||(r=t,i=n,t=0,n=1),n<t){var o=n;n=t,t=o}if(e<=t)return r;if(e>=n)return i;var a=n===t?0:(e-t)/(n-t);if(!r.length)return r+(i-r)*a;var s,l=r.length,c=createTypedArray("float32",l);for(s=0;s<l;s+=1)c[s]=r[s]+(i[s]-r[s])*a;return c}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var n,r=t.length;e||(e=createTypedArray("float32",r));var i=createTypedArray("float32",r),o=BMMath.random();for(n=0;n<r;n+=1)i[n]=e[n]+o*(t[n]-e[n]);return i}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,n,r){var i,o=e.length,a=shape_pool.newElement();a.setPathData(!!r,o);var s,l,c=[0,0];for(i=0;i<o;i+=1)s=t&&t[i]?t[i]:c,l=n&&n[i]?n[i]:c,a.setTripleAt(e[i][0],e[i][1],l[0]+e[i][0],l[1]+e[i][1],s[0]+e[i][0],s[1]+e[i][1],i,!0);return a}function initiateExpression(elem,data,property){var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,__expression_functions=[],scoped_bm_rt;if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1)__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=function(e,t){var n,r,i=this.pv.length?this.pv.length:1,o=createTypedArray("float32",i),a=Math.floor(5*time);for(n=0,r=0;n<a;){for(r=0;r<i;r+=1)o[r]+=-t+2*t*BMMath.random();n+=1}var s=5*time,l=s-Math.floor(s),c=createTypedArray("float32",i);if(i>1){for(r=0;r<i;r+=1)c[r]=this.pv[r]+o[r]+(-t+2*t*BMMath.random())*l;return c}return this.pv+o[0]+(-t+2*t*BMMath.random())*l}.bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface),time,velocity,value,text,textIndex,textTotal,selectorValue;function lookAt(e,t){var n=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],r=Math.atan2(n[0],Math.sqrt(n[1]*n[1]+n[2]*n[2]))/degToRads;return[-Math.atan2(n[1],n[2])/degToRads,r,0]}function easeOut(e,t,n,r,i){return applyEase(easeOutBez,e,t,n,r,i)}function easeIn(e,t,n,r,i){return applyEase(easeInBez,e,t,n,r,i)}function ease(e,t,n,r,i){return applyEase(easeInOutBez,e,t,n,r,i)}function applyEase(e,t,n,r,i,o){void 0===i?(i=n,o=r):t=(t-n)/(r-n);var a=e(t=t>1?1:t<0?0:t);if($bm_isInstanceOfArray(i)){var s,l=i.length,c=createTypedArray("float32",l);for(s=0;s<l;s+=1)c[s]=(o[s]-i[s])*a+i[s];return c}return(o-i)*a+i}function nearestKey(e){var t,n,r,i=data.k.length;if(data.k.length&&"number"!=typeof data.k[0])if(n=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)n=1,r=data.k[0].t;else{for(t=0;t<i-1;t+=1){if(e===data.k[t].t){n=t+1,r=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(n=t+2,r=data.k[t+1].t):(n=t+1,r=data.k[t].t);break}}-1===n&&(n=t+1,r=data.k[t].t)}else n=0,r=0;var o={};return o.index=n,o.time=r/elem.comp.globalData.frameRate,o}function key(e){var t,n,r;if(!data.k.length||"number"==typeof data.k[0])throw new Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var i=data.k[e].hasOwnProperty("s")?data.k[e].s:data.k[e-1].e;for(r=i.length,n=0;n<r;n+=1)t[n]=i[n],t.value[n]=i[n];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!(!elem.hierarchy||!elem.hierarchy.length),parent,randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return value=e,_needsRandom&&seedRandom(randSeed),this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!(!elem.hierarchy||!elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,"shape"===scoped_bm_rt.propType&&(scoped_bm_rt=scoped_bm_rt.v),scoped_bm_rt)}return executeExpression}return ob.initiateExpression=initiateExpression,ob}(),expressionHelpers={searchExpressions:function(e,t,n){t.x&&(n.k=!0,n.x=!0,n.initiateExpression=ExpressionManager.initiateExpression,n.effectsSequence.push(n.initiateExpression(e,t,n).bind(n)))},getSpeedAtTime:function(e){var t=this.getValueAtTime(e),n=this.getValueAtTime(e+-.01),r=0;if(t.length){var i;for(i=0;i<t.length;i+=1)r+=Math.pow(n[i]-t[i],2);r=100*Math.sqrt(r)}else r=0;return r},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,n,r=-.001,i=this.getValueAtTime(e),o=this.getValueAtTime(e+r);if(i.length)for(t=createTypedArray("float32",i.length),n=0;n<i.length;n+=1)t[n]=(o[n]-i[n])/r;else t=(o-i)/r;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}};!function(){function e(e,t,n){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var r,i,o,a,s,l=this.comp.renderedFrame,c=this.keyframes,u=c[c.length-1].t;if(l<=u)return this.pv;if(n?i=u-(r=t?Math.abs(u-elem.comp.globalData.frameRate*t):Math.max(0,u-this.elem.data.ip)):((!t||t>c.length-1)&&(t=c.length-1),r=u-(i=c[c.length-1-t].t)),"pingpong"===e){if(Math.floor((l-i)/r)%2!=0)return this.getValueAtTime((r-(l-i)%r+i)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var h=this.getValueAtTime(i/this.comp.globalData.frameRate,0),d=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-i)%r+i)/this.comp.globalData.frameRate,0),f=Math.floor((l-i)/r);if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=(d[o]-h[o])*f+p[o];return s}return(d-h)*f+p}if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),v=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-v[o])*((l-u)/this.comp.globalData.frameRate)/5e-4;return s}return m+(l-u)/.001*(m-v)}}return this.getValueAtTime(((l-i)%r+i)/this.comp.globalData.frameRate,0)}function t(e,t,n){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var r,i,o,a,s,l=this.comp.renderedFrame,c=this.keyframes,u=c[0].t;if(l>=u)return this.pv;if(n?i=u+(r=t?Math.abs(elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-u)):((!t||t>c.length-1)&&(t=c.length-1),r=(i=c[t].t)-u),"pingpong"===e){if(Math.floor((u-l)/r)%2==0)return this.getValueAtTime(((u-l)%r+u)/this.comp.globalData.frameRate,0)}else{if("offset"===e){var h=this.getValueAtTime(u/this.comp.globalData.frameRate,0),d=this.getValueAtTime(i/this.comp.globalData.frameRate,0),p=this.getValueAtTime((r-(u-l)%r+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-l)/r)+1;if(this.pv.length){for(a=(s=new Array(h.length)).length,o=0;o<a;o+=1)s[o]=p[o]-(d[o]-h[o])*f;return s}return p-(d-h)*f}if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),v=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(a=(s=new Array(m.length)).length,o=0;o<a;o+=1)s[o]=m[o]+(m[o]-v[o])*(u-l)/.001;return s}return m+(m-v)*(u-l)/.001}}return this.getValueAtTime((r-(u-l)%r+u)/this.comp.globalData.frameRate,0)}function n(e,t){if(!this.k)return this.pv;if(e=.5*(e||.4),(t=Math.floor(t||5))<=1)return this.pv;var n,r,i=this.comp.renderedFrame/this.comp.globalData.frameRate,o=i-e,a=t>1?(i+e-o)/(t-1):1,s=0,l=0;for(n=this.pv.length?createTypedArray("float32",this.pv.length):0;s<t;){if(r=this.getValueAtTime(o+s*a),this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]+=r[l];else n+=r;s+=1}if(this.pv.length)for(l=0;l<this.pv.length;l+=1)n[l]/=t;else n/=t;return n}function r(e){console.warn("Transform at time not supported")}function i(e){}var o=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,n){var a=o(e,t,n);return a.dynamicProperties.length?a.getValueAtTime=r.bind(a):a.getValueAtTime=i.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;PropertyFactory.getProp=function(r,i,o,s,l){var c=a(r,i,o,s,l);c.kf?c.getValueAtTime=expressionHelpers.getValueAtTime.bind(c):c.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(c),c.setGroupProperty=expressionHelpers.setGroupProperty,c.loopOut=e,c.loopIn=t,c.smooth=n,c.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(c),c.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(c),c.numKeys=1===i.a?i.k.length:0,c.propertyIndex=i.ix;var u=0;return 0!==o&&(u=createTypedArray("float32",1===i.a?i.k[0].s.length:i.k.length)),c._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(r,i,c),c.k&&l.addDynamicProperty(c),c};var s=ShapePropertyFactory.getConstructorFunction(),l=ShapePropertyFactory.getKeyframedConstructorFunction();function c(){}c.prototype={vertices:function(e,t){this.k&&this.getValue();var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0));var r,i=n._length,o=n[e],a=n.v,s=createSizedArray(i);for(r=0;r<i;r+=1)s[r]="i"===e||"o"===e?[o[r][0]-a[r][0],o[r][1]-a[r][1]]:[o[r][0],o[r][1]];return s},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var n=this.v;void 0!==t&&(n=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(n));for(var r,i=this._segmentsLength,o=i.lengths,a=i.totalLength*e,s=0,l=o.length,c=0;s<l;){if(c+o[s].addedLength>a){var u=s,h=n.c&&s===l-1?0:s+1,d=(a-c)/o[s].addedLength;r=bez.getPointInSegment(n.v[u],n.v[h],n.o[u],n.i[h],d,o[s]);break}c+=o[s].addedLength,s+=1}return r||(r=n.c?[n.v[0][0],n.v[0][1]]:[n.v[n._length-1][0],n.v[n._length-1][1]]),r},vectorOnPath:function(e,t,n){e=1==e?this.v.c?0:.999:e;var r=this.pointOnPath(e,t),i=this.pointOnPath(e+.001,t),o=i[0]-r[0],a=i[1]-r[1],s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return 0===s?[0,0]:"tangent"===n?[o/s,a/s]:[-a/s,o/s]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([c],s),extendPrototype([c],l),l.prototype.getValueAtTime=function(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue},l.prototype.initiateExpression=ExpressionManager.initiateExpression;var u=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,n,r,i){var o=u(e,t,n,r,i);return o.propertyIndex=t.ix,o.lock=!1,3===n?expressionHelpers.searchExpressions(e,t.pt,o):4===n&&expressionHelpers.searchExpressions(e,t.ks,o),o.k&&e.addDynamicProperty(o),o}}(),TextProperty.prototype.getExpressionValue=function(e,t){var n=this.calculateExpression(t);if(e.t!==n){var r={};return this.copyData(r,e),r.t=n.toString(),r.__complete=!1,r}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=function(){if(this.data.d.x)return this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0};var ShapeExpressionInterface=function(){function e(e,h,d){var p,f=[],m=e?e.length:0;for(p=0;p<m;p+=1)"gr"==e[p].ty?f.push(t(e[p],h[p],d)):"fl"==e[p].ty?f.push(n(e[p],h[p],d)):"st"==e[p].ty?f.push(r(e[p],h[p],d)):"tm"==e[p].ty?f.push(i(e[p],h[p],d)):"tr"==e[p].ty||("el"==e[p].ty?f.push(o(e[p],h[p],d)):"sr"==e[p].ty?f.push(a(e[p],h[p],d)):"sh"==e[p].ty?f.push(u(e[p],h[p],d)):"rc"==e[p].ty?f.push(s(e[p],h[p],d)):"rd"==e[p].ty?f.push(l(e[p],h[p],d)):"rp"==e[p].ty&&f.push(c(e[p],h[p],d)));return f}function t(t,n,r){var i=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return i.content;default:return i.transform}};i.propertyGroup=function(e){return 1===e?i:r(e-1)};var o=function(t,n,r){var i,o=function(e){for(var t=0,n=i.length;t<n;){if(i[t]._name===e||i[t].mn===e||i[t].propertyIndex===e||i[t].ix===e||i[t].ind===e)return i[t];t+=1}if("number"==typeof e)return i[e-1]};return o.propertyGroup=function(e){return 1===e?o:r(e-1)},i=e(t.it,n.it,o.propertyGroup),o.numProperties=i.length,o.propertyIndex=t.cix,o._name=t.nm,o}(t,n,i.propertyGroup),a=function(e,t,n){function r(e){return 1==e?i:n(--e)}function i(t){return e.a.ix===t||"Anchor Point"===t?i.anchorPoint:e.o.ix===t||"Opacity"===t?i.opacity:e.p.ix===t||"Position"===t?i.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:e.s.ix===t||"Scale"===t?i.scale:e.sk&&e.sk.ix===t||"Skew"===t?i.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?i.skewAxis:void 0}return t.transform.mProps.o.setGroupProperty(r),t.transform.mProps.p.setGroupProperty(r),t.transform.mProps.a.setGroupProperty(r),t.transform.mProps.s.setGroupProperty(r),t.transform.mProps.r.setGroupProperty(r),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(r),t.transform.mProps.sa.setGroupProperty(r)),t.transform.op.setGroupProperty(r),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),i.ty="tr",i.mn=e.mn,i.propertyGroup=n,i}(t.it[t.it.length-1],n.it[n.it.length-1],i.propertyGroup);return i.content=o,i.transform=a,Object.defineProperty(i,"_name",{get:function(){return t.nm}}),i.numProperties=t.np,i.propertyIndex=t.ix,i.nm=t.nm,i.mn=t.mn,i}function n(e,t,n){function r(e){return"Color"===e||"color"===e?r.color:"Opacity"===e||"opacity"===e?r.opacity:void 0}return Object.defineProperties(r,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(n),t.o.setGroupProperty(n),r}function r(e,t,n){function r(e){return 1===e?ob:n(e-1)}function i(e){return 1===e?l:r(e-1)}function o(n){Object.defineProperty(l,e.d[n].nm,{get:ExpressionPropertyInterface(t.d.dataProps[n].p)})}var a,s=e.d?e.d.length:0,l={};for(a=0;a<s;a+=1)o(a),t.d.dataProps[a].p.setGroupProperty(i);function c(e){return"Color"===e||"color"===e?c.color:"Opacity"===e||"opacity"===e?c.opacity:"Stroke Width"===e||"stroke width"===e?c.strokeWidth:void 0}return Object.defineProperties(c,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(r),t.o.setGroupProperty(r),t.w.setGroupProperty(r),c}function i(e,t,n){function r(e){return 1==e?i:n(--e)}function i(t){return t===e.e.ix||"End"===t||"end"===t?i.end:t===e.s.ix?i.start:t===e.o.ix?i.offset:void 0}return i.propertyIndex=e.ix,t.s.setGroupProperty(r),t.e.setGroupProperty(r),t.o.setGroupProperty(r),i.propertyIndex=e.ix,i.propertyGroup=n,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),i.mn=e.mn,i}function o(e,t,n){function r(e){return 1==e?o:n(--e)}o.propertyIndex=e.ix;var i="tm"===t.sh.ty?t.sh.prop:t.sh;function o(t){return e.p.ix===t?o.position:e.s.ix===t?o.size:void 0}return i.s.setGroupProperty(r),i.p.setGroupProperty(r),Object.defineProperties(o,{size:{get:ExpressionPropertyInterface(i.s)},position:{get:ExpressionPropertyInterface(i.p)},_name:{value:e.nm}}),o.mn=e.mn,o}function a(e,t,n){function r(e){return 1==e?o:n(--e)}var i="tm"===t.sh.ty?t.sh.prop:t.sh;function o(t){return e.p.ix===t?o.position:e.r.ix===t?o.rotation:e.pt.ix===t?o.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?o.outerRadius:e.os.ix===t?o.outerRoundness:!e.ir||e.ir.ix!==t&&"ADBE Vector Star Inner Radius"!==t?e.is&&e.is.ix===t?o.innerRoundness:void 0:o.innerRadius}return o.propertyIndex=e.ix,i.or.setGroupProperty(r),i.os.setGroupProperty(r),i.pt.setGroupProperty(r),i.p.setGroupProperty(r),i.r.setGroupProperty(r),e.ir&&(i.ir.setGroupProperty(r),i.is.setGroupProperty(r)),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},rotation:{get:ExpressionPropertyInterface(i.r)},points:{get:ExpressionPropertyInterface(i.pt)},outerRadius:{get:ExpressionPropertyInterface(i.or)},outerRoundness:{get:ExpressionPropertyInterface(i.os)},innerRadius:{get:ExpressionPropertyInterface(i.ir)},innerRoundness:{get:ExpressionPropertyInterface(i.is)},_name:{value:e.nm}}),o.mn=e.mn,o}function s(e,t,n){function r(e){return 1==e?o:n(--e)}var i="tm"===t.sh.ty?t.sh.prop:t.sh;function o(t){return e.p.ix===t?o.position:e.r.ix===t?o.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?o.size:void 0}return o.propertyIndex=e.ix,i.p.setGroupProperty(r),i.s.setGroupProperty(r),i.r.setGroupProperty(r),Object.defineProperties(o,{position:{get:ExpressionPropertyInterface(i.p)},roundness:{get:ExpressionPropertyInterface(i.r)},size:{get:ExpressionPropertyInterface(i.s)},_name:{value:e.nm}}),o.mn=e.mn,o}function l(e,t,n){var r=t;function i(t){if(e.r.ix===t||"Round Corners 1"===t)return i.radius}return i.propertyIndex=e.ix,r.rd.setGroupProperty((function(e){return 1==e?i:n(--e)})),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(r.rd)},_name:{value:e.nm}}),i.mn=e.mn,i}function c(e,t,n){function r(e){return 1==e?o:n(--e)}var i=t;function o(t){return e.c.ix===t||"Copies"===t?o.copies:e.o.ix===t||"Offset"===t?o.offset:void 0}return o.propertyIndex=e.ix,i.c.setGroupProperty(r),i.o.setGroupProperty(r),Object.defineProperties(o,{copies:{get:ExpressionPropertyInterface(i.c)},offset:{get:ExpressionPropertyInterface(i.o)},_name:{value:e.nm}}),o.mn=e.mn,o}function u(e,t,n){var r=t.sh;function i(e){if("Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e)return i.path}return r.setGroupProperty((function(e){return 1==e?i:n(--e)})),Object.defineProperties(i,{path:{get:function(){return r.k&&r.getValue(),r}},shape:{get:function(){return r.k&&r.getValue(),r}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn}}),i}return function(t,n,r){var i;function o(e){if("number"==typeof e)return i[e-1];for(var t=0,n=i.length;t<n;){if(i[t]._name===e)return i[t];t+=1}}return o.propertyGroup=r,i=e(t,n,o),o.numProperties=i.length,o}}(),TextExpressionInterface=function(e){var t,n;function r(){}return Object.defineProperty(r,"sourceText",{get:function(){e.textProperty.getValue();var r=e.textProperty.currentData.t;return r!==t&&(e.textProperty.currentData.t=t,(n=new String(r)).value=r||new String(r)),n}}),r},LayerExpressionInterface=function(){function e(e,t){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.applyToPointArray(e[0],e[1],e[2]||0)}return n.applyToPointArray(e[0],e[1],e[2]||0)}function t(e,t){var n=new Matrix;if(n.reset(),this._elem.finalTransform.mProp.applyToMatrix(n),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(n);return n.inversePoint(e)}return n.inversePoint(e)}function n(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var n,r=this._elem.hierarchy.length;for(n=0;n<r;n+=1)this._elem.hierarchy[n].finalTransform.mProp.applyToMatrix(t);return t.inversePoint(e)}return t.inversePoint(e)}function r(){return[1,1,1,1]}return function(i){var o;function a(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return a.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return o;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return a.effect}}a.toWorld=e,a.fromWorld=t,a.toComp=e,a.fromComp=n,a.sampleImage=r,a.sourceRectAtTime=i.sourceRectAtTime.bind(i),a._elem=i;var s=getDescriptor(o=TransformExpressionInterface(i.finalTransform.mProp),"anchorPoint");return Object.defineProperties(a,{hasParent:{get:function(){return i.hierarchy.length}},parent:{get:function(){return i.hierarchy[0].layerInterface}},rotation:getDescriptor(o,"rotation"),scale:getDescriptor(o,"scale"),position:getDescriptor(o,"position"),opacity:getDescriptor(o,"opacity"),anchorPoint:s,anchor_point:s,transform:{get:function(){return o}},active:{get:function(){return i.isInRange}}}),a.startTime=i.data.st,a.index=i.data.ind,a.source=i.data.refId,a.height=0===i.data.ty?i.data.h:100,a.width=0===i.data.ty?i.data.w:100,a.inPoint=i.data.ip/i.comp.globalData.frameRate,a.outPoint=i.data.op/i.comp.globalData.frameRate,a._name=i.data.nm,a.registerMaskInterface=function(e){a.mask=new MaskManagerInterface(e,i)},a.registerEffectsInterface=function(e){a.effect=e},a}}(),CompExpressionInterface=function(e){function t(t){for(var n=0,r=e.layers.length;n<r;){if(e.layers[n].nm===t||e.layers[n].ind===t)return e.elements[n].layerInterface;n+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t},TransformExpressionInterface=function(e){function t(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return t.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return t.rotation;case"ADBE Rotate X":return t.xRotation;case"ADBE Rotate Y":return t.yRotation;case"position":case"Position":case"ADBE Position":case 2:return t.position;case"ADBE Position_0":return t.xPosition;case"ADBE Position_1":return t.yPosition;case"ADBE Position_2":return t.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return t.anchorPoint;case"opacity":case"Opacity":case 11:return t.opacity}}if(Object.defineProperty(t,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(t,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(t,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(t,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(t,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p)var n=ExpressionPropertyInterface(e.p);return Object.defineProperty(t,"position",{get:function(){return e.p?n():[e.px.v,e.py.v,e.pz?e.pz.v:0]}}),Object.defineProperty(t,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(t,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(t,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(t,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(t,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(t,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(t,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(t,"orientation",{get:ExpressionPropertyInterface(e.or)}),t},ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,n=this.compositions.length;t<n;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),EffectsExpressionInterface=function(){function e(n,r,i,o){var a,s=[],l=n.ef.length;for(a=0;a<l;a+=1)5===n.ef[a].ty?s.push(e(n.ef[a],r.effectElements[a],r.effectElements[a].propertyGroup,o)):s.push(t(r.effectElements[a],n.ef[a].ty,o,c));function c(e){return 1===e?u:i(e-1)}var u=function(e){for(var t=n.ef,r=0,i=t.length;r<i;){if(e===t[r].nm||e===t[r].mn||e===t[r].ix)return 5===t[r].ty?s[r]:s[r]();r+=1}return s[0]()};return u.propertyGroup=c,"ADBE Color Control"===n.mn&&Object.defineProperty(u,"color",{get:function(){return s[0]()}}),Object.defineProperty(u,"numProperties",{get:function(){return n.np}}),u.active=u.enabled=0!==n.en,u}function t(e,t,n,r){var i=ExpressionPropertyInterface(e.p);return e.p.setGroupProperty&&e.p.setGroupProperty(r),function(){return 10===t?n.comp.compInterface(e.p.v):i()}}return{createEffectsInterface:function(t,n){if(t.effectsManager){var r,i=[],o=t.data.ef,a=t.effectsManager.effectElements.length;for(r=0;r<a;r+=1)i.push(e(o[r],t.effectsManager.effectElements[r],n,t));return function(e){for(var n=t.data.ef||[],r=0,o=n.length;r<o;){if(e===n[r].nm||e===n[r].mn||e===n[r].ix)return i[r];r+=1}}}}}}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t,n){var r,i=createSizedArray(t.viewData.length),o=t.viewData.length;for(r=0;r<o;r+=1)i[r]=new e(t.viewData[r],t.masksProperties[r]);return function(e){for(r=0;r<o;){if(t.masksProperties[r].nm===e)return i[r];r+=1}}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function n(e,t,n){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(r){if(e.numKeys){var i;i="s"in t.keyframes[r-1]?t.keyframes[r-1].s:"e"in t.keyframes[r-2]?t.keyframes[r-2].e:t.keyframes[r-2].s;var o="unidimensional"===n?new Number(i):Object.assign({},i);return o.time=t.keyframes[r-1].t/t.elem.comp.globalData.frameRate,o}return 0},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function r(){return e}return function(i){return i?"unidimensional"===i.propType?function(t){t&&"pv"in t||(t=e);var r=1/t.mult,i=t.pv*r,o=new Number(i);return o.value=i,n(o,t,"unidimensional"),function(){return t.k&&t.getValue(),i=t.v*r,o.value!==i&&((o=new Number(i)).value=i,n(o,t,"unidimensional")),o}}(i):function(e){e&&"pv"in e||(e=t);var r=1/e.mult,i=e.pv.length,o=createTypedArray("float32",i),a=createTypedArray("float32",i);return o.value=a,n(o,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<i;t+=1)o[t]=a[t]=e.v[t]*r;return o}}(i):r}}(),TextExpressionSelectorProp,propertyGetTextProp;function SliderEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function AngleEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function ColorEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function PointEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,1,0,n)}function LayerIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function MaskIndexEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function CheckboxEffect(e,t,n){this.p=PropertyFactory.getProp(t,e.v,0,0,n)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(e,t){var n=e.ef||[];this.effectElements=[];var r,i,o=n.length;for(r=0;r<o;r++)i=new GroupEffect(n[r],t),this.effectElements.push(i)}function GroupEffect(e,t){this.init(e,t)}TextExpressionSelectorProp=function(){function e(e,t){return this.textIndex=e+1,this.textTotal=t,this.v=this.getValue()*this.mult,this.v}return function(t,n){this.pv=1,this.comp=t.comp,this.elem=t,this.mult=.01,this.propType="textSelector",this.textTotal=n.totalChars,this.selectorValue=100,this.lastValue=[1,1,1],this.k=!0,this.x=!0,this.getValue=ExpressionManager.initiateExpression.bind(this)(t,n,this),this.getMult=e,this.getVelocityAtTime=expressionHelpers.getVelocityAtTime,this.kf?this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this):this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this),this.setGroupProperty=expressionHelpers.setGroupProperty}}(),propertyGetTextProp=TextSelectorProp.getTextSelectorProp,TextSelectorProp.getTextSelectorProp=function(e,t,n){return 1===t.t?new TextExpressionSelectorProp(e,t,n):propertyGetTextProp(e,t,n)},extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var n,r,i=this.data.ef.length,o=this.data.ef;for(n=0;n<i;n+=1){switch(r=null,o[n].ty){case 0:r=new SliderEffect(o[n],t,this);break;case 1:r=new AngleEffect(o[n],t,this);break;case 2:r=new ColorEffect(o[n],t,this);break;case 3:r=new PointEffect(o[n],t,this);break;case 4:case 7:r=new CheckboxEffect(o[n],t,this);break;case 10:r=new LayerIndexEffect(o[n],t,this);break;case 11:r=new MaskIndexEffect(o[n],t,this);break;case 5:r=new EffectsManager(o[n],t,this);break;default:r=new NoValueEffect(o[n],t,this)}r&&this.effectElements.push(r)}};var lottie={},_isFrozen=!1;function setLocationHref(e){locationHref=e}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){subframeEnabled=e}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10}else!isNaN(e)&&e>1&&(defaultCurveSegments=e);roundValues(!(defaultCurveSegments>=50))}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&(expressionsPlugin=t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),n=0;n<t.length;n++){var r=t[n].split("=");if(decodeURIComponent(r[0])==e)return decodeURIComponent(r[1])}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocationHref,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.__getFactory=getFactory,lottie.version="5.6.2";var standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""},queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"";renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottie},void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return factory(root)}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},5436:(e,t,n)=>{var r={"./components/3d-model-text/webpack.module/index.js":6807,"./components/accessories-grid/webpack.module/index.js":808,"./components/accessory/webpack.module/index.js":8927,"./components/accordion/webpack.module/index.js":9853,"./components/article-tiles-container/webpack.module/index.js":394,"./components/audio-hotspots/webpack.module/index.js":1174,"./components/audio-podcast/webpack.module/index.js":6717,"./components/block-quote/webpack.module/index.js":8527,"./components/brochure-list/webpack.module/index.js":7406,"./components/classic-carousel/webpack.module/index.js":2423,"./components/collections-grid/webpack.module/index.js":9367,"./components/collections-hero/webpack.module/index.js":3385,"./components/color-picker/webpack.module/index.js":6898,"./components/continue-tout/webpack.module/index.js":4183,"./components/cookie-banner/webpack.module/index.js":9570,"./components/countdown-timer/webpack.module/index.js":6382,"./components/cta-aligner/webpack.module/index.js":3224,"./components/cta/webpack.module/index.js":7482,"./components/dealer-locator/webpack.module/index.js":6574,"./components/divider/webpack.module/index.js":5964,"./components/download-link/webpack.module/index.js":446,"./components/emissions-tout/webpack.module/index.js":7768,"./components/enquire-block/webpack.module/index.js":7964,"./components/expanding-image-fade/webpack.module/index.js":1734,"./components/expanding-image-mask/webpack.module/index.js":2800,"./components/extended-warranty/webpack.module/index.js":7719,"./components/find-us/webpack.module/index.js":3626,"./components/footer/webpack.module/index.js":5e3,"./components/form/webpack.module/index.js":2870,"./components/hero-image/webpack.module/index.js":9389,"./components/hero-parallax/webpack.module/index.js":6387,"./components/hero-video-mask/webpack.module/index.js":5956,"./components/hero-video/webpack.module/index.js":2023,"./components/homepage-carousel/webpack.module/index.js":7656,"./components/image-hover-reveal-max/webpack.module/index.js":9028,"./components/image-hover-reveal/webpack.module/index.js":3176,"./components/image-scratch-reveal/webpack.module/index.js":8502,"./components/image-switch/webpack.module/index.js":7285,"./components/kryptos-quiz/webpack.module/index.js":9905,"./components/language-selector/webpack.module/index.js":4772,"./components/link-banner/webpack.module/index.js":9128,"./components/long-copy/webpack.module/index.js":2503,"./components/meet-the-team/webpack.module/index.js":2360,"./components/multi-image-carousel/webpack.module/index.js":9515,"./components/my-list/webpack.module/index.js":380,"./components/no-locale-banner/webpack.module/index.js":2398,"./components/off-grid-carousel/webpack.module/index.js":4756,"./components/overlay/webpack.module/index.js":3607,"./components/page/webpack.module/index.js":9060,"./components/parallax-image-text/webpack.module/index.js":7836,"./components/parallax-images-block/webpack.module/index.js":5594,"./components/parallax-interactive/webpack.module/index.js":6963,"./components/password-protected-area/webpack.module/index.js":3651,"./components/pdf-dropdown/webpack.module/index.js":5097,"./components/podcast-trailer/webpack.module/index.js":573,"./components/primary-navigation/webpack.module/index.js":1572,"./components/provenance/webpack.module/index.js":976,"./components/rich-text/webpack.module/index.js":7649,"./components/rr25-overlay-switch/webpack.module/index.js":2462,"./components/rr25/webpack.module/index.js":3e3,"./components/scroll-animation/webpack.module/index.js":9841,"./components/scroll-video-animation/webpack.module/index.js":6579,"./components/secondary-navigation/webpack.module/index.js":3860,"./components/section-adaptive/webpack.module/index.js":4241,"./components/section-sticky-video/webpack.module/index.js":3796,"./components/section/webpack.module/index.js":9198,"./components/spacer/webpack.module/index.js":5161,"./components/styleguide/webpack.module/index.js":5332,"./components/table/webpack.module/index.js":159,"./components/tempus-360/webpack.module/index.js":2629,"./components/tertiary-navigation/webpack.module/index.js":5314,"./components/toggle/webpack.module/index.js":7209,"./components/tout/webpack.module/index.js":6937,"./components/vehicle-recall/webpack.module/index.js":5931,"./components/vertical-scrolling-image-text/webpack.module/index.js":9591,"./components/video-player/webpack.module/index.js":376};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=5436},6807:(e,t,n)=>{"use strict";n.r(t);var r=n(9437),i=.001,o=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*i}get fixedDelta(){return this._fixedDelta*i}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*i}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},a=new r.i7d,s=null,l=class e{constructor(e="Pass",t=new r.Z58,n=a){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new r.eaF(function(){if(null===s){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(s=new r.LoY).setAttribute?(s.setAttribute("position",new r.THS(e,3)),s.setAttribute("uv",new r.THS(t,2))):(s.addAttribute("position",new r.THS(e,3)),s.addAttribute("uv",new r.THS(t,2)))}return s}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new r.Z58),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=r.Rkk){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const t of Object.keys(this)){const n=this[t];(n instanceof r.nWS||n instanceof r.imn||n instanceof r.gPd||n instanceof e)&&this[t].dispose()}}},c=class extends l{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},u=Number(r.sPf.replace(/\D+/g,""));function h(e){return u<154?e.replace("colorspace_fragment","encodings_fragment"):e}var d=class extends r.BKk{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new r.nc$(null),opacity:new r.nc$(1)},blending:r.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=h(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},p=class extends l{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new d,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new r.nWS(1,1,{minFilter:r.k6q,magFilter:r.k6q,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,n,r,i){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,n){void 0!==n&&(this.renderTarget.texture.type=n,n!==r.OUM?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":null!==e&&e.outputColorSpace===r.er$&&(this.renderTarget.texture.colorSpace=r.er$))}},f=new r.Q1f,m=class extends l{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,n){this.color=e,this.depth=t,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,n,r,i){const o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),l=null!==o,c=a>=0;l?(e.getClearColor(f),e.setClearColor(o,c?a:s)):c&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(f,s):c&&e.setClearAlpha(s)}},v=class extends l{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new m(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,n,r,i){const o=e.getContext(),a=e.state.buffers,s=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,l)):(e.setRenderTarget(t),e.render(s,l),e.setRenderTarget(n),e.render(s,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},g=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new p,this.depthTexture=null,this.passes=[],this.timer=new o,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new r.I9Y),n=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===r.OUM&&e.outputColorSpace===r.er$&&(this.inputBuffer.texture.colorSpace=r.er$,this.outputBuffer.texture.colorSpace=r.er$,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const t of this.passes)t.initialize(e,n,i)}}replaceRenderer(e,t=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(e),t&&null!==r&&(r.removeChild(n.domElement),r.appendChild(e.domElement)),n}createDepthTexture(){const e=this.depthTexture=new r.VCu;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=r.dcC,e.type=r.V3x):e.type=r.bkx,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i){const o=this.renderer,a=null===o?new r.I9Y:o.getDrawingBufferSize(new r.I9Y),s={minFilter:r.k6q,magFilter:r.k6q,stencilBuffer:t,depthBuffer:e,type:n},l=new r.nWS(a.width,a.height,s);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),n===r.OUM&&null!==o&&o.outputColorSpace===r.er$&&(l.texture.colorSpace=r.er$),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const n=this.passes,i=this.renderer,o=i.getDrawingBufferSize(new r.I9Y),a=i.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(o.width,o.height),e.initialize(i,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,i,o,a=this.inputBuffer,s=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.getDelta());for(const u of this.passes)u.enabled&&(u.render(t,a,s,e,l),u.needsSwap&&(l&&(n.renderToScreen=u.renderToScreen,r=t.getContext(),i=t.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,a,s,e,l),i.setFunc(r.EQUAL,1,4294967295)),o=a,a=s,s=o),u instanceof v?l=!0:u instanceof c&&(l=!1))}setSize(e,t,n){const i=this.renderer,o=i.getSize(new r.I9Y);void 0!==e&&void 0!==t||(e=o.width,t=o.height),o.width===e&&o.height===t||i.setSize(e,t,n);const a=i.getDrawingBufferSize(new r.I9Y);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const e of this.passes)e.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},y={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},_=class{constructor(){this.shaderParts=new Map([[y.FRAGMENT_HEAD,null],[y.FRAGMENT_MAIN_UV,null],[y.FRAGMENT_MAIN_IMAGE,null],[y.VERTEX_HEAD,null],[y.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=0,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=r.Zr2}};var b=!1,w=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case r.$EB:t=this.materialsFlatShadedDoubleSide;break;case r.hsX:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case r.$EB:t=this.materialsDoubleSide;break;case r.hsX:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof r.BKk))return e.clone();const t=e.uniforms,n=new Map;for(const e in t){const r=t[e].value;r.isRenderTargetTexture&&(t[e].value=null,n.set(e,r))}const i=e.clone();for(const e of n)t[e[0]].value=e[1],i.uniforms[e[0]].value=e[1];return i}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=r.hB5;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=r.hsX,n})),this.materialsDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.side=r.$EB,n})),this.materialsFlatShaded=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=r.hsX,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=r.$EB,n}))}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,b){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return b}static set workaroundEnabled(e){b=e}},x=(r.Qev,Set,{SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32}),S=new Map([[x.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[x.ALPHA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[x.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[x.COLOR,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[x.COLOR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[x.COLOR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[x.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[x.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[x.DIVIDE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[x.DST,null],[x.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[x.HARD_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[x.HARD_MIX,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[x.HUE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[x.INVERT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[x.INVERT_RGB,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[x.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[x.LINEAR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[x.LINEAR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[x.LINEAR_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[x.LUMINOSITY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[x.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[x.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[x.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[x.OVERLAY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[x.PIN_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[x.REFLECT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[x.SATURATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[x.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[x.SOFT_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[x.SRC,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[x.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[x.VIVID_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),E=class extends r.Qev{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new r.nc$(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return S.get(this.blendFunction)}},k=(new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10]),r.BKk,r.BKk,r.BKk,r.BKk,class extends r.Qev{constructor(e,t,{attributes:n=0,blendFunction:i=x.NORMAL,defines:o=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:l=null}={}){super(),this.name=e,this.renderer=null,this.attributes=n,this.fragmentShader=t,this.vertexShader=l,this.defines=o,this.uniforms=a,this.extensions=s,this.blendMode=new E(i),this.blendMode.addEventListener("change",(e=>this.setChanged())),this._inputColorSpace=r.Zr2,this._outputColorSpace=r.jf0}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=r.Rkk){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof r.nWS||t instanceof r.imn||t instanceof r.gPd||t instanceof l)&&this[e].dispose()}}}),T=class extends k{constructor({blendFunction:e=x.SRC,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new r.nc$(t)],["contrast",new r.nc$(n)]])}),this.inputColorSpace=r.er$}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(){return this.contrast}setContrast(e){this.contrast=e}},A=class extends k{constructor(e){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}};r.BKk,r.BKk,r.BKk,r.GYF;var C=(r.BKk,r.BKk,class extends l{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new m,this.overrideMaterialManager=null===n?null:new w(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new w(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const o=this.scene,a=this.camera,s=this.selection,l=a.layers.mask,c=o.background,u=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==s&&a.layers.set(s.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,a):e.render(o,a),a.layers.mask=l,o.background=c,e.shadowMap.autoUpdate=u}}),M=class extends k{constructor({blendFunction:e=x.SRC,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new r.nc$(new r.Pq0)],["saturation",new r.nc$(n)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){const e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){const t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}};r.dYF;var L=(r.BKk,r.BKk,Math.PI,r.BKk,r.BKk,r.BKk,r.BKk,r.BKk,r.BKk,r.BKk,class extends r.BKk{constructor(e,t,n,i,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:r.sPf.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new r.nc$(null),depthBuffer:new r.nc$(null),resolution:new r.nc$(new r.I9Y),texelSize:new r.nc$(new r.I9Y),cameraNear:new r.nc$(.3),cameraFar:new r.nc$(1e3),aspect:new r.nc$(1),time:new r.nc$(0)},blending:r.XIg,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),e&&this.setShaderParts(e),t&&this.setDefines(t),n&&this.setUniforms(n),this.copyCameraSettings(i)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=r.Rkk){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(y.FRAGMENT_HEAD,e.get(y.FRAGMENT_HEAD)||"").replace(y.FRAGMENT_MAIN_UV,e.get(y.FRAGMENT_MAIN_UV)||"").replace(y.FRAGMENT_MAIN_IMAGE,e.get(y.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(y.VERTEX_HEAD,e.get(y.VERTEX_HEAD)||"").replace(y.VERTEX_MAIN_SUPPORT,e.get(y.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=h(this.fragmentShader),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof r.ubm?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=this.uniforms;n.resolution.value.set(e,t),n.texelSize.value.set(1/e,1/t),n.aspect.value=e/t}static get Section(){return y}});function R(e,t,n){for(const r of t){const t="$1"+e+r.charAt(0).toUpperCase()+r.slice(1),i=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,t))}}function P(e,t,n){let i=t.getFragmentShader(),o=t.getVertexShader();const a=void 0!==i&&/mainImage/.test(i),s=void 0!==i&&/mainUv/.test(i);if(n.attributes|=t.getAttributes(),void 0===i)throw new Error(`Missing fragment shader (${t.name})`);if(s&&2&n.attributes)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=n.shaderParts;let u=c.get(y.FRAGMENT_HEAD)||"",h=c.get(y.FRAGMENT_MAIN_UV)||"",d=c.get(y.FRAGMENT_MAIN_IMAGE)||"",p=c.get(y.VERTEX_HEAD)||"",f=c.get(y.VERTEX_MAIN_SUPPORT)||"";const m=new Set,v=new Set;if(s&&(h+=`\t${e}MainUv(UV);\n`,n.uvTransformation=!0),null!==o&&/mainSupport/.test(o)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);f+=`\t${e}MainSupport(`,f+=t?"vUv);\n":");\n";for(const e of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const t of e[1].split(/\s*,\s*/))n.varyings.add(t),m.add(t),v.add(t);for(const e of o.matchAll(l))v.add(e[1])}for(const e of i.matchAll(l))v.add(e[1]);for(const e of t.defines.keys())v.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())v.add(e);v.delete("while"),v.delete("for"),v.delete("if"),t.uniforms.forEach(((t,r)=>n.uniforms.set(e+r.charAt(0).toUpperCase()+r.slice(1),t))),t.defines.forEach(((t,r)=>n.defines.set(e+r.charAt(0).toUpperCase()+r.slice(1),t)));const g=new Map([["fragment",i],["vertex",o]]);R(e,v,n.defines),R(e,v,g),i=g.get("fragment"),o=g.get("vertex");const _=t.blendMode;if(n.blendModes.set(_.blendFunction,_),a){null!==t.inputColorSpace&&t.inputColorSpace!==n.colorSpace&&(d+=t.inputColorSpace===r.er$?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),t.outputColorSpace!==r.jf0?n.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(n.colorSpace=t.inputColorSpace);const o=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;d+=`${e}MainImage(color0, UV, `,1&n.attributes&&o.test(i)&&(d+="depth, ",n.readDepth=!0),d+="color1);\n\t";const a=e+"BlendOpacity";n.uniforms.set(a,_.opacity),d+=`color0 = blend${_.blendFunction}(color0, color1, ${a});\n\n\t`,u+=`uniform float ${a};\n\n`}if(u+=i+"\n",null!==o&&(p+=o+"\n"),c.set(y.FRAGMENT_HEAD,u),c.set(y.FRAGMENT_MAIN_UV,h),c.set(y.FRAGMENT_MAIN_IMAGE,d),c.set(y.VERTEX_HEAD,p),c.set(y.VERTEX_MAIN_SUPPORT,f),null!==t.extensions)for(const e of t.extensions)n.extensions.add(e)}}r.BKk,new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);var I=class extends l{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new L(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=e.sort(((e,t)=>t.attributes-e.attributes));for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const e=new _;let t=0;for(const n of this.effects)if(n.blendMode.blendFunction===x.DST)e.attributes|=1&n.getAttributes();else{if(e.attributes&n.getAttributes()&2)throw new Error(`Convolution effects cannot be merged (${n.name})`);P("e"+t++,n,e)}let n=e.shaderParts.get(y.FRAGMENT_HEAD),i=e.shaderParts.get(y.FRAGMENT_MAIN_IMAGE),o=e.shaderParts.get(y.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const t of e.blendModes.values())n+=t.getShaderCode().replace(a,`blend${t.blendFunction}`)+"\n";1&e.attributes?(e.readDepth&&(i="float depth = readDepth(UV);\n\n\t"+i),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===r.er$&&(i+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(o="vec2 transformedUv = vUv;\n"+o,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(y.FRAGMENT_HEAD,n),e.shaderParts.set(y.FRAGMENT_MAIN_IMAGE,i),e.shaderParts.set(y.FRAGMENT_MAIN_UV,o);for(const[t,n]of e.shaderParts)null!==n&&e.shaderParts.set(t,n.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=r.Rkk){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){for(const n of this.effects)n.update(e,t,r);if(!this.skipRendering||this.renderToScreen){const i=this.fullscreenMaterial;i.inputBuffer=t.texture,i.time+=r*this.timeScale,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){this.renderer=e;for(const r of this.effects)r.initialize(e,t,n);this.updateMaterial(),void 0!==n&&n!==r.OUM&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}};function D(e,t,n){return e+(t-e)*n}function O(e,t,n,r){const i=D(e,t,.75),o=D(n,r,.75);return D(i,o,.875)}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),O(0,0,0,0),new Float32Array([0,0,0,0]),O(0,0,0,1),new Float32Array([0,0,0,1]),O(0,0,1,0),new Float32Array([0,0,1,0]),O(0,0,1,1),new Float32Array([0,0,1,1]),O(0,1,0,0),new Float32Array([0,1,0,0]),O(0,1,0,1),new Float32Array([0,1,0,1]),O(0,1,1,0),new Float32Array([0,1,1,0]),O(0,1,1,1),new Float32Array([0,1,1,1]),O(1,0,0,0),new Float32Array([1,0,0,0]),O(1,0,0,1),new Float32Array([1,0,0,1]),O(1,0,1,0),new Float32Array([1,0,1,0]),O(1,0,1,1),new Float32Array([1,0,1,1]),O(1,1,0,0),new Float32Array([1,1,0,0]),O(1,1,0,1),new Float32Array([1,1,0,1]),O(1,1,1,0),new Float32Array([1,1,1,0]),O(1,1,1,1),new Float32Array([1,1,1,1]);var B=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"ambientLight",value:function(){return new r.$p8("#FFFFFF",1)}},{key:"pointLight",value:function(){var e=new r.HiM;return e.position.set(10,10,10),e}},{key:"directionalLight",value:function(e,t,n,i,o){var a=new r.B69;a.position.copy(o),e.add(a);var s=new r.ZyN(t,n);return s.position.copy(i),s.target=a,s}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function U(e,t){if(t===r.RJ4)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===r.rYR||t===r.O49){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,o=[];if(t===r.rYR)for(let e=1;e<=i;e++)o.push(n.getX(0)),o.push(n.getX(e)),o.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(o.push(n.getX(e)),o.push(n.getX(e+1)),o.push(n.getX(e+2))):(o.push(n.getX(e+2)),o.push(n.getX(e+1)),o.push(n.getX(e)));o.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const a=e.clone();return a.setIndex(o),a.clearGroups(),a}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class z extends r.aHM{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new Y(e)})),this.register((function(e){return new ee(e)})),this.register((function(e){return new te(e)})),this.register((function(e){return new ne(e)})),this.register((function(e){return new K(e)})),this.register((function(e){return new $(e)})),this.register((function(e){return new J(e)})),this.register((function(e){return new Z(e)})),this.register((function(e){return new W(e)})),this.register((function(e){return new Q(e)})),this.register((function(e){return new X(e)})),this.register((function(e){return new q(e)})),this.register((function(e){return new re(e)})),this.register((function(e){return new ie(e)}))}load(e,t,n,i){const o=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:r.r6x.extractUrlBase(e),this.manager.itemStart(e);const s=function(t){i?i(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},l=new r.Y9S(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{o.parse(n,a,(function(n){t(n),o.manager.itemEnd(e)}),s)}catch(e){s(e)}}),n,s)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={},s=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer)if(s.decode(new Uint8Array(e,0,4))===oe){try{o[H.KHR_BINARY_GLTF]=new ae(e)}catch(e){return void(r&&r(e))}i=JSON.parse(o[H.KHR_BINARY_GLTF].content)}else i=JSON.parse(s.decode(e));else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new Me(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](l);a[t.name]=t,o[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case H.KHR_MATERIALS_UNLIT:o[t]=new V;break;case H.KHR_DRACO_MESH_COMPRESSION:o[t]=new se(i,this.dracoLoader);break;case H.KHR_TEXTURE_TRANSFORM:o[t]=new le;break;case H.KHR_MESH_QUANTIZATION:o[t]=new ce;break;default:n.indexOf(t)>=0&&void 0===a[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function G(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const H={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class q{constructor(e){this.parser=e,this.name=H.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let s;const l=new r.Q1f(16777215);void 0!==a.color&&l.fromArray(a.color);const c=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new r.ZyN(l),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new r.HiM(l),s.distance=c;break;case"spot":s=new r.nCl(l),s.distance=c,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,Se(s,a),void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),i=Promise.resolve(s),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class V{constructor(){this.name=H.KHR_MATERIALS_UNLIT}getMaterialType(){return r.V9B}extendParams(e,t,n){const i=[];e.color=new r.Q1f(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&i.push(n.assignTexture(e,"map",o.baseColorTexture,r.er$))}return Promise.all(i)}}class W{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class Y{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.I9Y(e,e)}return Promise.all(o)}}class X{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class K{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[];t.sheenColor=new r.Q1f(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=i.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&o.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,r.er$)),void 0!==a.sheenRoughnessTexture&&o.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(o)}}class ${constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class J{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&o.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const s=a.attenuationColor||[1,1,1];return t.attenuationColor=new r.Q1f(s[0],s[1],s[2]),Promise.all(o)}}class Z{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class Q{constructor(e){this.parser=e,this.name=H.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.uSd:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const o=[],a=i.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&o.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularColor=new r.Q1f(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&o.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,r.er$)),Promise.all(o)}}class ee{constructor(e){this.parser=e,this.name=H.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,o)}}class te{constructor(e){this.parser=e,this.name=H.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class ne{constructor(e){this.parser=e,this.name=H.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class re{constructor(e){this.name=H.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t}))}))}return null}}class ie{constructor(e){this.name=H.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const e of i.primitives)if(e.mode!==pe.TRIANGLES&&e.mode!==pe.TRIANGLE_STRIP&&e.mode!==pe.TRIANGLE_FAN&&void 0!==e.mode)return null;const o=n.extensions[this.name].attributes,a=[],s={};for(const e in o)a.push(this.parser.getDependency("accessor",o[e]).then((t=>(s[e]=t,s[e]))));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,o=[];for(const e of n){const t=new r.kn4,n=new r.Pq0,a=new r.PTz,l=new r.Pq0(1,1,1),c=new r.ZLX(e.geometry,e.material,i);for(let e=0;e<i;e++)s.TRANSLATION&&n.fromBufferAttribute(s.TRANSLATION,e),s.ROTATION&&a.fromBufferAttribute(s.ROTATION,e),s.SCALE&&l.fromBufferAttribute(s.SCALE,e),c.setMatrixAt(e,t.compose(n,a,l));for(const t in s)"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,s[t]);r.B69.prototype.copy.call(c,e),this.parser.assignFinalMaterial(c),o.push(c)}return t.isGroup?(t.clear(),t.add(...o),t):o[0]})))}}const oe="glTF";class ae{constructor(e){this.name=H.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==oe)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(e,12);let o=0;for(;o<r;){const t=i.getUint32(o,!0);o+=4;const r=i.getUint32(o,!0);if(o+=4,1313821514===r){const r=new Uint8Array(e,12+o,t);this.content=n.decode(r)}else if(5130562===r){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class se{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=H.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const e in o){const t=ye[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const r=ye[t]||t.toLowerCase();if(void 0!==o[t]){const i=n.accessors[e.attributes[t]],o=fe[i.componentType];l[r]=o.name,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l)}))}))}}class le{constructor(){this.name=H.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class ce{constructor(){this.name=H.KHR_MESH_QUANTIZATION}}class ue extends r.lGw{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=r-t,u=(n-t)/c,h=u*u,d=h*u,p=e*l,f=p-l,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+u;for(let e=0;e!==a;e++){const t=o[f+e+a],n=o[f+e+s]*c,r=o[p+e+a],l=o[p+e]*c;i[e]=g*t+y*n+m*r+v*l}return i}}const he=new r.PTz;class de extends ue{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return he.fromArray(i).normalize().toArray(i),i}}const pe={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},fe={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},me={9728:r.hxR,9729:r.k6q,9984:r.pHI,9985:r.kRr,9986:r.Cfg,9987:r.$_I},ve={33071:r.ghU,33648:r.kTW,10497:r.GJx},ge={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ye={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_e={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},be={CUBICSPLINE:void 0,LINEAR:r.PJ3,STEP:r.ljd};function we(e){return void 0===e.DefaultMaterial&&(e.DefaultMaterial=new r._4j({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.hB5})),e.DefaultMaterial}function xe(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Se(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Ee(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function ke(e){const t=e.extensions&&e.extensions[H.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+Te(t.attributes):e.indices+":"+Te(e.attributes)+":"+e.mode,n}function Te(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Ae(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Ce=new r.kn4;class Me{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new G,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,o=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,o=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&o<98?this.textureLoader=new r.Tap(this.options.manager):this.textureLoader=new r.Kzg(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.Y9S(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};xe(i,o,r),Se(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[H.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,o){n.load(r.r6x.resolveURL(t.uri,i.path),e,void 0,(function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=ge[i.type],t=fe[i.componentType],n=!0===i.normalized,o=new t(i.count*e);return Promise.resolve(new r.THS(o,e,n))}const o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],a=ge[i.type],s=fe[i.componentType],l=s.BYTES_PER_ELEMENT,c=l*a,u=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let p,f;if(h&&h!==c){const e=Math.floor(u/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let c=t.cache.get(n);c||(p=new s(o,e*h,i.count*h/l),c=new r.eB$(p,h/l),t.cache.add(n,c)),f=new r.eHs(c,a,u%h/l,d)}else p=null===o?new s(i.count*a):new s(o,u,i.count*a),f=new r.THS(p,a,d);if(void 0!==i.sparse){const t=ge.SCALAR,n=fe[i.sparse.indices.componentType],l=i.sparse.indices.byteOffset||0,c=i.sparse.values.byteOffset||0,u=new n(e[1],l,i.sparse.count*t),h=new s(e[2],c,i.sparse.count*a);null!==o&&(f=new r.THS(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(f.setX(t,h[e*a]),a>=2&&f.setY(t,h[e*a+1]),a>=3&&f.setZ(t,h[e*a+2]),a>=4&&f.setW(t,h[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const i=this,o=this.json,a=o.textures[e],s=o.images[t],l=(s.uri||s.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=a.name||s.name||"",""===t.name&&"string"==typeof s.uri&&!1===s.uri.startsWith("data:image/")&&(t.name=s.uri);const n=(o.samplers||{})[a.sampler]||{};return t.magFilter=me[n.magFilter]||r.k6q,t.minFilter=me[n.minFilter]||r.$_I,t.wrapS=ve[n.wrapS]||r.GJx,t.wrapT=ve[n.wrapT]||r.GJx,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[l]=c,c}loadImageSource(e,t){const n=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=n.images[e],a=self.URL||self.webkitURL;let s=o.uri||"",l=!1;if(void 0!==o.bufferView)s=this.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return s=a.createObjectURL(t),s}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(s).then((function(e){return new Promise((function(n,o){let a=n;!0===t.isImageBitmapLoader&&(a=function(e){const t=new r.gPd(e);t.needsUpdate=!0,n(t)}),t.load(r.r6x.resolveURL(e,i.path),a,void 0,o)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(s),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),i.extensions[H.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[H.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(o);o=i.extensions[H.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.BH$,r.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.mrM,r.imn.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||o||a){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),o&&(t.vertexColors=!0),a&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return r._4j}loadMaterial(e){const t=this,n=this.json,i=this.extensions,o=n.materials[e];let a;const s={},l=[];if((o.extensions||{})[H.KHR_MATERIALS_UNLIT]){const e=i[H.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),l.push(e.extendParams(s,o,t))}else{const n=o.pbrMetallicRoughness||{};if(s.color=new r.Q1f(1,1,1),s.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;s.color.fromArray(e),s.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(s,"map",n.baseColorTexture,r.er$)),s.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,s.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(s,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(s,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,s)}))))}!0===o.doubleSided&&(s.side=r.$EB);const c=o.alphaMode||"OPAQUE";if("BLEND"===c?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,"MASK"===c&&(s.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==r.V9B&&(l.push(t.assignTexture(s,"normalMap",o.normalTexture)),s.normalScale=new r.I9Y(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;s.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&a!==r.V9B&&(l.push(t.assignTexture(s,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(s.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==r.V9B&&(s.emissive=(new r.Q1f).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==r.V9B&&l.push(t.assignTexture(s,"emissiveMap",o.emissiveTexture,r.er$)),Promise.all(l).then((function(){const n=new a(s);return o.name&&(n.name=o.name),Se(n,o),t.associations.set(n,{materials:e}),o.extensions&&xe(i,n,o),n}))}createUniqueName(e){const t=r.Nwf.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function o(e){return n[H.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Le(n,e,t)}))}const a=[];for(let n=0,s=e.length;n<s;n++){const s=e[n],l=ke(s),c=i[l];if(c)a.push(c.promise);else{let e;e=s.extensions&&s.extensions[H.KHR_DRACO_MESH_COMPRESSION]?o(s):Le(new r.LoY,s,t),i[l]={primitive:s,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,i=this.extensions,o=n.meshes[e],a=o.primitives,s=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?we(this.cache):this.getDependency("material",a[e].material);s.push(t)}return s.push(t.loadGeometries(a)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),l=n[n.length-1],c=[];for(let n=0,u=l.length;n<u;n++){const u=l[n],h=a[n];let d;const p=s[n];if(h.mode===pe.TRIANGLES||h.mode===pe.TRIANGLE_STRIP||h.mode===pe.TRIANGLE_FAN||void 0===h.mode)d=!0===o.isSkinnedMesh?new r.I46(u,p):new r.eaF(u,p),!0===d.isSkinnedMesh&&d.normalizeSkinWeights(),h.mode===pe.TRIANGLE_STRIP?d.geometry=U(d.geometry,r.O49):h.mode===pe.TRIANGLE_FAN&&(d.geometry=U(d.geometry,r.rYR));else if(h.mode===pe.LINES)d=new r.DXC(u,p);else if(h.mode===pe.LINE_STRIP)d=new r.N1A(u,p);else if(h.mode===pe.LINE_LOOP)d=new r.FCc(u,p);else{if(h.mode!==pe.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);d=new r.ONl(u,p)}Object.keys(d.geometry.morphAttributes).length>0&&Ee(d,o),d.name=t.createUniqueName(o.name||"mesh_"+e),Se(d,o),h.extensions&&xe(i,d,h),t.assignFinalMaterial(d),c.push(d)}for(let n=0,r=c.length;n<r;n++)t.associations.set(c[n],{meshes:e,primitives:n});if(1===c.length)return c[0];const u=new r.YJl;t.associations.set(u,{meshes:e});for(let e=0,t=c.length;e<t;e++)u.add(c[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r.ubm(r.cj9.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.qUd(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Se(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,o=[],a=[];for(let e=0,s=i.length;e<s;e++){const s=i[e];if(s){o.push(s);const t=new r.kn4;null!==n&&t.fromArray(n.array,16*e),a.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new r.EAD(o,a)}))}loadAnimation(e){const t=this.json.animations[e],n=t.name?t.name:"animation_"+e,i=[],o=[],a=[],s=[],l=[];for(let e=0,n=t.channels.length;e<n;e++){const n=t.channels[e],r=t.samplers[n.sampler],c=n.target,u=c.node,h=void 0!==t.parameters?t.parameters[r.input]:r.input,d=void 0!==t.parameters?t.parameters[r.output]:r.output;void 0!==c.node&&(i.push(this.getDependency("node",u)),o.push(this.getDependency("accessor",h)),a.push(this.getDependency("accessor",d)),s.push(r),l.push(c))}return Promise.all([Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(e){const t=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=[];for(let e=0,n=t.length;e<n;e++){const n=t[e],c=i[e],u=o[e],h=a[e],d=s[e];if(void 0===n)continue;let p;switch(n.updateMatrix(),_e[d.path]){case _e.weights:p=r.Hit;break;case _e.rotation:p=r.MBL;break;default:p=r.RiT}const f=n.name?n.name:n.uuid,m=void 0!==h.interpolation?be[h.interpolation]:r.PJ3,v=[];_e[d.path]===_e.weights?n.traverse((function(e){e.morphTargetInfluences&&v.push(e.name?e.name:e.uuid)})):v.push(f);let g=u.array;if(u.normalized){const e=Ae(g.constructor),t=new Float32Array(g.length);for(let n=0,r=g.length;n<r;n++)t[n]=g[n]*e;g=t}for(let e=0,t=v.length;e<t;e++){const t=new p(v[e]+"."+_e[d.path],c.array,g,m);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new(this instanceof r.MBL?de:ue)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}return new r.tz3(n,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],o=n.children||[];for(let e=0,n=o.length;e<n;e++)i.push(t.getDependency("node",o[e]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),a]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,Ce)}));for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const o=t.nodes[e],a=o.name?i.createUniqueName(o.name):"",s=[],l=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return l&&s.push(l),void 0!==o.camera&&s.push(i.getDependency("camera",o.camera).then((function(e){return i._getNodeRef(i.cameraCache,o.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){s.push(e)})),this.nodeCache[e]=Promise.all(s).then((function(t){let s;if(s=!0===o.isBone?new r.$Kf:t.length>1?new r.YJl:1===t.length?t[0]:new r.B69,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(o.name&&(s.userData.name=o.name,s.name=a),Se(s,o),o.extensions&&xe(n,s,o),void 0!==o.matrix){const e=new r.kn4;e.fromArray(o.matrix),s.applyMatrix4(e)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return i.associations.has(s)||i.associations.set(s,{}),i.associations.get(s).nodes=e,s})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,o=new r.YJl;n.name&&(o.name=i.createUniqueName(n.name)),Se(o,n),n.extensions&&xe(t,o,n);const a=n.nodes||[],s=[];for(let e=0,t=a.length;e<t;e++)s.push(i.getDependency("node",a[e]));return Promise.all(s).then((function(e){for(let t=0,n=e.length;t<n;t++)o.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof r.imn||e instanceof r.gPd)&&t.set(e,n);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(o),o}))}}function Le(e,t,n){const i=t.attributes,o=[];function a(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in i){const n=ye[t]||t.toLowerCase();n in e.attributes||o.push(a(i[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));o.push(r)}return Se(e,t),function(e,t,n){const i=t.attributes,o=new r.NRn;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,a=e.max;if(void 0===t||void 0===a)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(o.set(new r.Pq0(t[0],t[1],t[2]),new r.Pq0(a[0],a[1],a[2])),e.normalized){const t=Ae(fe[e.componentType]);o.min.multiplyScalar(t),o.max.multiplyScalar(t)}}const a=t.targets;if(void 0!==a){const e=new r.Pq0,t=new r.Pq0;for(let r=0,i=a.length;r<i;r++){const i=a[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=Ae(fe[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(e)}e.boundingBox=o;const s=new r.iyt;o.getCenter(s.center),s.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=s}(e,t,n),Promise.all(o).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,o=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}const Re=new WeakMap;class Pe extends r.aHM{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const o=new r.Y9S(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(e=>{this.parse(e,t,i)}),n,i)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,r.er$).catch(n)}decodeDracoFile(e,t,n,i,o=r.Zr2){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:o};return this.decodeGeometry(e,a).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(Re.has(e)){const t=Re.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),Re.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new r.LoY;e.index&&t.setIndex(new r.THS(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],o=i.name,a=i.array,s=i.itemSize,l=new r.THS(a,s);"color"===o&&this._assignVertexColorSpace(l,i.vertexColorSpace),t.setAttribute(o,l)}return t}_assignVertexColorSpace(e,t){if(t!==r.er$)return;const n=new r.Q1f;for(let t=0,r=e.count;t<r;t++)n.fromBufferAttribute(e,t).convertSRGBToLinear(),e.setXYZ(t,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new r.Y9S(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=Ie.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function Ie(){let e,t;function n(e,t,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);const h=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:h,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,o=i.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder;try{const e=function(e,t,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeArrayToMesh(r,r.byteLength,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeArrayToPointCloud(r,r.byteLength,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const r in o){const l=self[a[r]];let c,h;if(i.useUniqueIDs)h=o[r],c=t.GetAttributeByUniqueId(s,h);else{if(h=t.GetAttributeId(s,e[o[r]]),-1===h)continue;c=t.GetAttribute(s,h)}const d=n(e,t,s,r,l,c);"color"===r&&(d.vertexColorSpace=i.vertexColorSpace),u.attributes.push(d)}return c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=3*n.num_faces(),i=4*r,o=e._malloc(i);t.GetTrianglesUInt32Array(n,i,o);const a=new Uint32Array(e.HEAPF32.buffer,o,r).slice();return e._free(o),{array:a,itemSize:1}}(e,t,s)),e.destroy(s),u}(t,a,new Int8Array(r),o),s=e.attributes.map((e=>e.array.buffer));e.index&&s.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},s)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(a)}}))}}}function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Oe(e,t,n){return t=Ne(t),function(e,t){if(t&&("object"==De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Fe()?Reflect.construct(t,n||[],Ne(e).constructor):t.apply(e,n))}function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function je(e,t){return je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},je(e,t)}var Be=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Oe(this,t)).uniforms={chromaticAberration:{value:.05},chromaticAberrationStrengthG:{value:1},chromaticAberrationStrengthB:{value:1},anisotropy:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},e.onBeforeCompile=function(t){t.uniforms=Object.assign(t.uniforms,e.uniforms),r?t.defines.USE_SAMPLER="":t.defines.USE_TRANSMISSION="",t.fragmentShader="\n      uniform float chromaticAberration;            \n      uniform float chromaticAberrationStrengthG;            \n      uniform float chromaticAberrationStrengthB;            \n      uniform float anisotropy;      \n      uniform float time;\n      uniform float distortion;\n      uniform float distortionScale;\n      uniform float temporalDistortion;\n      uniform sampler2D buffer;\n\n      vec3 random3(vec3 c) {\n        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n        vec3 r;\n        r.z = fract(512.0*j);\n        j *= .125;\n        r.x = fract(512.0*j);\n        j *= .125;\n        r.y = fract(512.0*j);\n        return r-0.5;\n      }\n\n      float seed = 0.0;\n      uint hash( uint x ) {\n        x += ( x << 10u );\n        x ^= ( x >>  6u );\n        x += ( x <<  3u );\n        x ^= ( x >> 11u );\n        x += ( x << 15u );\n        return x;\n      }\n\n      // Compound versions of the hashing algorithm I whipped together.\n      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }\n      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }\n      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }\n\n      // Construct a float with half-open range [0:1] using low 23 bits.\n      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.\n      float floatConstruct( uint m ) {\n        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask\n        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32\n        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)\n        m |= ieeeOne;                          // Add fractional part to 1.0\n        float  f = uintBitsToFloat( m );       // Range [1:2]\n        return f - 1.0;                        // Range [0:1]\n      }\n\n      // Pseudo-random value in half-open range [0:1].\n      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }\n      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n\n      float rand() {\n        float result = random(vec3(gl_FragCoord.xy, seed));\n        seed += 1.0;\n        return result;\n      }\n\n      const float F3 =  0.3333333;\n      const float G3 =  0.1666667;\n\n      float snoise(vec3 p) {\n        vec3 s = floor(p + dot(p, vec3(F3)));\n        vec3 x = p - s + dot(s, vec3(G3));\n        vec3 e = step(vec3(0.0), x - x.yzx);\n        vec3 i1 = e*(1.0 - e.zxy);\n        vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n        vec3 x1 = x - i1 + G3;\n        vec3 x2 = x - i2 + 2.0*G3;\n        vec3 x3 = x - 1.0 + 3.0*G3;\n        vec4 w, d;\n        w.x = dot(x, x);\n        w.y = dot(x1, x1);\n        w.z = dot(x2, x2);\n        w.w = dot(x3, x3);\n        w = max(0.6 - w, 0.0);\n        d.x = dot(random3(s), x);\n        d.y = dot(random3(s + i1), x1);\n        d.z = dot(random3(s + i2), x2);\n        d.w = dot(random3(s + 1.0), x3);\n        w *= w;\n        w *= w;\n        d *= w;\n        return dot(d, vec4(52.0));\n      }\n\n      float snoiseFractal(vec3 m) {\n        return 0.5333333* snoise(m)\n              +0.2666667* snoise(2.0*m)\n              +0.1333333* snoise(4.0*m)\n              +0.0666667* snoise(8.0*m);\n      }\n"+t.fragmentShader,t.fragmentShader=t.fragmentShader.replace("#include <transmission_pars_fragment>","\n        #ifdef USE_TRANSMISSION\n          // Transmission code is based on glTF-Sampler-Viewer\n          // https://github.com/KhronosGroup/glTF-Sample-Viewer\n          uniform float transmission;\n          uniform float thickness;\n          uniform float attenuationDistance;\n          uniform vec3 attenuationColor;\n          #ifdef USE_TRANSMISSIONMAP\n            uniform sampler2D transmissionMap;\n          #endif\n          #ifdef USE_THICKNESSMAP\n            uniform sampler2D thicknessMap;\n          #endif\n          uniform vec2 transmissionSamplerSize;\n          uniform sampler2D transmissionSamplerMap;\n          uniform mat4 modelMatrix;\n          uniform mat4 projectionMatrix;\n          varying vec3 vWorldPosition;\n          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n            // Direction of refracted light.\n            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n            // Compute rotation-independant scaling of the model matrix.\n            vec3 modelScale;\n            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n            // The thickness is specified in local space.\n            return normalize( refractionVector ) * thickness * modelScale;\n          }\n          float applyIorToRoughness( const in float roughness, const in float ior ) {\n            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n            // an IOR of 1.5 results in the default amount of microfacet refraction.\n            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n          }\n          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n            #ifdef USE_SAMPLER\n              #ifdef texture2DLodEXT\n                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #else\n                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #endif\n            #else\n              return texture2D(buffer, fragCoord.xy);\n            #endif     \n          }\n          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n            if ( isinf( attenuationDistance ) ) {\n              // Attenuation distance is +∞, i.e. the transmitted color is not attenuated at all.\n              return radiance;\n            } else {\n              // Compute light attenuation using Beer's law.\n              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n              return transmittance * radiance;\n            }\n          }\n          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n            const in vec3 attenuationColor, const in float attenuationDistance ) {\n            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n            vec3 refractedRayExit = position + transmissionRay;\n            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n            vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n            refractionCoords += 1.0;\n            refractionCoords /= 2.0;\n            // Sample framebuffer to get pixel the refracted ray hits.\n            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n            // Get the specular component.\n            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n          }\n        #endif\n"),t.fragmentShader=t.fragmentShader.replace("#include <transmission_fragment>","\n        // Improve the refraction to use the world pos\n        material.transmission = transmission;\n        material.transmissionAlpha = 1.0;\n        material.thickness = thickness;\n        material.attenuationDistance = attenuationDistance;\n        material.attenuationColor = attenuationColor;\n        #ifdef USE_TRANSMISSIONMAP\n          material.transmission *= texture2D( transmissionMap, vUv ).r;\n        #endif\n        #ifdef USE_THICKNESSMAP\n          material.thickness *= texture2D( thicknessMap, vUv ).g;\n        #endif\n        \n        vec3 pos = vWorldPosition;\n        vec3 v = normalize( cameraPosition - pos );\n        vec3 n = inverseTransformDirection( normal, viewMatrix );\n        vec3 transmission = vec3(0.0);\n        float transmissionR, transmissionB, transmissionG;\n        float randomCoords = rand();\n        float thickness_smear = thickness * max(pow(roughness, 0.33), anisotropy);\n        vec3 distortionNormal = vec3(0.0);\n        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;\n        if (distortion > 0.0) {\n          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));\n        }\n        for (float i = 0.0; i < ".concat(n,".0; i ++) {\n          vec3 sampleNorm = normalize(n + roughness * roughness * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);\n          transmissionR = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(").concat(n,"),\n            material.attenuationColor, material.attenuationDistance\n          ).r;\n          transmissionG = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (chromaticAberrationStrengthG + chromaticAberration * (i + randomCoords) / float(").concat(n,")) , material.thickness + thickness_smear * (i + randomCoords) / float(").concat(n,"),\n            material.attenuationColor, material.attenuationDistance\n          ).g;\n          transmissionB = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (chromaticAberrationStrengthB + 2.0 * chromaticAberration * (i + randomCoords) / float(").concat(n,")), material.thickness + thickness_smear * (i + randomCoords) / float(").concat(n,"),\n            material.attenuationColor, material.attenuationDistance\n          ).b;\n          transmission.r += transmissionR;\n          transmission.g += transmissionG;\n          transmission.b += transmissionB;\n        }\n        transmission /= ").concat(n,".0;\n        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n"))},Object.keys(e.uniforms).forEach((function(t){return Object.defineProperty(e,t,{get:function(){return e.uniforms[t].value},set:function(n){return e.uniforms[t].value=n}})})),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&je(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(r.uSd);function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function ze(){ze=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==Ue(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(Ue(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function We(e){var t=function(e,t){if("object"!=Ue(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ue(t)?t:t+""}var Ye=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canReset=!1},t=[{key:"init",value:(n=ze().mark((function e(){var t,n,i,o,a,s,l;return ze().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new z,n=new Pe,this.clock=new r.zD7,n.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),t.setDRACOLoader(n),i=document.getElementById("SOEcanvasRoot"),e.next=8,Promise.all([new Promise((function(e){return t.load(i.dataset.url,e)}))]);case 8:return o=e.sent,a=Ge(o,1),s=a[0].scene,this.context=s.children[0],l={clearcoat:0,clearcoatRoughness:.188,clearcoatNormalScale:0,transmission:1,transmissionSampler:!1,backside:!1,chromaticAberration:.4,chromaticAberrationStrengthG:1.203,chromaticAberrationStrengthB:1.476,anisotropy:.29,roughness:0,thickness:.145,ior:2.333,distortion:.594,distortionScale:.459,temporalDistortion:.385,metalness:0,reflectivity:1,envMapIntensity:1.341,normalScale:1.065,positionX:0,positionZ:-6,positionY:-3,sample:6},this.context.material=Object.assign(new Be(4,!0),l),this.context.position.set(0,-3,-6),this.context.rotation.set(0,r.cj9.degToRad(90),0),this.paramsMod={scale:1},this.moveToPos=new r.Pq0(0,5,-6),this.startPos=new r.Pq0(0,-3,-6),this.currentPos=new r.Pq0(0,-3,-6),this.targetScale=new r.Pq0(.5,.5,.5),this.startScale=new r.Pq0(1,1,1),this.currentScale=new r.Pq0(1,1,1),e.abrupt("return",this.context);case 24:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){qe(o,r,i,a,s,"next",e)}function s(e){qe(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"reset",value:function(e){e&&e!==this.canReset&&(this.clock=new r.zD7,this.context.rotation.set(0,r.cj9.degToRad(90),0)),this.canReset=e}},{key:"update",value:function(e,t){var n=this.clock.getDelta();if(t>=.5){var r=this.moveToPos.clone();r.y=this.startPos.y,r.y+=10*(1-(1-t)/.5),this.currentPos.lerp(r,2*n)}else this.currentPos.lerp(this.startPos,1.5*n);this.context.position.copy(this.currentPos),this.context.rotation.y-=n/2}}],t&&Ve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,i}();const Xe=/\bvoid\s+main\s*\(\s*\)\s*{/g;function Ke(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=r.vxI[t];return n?Ke(n):e}))}const $e=[];for(let e=0;e<256;e++)$e[e]=(e<16?"0":"")+e.toString(16);const Je=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},Ze=Date.now(),Qe=new WeakMap,et=new Map;let tt=1e10;function nt(e,t){const n=function(e){const t=JSON.stringify(e,it);let n=at.get(t);return null==n&&at.set(t,n=++ot),n}(t);let i=Qe.get(e);if(i||Qe.set(e,i=Object.create(null)),i[n])return new i[n];const o=`_onBeforeCompile${n}`,a=function(r,i){e.onBeforeCompile.call(this,r,i);const a=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=et[a];if(!s){const e=function(e,{vertexShader:t,fragmentShader:n},r,i){let{vertexDefs:o,vertexMainIntro:a,vertexMainOutro:s,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:h,fragmentColorTransform:d,customRewriter:p,timeUniform:f}=r;if(o=o||"",a=a||"",s=s||"",c=c||"",u=u||"",h=h||"",(l||p)&&(t=Ke(t)),(d||p)&&(n=Ke(n=n.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),p){let e=p({vertexShader:t,fragmentShader:n});t=e.vertexShader,n=e.fragmentShader}if(d){let e=[];n=n.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),h=`${d}\n${e.join("\n")}\n${h}`}if(f){const e=`\nuniform float ${f};\n`;o=e+o,c=e+c}return l&&(o=`${o}\nvoid troikaVertexTransform${i}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${l}\n}\n`,a=`\ntroika_position_${i} = vec3(position);\ntroika_normal_${i} = vec3(normal);\ntroika_uv_${i} = vec2(uv);\ntroikaVertexTransform${i}(troika_position_${i}, troika_normal_${i}, troika_uv_${i});\n${a}\n`,t=(t=`vec3 troika_position_${i};\nvec3 troika_normal_${i};\nvec2 troika_uv_${i};\n${t}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,r)=>/\battribute\s+vec[23]\s+$/.test(r.substr(0,n))?t:`troika_${t}_${i}`)),e.map&&e.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${i}`))),{vertexShader:t=rt(t,i,o,a,s),fragmentShader:n=rt(n,i,c,u,h)}}(this,r,t,n);s=et[a]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,Je(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-Ze}}),this[o]&&this[o](r)},s=function(){return l(t.chained?e:e.clone())},l=function(r){const i=Object.create(r,c);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:tt++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return($e[255&e]+$e[e>>8&255]+$e[e>>16&255]+$e[e>>24&255]+"-"+$e[255&t]+$e[t>>8&255]+"-"+$e[t>>16&15|64]+$e[t>>24&255]+"-"+$e[63&n|128]+$e[n>>8&255]+"-"+$e[n>>16&255]+$e[n>>24&255]+$e[255&r]+$e[r>>8&255]+$e[r>>16&255]+$e[r>>24&255]).toUpperCase()}(),i.uniforms=Je({},r.uniforms,t.uniforms),i.defines=Je({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=Je({},r.extensions,t.extensions),i._listeners=void 0,i},c={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(Je(this.extensions,t.extensions),Je(this.defines,t.defines),Je(this.uniforms,r.LlO.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return l(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=nt(e.isDerivedMaterial?e.getDepthMaterial():new r.CSG({depthPacking:r.N5j}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=nt(e.isDerivedMaterial?e.getDistanceMaterial():new r.aVO,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=s,new s}function rt(e,t,n,r,i){return(r||i||n)&&(e=e.replace(Xe,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function it(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let ot=0;const at=new Map;function st(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),c&&(c=n("<"+a+">.getTransferables",c));var u=null;"function"==typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(e){e&&e.noLog||console.error(e),i(e)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){console.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(e){n(e)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){console.error(e),n(e)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:i,success:!1,error:e.stack})}}))}r.$EB,r.eaF;var lt=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return lt=function(){return e},e},ct=0,ut=0,ht=!1,dt=Object.create(null),pt=Object.create(null),ft=Object.create(null);function mt(e){if(!(e&&"function"==typeof e.init||ht))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!lt())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++ct,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=gt(i,"registerModule",l.workerModuleData);var n=function(){s=null,pt[i].delete(n)};(pt[i]||(pt[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return gt(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(ht=!0,e=mt({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+vt(e)+"\n)}"}),ht=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:vt(n),getTransferables:r&&vt(r)},l}function vt(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function gt(e,t,n){return new Promise((function(r,i){var o=++ut;ft[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=dt[e];if(!t){var n=vt(st);(t=dt[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=ft[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete ft[n],r(t)}}return t}(e).postMessage({messageId:o,action:t,data:n})}))}function yt(){var e=function(e){function t(e,t,n,r,i,o,a,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*a,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*s}function n(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function r(e,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(e,(function(e,n,a,s,l,c,u,h,d){switch(e){case"L":r(n,a,s,l);break;case"Q":for(var p=n,f=a,m=1;m<i;m++)_=a,b=u,w=l,void 0,E=1-(x=m/(i-1)),(S=o).x=E*E*n+2*E*x*c+x*x*s,S.y=E*E*_+2*E*x*b+x*x*w,r(p,f,o.x,o.y),p=o.x,f=o.y;break;case"C":for(var v=n,g=a,y=1;y<i;y++)t(n,a,c,u,h,d,s,l,y/(i-1),o),r(v,g,o.x,o.y),v=o.x,g=o.y}var _,b,w,x,S,E}))}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",a=new WeakMap,s={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function l(e,t){var n=e.getContext?e.getContext("webgl",s):e,r=a.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},l={},c={},u=-1,h=[];function d(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function p(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function f(e,t,r,o){if(!l[e]){var a={},s={},c=n.createProgram();n.attachShader(c,p(t,n.VERTEX_SHADER)),n.attachShader(c,p(r,n.FRAGMENT_SHADER)),n.linkProgram(c),l[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,s){var l=a[e];l||(l=a[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),s!==l.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),l.data=s)}})}}}l[e].transaction(o)}function m(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}}function v(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function g(){o={},l={},c={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){g(),e.preventDefault()}),!1),a.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:f,withTexture:m,withTextureFramebuffer:v,handleContextLoss:g})}t(r)}function c(e,t,n,r,a,s,c,u){void 0===c&&(c=15),void 0===u&&(u=null),l(e,(function(e){var l=e.gl,h=e.withProgram;(0,e.withTexture)("copy",(function(e,d){l.texImage2D(l.TEXTURE_2D,0,l.RGBA,a,s,0,l.RGBA,l.UNSIGNED_BYTE,t),h("copy",i,o,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,l.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),l.bindFramebuffer(l.FRAMEBUFFER,u||null),l.disable(l.BLEND),l.colorMask(8&c,4&c,2&c,1&c),l.viewport(n,r,a,s),l.scissor(n,r,a,s),l.drawArrays(l.TRIANGLES,0,3)}))}))}))}var u=Object.freeze({__proto__:null,withWebGLContext:l,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;l(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,c(a,s,0,0,r,i)}))}});function h(e,t,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=i[2]-i[0],c=i[3]-i[1],u=[];r(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=v(i[0]+l*(h+.5)/e,i[1]+c*(d+.5)/t),m=Math.pow(1-Math.abs(p)/o,a)/2;p<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[d*e+h]=m}return s;function v(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=f(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function d(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),p(e,t,n,r,i,o,a,null,s,l,c)}function p(e,t,n,r,i,o,a,s,l,u,d){void 0===o&&(o=1),void 0===l&&(l=0),void 0===u&&(u=0),void 0===d&&(d=0);for(var p=h(e,t,n,r,i,o),f=new Uint8Array(4*p.length),m=0;m<p.length;m++)f[4*m+d]=p[m];c(a,f,l,u,e,t,1<<3-d,s)}function f(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,u=e-(n+c*a),h=t-(r+c*s);return u*u+h*h}var m=Object.freeze({__proto__:null,generate:h,generateIntoCanvas:d,generateIntoFramebuffer:p}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",g="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",y="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",_=new Float32Array([0,0,2,0,0,2]),b=null,w=!1,x={},S=new WeakMap;function E(e){if(!w&&!C(e))throw new Error("WebGL generation not supported")}function k(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=b)){var s="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=b=s.getContext("webgl",{depth:!1})}E(a);var c=new Uint8Array(e*t*4);l(a,(function(a){var s=a.gl,l=a.withTexture,u=a.withTextureFramebuffer;l("readable",(function(a,l){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,l,(function(a){A(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,c)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<c.length;h+=4)u[d++]=c[h];return u}function T(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),A(e,t,n,r,i,o,a,null,s,l,c)}function A(e,t,n,o,a,s,c,u,h,d,p){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===p&&(p=0),E(c);var f=[];r(n,(function(e,t,n,r){f.push(e,t,n,r)})),f=new Float32Array(f),l(c,(function(n){var r=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,b=n.withTexture,w=n.withTextureFramebuffer,x=n.handleContextLoss;if(b("rawDistances",(function(n,b){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),m("main",v,g,(function(i){var u=i.setAttribute,h=i.setUniform,d=!l&&c("ANGLE_instanced_arrays"),p=!l&&c("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,_),u("aLineSegment",4,r.DYNAMIC_DRAW,1,f),h.apply(void 0,["4f","uGlyphBounds"].concat(o)),h("1f","uMaxDistance",a),h("1f","uExponent",s),w(n,b,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,l?r.MAX:p.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),l?r.drawArraysInstanced(r.TRIANGLES,0,3,f.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,f.length/4)}))})),m("post",i,y,(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,_),n.setUniform("1i","tex",b),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===p,1===p,2===p,3===p),r.viewport(h,d,e,t),r.scissor(h,d,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw x(),new Error("webgl context lost")}))}function C(e){var t=e&&e!==b?e.canvas||e:x,n=S.get(t);if(void 0===n){w=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=k(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})))||(r="bad trial run results",console.info(i,o))}catch(e){n=!1,r=e.message}r&&console.warn("WebGL SDF generation not supported:",r),w=!1,S.set(t,n)}return n}var M=Object.freeze({__proto__:null,generate:k,generateIntoCanvas:T,generateIntoFramebuffer:A,isSupported:C});return e.forEachPathCommand=n,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return k.apply(M,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),h.apply(m,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return T.apply(M,arguments)}catch(e){return console.info("WebGL SDF generation failed, falling back to JS",e),d.apply(m,arguments)}},e.javascript=m,e.pathToLineSegments=r,e.webgl=M,e.webglUtils=u,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const _t=mt({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},c=0;c<o;c++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<a.length;c++){var p=a[c];l[p]&&(s[p.trim()]=t[p.trim()].parse(e,l[p].offset,l[p].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var c=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var c=a.readUshort(e,n);n+=2;var u=a.readUshort(e,n);n+=2;var h=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+h,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+c,r);a.push(u)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,c=0;c<s;c++){var u=i.readUshort(e,n);n+=2;var h=r(e,l,o+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)e>>>n&1&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var c=r.readUshort(e,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+c)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.default=t._lctf.readLangSysTable(e,i+a));var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(s=0;s<h.length-1;s++)p.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=p}if(u.ROS){n=u.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),u.FDArray=[],s=0;s<f.length-1;s++){var m=t.CFF.readDict(e,n+f[s],n+f[s+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=f[f.length-1],n=u.FDSelect,u.FDSelect=[];var v=e[n];if(n++,3!=v)throw v;var g=i.readUshort(e,n);for(n+=2,s=0;s<g+1;s++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var c=0;for(1==a?(c=e[n],n++):(c=i.readUshort(e,n),n+=2),s=0;s<=c;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-a-108,s=2),255==o&&(c=i.readInt(e,n+1)/65535,s=5),r.val=null!=c?c:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=o.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=o.readInt(e,n+1)/65535,c=5),a.push(null!=h?h:"o"+u),n+=c}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==s&&(h=i.readShort(e,n+1),c=3),29==s&&(h=i.readInt(e,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=i.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var p=e[n+c];c++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var v="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)v+=g[d[y]];h=parseFloat(v)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=c}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var c=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+c+"e"+u,p=s.indexOf(h);if(-1==p){var f;p=o.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?f=t.cmap.parse0(e,h):4==m?f=t.cmap.parse4(e,h):6==m?f=t.cmap.parse6(e,h):12==m?f=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),o.tables.push(f)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=p}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),c=r.readUint(e,s+4),u=r.readUint(e,s+8);i.groups.push([l,c,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<c;s++){var u=i[o];if(o++,a.flags.push(u),8&u){var h=i[o];o++;for(var d=0;d<h;d++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<c;s++){var p=!!(2&a.flags[s]),f=!!(16&a.flags[s]);p?(a.xs.push(f?i[o]:-i[o]),o++):f?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<c;s++)p=!!(4&a.flags[s]),f=!!(32&a.flags[s]),p?(a.ys.push(f?i[o]:-i[o]),o++):f?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,v=0;for(s=0;s<c;s++)m+=a.xs[s],v+=a.ys[s],a.xs[s]=m,a.ys[s]=v}else{var g;a.parts=[];do{g=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&g){var _=r.readShort(i,o);o+=2;var b=r.readShort(i,o);o+=2}else _=r.readInt8(i,o),o++,b=r.readInt8(i,o),o++;2&g?(y.m.tx=_,y.m.ty=b):(y.p1=_,y.p2=b),8&g?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&g?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&g&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&g);if(256&g){var w=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<w;s++)a.instr.push(i[o]),o++}}return a},t.GDEF={},t.GDEF.parse=function(e,n,r,i){var o=n;n+=4;var a=t._bin.readUshort(e,n);return{glyphClassDef:0===a?null:t._lctf.readClassDef(e,o+a)}},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var c=o.readUshort(e,r);r+=2,0!=c&&(s.pos=t.GPOS.readValueRecord(e,r,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(e,r),r+=2;var u=o.readUshort(e,r);r+=2;var h=t._lctf.numOfOnes(c),d=t._lctf.numOfOnes(u);if(1==s.fmt){s.pairsets=[];var p=o.readUshort(e,r);r+=2;for(var f=0;f<p;f++){var m=a+o.readUshort(e,r);r+=2;var v=o.readUshort(e,m);m+=2;for(var g=[],y=0;y<v;y++){var _=o.readUshort(e,m);m+=2,0!=c&&(k=t.GPOS.readValueRecord(e,m,c),m+=2*h),0!=u&&(T=t.GPOS.readValueRecord(e,m,u),m+=2*d),g.push({gid2:_,val1:k,val2:T})}s.pairsets.push(g)}}if(2==s.fmt){var b=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);r+=2;var x=o.readUshort(e,r);r+=2;var S=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+b),s.classDef2=t._lctf.readClassDef(e,a+w),s.matrix=[],f=0;f<x;f++){var E=[];for(y=0;y<S;y++){var k=null,T=null;0!=c&&(k=t.GPOS.readValueRecord(e,r,c),r+=2*h),0!=u&&(T=t.GPOS.readValueRecord(e,r,u),r+=2*d),E.push({val1:k,val2:T})}s.matrix.push(E)}}}else if(4==n&&1==s.fmt)s.markCoverage=t._lctf.readCoverage(e,o.readUshort(e,r)+a),s.baseCoverage=t._lctf.readCoverage(e,o.readUshort(e,r+2)+a),s.markClassCount=o.readUshort(e,r+4),s.markArray=t.GPOS.readMarkArray(e,o.readUshort(e,r+6)+a),s.baseArray=t.GPOS.readBaseArray(e,o.readUshort(e,r+8)+a,s.markClassCount);else if(6==n&&1==s.fmt)s.mark1Coverage=t._lctf.readCoverage(e,o.readUshort(e,r)+a),s.mark2Coverage=t._lctf.readCoverage(e,o.readUshort(e,r+2)+a),s.markClassCount=o.readUshort(e,r+4),s.mark1Array=t.GPOS.readMarkArray(e,o.readUshort(e,r+6)+a),s.mark2Array=t.GPOS.readBaseArray(e,o.readUshort(e,r+8)+a,s.markClassCount);else{if(9==n&&1==s.fmt){var A=o.readUshort(e,r);r+=2;var C=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=A;else if(i.ltype!=A)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+C)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GPOS.readBaseArray=function(e,n,r){var i=t._bin,o=[],a=n,s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){for(var c=[],u=0;u<r;u++)c.push(t.GPOS.readAnchorRecord(e,a+i.readUshort(e,n))),n+=2;o.push(c)}return o},t.GPOS.readMarkArray=function(e,n){var r=t._bin,i=[],o=n,a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=t.GPOS.readAnchorRecord(e,r.readUshort(e,n+2)+o);l.markClass=r.readUshort(e,n),i.push(l),n+=4}return i},t.GPOS.readAnchorRecord=function(e,n){var r=t._bin,i={};return i.fmt=r.readUshort(e,n),i.x=r.readShort(e,n+2),i.y=r.readShort(e,n+4),i},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&2!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||2==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var c=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,c),r+=2*s.newg.length}}else if(2==n&&1==s.fmt){c=o.readUshort(e,r),r+=2,s.seqs=[];for(var u=0;u<c;u++){var h=o.readUshort(e,r)+a;r+=2;var d=o.readUshort(e,h);s.seqs.push(o.readUshorts(e,h+2,d))}}else if(4==n)for(s.vals=[],c=o.readUshort(e,r),r+=2,u=0;u<c;u++){var p=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+p))}else if(5==n&&2==s.fmt){if(2==s.fmt){var f=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+f),s.scset=[];var m=o.readUshort(e,r);for(r+=2,u=0;u<m;u++){var v=o.readUshort(e,r);r+=2,s.scset.push(0==v?null:t.GSUB.readSubClassSet(e,a+v))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(e,r),r+=2;for(var g=[],y=0;y<c;y++)g.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*y)));r+=2*c,0==u&&(s.backCvg=g),1==u&&(s.inptCvg=g),2==u&&(s.ahedCvg=g)}c=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,c)}}else{if(7==n&&1==s.fmt){var _=o.readUshort(e,r);r+=2;var b=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=_;else if(i.ltype!=_)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+b)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var c=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)a.push(o.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)a.push(o.readUint(e,n+(c<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<a;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var v=i.readUshort(e,n);n+=2;var g,y=l[f],_=c+12*a+v;if(0==h)g=i.readUnicode(e,_,m/2);else if(3==h&&0==d)g=i.readUnicode(e,_,m/2);else if(0==d)g=i.readASCII(e,_,m);else if(1==d)g=i.readUnicode(e,_,m/2);else if(3==d)g=i.readUnicode(e,_,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;g=i.readASCII(e,_,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+p.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==y?y:f]=g,o[b]._lang=p}for(var w in o)if(null!=o[w].postScriptName&&1033==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&0==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName&&3084==o[w]._lang)return o[w];for(var w in o)if(null!=o[w].postScriptName)return o[w];for(var w in o){s=w;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,c=1&e.flags[a],u=1&e.flags[s],h=1&e.flags[l],d=e.xs[a],p=e.ys[a];if(a==i)if(c){if(!u){t.U.P.moveTo(n,d,p);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+p)/2);c?u&&t.U.P.lineTo(n,d,p):h?t.U.P.qcurveTo(n,d,p,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,p,(d+e.xs[l])/2,(p+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];r.crds.push(c*s.a+u*s.b+s.tx),r.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==e[n+f+(1+m)];)f++;h.chain[m]!=e[n+f+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<d+f;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var v=t._lctf.getInterval(l.cDef,e[n]),g=l.cDef[v+2],y=l.scset[g],_=0;_<y.length;_++){var b=y[_],w=b.input;if(!(w.length>o)){for(p=!0,m=0;m<w.length;m++){var x=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==v&&l.cDef[x+2]!=w[m]){p=!1;break}}if(p){var S=b.substLookupRecords;for(u=0;u<S.length;u+=2)S[u],S[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(_=0;_<E.length;_+=2){v=E[_];var k=i[E[_+1]];t.U._applySubs(e,n+v,k,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+o),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,p=n.y,f=0,m=0,v=0,g=0,y=0,_=0,b=0,w=0,x=0,S=0,E={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,E);var k=E.val;if(h+=E.size,"o1"==k||"o18"==k)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==k||"o23"==k)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==k)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),u&&t.U.P.closePath(o),p+=a.pop(),t.U.P.moveTo(o,d,p),u=!0;else if("o5"==k)for(;a.length>0;)d+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,d,p);else if("o6"==k||"o7"==k)for(var T=a.length,A="o6"==k,C=0;C<T;C++){var M=a.shift();A?d+=M:p+=M,A=!A,t.U.P.lineTo(o,d,p)}else if("o8"==k||"o24"==k){T=a.length;for(var L=0;L+6<=T;)f=d+a.shift(),m=p+a.shift(),v=f+a.shift(),g=m+a.shift(),d=v+a.shift(),p=g+a.shift(),t.U.P.curveTo(o,f,m,v,g,d,p),L+=6;"o24"==k&&(d+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,d,p))}else{if("o11"==k)break;if("o1234"==k||"o1235"==k||"o1236"==k||"o1237"==k)"o1234"==k&&(m=p,v=(f=d+a.shift())+a.shift(),S=g=m+a.shift(),_=g,w=p,d=(b=(y=(x=v+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,f,m,v,g,x,S),t.U.P.curveTo(o,y,_,b,w,d,p)),"o1235"==k&&(f=d+a.shift(),m=p+a.shift(),v=f+a.shift(),g=m+a.shift(),x=v+a.shift(),S=g+a.shift(),y=x+a.shift(),_=S+a.shift(),b=y+a.shift(),w=_+a.shift(),d=b+a.shift(),p=w+a.shift(),a.shift(),t.U.P.curveTo(o,f,m,v,g,x,S),t.U.P.curveTo(o,y,_,b,w,d,p)),"o1236"==k&&(f=d+a.shift(),m=p+a.shift(),v=f+a.shift(),S=g=m+a.shift(),_=g,b=(y=(x=v+a.shift())+a.shift())+a.shift(),w=_+a.shift(),d=b+a.shift(),t.U.P.curveTo(o,f,m,v,g,x,S),t.U.P.curveTo(o,y,_,b,w,d,p)),"o1237"==k&&(f=d+a.shift(),m=p+a.shift(),v=f+a.shift(),g=m+a.shift(),x=v+a.shift(),S=g+a.shift(),y=x+a.shift(),_=S+a.shift(),b=y+a.shift(),w=_+a.shift(),Math.abs(b-d)>Math.abs(w-p)?d=b+a.shift():p=w+a.shift(),t.U.P.curveTo(o,f,m,v,g,x,S),t.U.P.curveTo(o,y,_,b,w,d,p));else if("o14"==k){if(a.length>0&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),4==a.length){var R=a.shift(),P=a.shift(),I=a.shift(),D=a.shift(),O=t.CFF.glyphBySE(r,I),F=t.CFF.glyphBySE(r,D);t.U._drawCFF(r.CharStrings[O],n,r,i,o),n.x=R,n.y=P,t.U._drawCFF(r.CharStrings[F],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==k||"o20"==k)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,h+=s+7>>3;else if("o21"==k)a.length>2&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),p+=a.pop(),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o22"==k)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,p),u=!0;else if("o25"==k){for(;a.length>6;)d+=a.shift(),p+=a.shift(),t.U.P.lineTo(o,d,p);f=d+a.shift(),m=p+a.shift(),v=f+a.shift(),g=m+a.shift(),d=v+a.shift(),p=g+a.shift(),t.U.P.curveTo(o,f,m,v,g,d,p)}else if("o26"==k)for(a.length%2&&(d+=a.shift());a.length>0;)f=d,m=p+a.shift(),d=v=f+a.shift(),p=(g=m+a.shift())+a.shift(),t.U.P.curveTo(o,f,m,v,g,d,p);else if("o27"==k)for(a.length%2&&(p+=a.shift());a.length>0;)m=p,v=(f=d+a.shift())+a.shift(),g=m+a.shift(),d=v+a.shift(),p=g,t.U.P.curveTo(o,f,m,v,g,d,p);else if("o10"==k||"o29"==k){var N="o10"==k?i:r;if(0==a.length)console.debug("error: empty stack");else{var j=a.pop(),B=N.Subrs[j+N.Bias];n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(B,n,r,i,o),d=n.x,p=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==k||"o31"==k){var U=a.length,z=(L=0,"o31"==k);for(L+=U-(T=-3&U);L<T;)z?(m=p,v=(f=d+a.shift())+a.shift(),p=(g=m+a.shift())+a.shift(),T-L==5?(d=v+a.shift(),L++):d=v,z=!1):(f=d,m=p+a.shift(),v=f+a.shift(),g=m+a.shift(),d=v+a.shift(),T-L==5?(p=g+a.shift(),L++):p=g,z=!0),t.U.P.curveTo(o,f,m,v,g,d,p),L+=4}else{if("o"==(k+"").charAt(0))throw console.debug("Unknown operation: "+k,e),k;a.push(k)}}}n.x=d,n.y=p,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(o,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],p=l[e[o]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)s[d[p]>>>c]=u}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=d[l[e[o]-1]++]>>>15-e[o]);return s},v=new t(288);for(p=0;p<144;++p)v[p]=8;for(p=144;p<256;++p)v[p]=9;for(p=256;p<280;++p)v[p]=7;for(p=280;p<288;++p)v[p]=8;var g=new t(32);for(p=0;p<32;++p)g[p]=5;var y=m(v,9,1),_=m(g,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},w=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},x=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},S=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(e,t,n){var r=new Error(t||S[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,E),!n)throw r;return r},k=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var d=!s||l,p=!l||l.i;l||(l={}),s||(s=new t(3*u));var f,v=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},g=l.f||0,S=l.p||0,k=l.b||0,T=l.l,A=l.d,C=l.m,M=l.n,L=8*u;do{if(!T){l.f=g=w(e,S,1);var R=w(e,S+1,3);if(S+=3,!R){var P=e[(H=((f=S)/8|0)+(7&f&&1)+4)-4]|e[H-3]<<8,I=H+P;if(I>u){p&&E(0);break}d&&v(k+P),s.set(e.subarray(H,I),k),l.b=k+=P,l.p=S=8*I;continue}if(1==R)T=y,A=_,C=9,M=5;else if(2==R){var D=w(e,S,31)+257,O=w(e,S+10,15)+4,F=D+w(e,S+5,31)+1;S+=14;for(var N=new t(F),j=new t(19),B=0;B<O;++B)j[a[B]]=w(e,S+3*B,7);S+=3*O;var U=b(j),z=(1<<U)-1,G=m(j,U,1);for(B=0;B<F;){var H,q=G[w(e,S,z)];if(S+=15&q,(H=q>>>4)<16)N[B++]=H;else{var V=0,W=0;for(16==H?(W=3+w(e,S,3),S+=2,V=N[B-1]):17==H?(W=3+w(e,S,7),S+=3):18==H&&(W=11+w(e,S,127),S+=7);W--;)N[B++]=V}}var Y=N.subarray(0,D),X=N.subarray(D);C=b(Y),M=b(X),T=m(Y,C,1),A=m(X,M,1)}else E(1);if(S>L){p&&E(0);break}}d&&v(k+131072);for(var K=(1<<C)-1,$=(1<<M)-1,J=S;;J=S){var Z=(V=T[x(e,S)&K])>>>4;if((S+=15&V)>L){p&&E(0);break}if(V||E(2),Z<256)s[k++]=Z;else{if(256==Z){J=S,T=null;break}var Q=Z-254;if(Z>264){var ee=i[B=Z-257];Q=w(e,S,(1<<ee)-1)+c[B],S+=ee}var te=A[x(e,S)&$],ne=te>>>4;if(te||E(3),S+=15&te,X=h[ne],ne>3&&(ee=o[ne],X+=x(e,S)&(1<<ee)-1,S+=ee),S>L){p&&E(0);break}d&&v(k+131072);for(var re=k+Q;k<re;k+=4)s[k]=s[k-X],s[k+1]=s[k+1-X],s[k+2]=s[k+2-X],s[k+3]=s[k+3-X];k=re}}l.l=T,l.p=J,l.b=k,T&&(g=1,l.m=C,l.d=A,l.n=M)}while(!g);return k==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,k)},T=new t(0),A="undefined"!=typeof TextDecoder&&new TextDecoder;try{A.decode(T,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){g.setUint16(y,e),y+=2}function a(e){g.setUint32(y,e),y+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,h=12,d=[],p=0;p<s.numTables;p++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var f,m=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),v=m.buffer,g=new DataView(v),y=0;return a(s.flavor),o(s.numTables),o(c),o(l),o(u),d.forEach((function(e){a(e.tag),a(e.origChecksum),a(h),a(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),k(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var o=0;(h=t.outOffset+t.origLength)%4!=0&&(o=4-h%4),m.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),f=h+o})),v.slice(0,f)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,c=32;let u;function h(e){if(!u){const e={R:o,L:i,D:a,C:l,U:c,T:s};u=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[i,o]=r.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,u.set(n+=i,e[t]);for(let r=o;r--;)u.set(++n,e[t])}))}}return u.get(e)||c}const d=1,p=2,f=3,m=4,v=[null,"isol","init","fina","medi"];function g(e){const t=new Uint8Array(e.length);let n=c,r=d,u=-1;for(let v=0;v<e.length;v++){const g=e.codePointAt(v);let y=0|h(g),_=d;y&s||(n&(i|a|l)?y&(o|a|l)?(_=f,r!==d&&r!==f||t[u]++):y&(i|c)&&(r!==p&&r!==m||t[u]--):n&(o|c)&&(r!==p&&r!==m||t[u]--),r=t[v]=_,n=y,u=v,g>65535&&v++)}return t}function y(t,n){const r=t.GDEF&&t.GDEF.glyphClassDef;return r?e.U._getGlyphClass(n,r):0}function _(...e){for(let t=0;t<e.length;t++)if("number"==typeof e[t])return e[t]}return function(r){const i=new Uint8Array(r,0,4),o=e._bin.readASCII(i,0,4);if("wOFF"===o)r=t(r);else if("wOF2"===o)throw new Error("woff2 fonts not supported");return function(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,a=t.head.unitsPerEm,s=_(i&&i.sTypoAscender,o&&o.ascender,a),l={unitsPerEm:a,ascender:s,descender:_(i&&i.sTypoDescender,o&&o.descender,0),capHeight:_(i&&i.sCapHeight,s),xHeight:_(i&&i.sxHeight,s),lineGap:_(i&&i.sTypoLineGap,o&&o.lineGap),supportsCodePoint:n=>e.U.codeToGlyph(t,n)>0,forEachGlyph(i,o,a,s){let c=0;const u=1/l.unitsPerEm*o,h=function(t,n){const r=[];for(let i=0;i<n.length;i++){const o=n.codePointAt(i);o>65535&&i++,r.push(e.U.codeToGlyph(t,o))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let a;const s=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,l=[];o.forEach((i=>{if(s.test(i.tag))for(let o=0;o<i.tab.length;o++){if(l[i.tab[o]])continue;l[i.tab[o]]=!0;const s=t[i.tab[o]],c=/^(isol|init|fina|medi)$/.test(i.tag);c&&!a&&(a=g(n));for(let n=0;n<r.length;n++)a&&c&&v[a[n]]!==i.tag||e.U._applySubs(r,n,s,t)}}))}return r}(t,i);let d=0;const p=function(t,n){const r=new Int16Array(3*n.length);let i=0;for(;i<n.length;i++){const l=n[i];if(-1===l)continue;r[3*i+2]=t.hmtx.aWidth[l];const c=t.GPOS;if(c){const u=c.lookupList;for(let c=0;c<u.length;c++){const h=u[c];for(let c=0;c<h.tabs.length;c++){const u=h.tabs[c];if(1===h.ltype){if(-1!==e._lctf.coverageIndex(u.coverage,l)&&u.pos){s(u.pos,i);break}}else if(2===h.ltype){let t=null,r=o();if(-1!==r){const o=e._lctf.coverageIndex(u.coverage,n[r]);if(-1!==o){if(1===u.fmt){const e=u.pairsets[o];for(let n=0;n<e.length;n++)e[n].gid2===l&&(t=e[n])}else if(2===u.fmt){const i=e.U._getGlyphClass(n[r],u.classDef1),o=e.U._getGlyphClass(l,u.classDef2);t=u.matrix[i][o]}if(t){t.val1&&s(t.val1,r),t.val2&&s(t.val2,i);break}}}}else if(4===h.ltype){const t=e._lctf.coverageIndex(u.markCoverage,l);if(-1!==t){const s=o(a),l=-1===s?-1:e._lctf.coverageIndex(u.baseCoverage,n[s]);if(-1!==l){const e=u.markArray[t],n=u.baseArray[l][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}else if(6===h.ltype){const a=e._lctf.coverageIndex(u.mark1Coverage,l);if(-1!==a){const s=o();if(-1!==s){const o=n[s];if(3===y(t,o)){const t=e._lctf.coverageIndex(u.mark2Coverage,o);if(-1!==t){const e=u.mark1Array[a],n=u.mark2Array[t][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}}}}}}else if(t.kern&&!t.cff){const e=o();if(-1!==e){const i=t.kern.glyph1.indexOf(n[e]);if(-1!==i){const n=t.kern.rval[i].glyph2.indexOf(l);-1!==n&&(r[3*e+2]+=t.kern.rval[i].vals[n])}}}}return r;function o(e){for(let t=i-1;t>=0;t--)if(-1!==n[t]&&(!e||e(n[t])))return t;return-1}function a(e){return 1===y(t,e)}function s(e,t){for(let n=0;n<3;n++)r[3*t+n]+=e[n]||0}}(t,h);return h.forEach(((l,h)=>{if(-1!==l){let i=r[l];if(!i){const{cmds:o,crds:a}=e.U.glyphToPath(t,l);let s,c,u,h,d="",p=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];d+=o[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+a[p++]}if(a.length){s=c=1/0,u=h=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],n=a[e+1];t<s&&(s=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else s=u=c=h=0;i=r[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:s,yMin:c,xMax:u,yMax:h,path:d}}s.call(null,i,c+p[3*h]*u,p[3*h+1]*u,d),c+=p[3*h+2]*u,a&&(c+=a*o)}d+=i.codePointAt(d)>65535?2:1})),c}};return l}(e.parse(r)[0])}}],init:(e,t,n)=>n(e(),t())}),bt=mt({name:"FontResolver",dependencies:[function(e,t){const n=Object.create(null),r=Object.create(null);function i(t,i){let o=n[t];o?i(o):r[t]?r[t].push(i):(r[t]=[i],function(i,o){const a=e=>{console.error(`Failure loading font ${i}`,e)};try{const o=new XMLHttpRequest;o.open("get",i,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status>=400)a(new Error(o.statusText));else if(o.status>0)try{const a=e(o.response);a.src=i,(e=>{e.src=t,n[t]=e,r[t].forEach((t=>t(e))),delete r[t]})(a)}catch(e){a(e)}},o.onerror=a,o.send()}catch(e){a(e)}}(t))}return function(e,r,{lang:o,fonts:a=[],style:s="normal",weight:l="normal",unicodeFontsURL:c}={}){const u=new Uint8Array(e.length),h=[];e.length||m();const d=new Map,p=[];if("italic"!==s&&(s="normal"),"number"!=typeof l&&(l="bold"===l?700:400),a&&!Array.isArray(a)&&(a=[a]),(a=a.slice().filter((e=>!e.lang||e.lang.test(o))).reverse()).length){const t=1,r=2;let o=0;!function s(l=0){for(let c=l,f=e.length;c<f;c++){const l=e.codePointAt(c);if(o===t&&h[u[c-1]].supportsCodePoint(l)||/\s/.test(e[c]))u[c]=u[c-1],o===r&&(p[p.length-1][1]=c);else for(let e=u[c],f=a.length;e<=f;e++)if(e===f)(o===r?p[p.length-1]:p[p.length]=[c,c])[1]=c,o=r;else{u[c]=e;const{src:r,unicodeRange:p}=a[e];if(!p||v(l,p)){const e=n[r];if(!e)return void i(r,(()=>{s(c)}));if(e.supportsCodePoint(l)){let n=d.get(e);"number"!=typeof n&&(n=h.length,h.push(e),d.set(e,n)),u[c]=n,o=t;break}}}l>65535&&c+1<f&&(u[c+1]=u[c],c++,o===r&&(p[p.length-1][1]=c))}f()}()}else p.push([0,e.length-1]),f();function f(){if(p.length){const n=p.map((t=>e.substring(t[0],t[1]+1))).join("\n");t.getFontsForString(n,{lang:o||void 0,style:s,weight:l,dataUrl:c}).then((({fontUrls:e,chars:t})=>{const n=h.length;let r=0;p.forEach((e=>{for(let i=0,o=e[1]-e[0];i<=o;i++)u[e[0]+i]=t[r++]+n;r++}));let o=0;e.forEach(((t,r)=>{i(t,(t=>{h[r+n]=t,++o===e.length&&m()}))}))}))}else m()}function m(){r({chars:u,fonts:h})}function v(e,t){for(let n=0;n<t.length;n++){const[r,i=r]=t[n];if(r<=e&&e<=i)return!0}return!1}}},_t,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&!!(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach((function(t,n){e.push((+n).toString(36)+":"+t.toString(36))})),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach((function(e){var n=e.split(":");t.buckets.set(parseInt(n[0],36),parseInt(n[1],36))}))};var n=Math.pow(2,8),r=n-1,i=~r;function o(e){var t=function(e){return e&i}(e).toString(16),r=function(e){return(e&i)+n-1}(e).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+r+".json"}function a(e,t){var n=e&r,i=t.codePointAt(n/6|0);return!!((i=(i||48)-48)&1<<n%6)}function s(e,t){!function(e,t){var n;(n=e,n.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(e){return e.split("-").map((function(e){return parseInt(e.trim(),16)}))}))).forEach((function(e){var n=e[0],r=e[1];void 0===r&&(r=n),t(n,r)}))}(e,(function(e,n){for(var r=e;r<=n;r++)t(r)}))}var l={},c={},u=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(e){var n=u.get(e);return n||(n=new t,s(e.ranges,(function(e){return n.add(e)})),u.set(e,n)),n}var p,f=new Map;function m(e,t,n){return e[t]?t:e[n]?n:function(e){for(var t in e)return t}(e)}function v(e,t){var n=t;if(!e.includes(n)){n=1/0;for(var r=0;r<e.length;r++)Math.abs(e[r]-t)<Math.abs(n-t)&&(n=e[r])}return n}function g(e){return p||(p=new Set,s("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(e){p.add(e)}))),p.has(e)}return e.CodePointSet=t,e.clearCache=function(){l={},c={}},e.getFontsForString=function(e,t){void 0===t&&(t={});var n,r=t.lang;void 0===r&&(r=/\p{Script=Hangul}/u.test(n=e)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(n)?"ja":"en");var i=t.category;void 0===i&&(i="sans-serif");var s=t.style;void 0===s&&(s="normal");var u=t.weight;void 0===u&&(u=400);var p=(t.dataUrl||h).replace(/\/$/g,""),y=new Map,_=new Uint8Array(e.length),b={},w={},x=new Array(e.length),S=new Map,E=!1;function k(e){var t=f.get(e);return t||(t=fetch(p+"/"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json().then((function(e){if(!Array.isArray(e)||1!==e[0])throw new Error("Incorrect schema version; need 1, got "+e[0]);return e[1]}))})).catch((function(t){if(p!==h)return E||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+p+'", trying default CDN. '+t.message),E=!0),p=h,f.delete(e),k(e);throw t})),f.set(e,t)),t}for(var T=function(t){var n=e.codePointAt(t),r=o(n);x[t]=r,l[r]||S.has(r)||S.set(r,k(r).then((function(e){l[r]=e}))),n>65535&&(t++,A=t)},A=0;A<e.length;A++)T(A);return Promise.all(S.values()).then((function(){S.clear();for(var t=function(t){var i=e.codePointAt(t),o=null,s=l[x[t]],u=void 0;for(var h in s){var d=w[h];if(void 0===d&&(d=w[h]=new RegExp(h).test(r||"en")),d){for(var p in u=h,s[h])if(a(i,s[h][p])){o=p;break}break}}if(!o)e:for(var f in s)if(f!==u)for(var m in s[f])if(a(i,s[f][m])){o=m;break e}o||(console.debug("No font coverage for U+"+i.toString(16)),o="latin"),x[t]=o,c[o]||S.has(o)||S.set(o,k("font-meta/"+o+".json").then((function(e){c[o]=e}))),i>65535&&(t++,n=t)},n=0;n<e.length;n++)t(n);return Promise.all(S.values())})).then((function(){for(var t,n=null,r=0;r<e.length;r++){var o=e.codePointAt(r);if(n&&(g(o)||d(n).has(o)))_[r]=_[r-1];else{n=c[x[r]];var a=b[n.id];if(!a){var l=n.typeforms,h=m(l,i,"sans-serif"),f=m(l[h],s,"normal"),w=v(null===(t=l[h])||void 0===t?void 0:t[f],u);a=b[n.id]=p+"/font-files/"+n.id+"/"+h+"."+f+"."+w+".woff"}var S=y.get(a);null==S&&(S=y.size,y.set(a,S)),_[r]=S}o>65535&&(r++,_[r]=_[r-1])}return{fontUrls:Array.from(y.keys()),chars:_}}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,n)=>e(t,n())}),wt=()=>(self.performance||Date).now(),xt=yt();let St;const Et=[];let kt=0;function Tt(){const e=wt();for(;Et.length&&wt()-e<5;)Et.shift()();kt=Et.length?setTimeout(Tt,0):0}const At=(...e)=>new Promise(((t,n)=>{Et.push((()=>{const r=wt();try{xt.webgl.generateIntoCanvas(...e),t({timing:wt()-r})}catch(e){n(e)}})),kt||(kt=setTimeout(Tt,0))})),Ct=4,Mt=2e3,Lt={};let Rt=0;function Pt(e,t,n,r,i,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+Rt++%Ct;let h=Lt[u];return h||(h=Lt[u]={workerModule:mt({name:u,workerId:u,dependencies:[yt,wt],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,o).then((({textureData:n,timing:r})=>{const i=wt(),o=new Uint8Array(4*n.length);for(let e=0;e<n.length;e++)o[4*e+c]=n[e];return xt.webglUtils.renderImageData(a,o,s,l,e,t,1<<3-c),r+=wt()-i,0==--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){pt[e]&&pt[e].forEach((function(e){e()})),dt[e]&&(dt[e].terminate(),delete dt[e])}(u)}),Mt)),{timing:r}}))}const It=xt.webglUtils.resizeWebGLCanvasWithoutClearing,Dt={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Ot=new r.Q1f;let Ft=!1;function Nt(){return(self.performance||Date).now()}const jt=Object.create(null);function Bt({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:l}=Dt,c=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,l,c,u=!0){return u?At(e,t,n,r,i,o,a,s,l,c).then(null,(u=>(St||(console.warn("WebGL SDF generation failed, falling back to JS",u),St=!0),Pt(e,t,n,r,i,o,a,s,l,c)))):Pt(e,t,n,r,i,o,a,s,l,c)}(r,r,e,n,c,l,i,u%(s/r)*r,Math.floor(u/(s/r))*r,t%4,a)}let Ut;function zt(e){return Ut||(Ut="undefined"==typeof document?{}:document.createElement("a")),Ut.href=e,Ut.href}function Gt(e){if("function"!=typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const Ht=mt({name:"Typesetter",dependencies:[function(e,t){const n=1/0,r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",o=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:a="",font:h,lang:d,sdfGlyphSize:p=64,fontSize:f=400,fontWeight:m=1,fontStyle:v="normal",letterSpacing:g=0,lineHeight:y="normal",maxWidth:_=n,direction:b,textAlign:w="left",textIndent:x=0,whiteSpace:S="normal",overflowWrap:E="normal",anchorX:k=0,anchorY:T=0,metricsOnly:A=!1,unicodeFontsURL:C,preResolvedFonts:M=null,includeCaretPositions:L=!1,chunkedBoundsSize:R=8192,colorRanges:P=null},I){const D=c(),O={fontLoad:0,typesetting:0};a.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),a=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),f=+f,g=+g,_=+_,y=y||"normal",x=+x,function({text:t,lang:n,fonts:r,style:i,weight:o,preResolvedFonts:a,unicodeFontsURL:s},l){const c=({chars:e,fonts:t})=>{let n,r;const i=[];for(let o=0;o<e.length;o++)e[o]!==r?(r=e[o],i.push(n={start:o,end:o,fontObj:t[e[o]]})):n.end=o;l(i)};a?c(a):e(t,c,{lang:n,fonts:r,style:i,weight:o,unicodeFontsURL:s})}({text:a,lang:d,style:v,weight:m,fonts:"string"==typeof h?[{src:h}]:h,unicodeFontsURL:C,preResolvedFonts:M},(e=>{O.fontLoad=c()-D;const h=isFinite(_);let d=null,p=null,m=null,v=null,C=null,M=null,F=null,N=null,j=0,B=0,U="nowrap"!==S;const z=new Map,G=c();let H=x,q=0,V=new u;const W=[V];e.forEach((e=>{const{fontObj:t}=e,{ascender:n,descender:s,unitsPerEm:l,lineGap:c,capHeight:d,xHeight:p}=t;let m=z.get(t);if(!m){const e=f/l,r="normal"===y?(n-s+c)*e:y*f,i=(r-(n-s)*e)/2,o=Math.min(r,(n-s)*e),a=(n+s)/2*e+o/2;m={index:z.size,src:t.src,fontObj:t,fontSizeMult:e,unitsPerEm:l,ascender:n*e,descender:s*e,capHeight:d*e,xHeight:p*e,lineHeight:r,baseline:-i-n*e,caretTop:a,caretBottom:a-o},z.set(t,m)}const{fontSizeMult:v}=m,b=a.slice(e.start,e.end+1);let w,S;t.forEachGlyph(b,f,g,((t,n,s,l)=>{n+=q,l+=e.start,w=n,S=t;const c=a.charAt(l),d=t.advanceWidth*v,p=V.count;let y;if("isEmpty"in t||(t.isWhitespace=!!c&&new RegExp(i).test(c),t.canBreakAfter=!!c&&o.test(c),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||r.test(c)),t.isWhitespace||t.isEmpty||B++,U&&h&&!t.isWhitespace&&n+d+H>_&&p){if(V.glyphAt(p-1).glyphObj.canBreakAfter)y=new u,H=-n;else for(let e=p;e--;){if(0===e&&"break-word"===E){y=new u,H=-n;break}if(V.glyphAt(e).glyphObj.canBreakAfter){y=V.splitAt(e+1);const t=y.glyphAt(0).x;H-=t;for(let e=y.count;e--;)y.glyphAt(e).x-=t;break}}y&&(V.isSoftWrapped=!0,V=y,W.push(V),j=_)}let b=V.glyphAt(V.count);b.glyphObj=t,b.x=n+H,b.y=s,b.width=d,b.charIndex=l,b.fontData=m,"\n"===c&&(V=new u,W.push(V),H=-(n+d+g*f)+x)})),q=w+S.advanceWidth*v+g*f}));let Y=0;W.forEach((e=>{let t=!0;for(let n=e.count;n--;){const r=e.glyphAt(n);t&&!r.glyphObj.isWhitespace&&(e.width=r.x+r.width,e.width>j&&(j=e.width),t=!1);let{lineHeight:i,capHeight:o,xHeight:a,baseline:s}=r.fontData;i>e.lineHeight&&(e.lineHeight=i);const l=s-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+o),e.ex=Math.max(e.ex,e.baseline+a)}e.baseline-=Y,e.cap-=Y,e.ex-=Y,Y+=e.lineHeight}));let X=0,K=0;if(k&&("number"==typeof k?X=-k:"string"==typeof k&&(X=-j*("left"===k?0:"center"===k?.5:"right"===k?1:s(k)))),T&&("number"==typeof T?K=-T:"string"==typeof T&&(K="top"===T?0:"top-baseline"===T?-W[0].baseline:"top-cap"===T?-W[0].cap:"top-ex"===T?-W[0].ex:"middle"===T?Y/2:"bottom"===T?Y:"bottom-baseline"===T?-W[W.length-1].baseline:s(T)*Y)),!A){const e=t.getEmbeddingLevels(a,b);d=new Uint16Array(B),p=new Uint8Array(B),m=new Float32Array(2*B),v={},F=[n,n,-1/0,-1/0],N=[],L&&(M=new Float32Array(4*a.length)),P&&(C=new Uint8Array(3*B));let r,i,o=0,s=-1,c=-1;if(W.forEach(((u,h)=>{let{count:f,width:g}=u;if(f>0){let h=0;for(let e=f;e--&&u.glyphAt(e).glyphObj.isWhitespace;)h++;let y=0,_=0;if("center"===w)y=(j-g)/2;else if("right"===w)y=j-g;else if("justify"===w&&u.isSoftWrapped){let e=0;for(let t=f-h;t--;)u.glyphAt(t).glyphObj.isWhitespace&&e++;_=(j-g)/e}if(_||y){let e=0;for(let t=0;t<f;t++){let n=u.glyphAt(t);const r=n.glyphObj;n.x+=y+e,0!==_&&r.isWhitespace&&t<f-h&&(e+=_,n.width+=_)}}const b=t.getReorderSegments(a,e,u.glyphAt(0).charIndex,u.glyphAt(u.count-1).charIndex);for(let e=0;e<b.length;e++){const[t,n]=b[e];let r=1/0,i=-1/0;for(let e=0;e<f;e++)if(u.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<f;o++){let e=u.glyphAt(o);if(e.charIndex>n)break;o<f-h&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=u.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let x;const S=e=>x=e;for(let h=0;h<f;h++){const f=u.glyphAt(h);x=f.glyphObj;const g=x.index,y=1&e.levels[f.charIndex];if(y){const e=t.getMirroredCharacter(a[f.charIndex]);e&&f.fontData.fontObj.forEachGlyph(e,0,0,S)}if(L){const{charIndex:e,fontData:t}=f,n=f.x+X,r=f.x+f.width+X;M[4*e]=y?r:n,M[4*e+1]=y?n:r,M[4*e+2]=u.baseline+t.caretBottom+K,M[4*e+3]=u.baseline+t.caretTop+K;const i=e-s;i>1&&l(M,s,i),s=e}if(P){const{charIndex:e}=f;for(;e>c;)c++,P.hasOwnProperty(c)&&(i=P[c])}if(!x.isWhitespace&&!x.isEmpty){const e=o++,{fontSizeMult:t,src:a,index:s}=f.fontData,l=v[a]||(v[a]={});l[g]||(l[g]={path:x.path,pathBounds:[x.xMin,x.yMin,x.xMax,x.yMax]});const c=f.x+X,h=f.y+u.baseline+K;m[2*e]=c,m[2*e+1]=h;const y=c+x.xMin*t,_=h+x.yMin*t,b=c+x.xMax*t,w=h+x.yMax*t;y<F[0]&&(F[0]=y),_<F[1]&&(F[1]=_),b>F[2]&&(F[2]=b),w>F[3]&&(F[3]=w),e%R==0&&(r={start:e,end:e,rect:[n,n,-1/0,-1/0]},N.push(r)),r.end++;const S=r.rect;if(y<S[0]&&(S[0]=y),_<S[1]&&(S[1]=_),b>S[2]&&(S[2]=b),w>S[3]&&(S[3]=w),d[e]=g,p[e]=s,P){const t=3*e;C[t]=i>>16&255,C[t+1]=i>>8&255,C[t+2]=255&i}}}}})),M){const e=a.length-s;e>1&&l(M,s,e)}}const $=[];z.forEach((({index:e,src:t,unitsPerEm:n,ascender:r,descender:i,lineHeight:o,capHeight:a,xHeight:s})=>{$[e]={src:t,unitsPerEm:n,ascender:r,descender:i,lineHeight:o,capHeight:a,xHeight:s}})),O.typesetting=c()-G,I({glyphIds:d,glyphFontIndices:p,glyphPositions:m,glyphData:v,fontData:$,caretPositions:M,glyphColors:C,chunkedBounds:N,fontSize:f,topBaseline:K+W[0].baseline,blockBounds:[X,K-Y,X+j,K],visibleBounds:F,timings:O})}))}function s(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function l(e,t,n){const r=e[4*t],i=e[4*t+1],o=e[4*t+2],a=e[4*t+3],s=(i-r)/n;for(let i=0;i<n;i++){const n=4*(t+i);e[n]=r+s*i,e[n+1]=r+s*(i+1),e[n+2]=o,e[n+3]=a}}function c(){return(self.performance||Date).now()}function u(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return u.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(e){let t=u.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new u;return t.data=this.data.splice(e*h.length),t}},u.flyweight=h.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*h.length+n]},set(e){this.data[this.index*h.length+n]=e}}),e)),{data:null,index:0}),{typeset:a,measure:function(e,t){a({...e,metricsOnly:!0},(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}))}}},bt,function(){return function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,c.set(r+=o,n[e]);for(var s=0;s<a;s++)c.set(++r,n[e])}))}};for(var r in t)e(r)}}(),c.get(e.codePointAt(0))||n.L}var h,d,p,f={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}})),{map:i,reverseMap:o}}function v(){if(!h){var e=m(f.pairs,!0),t=e.map,n=e.reverseMap;h=t,d=n,p=m(f.canonical,!1).map}}function g(e){return v(),h.get(e)||null}function y(e){return v(),d.get(e)||null}function _(e){return v(),p.get(e)||null}var b,w=n.L,x=n.R,S=n.EN,E=n.ES,k=n.ET,T=n.AN,A=n.CS,C=n.B,M=n.S,L=n.ON,R=n.BN,P=n.NSM,I=n.AL,D=n.LRO,O=n.RLO,F=n.LRE,N=n.RLE,j=n.PDF,B=n.LRI,U=n.RLI,z=n.FSI,G=n.PDI;function H(e){return function(){if(!b){var e=m("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),b=t}}(),b.get(e)||null}function q(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var c=t.levels.slice(a,s+1),h=s;h>=a&&u(e[h])&l;h--)c[h]=i.level;for(var d=i.level,p=1/0,f=0;f<c.length;f++){var m=c[f];m>d&&(d=m),m<p&&(p=1|m)}for(var v=d;v>=p;v--)for(var g=0;g<c.length;g++)if(c[g]>=v){for(var y=g;g+1<c.length&&c[g+1]>=v;)g++;g>y&&o.push([y+a,g+a])}}})),o}function V(e,t,n,r){for(var i=q(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=_,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var c=new Map;function h(e,t){var r=n[e];n[e]=t,c.set(r,c.get(r)-1),r&a&&c.set(a,c.get(a)-1),c.set(t,(c.get(t)||0)+1),t&a&&c.set(a,(c.get(a)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],m=null,v=0;v<e.length;v++)m||f.push(m={start:v,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:zt(v,!1)}),n[v]&C&&(m.end=v,m=null);for(var b=N|F|O|D|i|G|j|C,H=function(e){return e+(1&e?1:2)},q=function(e){return e+(1&e?2:1)},V=0;V<f.length;V++){var W=[{_level:(m=f[V]).level,_override:0,_isolate:0}],Y=void 0,X=0,K=0,$=0;c.clear();for(var J=m.start;J<=m.end;J++){var Z=n[J];if(Y=W[W.length-1],c.set(Z,(c.get(Z)||0)+1),Z&a&&c.set(a,(c.get(a)||0)+1),Z&b)if(Z&(N|F)){d[J]=Y._level;var Q=(Z===N?q:H)(Y._level);Q<=125&&!X&&!K?W.push({_level:Q,_override:0,_isolate:0}):X||K++}else if(Z&(O|D)){d[J]=Y._level;var ee=(Z===O?q:H)(Y._level);ee<=125&&!X&&!K?W.push({_level:ee,_override:Z&O?x:w,_isolate:0}):X||K++}else if(Z&i){Z&z&&(Z=1===zt(J+1,!0)?U:B),d[J]=Y._level,Y._override&&h(J,Y._override);var te=(Z===U?q:H)(Y._level);te<=125&&0===X&&0===K?($++,W.push({_level:te,_override:0,_isolate:1,_isolInitIndex:J})):X++}else if(Z&G){if(X>0)X--;else if($>0){for(K=0;!W[W.length-1]._isolate;)W.pop();var ne=W[W.length-1]._isolInitIndex;null!=ne&&(p.set(ne,J),p.set(J,ne)),W.pop(),$--}Y=W[W.length-1],d[J]=Y._level,Y._override&&h(J,Y._override)}else Z&j?(0===X&&(K>0?K--:!Y._isolate&&W.length>1&&(W.pop(),Y=W[W.length-1])),d[J]=Y._level):Z&C&&(d[J]=m.level);else d[J]=Y._level,Y._override&&Z!==R&&h(J,Y._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=d[oe],le=ae&i,ce=ae===G;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[ie=de],fe=void 0;ie&&ie._endsWithIsolInit&&null!=(fe=p.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===fe){pe.push(ie=re[me]);break}for(var ve=[],ge=0;ge<pe.length;ge++)for(var ye=pe[ge],_e=ye._start;_e<=ye._end;_e++)ve.push(_e);for(var be=d[ve[0]],we=m.level,xe=ve[0]-1;xe>=0;xe--)if(!(n[xe]&s)){we=d[xe];break}var Se=ve[ve.length-1],Ee=d[Se],ke=m.level;if(!(n[Se]&i))for(var Te=Se+1;Te<=m.end;Te++)if(!(n[Te]&s)){ke=d[Te];break}ue.push({_seqIndices:ve,_sosType:Math.max(we,be)%2?x:w,_eosType:Math.max(ke,Ee)%2?x:w})}}for(var Ae=0;Ae<ue.length;Ae++){var Ce=ue[Ae],Me=Ce._seqIndices,Le=Ce._sosType,Re=Ce._eosType,Pe=1&d[Me[0]]?x:w;if(c.get(P))for(var Ie=0;Ie<Me.length;Ie++){var De=Me[Ie];if(n[De]&P){for(var Oe=Le,Fe=Ie-1;Fe>=0;Fe--)if(!(n[Me[Fe]]&s)){Oe=n[Me[Fe]];break}h(De,Oe&(i|G)?L:Oe)}}if(c.get(S))for(var Ne=0;Ne<Me.length;Ne++){var je=Me[Ne];if(n[je]&S)for(var Be=Ne-1;Be>=-1;Be--){var Ue=-1===Be?Le:n[Me[Be]];if(Ue&o){Ue===I&&h(je,T);break}}}if(c.get(I))for(var ze=0;ze<Me.length;ze++){var Ge=Me[ze];n[Ge]&I&&h(Ge,x)}if(c.get(E)||c.get(A))for(var He=1;He<Me.length-1;He++){var qe=Me[He];if(n[qe]&(E|A)){for(var Ve=0,We=0,Ye=He-1;Ye>=0&&(Ve=n[Me[Ye]])&s;Ye--);for(var Xe=He+1;Xe<Me.length&&(We=n[Me[Xe]])&s;Xe++);Ve===We&&(n[qe]===E?Ve===S:Ve&(S|T))&&h(qe,Ve)}}if(c.get(S))for(var Ke=0;Ke<Me.length;Ke++){var $e=Me[Ke];if(n[$e]&S){for(var Je=Ke-1;Je>=0&&n[Me[Je]]&(k|s);Je--)h(Me[Je],S);for(Ke++;Ke<Me.length&&n[Me[Ke]]&(k|s|S);Ke++)n[Me[Ke]]!==S&&h(Me[Ke],S)}}if(c.get(k)||c.get(E)||c.get(A))for(var Ze=0;Ze<Me.length;Ze++){var Qe=Me[Ze];if(n[Qe]&(k|E|A)){h(Qe,L);for(var et=Ze-1;et>=0&&n[Me[et]]&s;et--)h(Me[et],L);for(var tt=Ze+1;tt<Me.length&&n[Me[tt]]&s;tt++)h(Me[tt],L)}}if(c.get(S))for(var nt=0,rt=Le;nt<Me.length;nt++){var it=Me[nt],ot=n[it];ot&S?rt===w&&h(it,w):ot&o&&(rt=ot)}if(c.get(a)){for(var at=x|S|T,st=at|w,lt=[],ct=[],ut=0;ut<Me.length;ut++)if(n[Me[ut]]&a){var ht=e[Me[ut]],dt=void 0;if(null!==g(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=y(ht)))for(var pt=ct.length-1;pt>=0;pt--){var ft=ct[pt].char;if(ft===dt||ft===y(_(ht))||g(_(ft))===ht){lt.push([ct[pt].seqIndex,ut]),ct.length=pt;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var vt=lt[mt],gt=vt[0],yt=vt[1],_t=!1,bt=0,wt=gt+1;wt<yt;wt++){var xt=Me[wt];if(n[xt]&st){_t=!0;var St=n[xt]&at?x:w;if(St===Pe){bt=St;break}}}if(_t&&!bt){bt=Le;for(var Et=gt-1;Et>=0;Et--){var kt=Me[Et];if(n[kt]&st){var Tt=n[kt]&at?x:w;bt=Tt!==Pe?Tt:Pe;break}}}if(bt){if(n[Me[gt]]=n[Me[yt]]=bt,bt!==Pe)for(var At=gt+1;At<Me.length;At++)if(!(n[Me[At]]&s)){u(e[Me[At]])&P&&(n[Me[At]]=bt);break}if(bt!==Pe)for(var Ct=yt+1;Ct<Me.length;Ct++)if(!(n[Me[Ct]]&s)){u(e[Me[Ct]])&P&&(n[Me[Ct]]=bt);break}}}for(var Mt=0;Mt<Me.length;Mt++)if(n[Me[Mt]]&a){for(var Lt=Mt,Rt=Mt,Pt=Le,It=Mt-1;It>=0;It--){if(!(n[Me[It]]&s)){Pt=n[Me[It]]&at?x:w;break}Lt=It}for(var Dt=Re,Ot=Mt+1;Ot<Me.length;Ot++){if(!(n[Me[Ot]]&(a|s))){Dt=n[Me[Ot]]&at?x:w;break}Rt=Ot}for(var Ft=Lt;Ft<=Rt;Ft++)n[Me[Ft]]=Pt===Dt?Pt:Pe;Mt=Rt}}}for(var Nt=m.start;Nt<=m.end;Nt++){var jt=d[Nt],Bt=n[Nt];if(1&jt?Bt&(w|S|T)&&d[Nt]++:Bt&x?d[Nt]++:Bt&(T|S)&&(d[Nt]+=2),Bt&s&&(d[Nt]=0===Nt?m.level:d[Nt-1]),Nt===m.end||u(e[Nt])&(M|C))for(var Ut=Nt;Ut>=0&&u(e[Ut])&l;Ut--)d[Ut]=m.level}}return{levels:d,paragraphs:f};function zt(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(x|I))return 1;if(a&(C|w)||r&&a===G)return 0;if(a&i){var s=Gt(o);o=-1===s?e.length:s}}return 0}function Gt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&C)break;if(a&G){if(0==--r)return o}else a&i&&r++}return-1}},e.getMirroredCharacter=H,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=H(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=q,e.getReorderedIndices=V,e.getReorderedString=function(e,t,n,r){var i=V(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?H(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=g,Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,n)=>e(t,n())}),qt=mt({name:"Typesetter",dependencies:[Ht],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[];for(let n in e)e[n]&&e[n].buffer&&t.push(e[n].buffer);return t}}),Vt={},Wt="aTroikaGlyphIndex";class Yt extends r.CmU{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new r.iyt,this.boundingBox=new r.NRn}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===r.hsX?t/2:0,e===r.$EB?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!=typeof e||e<1)&&(e=1);let t=function(e){let t=Vt[e];if(!t){const n=new r.bdM(1,1,e,e),i=n.clone(),o=n.attributes,a=i.attributes,s=new r.LoY,l=o.uv.count;for(let e=0;e<l;e++)a.position.array[3*e]*=-1,a.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{s.setAttribute(e,new r.qtW([...o[e].array,...a[e].array],o[e].itemSize))})),s.setIndex([...n.index.array,...i.index.array.map((e=>e+l))]),s.translate(.5,.5,0),t=Vt[e]=s}return t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){Xt(this,"aTroikaGlyphBounds",e,4),Xt(this,Wt,t,1),Xt(this,"aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=i((d+c)/u)!==i((p+c)/u)?-h:o(s(d)*h,s(p)*h),m=i((d-c)/u)!==i((p-c)/u)?h:a(s(d)*h,s(p)*h),v=i((d+r)/u)!==i((p+r)/u)?2*h:a(h-l(d)*h,h-l(p)*h);n.min.set(f,e[1],t<0?-v:0),n.max.set(m,e[3],t<0?0:v)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(Wt).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function Xt(e,t,n,i){const o=e.getAttribute(t);n?o&&o.array.length===n.length?(o.array.set(n),o.needsUpdate=!0):(e.setAttribute(t,new r.uWO(n,i)),delete e._maxInstanceCount,e.dispose()):o&&e.deleteAttribute(t)}const Kt=new r.V9B({color:16777215,side:r.$EB,transparent:!0}),$t=8421504,Jt=new r.kn4,Zt=new r.Pq0,Qt=new r.Pq0,en=[],tn=new r.Pq0,nn="+x+y";function rn(e){return Array.isArray(e)?e[0]:e}let on=()=>{const e=new r.eaF(new r.bdM(1,1),Kt);return on=()=>e,e},an=()=>{const e=new r.eaF(new r.bdM(1,1,32,1),Kt);return an=()=>e,e};const sn={type:"syncstart"},ln={type:"synccomplete"},cn=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],un=cn.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class hn extends r.eaF{constructor(){super(new Yt,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=$t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=nn,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(sn),function(e,t){Ft=!0,e=function(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},e);const n=Nt(),{defaultFontURL:i}=Dt,o=[];if(i&&o.push({label:"default",src:zt(i)}),e.font&&o.push({label:"user",src:zt(e.font)}),e.font=o,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||Dt.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||Dt.unicodeFontsURL,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=Ot.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:a,sdfExponent:s}=Dt,{sdfGlyphSize:l}=e,c=a/l*4;let u=jt[l];if(!u){const e=document.createElement("canvas");e.width=a,e.height=256*l/c,u=jt[l]={glyphCount:0,sdfGlyphSize:l,sdfCanvas:e,sdfTexture:new r.gPd(e,void 0,void 0,void 0,r.k6q,r.k6q),contextLost:!1,glyphsByFont:new Map},u.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(Bt(t,e,!0))}))})),Promise.all(n).then((()=>{Gt(e),e.sdfTexture.needsUpdate=!0}))}))}(u)}const{sdfTexture:h,sdfCanvas:d}=u;qt(e).then((r=>{const{glyphIds:i,glyphFontIndices:o,fontData:p,glyphPositions:f,fontSize:m,timings:v}=r,g=[],y=new Float32Array(4*i.length);let _=0,b=0;const w=Nt(),x=p.map((e=>{let t=u.glyphsByFont.get(e.src);return t||u.glyphsByFont.set(e.src,t=new Map),t}));i.forEach(((e,t)=>{const n=o[t],{src:a,unitsPerEm:s}=p[n];let c=x[n].get(e);if(!c){const{path:t,pathBounds:i}=r.glyphData[a][e],o=Math.max(i[2]-i[0],i[3]-i[1])/l*(Dt.sdfMargin*l+.5),s=u.glyphCount++,h=[i[0]-o,i[1]-o,i[2]+o,i[3]+o];x[n].set(e,c={path:t,atlasIndex:s,sdfViewBox:h}),g.push(c)}const{sdfViewBox:h}=c,d=f[b++],v=f[b++],w=m/s;y[_++]=d+h[0]*w,y[_++]=v+h[1]*w,y[_++]=d+h[2]*w,y[_++]=v+h[3]*w,i[t]=c.atlasIndex})),v.quads=(v.quads||0)+(Nt()-w);const S=Nt();v.sdf={};const E=d.height,k=Math.ceil(u.glyphCount/c),T=Math.pow(2,Math.ceil(Math.log2(k*l)));T>E&&(console.info(`Increasing SDF texture size ${E}->${T}`),It(d,a,T),h.dispose()),Promise.all(g.map((t=>Bt(t,u,e.gpuAccelerateSDF).then((({timing:e})=>{v.sdf[t.atlasIndex]=e}))))).then((()=>{g.length&&!u.contextLost&&(Gt(u),h.needsUpdate=!0),v.sdfTotal=Nt()-S,v.total=Nt()-n,t(Object.freeze({parameters:e,sdfTexture:h,sdfGlyphSize:l,sdfExponent:s,glyphBounds:y,glyphAtlasIndices:i,glyphColors:r.glyphColors,caretPositions:r.caretPositions,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,capHeight:r.capHeight,xHeight:r.xHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings}))}))})),Promise.resolve().then((()=>{var e;u.contextLost||(e=d)._warm||(xt.webgl.isSupported(e),e._warm=!0)}))}({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(ln),e&&e()}))))}onBeforeRender(e,t,n,i,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=r.hB5}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=Kt.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){const t=nt(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new r.I9Y},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new r.IUQ(0,0,0,0)},uTroikaClipRect:{value:new r.IUQ(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new r.I9Y},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new r.Q1f},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new r.dwI},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(Xe,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return rn(this.material).getDepthMaterial()}get customDistanceMaterial(){return rn(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,i=this.textRenderInfo;if(i){const{sdfTexture:e,blockBounds:r}=i;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=i.sdfGlyphSize,n.uTroikaSDFExponent.value=i.sdfExponent,n.uTroikaTotalBounds.value.fromArray(r),n.uTroikaUseGlyphColors.value=!t&&!!i.glyphColors;let o,a,s,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(r)||0),o=i,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?$t:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)n.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(r[0]-e,r[1]-e,r[2]+e,r[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const o=t?this.outlineColor||0:this.color;if(null==o)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new r.Q1f;o===t._input&&"object"!=typeof o||t.set(t._input=o)}let a=this.orientation||nn;if(a!==e._orientation){let t=n.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let r=a!==nn&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;Zt.set(0,0,0)[n]="-"===e?1:-1,Qt.set(0,0,0)[o]="-"===i?-1:1,Jt.lookAt(tn,Zt.cross(Qt),Qt),t.setFromMatrix4(Jt)}else t.identity();e._orientation=a}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new r.I9Y){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new r.I9Y){return Zt.copy(e),this.localPositionToTextCoords(this.worldToLocal(Zt),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?an():on(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,en.length=0,o.raycast(e,en);for(let e=0;e<en.length;e++)en[e].object=this,t.push(en[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,un.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fn(r.key),r)}}function fn(e){var t=function(e,t){if("object"!=dn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=dn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dn(t)?t:t+""}cn.forEach((e=>{const t="_private_"+e;Object.defineProperty(hn.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})})),new WeakMap,new WeakMap;const mn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"lerpSingle",value:function(e,t,n){return e+(t-e)*n}},{key:"sineBetween",value:function(e,t,n){return((t-e)*Math.sin(n)+t+e)/2}},{key:"clamp",value:function(e,t,n){return Math.min(Math.max(e,t),n)}},{key:"getRandom",value:function(e,t){return Math.random()*(t-e)+e}}],null&&pn(e.prototype,null),t&&pn(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var vn=n(4344);function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_n(r.key),r)}}function _n(e){var t=function(e,t){if("object"!=gn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==gn(t)?t:t+""}var bn=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loaded=!1,this.pages=t},t=[{key:"setParams",value:function(e){this.scrollState=0,this.zDepth=-14;var t=e.position.z-this.zDepth,n=e.fov*Math.PI/180;this.aspect=window.innerWidth/window.innerHeight,this.planeHeightAtDistance=2*Math.tan(n/2)*t,this.planeWidthAtDistance=this.planeHeightAtDistance*this.aspect,this.repeatModifer=window.innerWidth>768?30:5,this.repeatAmount=this.planeWidthAtDistance/this.repeatModifer}},{key:"returnFontPerLocale",value:function(e){switch(e){case"ja_JP":return"/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/fonts/Noto-Sans-JP/NotoSansJP-Light.woff";case"ko_KR":return"/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/fonts/Noto-Sans-KR/NotoSansKR-Light.woff";default:return"/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/fonts/riviera-nights/RivieraNights-Light/RivieraNights-Light.woff"}}},{key:"init",value:function(e,t,n){var i=this;this.setParams(n);var o=this,a=this.returnFontPerLocale((0,vn.fI)());this.myText=new hn;var s=document.getElementById("SOEcanvasRoot"),l=new r.Q1f(s.dataset.textcolor),c=new r.Q1f(s.dataset.backgroundcolour);return this.myText.text=s.dataset.text,this.myText.font=a,this.myText.fontSize=mn.clamp(window.innerWidth/960,1.2,2),this.myText.textScale=1,this.myText.lineHeight=1.152,this.myText.letterSpacing=.072,this.myText.maxWidth=.875*this.planeWidthAtDistance,this.myText.color={r:0,g:0,b:0},this.myText.bgColor={r:c.r,g:c.g,b:c.b},this.myText.rawColor=s.dataset.textcolor,this.myText.textAlign="center",this.myText.strokeColor=0,this.myText.strokeWidth=0,this.myText.material=nt(new r._4j({roughness:.5,metalness:.5,side:r.$EB,color:15461355}),{timeUniform:"elapsed",uniforms:{screenHeight:{type:"f",value:window.innerHeight},screenMargin:{type:"f",value:.264*window.innerHeight},fadeStrength:{type:"f",value:1.15},textColour:{type:"v3",value:new r.Pq0(l.r,l.g,l.b)},bgColor:{type:"v3",value:new r.Pq0(c.r,c.g,c.b)}},fragmentDefs:"\n         uniform float screenHeight;\n         uniform float screenMargin;\n         uniform float fadeStrength;\n         uniform vec3 textColour;\n         uniform vec3 bgColor;\n        ",fragmentMainOutro:"\n            float colourMod = 1.0;\n          if(gl_FragCoord.y<screenMargin) {\n          \n            float valueModifier = colourMod*(pow(gl_FragCoord.y/screenMargin, fadeStrength));\n            //gl_FragColor = vec4(textColour.x*valueModifier, textColour.y*valueModifier, textColour.z*valueModifier, textColour.z*valueModifier);\n            //gl_FragColor = vec4(textColour.x*colourMod, textColour.y*colourMod, textColour.z*colourMod, valueModifier);\n          //gl_FragColor = vec4(textColour.x, textColour.y, textColour.z, valueModifier);\n            gl_FragColor = mix(vec4(textColour.x, textColour.y, textColour.z, 1.0), vec4(bgColor.x, bgColor.y, bgColor.z, 1.0), 1.0-valueModifier);\n            \n          } else if(gl_FragCoord.y>(screenHeight-screenMargin)) {\n          \n            float valueModifier = colourMod*(pow((1.0-((gl_FragCoord.y-(screenHeight-screenMargin))/screenMargin)), fadeStrength));\n            //gl_FragColor = vec4(textColour.x*valueModifier, textColour.y*valueModifier, textColour.z*valueModifier, textColour.z*valueModifier);\n            //gl_FragColor = vec4(textColour.x*colourMod, textColour.y*colourMod, textColour.z*colourMod, valueModifier);\n          //gl_FragColor = vec4(textColour.x, textColour.y, textColour.z, valueModifier);\n            gl_FragColor = mix(vec4(textColour.x, textColour.y, textColour.z, 1.0), vec4(bgColor.x, bgColor.y, bgColor.z, 1.0), 1.0-valueModifier);\n            \n          } else {\n            //gl_FragColor = vec4(textColour.x*colourMod, textColour.y*colourMod, textColour.z*colourMod, colourMod);\n            gl_FragColor = vec4(textColour.x, textColour.y, textColour.z, colourMod);\n          }\n        "}),this.myText.material.color=new r.Q1f(0),this.myText.textIndent=0,this.myText.anchorX="center",this.myText.anchorY="top",this.myText.fillOpacity=1,this.myText.strokeOpacity=1,this.myText.outlineWidth=0,this.myText.outlineOffsetX=0,this.myText.outlineOffsetY=0,this.myText.outlineOpacity=1,this.myText.selectable=!1,this.myText.debugSDF=!1,this.myText.position.set(0,-this.planeHeightAtDistance/2,-14),this.myText.material.transparent=!1,this.myText.material.blending=r.bCz,this.myText.sync((function(){o.meshHeight=Math.abs(i.myText.textRenderInfo.blockBounds[1]);var t=o.meshHeight/o.pages;o.meshHeight+=t,o.meshHeight+=2*t,o.myText.outlineBlur=.01065,o.loaded=!0,e.add(i.myText)})),this.myText}},{key:"killGUI",value:function(){}},{key:"update",value:function(e,t){this.loaded&&(this.scrollState=mn.lerpSingle(this.myText.position.y,this.meshHeight*t-this.planeHeightAtDistance/2,.1),this.myText.position.set(0,this.scrollState,-14))}}],t&&yn(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function wn(e){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(e)}function xn(){xn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==wn(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(wn(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function Sn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}w.workaroundEnabled=!0,r.ppV.legacyMode=!1;var kn,Tn=null,An=0,Cn=0,Mn=!1;function Ln(){var e;return e=xn().mark((function e(){var t,n,i,o,a,s,l,c,u,h,d,p,f,m,v,y,_,b,w,S,E,k,L,R,P;return xn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P=function(e){return{top:e.getBoundingClientRect().top}},R=function(){L(),v.killGUI(),a.remove(kn),kn=v.init(a,Tn,s)},L=function(){var e=Math.min(document.documentElement.clientWidth||0,window.innerWidth||0),t=Math.min(document.documentElement.clientHeight||0,window.innerHeight||0);s.aspect=e/t,s.updateProjectionMatrix(),s.setFocalLength(105),l.setSize(e,t),l.setPixelRatio(1),S.setSize(e,t)},k=function(){(An=P(t).top)>-i&&An<window.innerHeight?(Mn=!0,Cn=Math.abs(Math.min(0,An/i))):Mn=!1,m&&m.reset(Mn)},E=function(){requestAnimationFrame(E),o&&Mn&&(m&&m.update(An,Cn),v.update(An,Cn),S.render())},t=document.getElementById("SOEcanvasRoot"),n=t.dataset.backgroundcolour,i=3*window.innerHeight,t.style.height="300vh",t.style.background="#000000",o=!0,(a=new r.Z58).background=new r.Q1f(n),(s=new r.ubm(45,window.innerWidth/window.innerHeight,.1,1e3)).position.set(0,0,40),s.setFocalLength(105),(l=new r.JeP({powerPreference:"high-performance",antialias:!1,stencil:!1})).outputEncoding=r.S2Q,(c=l.domElement).style.position="sticky",c.style.top=0,t.appendChild(c),u=new r.Tap,e.next=25,Promise.all([new Promise((function(e){return u.load("/content/dam/rrmc/marketUK/common/3d-assets/dancing_hall_1k.jpg/jcr:content/renditions/original",e)}))]);case 25:return h=e.sent,O=1,d=function(e){if(Array.isArray(e))return e}(D=h)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(D,O)||function(e,t){if(e){if("string"==typeof e)return Sn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sn(e,t):void 0}}(D,O)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),p=d[0],a.environment=p,a.environment.mapping=r.wfO,f=new B,a.add(f.directionalLight(a,"#d25b5b",100,new r.Pq0(2.2,6.5,2.5),new r.Pq0(-1,-3,-6))),a.add(f.directionalLight(a,"#73ce73",100,new r.Pq0(0,6.5,2.5),new r.Pq0(0,-3,-6))),a.add(f.directionalLight(a,"#7f7fd2",100,new r.Pq0(-2.2,6.5,2.5),new r.Pq0(1,-3,-6))),m=new Ye,e.t0=a,e.next=38,m.init(Tn);case 38:e.t1=e.sent,e.t0.add.call(e.t0,e.t1),v=new bn(3),kn=v.init(a,Tn,s,!0),y=new M({blendFunction:x.NORMAL,saturation:.36,hue:0}),_=new A(x.SKIP),b=new T({brightness:-.057,contrast:.14,blendFunction:x.NORMAL}),w=new I(s,_,b,y),(S=new g(l)).addPass(new C(a,s)),S.addPass(w),S.render(),E(),k(),window.addEventListener("scroll",(function(){k()}),{passive:!0}),window.addEventListener("resize",R),L();case 55:case"end":return e.stop()}var D,O}),e)})),Ln=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){En(o,r,i,a,s,"next",e)}function s(e){En(o,r,i,a,s,"throw",e)}a(void 0)}))},Ln.apply(this,arguments)}document.addEventListenerRR("DOMContentLoaded",(function(){document.getElementById("SOEcanvasRoot")&&function(){Ln.apply(this,arguments)}()}))},808:(e,t,n)=>{"use strict";n.r(t);var r=n(5116),i=n(1500);function o(e,t){var n=e.querySelectorAll('[data-row-to-animate="true"]');0===n.length&&t(),[].slice.call(n).forEach((function(e){var t=e.getBoundingClientRect().top+window.pageYOffset;window.pageYOffset+window.innerHeight>t&&(e.setAttribute("data-row-to-animate",!1),function(e){var t=e.querySelectorAll(".rrmc-article-tile, .rrmc-accessory-tile"),n=e.querySelectorAll(".rrmc-accessory-tile"),r=new IntersectionObserver((function(e,t){!function(e,t){[].slice.call(e).forEach((function(e){var n=e.target,r=n.querySelector(".rrmc-accessories-tile-img-wrapper-img,.rrmc-article-tile-img-wrapper img");null!=r?(r.addEventListener("load",(function(){i.os.timeline().to(r,.4,{opacity:1})})),r.setAttribute("srcset",r.getAttribute("data-srcset")),r.setAttribute("src",r.getAttribute("data-src")),t.unobserve(n)):t.unobserve(n)}))}(e,t)}));[].slice.call(n).forEach((function(e){r.observe(e)})),i.os.timeline().staggerFromTo(t,1,{opacity:0,y:"100px"},{opacity:1,y:"0"},.15)}(e))}))}n(5127);var a=n(259);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var u,h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.parentEl=this.sandbox.parentElement,this.anchors=this.sandbox.querySelectorAll(".rrmc-article-tile-wrapping-link"),this.track=this.sandbox.querySelector(".js-rrmc-article-tile-carousel-track"),this.slides=this.sandbox.querySelectorAll(".rrmc-article-tile-slide"),this.currentSize=window.innerWidth>1440?"desktop":window.innerWidth>768?"tablet":"mobile",this.resetSlide=!1,this.unsubScroll=function(){document.removeEventListener("scroll",n.scrollListener)},this.scrollListener=function(){o(n.sandbox,n.unsubScroll)}},t=[{key:"tileClickHandler",value:function(e){e.preventDefault();var t=e.target.classList,n=!1,r=e.target.getAttribute("href");if(t.contains("rrmc-article-tile-wrapping-link")||t.contains("js-rrmc-button-text")){e.target.classList.contains("js-rrmc-button-text")&&(n=!0,r=e.target.parentElement.href);var i=e.target.innerText.toLowerCase(),o=e.target.closest(".rrmc-article-tile--description"),s="",l="";!1===n?(s=o.querySelector(".rrmc-article-tile--title").innerText.toLowerCase(),l=""===i?"".concat(s).concat(i):"".concat(s,"/").concat(i)):l="".concat(i),a.Gx({event:"headlineClick",eventCategory:"Inspiring Greatness",eventAction:n?"CTA Click":"Headline Click",eventLabel:l,eventCallback:function(){window.location=r},eventTimeout:2e3})}}},{key:"load",value:function(){this.parentEl.addEventListener("click",this.tileClickHandler),document.addEventListener("scroll",this.scrollListener)}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();u=document.querySelectorAll(".js-rrmc-article-tiles-carousel"),document.addEventListener("DOMContentLoaded",(function(){[].slice.call(u).forEach((function(e){var t=new h(e);e.data={articleTilesCarouselInstance:t},t.load()}))}));var d=n(9996);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t,n){return t=v(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(m=function(){return!!e})()}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}const y=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(d.A);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t,n){return t=x(t),function(e,t){if(t&&("object"==_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,w()?Reflect.construct(t,n||[],x(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}const E=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,Object.defineProperty(n,"prototype",{writable:!1}),n;var n}(d.A);var k=n(2725),T=n(997),A=n(7482),C=n(8607),M=n(4755),L=n(7709),R=n(8521);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function F(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var N="category",j=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.const_all_models="All models",this.const_all_categories="All",this.sandbox=t,this.grid=this.sandbox.querySelector(".js-rrmc-all-accessories-grid"),this.grid_shade=this.sandbox.querySelector(".rrmc-all-accessories-grid-shade"),this.elm_section_filters=this.sandbox.querySelector(".rrmc-all-accessories-models-filter-wrapper"),this.is_filters_open=!1,this.rows=this.sandbox.querySelectorAll(".rrmc-all-accessories-row-container"),this.inactive=this.sandbox.querySelector(".rrmc-all-accessories-grid-inactive"),this.active=this.sandbox.querySelector(".rrmc-all-accessories-grid-active"),this.link_banner=this.sandbox.querySelector(".js-rrmc-accessory-link-banner"),this.elm_divider_i=this.sandbox.querySelector(".rrmc-all-accessories-first"),this.elm_divider_ii=this.sandbox.querySelector(".rrmc-all-accessories-second"),this.row_template=this.sandbox.querySelector(".rrmc-row-template"),this.categories=this.sandbox.querySelectorAll(".js-rrmc-toggle-category-lazy"),this.subcategories=this.sandbox.querySelectorAll(".js-rrmc-toggle-sub-category-lazy"),this.models=this.sandbox.querySelectorAll(".js-rrmc-toggle-model-lazy"),this.cta_filters=this.sandbox.querySelector(".js-rrmc-filter-cta-lazy"),this.elm_filters_container=this.sandbox.querySelector(".rrmc-all-accessories-filters"),this.elm_reset_filters=this.elm_filters_container.querySelector(".js-rrmc-filter-reset-filters-lazy"),this.elm_apply_filters=this.elm_filters_container.querySelector(".js-rrmc-filter-apply-filters-lazy"),this.summary_elm_model=this.sandbox.querySelector(".rrmc-all-accessories-filters-summary--model"),this.summary_elm_categories=this.sandbox.querySelector(".rrmc-all-accessories-filters-summary--categories"),this.summary_elm_results=this.sandbox.querySelector(".rrmc-all-accessories-filters-summary--results"),this.summary_elm_categories_value=this.summary_elm_categories.querySelector(".rrmc-categories--value"),this.summary_elm_results_value=this.summary_elm_results.querySelector(".rrmc-categories--value"),this.disable_category_filters=this.sandbox.hasAttribute("data-disable-category-filters"),this.enable_ssubcategory_filters=this.sandbox.hasAttribute("data-enable-subcategory-filters"),this.disable_model_filters=this.sandbox.hasAttribute("data-disable-model-filters"),this.link_banner_position=parseInt(this.sandbox.getAttribute("data-link-banner-position"))||0,this.preselected_category=this.sandbox.getAttribute("data-preselected-category"),this.preselected_model=this.sandbox.getAttribute("data-preselected-model"),this.reflowTablet=!1,this.reflowDesktop=!1,this.parent_el=this.sandbox.parentElement,this.unsubScroll=function(){document.removeEventListenerRR("scroll",n.scrollListenerCardReveal)},this.scrollListenerCardReveal=function(){o(n.grid,n.unsubScroll)},this.on_scroll=function(){n.move_return_to_top_cta(),n.move_status_bar_mobile()},this.on_resize=function(){var e=window.innerWidth,t=(0,r.h)();C.uo.set(n.elm_section_filters,{clearProps:"height"}),n.height_section_filters=n.elm_section_filters.getBoundingClientRect().height,n.is_filters_open?t!==n.prev_is_tablet&&(!0===t?(0,M.disableBodyScroll)(n.elm_overlay_filters):(0,M.clearAllBodyScrollLocks)()):C.uo.set(n.elm_section_filters,{height:0}),e!==n.prev_window_width&&(n.applyCategoryFilters(),n.enable_ssubcategory_filters&&n.applySubCategoryFilters()),n.prev_is_tablet=t,n.prev_window_width=e},this.on_changed_height=function(){n.footer_height=n.var_footer_height.value(),n.last_section_pos=document.body.getBoundingClientRect().height},this.on_reset_filters=function(){n.on_reset_filters_deferred&&n.on_reset_filters_deferred()},this.on_apply_filters=function(){n.hide_filters_desktop(),n.hide_filter_overlay_mobile(!0),n.applyCategoryFilters(),n.applySubCategoryFilters(),n.send_analytics();for(var e=0,t=Object.keys(n.filters_model);e<t.length;e++){var r=t[e];n.filters_model[r]&&n.mem_filters_model&&!n.mem_filters_model[r]&&a.x_.filterSelected({search:[{searchLabel:"model",searchTerm:r}]})}},this.on_filters=function(){n.is_filters_open?(n.hide_filters_desktop(),n.hide_filter_overlay_mobile(!1),n.recall_filters(),n.send_analytics()):(n.reveal_filters_desktop(),n.reveal_filter_overlay_mobile(!1),n.remember_filters())},this.generateTemplate=function(){n.grid.innerHTML="",n.cards=n.active.querySelectorAll(".js-rrmc-accessory-tile"),n.cards=[].slice.call(n.cards).sort((function(e,t){var n=parseInt(e.getAttribute("data-sort-order")),r=parseInt(t.getAttribute("data-sort-order"));return n<r?-1:n>r?1:0}));var e=document.createDocumentFragment(),t=n.row_template.cloneNode(!1),i=n.row_template.cloneNode(!1),o=n.link_banner,a=n.link_banner_position,s=[].slice.call(n.cards),l=s.length,c=null,u=t.cloneNode(!1);if((0,r.h)()){if(!0===n.reflowTablet)return;n.reflowTablet=!0,n.reflowDesktop=!1;var h,d=I((s=[].slice.call(n.cards)).splice(0,2));try{for(d.s();!(h=d.n()).done;){var p=h.value;u.appendChild(p)}}catch(e){d.e(e)}finally{d.f()}c=2,l=s.length}else{if(!0===n.reflowDesktop)return;n.reflowDesktop=!0,n.reflowTablet=!1;var f,m=I((s=[].slice.call(n.cards)).splice(0,3));try{for(m.s();!(f=m.n()).done;){var v=f.value;u.appendChild(v)}}catch(e){m.e(e)}finally{m.f()}c=3,l=s.length}for(var g=0;g<l;++g)g===a&&(i.appendChild(o.cloneNode(!0)),e.appendChild(i)),g%c==0&&(e.appendChild(u),u=t.cloneNode(!1)),u.appendChild(s[g]);e.appendChild(u),n.grid.appendChild(e)},this.on_accessory_click=function(e){if(e.target.getAttribute("href")){e.preventDefault();var t=e.target.getAttribute("href"),r={productList:encodeURIComponent("All Accessories"),models:n.filter_query_params.models,categories:n.filter_query_params.categories,subcategories:n.filter_query_params.subcategories},i=L.stringify(r);t+="?".concat(i),window.location=t}}},t=[{key:"reveal_filters_desktop",value:function(){(new C.Y_).addLabel("start").to(this.elm_section_filters,.4,{height:this.height_section_filters},"start").to(this.elm_divider_i,.4,{y:25},"start").to(this.elm_section_filters,.4,{opacity:1}).to(this.elm_divider_ii,.4,{opacity:1},"start"),this.is_filters_open=!0,this.instance_cta_filters.tilt_icon_in(),this.dim_tiles()}},{key:"hide_filters_desktop",value:function(){(new C.Y_).addLabel("start").to(this.elm_divider_ii,.4,{opacity:0},"start").to(this.elm_section_filters,.4,{opacity:0},"start").to(this.elm_divider_i,.4,{y:0},"start").to(this.elm_section_filters,.4,{height:0},"start"),this.is_filters_open=!1,this.instance_cta_filters.tilt_icon_out(),this.undim_tiles()}},{key:"dim_tiles",value:function(){(new C.Y_).set(this.grid_shade,{display:"block"}).to(this.grid_shade,.4,{opacity:.7})}},{key:"undim_tiles",value:function(){(new C.Y_).to(this.grid_shade,.4,{opacity:0}).set(this.grid_shade,{display:"none"})}},{key:"send_analytics",value:function(){a.Gx({event:"accessoryFilters",eventCategory:"Accessory Filters",eventAction:"Update Filters",eventLabel:this.analytics_filters.join("|")})}},{key:"set_footer_offset",value:function(){this.footer_height=this.var_footer_height.value()}},{key:"load",value:function(){(0,T.A)(this,"var_footer_height",k.A.sub_footer_height,this.set_footer_offset),this.filters_mobile_init(),this.status_bar_mobile_init(),this.return_to_top_init(),document.addEventListenerRR("scroll",this.scrollListenerCardReveal),document.addEventListenerRR("scroll",this.on_scroll),this.grid_shade.addEventListenerRR("click",this.on_filters),this.instance_cta_filters=new A.default(this.cta_filters),this.instance_cta_filters.load(),this.instance_cta_reset_filters=new A.default(this.elm_reset_filters),this.instance_cta_reset_filters.load(),this.instance_cta_apply_filters=new A.default(this.elm_apply_filters),this.instance_cta_apply_filters.load(),this.elm_reset_filters.addEventListenerRR("click",this.on_reset_filters),this.elm_apply_filters.addEventListenerRR("click",this.on_apply_filters),this.cta_filters.addEventListenerRR("click",this.on_filters),window.addEventListenerRR("resize",this.on_resize),this.parent_el.addEventListenerRR("click",this.on_accessory_click),this.initFilters(),this.initPreselection(),this.initModels(),this.updateSummary(this.const_all_models,this.grid),this.on_resize(),this.on_scroll(),k.A.sub_height_resize.subscribe({next:this.on_changed_height})}},{key:"initPreselection",value:function(){var e=L.parse(location.search);if(e.categories){var t,n=I(e.categories.split(","));try{for(n.s();!(t=n.n()).done;){var r=t.value;this.filters_category[r]=!0}}catch(e){n.e(e)}finally{n.f()}}if(e.subcategories){var i,o=I(e.subcategories.split(","));try{for(o.s();!(i=o.n()).done;){var a=i.value;this.filters_subcategory[a]=!0}}catch(e){o.e(e)}finally{o.f()}}e.models?this.filters_model[e.models]=!0:this.filters_model[this.const_all_models]=!0,this.preselected_category&&void 0!==this.filters_category[this.preselected_category]&&(this.filters_category[this.preselected_category]=!0),this.preselected_model&&void 0!==this.filters_model[this.preselected_model]&&(this.filters_model[this.const_all_models]=!1,this.filters_model[this.preselected_model]=!0)}},{key:"initFilters",value:function(){var e=this;this.filters_category={},[].slice.call(this.categories).forEach((function(t){e.filters_category[t.getAttribute("data-category")]=!1})),this.filters_subcategory={},[].slice.call(this.subcategories).forEach((function(t){e.filters_subcategory[t.getAttribute("data-category")]=!1})),this.filters_model={},[].slice.call(this.models).forEach((function(t){var n=t.getAttribute("data-model");e.filters_model[n]=!1}))}},{key:"applyCategoryFilters",value:function(){var e=this,t=this.inactive.querySelectorAll(".js-rrmc-accessory-tile"),n=[].slice.call(this.cards||[]).concat([].slice.call(t));this.analytics_filters=[];for(var r=null,i=0,o=Object.keys(this.filters_model);i<o.length;i++){var s=o[i];this.filters_model[s]&&(r=s,this.analytics_filters.push(s))}for(var l=0,c=0,u=Object.keys(this.filters_category);c<u.length;c++){var h=u[c];this.filters_category[h]&&(l+=1,this.analytics_filters.push(h))}0===l?n.forEach((function(t){var n=e.filter_by_model(t,r)?e.active:e.inactive;t.parentNode.removeChild(t),t.setAttribute("data-row-to-animate","true"),n.appendChild(t)})):n.forEach((function(t){for(var n=!1,i=t.getAttribute("data-category"),o=0,a=Object.keys(e.filters_category);o<a.length;o++){var s=a[o];if(s===i&&e.filters_category[s]){n=!0;break}}var l=e.filter_by_model(t,r);t.parentNode.removeChild(t);var c=n&&l?e.active:e.inactive;t.setAttribute("data-row-to-animate","true"),c.appendChild(t)})),this.reflowTablet=!1,this.reflowDesktop=!1,this.updateSummary(r),this.generateTemplate();for(var d=L.parse(location.search),p="",f=0,m=Object.keys(this.filters_category);f<m.length;f++){var v=m[f];this.filters_category[v]&&(p+="".concat(v,","))}p=p.slice(0,-1);var g="";if(this.enable_ssubcategory_filters){for(var y=0,_=Object.keys(this.filters_subcategory);y<_.length;y++){var b=_[y];this.filters_subcategory[b]&&(g+="".concat(b,","))}g=g.slice(0,-1)}for(var w="",x=0,S=Object.keys(this.filters_model);x<S.length;x++){var E=S[x];this.filters_model[E]&&(w=E)}d.models=w,d.categories=p,d.subcategories=g,this.filter_query_params={models:w,categories:p,subcategories:g};var k=L.stringify(d);window.history.pushState("","","?".concat(k)),this.unsubScroll(),this.scrollListenerCardReveal(),document.addEventListenerRR("scroll",this.scrollListenerCardReveal),a.BW.forEach((function(e){try{window.google_tag_manager[e].dataLayer.set("ecommerce.impressions","")}catch(e){}})),a.u$([].slice.call(this.cards),"All Accessories")}},{key:"applySubCategoryFilters",value:function(){var e=this;if(this.enable_ssubcategory_filters){var t=this.inactive.querySelectorAll(".js-rrmc-accessory-tile"),n=[].slice.call(this.cards||[]).concat([].slice.call(t));this.analytics_filters=[];for(var r=null,i=0,o=Object.keys(this.filters_model);i<o.length;i++){var s=o[i];this.filters_model[s]&&(r=s,this.analytics_filters.push(s))}for(var l=0,c=0,u=Object.keys(this.filters_subcategory);c<u.length;c++){var h=u[c];this.filters_subcategory[h]&&(l+=1,this.analytics_filters.push(h))}0===l?n.forEach((function(t){var n=e.filter_by_model(t,r)?e.active:e.inactive;t.parentNode.removeChild(t),t.setAttribute("data-row-to-animate","true"),n.appendChild(t)})):n.forEach((function(t){for(var n=!1,i=t.getAttribute("data-sub-category"),o=0,a=Object.keys(e.filters_subcategory);o<a.length;o++){var s=a[o];if(s===i&&e.filters_subcategory[s]){n=!0;break}}var l=e.filter_by_model(t,r);t.parentNode.removeChild(t);var c=n&&l?e.active:e.inactive;t.setAttribute("data-row-to-animate","true"),c.appendChild(t)})),this.reflowTablet=!1,this.reflowDesktop=!1,this.updateSummary(r),this.generateTemplate();for(var d=L.parse(location.search),p="",f=0,m=Object.keys(this.filters_subcategory);f<m.length;f++){var v=m[f];this.filters_subcategory[v]&&(p+="".concat(v,","))}p=p.slice(0,-1);for(var g="",y=0,_=Object.keys(this.filters_model);y<_.length;y++){var b=_[y];this.filters_model[b]&&(g=b)}d.models=g,d.subcategories=p,this.filter_query_params={models:g,subcategories:p};var w=L.stringify(d);window.history.pushState("","","?".concat(w)),this.unsubScroll(),this.scrollListenerCardReveal(),document.addEventListenerRR("scroll",this.scrollListenerCardReveal),a.BW.forEach((function(e){try{window.google_tag_manager[e].dataLayer.set("ecommerce.impressions","")}catch(e){}})),a.u$([].slice.call(this.cards),"All Accessories")}}},{key:"updateSummary",value:function(e,t){var n=(t||this.active).querySelectorAll(".js-rrmc-accessory-tile");this.summary_elm_results_value.innerHTML="".concat(n.length),this.summary_elm_model.innerHTML="".concat(e);for(var r=0,i=0,o=Object.keys(this.filters_category);i<o.length;i++){var a=o[i];this.filters_category[a]&&(r+=1)}r&&(this.summary_elm_categories_value.innerHTML="".concat(r)),this.summary_elm_results_overlay_value_mobile.innerHTML="".concat(n.length),this.summary_elm_results_status_bar_value_mobile.innerHTML="".concat(n.length)}},{key:"filter_by_model",value:function(e,t){var n=!1;if(t===this.const_all_models)n=!0;else{var r=e.getAttribute("data-model");if(r)if(r===this.const_all_models)n=!0;else{var i,o=I(r.split(","));try{for(o.s();!(i=o.n()).done;)t===i.value&&(n=!0)}catch(e){o.e(e)}finally{o.f()}}}return n}},{key:"status_bar_mobile_init",value:function(){var e=this,t='<div class="rrmc-filters-status-bar">\n          <div class="rrmc-filters-status-bar-position">\n            <div class="rrmc-all-accessories-filters-summary rrmc-all-accessories-filters-summary-status-bar">\n              '.concat(this.disable_model_filters?"<div>\x3c!-- To preserve placement --\x3e</div>":"",'\n              <div class="rrmc-all-accessories-filters-cta ').concat(this.disable_model_filters?"rrmc-all-accessories-filters-cta--disabled":"",'">\n                <button \n                style="color: #000000"\n                        data-lazy-load-class="cta-lazy-load"\n                        class="rrmc-cta-component rrmc-button--tiny-label-stroked js-rrmc-filter-cta-lazy">\n                  <span class="rrmc-button-background js-rrmc-button-background"\n                      data-color="#000000"\n                ></span>\n                <span class="rrmc-cta-i" data-icon="add">\n                  <span class="rrmc-cta-icon-placeholder"></span>\n               </span>\n                  <span class="rrmc-button-text js-rrmc-button-text">').concat((0,R.K)("filter"),'</span>\n                </button>\n              </div>\n              <div class="rrmc-all-accessories-filters-summary-wrapper">\n                <span class="rrmc-all-accessories-filters-summary--results">\n                <span class="rrmc-dash"></span><span class="rrmc-categories--value"></span>\n                <span class="rrmc-categories-label">').concat((0,R.K)("Results"),"</span></span>\n              </div>\n            </div>\n          </div>\n      </div>"),n=(new DOMParser).parseFromString(t,"text/html").body.firstChild;document.body.appendChild(n),this.elm_filters_overlay_mobile=n,this.elm_status_bar_cta=n.querySelector(".js-rrmc-filter-cta-lazy"),this.summary_elm_results_status_bar_mobile=n.querySelector(".rrmc-all-accessories-filters-summary--results"),this.summary_elm_results_status_bar_value_mobile=n.querySelector(".rrmc-categories--value"),this.comp_status_bar_cta=new A.default(this.elm_status_bar_cta),this.comp_status_bar_cta.load(),this.on_close_mobile_filter_overlay=function(){e.hide_filters_desktop(),e.hide_filter_overlay_mobile(!0),e.recall_filters(),e.send_analytics()},this.mobile_filter_trigger_idle=!0,this.elm_status_bar_cta.addEventListenerRR("click",(function(){e.mobile_filter_trigger_idle&&(e.mobile_filter_trigger_idle=!1,setTimeout((function(){e.mobile_filter_trigger_idle=!0}),1e3),e.reveal_filter_overlay_mobile(!0),e.reveal_filters_desktop(),e.remember_filters())}))}},{key:"reveal_filter_overlay_mobile",value:function(e){var t=this;(new C.Y_).addLabel("start").set(this.elm_overlay_filters,{display:"block",y:"100%",ease:C.ys.easeInOut}).add((function(){t.comp_close_overlay_filter_mobile_cta=new A.default(t.filter_close_cta_mobile),t.comp_close_overlay_filter_mobile_cta.load(),t.instance_cta_reset_filters_mobile=new A.default(t.elm_reset_filters_mobile),t.instance_cta_reset_filters_mobile.load(),t.instance_cta_apply_filters_mobile=new A.default(t.elm_apply_filters_mobile),t.instance_cta_apply_filters_mobile.load(),t.filter_close_cta_mobile.addEventListenerRR("click",t.on_close_mobile_filter_overlay),t.elm_reset_filters_mobile.addEventListenerRR("click",t.on_reset_filters),t.elm_apply_filters_mobile.addEventListenerRR("click",t.on_apply_filters),e&&(0,M.disableBodyScroll)(t.elm_overlay_filters)})).to(this.elm_overlay_filters,1,{y:"0%",ease:C.ys.easeInOut},"+=0.1")}},{key:"hide_filter_overlay_mobile",value:function(e){var t=this;(new C.Y_).addLabel("start").to(this.elm_overlay_filters,1,{y:"100%",ease:C.ys.easeInOut}).add((function(){e&&(0,M.clearAllBodyScrollLocks)(),t.filter_close_cta_mobile.removeEventListenerRR("click",t.on_close_mobile_filter_overlay),t.elm_reset_filters_mobile.removeEventListenerRR("click",t.on_reset_filters),t.elm_apply_filters_mobile.removeEventListenerRR("click",t.on_apply_filters),t.comp_close_overlay_filter_mobile_cta.destroy(),t.instance_cta_reset_filters_mobile.destroy(),t.instance_cta_apply_filters_mobile.destroy()})).set(this.elm_overlay_filters,{display:"none"})}},{key:"filters_mobile_init",value:function(){var e=this.elm_filters_container,t=(new DOMParser).parseFromString('<div class="rrmc-filters-overlay">\n          <div class="rrmc-filters-overlay-position">\n            <div class="rrmc-filter-mobile-close-cta-wrapper">\n              <button data-overlay-action="overlayClose" \n              aria-label="Close Filters"\n              style="color: #000000"\n              type="button" class="rrmc-filter-mobile-close-cta rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--close">\n                 <span class="rrmc-button-background js-rrmc-button-background"\n                      data-color="#000000"\n                ></span>\n                <span class="rrmc-cta-i" data-icon="close">\n                  <span class="rrmc-cta-icon-placeholder"></span>\n               </span>\n                <span class="rrmc-button-text js-rrmc-button-text"></span>\n              </button>\n            </div>\n          </div>\n        </div>',"text/html").body.firstChild,n=t.querySelector(".rrmc-filters-overlay-position"),r=e.cloneNode(!0);n.appendChild(r),document.body.appendChild(t),this.elm_overlay_filters=t,this.models_mobile=this.elm_overlay_filters.querySelectorAll(".js-rrmc-toggle-model-lazy"),this.filter_close_cta_mobile=this.elm_overlay_filters.querySelector(".rrmc-filter-mobile-close-cta "),this.summary_elm_results_overlay_mobile=t.querySelector(".rrmc-all-accessories-filters-summary--results"),this.summary_elm_results_overlay_value_mobile=this.summary_elm_results_overlay_mobile.querySelector(".rrmc-categories--value"),this.elm_reset_filters_mobile=this.elm_overlay_filters.querySelector(".js-rrmc-filter-reset-filters-lazy"),this.elm_apply_filters_mobile=this.elm_overlay_filters.querySelector(".js-rrmc-filter-apply-filters-lazy")}},{key:"return_to_top_init",value:function(){var e=this,t=(new DOMParser).parseFromString('<div role="navigation" class="rrmc-filters-return-to-top">\n          <div class="rrmc-filters-return-to-top-position">\n            <div class="rrmc-filters-return-to-top-cta-wrapper">\n              <button type="button"\n                aria-label="Return to top"\n                data-theme="light" class="rrmc-filters-return-to-top-cta rrmc-cta-component rrmc-button--regular-icon-stroked">\n                <span class="rrmc-button-background js-rrmc-button-background"\n              data-color="#151515"></span>\n                <span class="rrmc-cta-i" data-icon="arrow-up">\n                  <span class="rrmc-cta-icon-placeholder"></span>\n               </span>\n                <span class="rrmc-button-text js-rrmc-button-text"></span>\n              </button>\n            </div>\n          </div>\n        </div>',"text/html").body.firstChild;document.body.appendChild(t),this.elm_return_to_top=t,this.elm_scroll_to_top_cta=this.elm_return_to_top.querySelector(".rrmc-filters-return-to-top-cta"),this.comp_scroll_to_top_cta=new A.default(this.elm_scroll_to_top_cta),this.comp_scroll_to_top_cta.load(),this.on_return_to_top=function(){var t=e.elm_filters_container.getBoundingClientRect().top+window.pageYOffset;C.uo.to(window,1,{scrollTo:{y:t-180,autoKill:!1}})},this.elm_scroll_to_top_cta.addEventListenerRR("click",this.on_return_to_top)}},{key:"move_status_bar_mobile",value:function(){var e=this.grid.getBoundingClientRect().top+window.pageYOffset,t=window.pageYOffset+window.innerHeight;if(t<e)C.uo.set(this.elm_filters_overlay_mobile,{y:96});else if(t<e+96){var n=96-(t-e);C.uo.set(this.elm_filters_overlay_mobile,{y:n})}else if(t>this.last_section_pos){var r=this.last_section_pos-t;C.uo.set(this.elm_filters_overlay_mobile,{y:r})}else C.uo.set(this.elm_filters_overlay_mobile,{clearProps:"all"})}},{key:"move_return_to_top_cta",value:function(){var e=this.elm_filters_container.getBoundingClientRect().bottom+window.pageYOffset;if(window.pageYOffset<e+60){var t=e+60-window.pageYOffset;C.uo.set(this.elm_return_to_top,{y:t})}else if(window.pageYOffset+window.innerHeight>this.last_section_pos){var n=this.last_section_pos-(window.pageYOffset+window.innerHeight);C.uo.set(this.elm_return_to_top,{y:n})}else C.uo.set(this.elm_return_to_top,{clearProps:"all"})}},{key:"initModels",value:function(){var e=this,t=[].slice.call(this.categories),n=[].slice.call(this.subcategories),r=[].slice.call(this.models),i=[].slice.call(this.models_mobile),o=function(t,n){var r,i={},o=I(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a.getAttribute("data-category"),l=new E(a);l.load(),n[s]&&l.switch_on(),s!==e.const_all_categories||Object.values(n).some(Boolean)||l.switch_on(),i[s]=l}}catch(e){o.e(e)}finally{o.f()}return i},s=o(t,this.filters_category),l=o(n,this.filters_subcategory),c=function(t){var n,r={},i=I(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=new y(o);a.load();var s=o.getAttribute("data-model");e.filters_model[s]&&a.switch_on(),r[s]=a}}catch(e){i.e(e)}finally{i.f()}return r},u=c(r),h=c(i),d=function(t,n){for(var r=0,i=Object.keys(e.filters_model);r<i.length;r++)t[i[r]].switch_off();t[n].switch_on()},p=function(t,n){for(var r=n.getAttribute("data-model"),i=0,o=Object.keys(e.filters_model);i<o.length;i++){var a=o[i];e.filters_model[a]=!1}e.filters_model[r]=!0,d(u,r),d(h,r)},f=function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++)e[r[n]].addEventListener("click",t)};f(s,(function(t,n){for(var r=n.getAttribute("data-category"),i=0,o=Object.keys(e.filters_category);i<o.length;i++){var l=o[i];e.filters_category[l]=!1}r!==e.const_all_categories&&(e.filters_category[r]=!0),function(t,n){for(var r=0,i=Object.keys(e.filters_category);r<i.length;r++)t[i[r]].switch_off();t[n].switch_on()}(s,r),a.x_.filterSelected({search:[{searchLabel:N,searchTerm:r}]}),e.applyCategoryFilters()})),f(l,(function(t,n){for(var r=n.getAttribute("data-category"),i=0,o=Object.keys(e.filters_subcategory);i<o.length;i++){var s=o[i];e.filters_subcategory[s]=!1}r!==e.const_all_categories&&(e.filters_subcategory[r]=!0),function(t,n){for(var r=0,i=Object.keys(e.filters_subcategory);r<i.length;r++)t[i[r]].switch_off();t[n].switch_on()}(l,r),a.x_.filterSelected({search:[{searchLabel:N,searchTerm:r}]}),e.applySubCategoryFilters()})),f(u,p),f(h,p),this.on_reset_filters_deferred=function(){p(0,{getAttribute:function(){return e.const_all_models}})},this.remember_filters=function(){e.mem_filters_category=Object.assign({},e.filters_category),e.mem_filters_subcategory=Object.assign({},e.filters_subcategory),e.mem_filters_model=Object.assign({},e.filters_model)},this.recall_filters=function(){e.filters_category=Object.assign({},e.mem_filters_category),e.filters_subcategory=Object.assign({},e.mem_filters_subcategory),e.filters_model=Object.assign({},e.mem_filters_model);for(var t=0,n=Object.keys(e.filters_model);t<n.length;t++){var r=n[t];e.filters_model[r]&&(d(u,r),d(h,r))}}}}],t&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();!function(){var e=document.querySelectorAll(".js-rrmc-all-accessories-master");document.addEventListener("DOMContentLoaded",(function(){[].slice.call(e).forEach((function(e){var t=new j(e);e.data={articleTilesInstance:t},t.load()}))}))}()},4853:(e,t,n)=>{"use strict";n.d(t,{e:()=>a});var r=n(6722),i=n(3320);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=t.filter((function(e){return e.visible}));(0,r.CD)(n,r.s9);var a,s=[{name:i.T8,label:"Model",title:function(e){return e}},{name:i.jC,label:"Wheelbase",title:function(e){return e}}],l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(e);try{for(l.s();!(a=l.n()).done;){var c=a.value;(0,r.Og)(s,c.field,c.label)}}catch(e){l.e(e)}finally{l.f()}var u={},h={};return(0,r.p)(h,u,n,n.map((function(e){return e.id})),s),[u,h]}},3320:(e,t,n)=>{"use strict";n.d(t,{T8:()=>r,Y6:()=>a,Yi:()=>o,jC:()=>i,o$:()=>s});var r="modelLabel",i="subModels",o="marketingTitle",a="notes",s="color"},4254:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(1500),i=n(8607),o=n(6988),a=n(6189),s=n(5116),l=n(8521);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}const d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dropdown=t,this.dropdownContainer=this.dropdown.querySelector(".rrmc-accessory-dropdown--container"),this.customSelector=this.dropdown.querySelector(".rrmc-accessory-dropdown--custom-select"),this.dropdownListWrapper=this.customSelector.querySelector(".rrmc-accessory-dropdown--custom-select-list"),this.dropdownEntries=this.dropdownListWrapper.querySelectorAll(".rrmc-accessory-dropdown--select-option"),this.dropdownColors=this.dropdownListWrapper.querySelectorAll(".rrmc-accessory-dropdown--color-disk"),this.dropdownType=this.dropdown.dataset.dropdownType,this.dropdownStatus=this.dropdown.dataset.dropdownStatus,this.htmlSelector=this.dropdown.querySelector(".rrmc-accessory-dropdown--select"),this.visibleSelector=this.dropdown.querySelector(".rrmc-accessory-dropdown--value"),this.dropdownLabel=this.dropdown.querySelector(".rrmc-accessory-dropdown--label"),this.dropdownSvg=this.dropdown.querySelector(".rrmc-accessory-dropdown--icon"),this.max_height=(0,s.h)()?150:260,this.subs={},this.subs.open=new o.B7,this.subs.close=new o.B7,this.subs.select=new o.B7,this.unsubs={},this.returnFieldValue=function(){return{label:n.dropdownLabel.getAttribute("data-key-label"),value:n.htmlSelector.value}},this.updateDropdown=function(e){var t=e.currentTarget,r=t.innerText;if(r!==n.visibleSelector.innerText){var i=t.getAttribute("data-dropdown-value");n.htmlSelector.value=i,n.visibleSelector.innerText=r,"small"!==n.dropdownLabel.getAttribute("data-label-pos")&&(0,a.U)("small",n.dropdownLabel,"dropdown",n.visibleSelector),n.subs.select.next(i),n.closeDropdown(),"color"===n.dropdownType&&n.SvgToColor(t.nextElementSibling.style.backgroundColor)}else n.closeDropdown()},this.handleDropdown=function(){"closed"===n.dropdownStatus?(n.subs.open.next(),n.openDropdown()):(n.subs.close.next(),n.closeDropdown())},this.triggerCloseDropdown=function(e){n.dropdown.contains(e.target)||(n.closeDropdown(),document.removeEventListenerRR("click",n.triggerCloseDropdown))}},t=[{key:"preselect",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.htmlSelector.value=e,this.visibleSelector.innerText=(0,l.K)(e),"color"!==this.dropdownType||n)"color"===this.dropdownType&&this.SvgToColor(n);else{var r=this.dropdownListWrapper.querySelector('span[data-value="'.concat(e,'"]')).style.backgroundColor;this.SvgToColor(r)}(0,a.U)("small",this.dropdownLabel,"dropdown",this.visibleSelector),this.subs.select.next(e),t&&(this.dropdownContainer.classList.add("rrmc-dropdown--disabled"),this.dropdownContainer.removeEventListener("click",this.handleDropdown))}},{key:"addEventListener",value:function(e,t){this.unsubs[e]||(this.unsubs[e]={}),this.unsubs[e][t]=this.subs[e].subscribe({next:t})}},{key:"removeEventListener",value:function(e,t){this.unsubs[e]&&this.unsubs[e][t]&&this.unsubs[e][t].unsubscribe()}},{key:"updateDropdownStatus",value:function(e){this.dropdown.setAttribute("data-dropdown-status",e),this.dropdownStatus=this.dropdown.getAttribute("data-dropdown-status")}},{key:"returnDropdownStatus",value:function(){return this.dropdownStatus}},{key:"SvgToColor",value:function(e){this.dropdownSvg.classList.contains("rrmc-accessory-dropdown--icon-color-chosen")||(this.dropdownSvg.classList.remove("rrmc-accessory-dropdown--icon-color"),this.dropdownSvg.classList.add("rrmc-accessory-dropdown--icon-color-chosen")),this.dropdownSvg.style.backgroundColor=e}},{key:"openDropdown",value:function(){document.addEventListenerRR("click",this.triggerCloseDropdown),this.updateDropdownStatus("open"),this.revealDropdownItems(this.dropdownEntries);var e=this.dropdownEntries.length>2?20:0;this.customSelector.style.visibility="visible",r.K3.to(this.customSelector,.5,{height:52*this.dropdownEntries.length-e<this.max_height?52*this.dropdownEntries.length-e:this.max_height,autoRound:!1,ease:i.WG.easeNone,delay:.33}),"color"!==this.dropdownType?r.K3.to(this.dropdownSvg,.33,{rotation:180,ease:i.WG.easeNone}):this.revealDropdownItems(this.dropdownColors)}},{key:"closeDropdown",value:function(){var e=this;document.removeEventListener("click",this.triggerCloseDropdown),this.reverseDropdownItems(this.dropdownEntries),"color"===this.dropdownType&&this.reverseDropdownItems(this.dropdownColors),r.K3.to(this.customSelector,.5,{height:0,autoRound:!1,ease:i.WG.easeNone,delay:.33,onComplete:function(){e.updateDropdownStatus("closed"),e.customSelector.style.visibility="hidden",e.customSelector.scrollTop=0,e.resetDropdownAnim(e.dropdownEntries),"color"===e.dropdownType&&e.resetDropdownAnim(e.dropdownColors)}}),"color"!==this.dropdownType&&r.K3.to(this.dropdownSvg,.33,{rotation:0,ease:i.WG.easeNone})}},{key:"initListeners",value:function(){var e=this;this.dropdownContainer.addEventListener("click",this.handleDropdown),[].slice.call(this.dropdownEntries).forEach((function(t){t.addEventListener("click",e.updateDropdown)}))}},{key:"destroy",value:function(){for(var e=this,t=0,n=Object.keys(this.subs);t<n.length;t++){var r=n[t];this.subs[r].complete()}this.dropdownContainer.removeEventListener("click",this.handleDropdown),[].slice.call(this.dropdownEntries).forEach((function(t){t.removeEventListener("click",e.updateDropdown)}))}},{key:"load",value:function(){this.initListeners()}},{key:"revealDropdownItems",value:function(e){this.forwardTl=r.os.timeline(),this.forwardTl.add("start").staggerTo(e,.25,{opacity:1,y:0,delay:.5},.1,"start")}},{key:"reverseDropdownItems",value:function(e){this.reverseTl=r.os.timeline(),this.reverseTl.add("start").staggerTo(e,.25,{opacity:0,y:-10,delay:.25},.1,"start")}},{key:"resetDropdownAnim",value:function(e){r.K3.set(e,{clearProps:"opacity,transform"})}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},6189:(e,t,n)=>{"use strict";n.d(t,{U:()=>o});var r=n(9018),i=n(8607);function o(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(t.getAttribute("data-label-size")!==e){var a={};"dropdown"===n?(a.scale="small"===e?.8:1,a.align="small"===e?"-10%":"0%",a.pos="small"===e?-10:0,(0,r.en)()&&(a.pos="small"===e?-20:0)):"textfield"===n&&(a.scale="small"===e?.8:1,a.align="small"===e?"-10%":"0%",a.pos="small"===e?-10:0,(0,r.en)()&&(a.align=0,a.pos="small"===e?-10:0));var s=new i.Y_;"dropdown"===n?(s.addLabel("start").set(t,{position:"absolute"}).to(t,.5,{y:a.pos,x:a.align,scale:a.scale},"start"),s.to(o,.5,{opacity:"small"===e?1:0,y:6},"start")):"textfield"===n&&s.addLabel("start").set(t,{position:"absolute"}).to(t,.5,{y:a.pos,x:a.align,scale:a.scale},"start"),t.setAttribute("data-label-size",e)}}},8927:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>W});var r=n(1500),i=n(8607),o=n(7209),a=n(915),s=n.n(a),l=n(4254),c=n(2423),u=n(2862);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}const f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.is_master_carousel=!0,this.wrapper=t},(t=[{key:"render_carousel",value:function(e){var t=this.wrapper.querySelector(".rrmc-cc-carousel-images"),n=t.querySelectorAll(".rrmc-cc-carousel-slide");if(n.length>1)t.setAttribute("data-pips-visible",""),t.setAttribute("data-autoplay-enabled",""),t.setAttribute("data-is-full-width",""),t.setAttribute("data-autoplay-delay","6.0"),this.accessory_carousel=new c.default(this.wrapper.querySelector(".js-rrmc-lazy-load")),this.accessory_carousel.load(e);else{var r=n[0].querySelector(".rrmc-image-aspect-img");(0,u.Kj)(r,(function(){}))}}},{key:"update_carousel",value:function(e,t){if(0!==e.items.length&&this.is_master_carousel!==t){var n,r,i,o,a=this.wrapper.querySelector(".rrmc-cc-carousel-slides"),s=this.wrapper.querySelector(".rrmc-cc-carousel-controls-container"),l=this.wrapper.querySelector(".rrmc-cc-carousel-bullets");this.accessory_carousel&&this.accessory_carousel.destroy(),null===l&&e.items.length>1&&(s.innerHTML='\n            <div class="rrmc-cc-carousel-bullets-container">\n                <div class="rrmc-cc-carousel-bullets" data-glide-el="controls[nav]"></div>\n            </div>',l=this.wrapper.querySelector(".rrmc-cc-carousel-bullets")),a.innerHTML="",l.innerHTML="",[].slice.call(e.items).forEach((function(e,t){n=e.image.desktop.renditions,r=e.image.desktop.webpRenditions,i=e.image.desktopWebpRendition,o=e.image.desktop.original,a.innerHTML+='<div class="rrmc-cc-carousel-slide" style="">\n                    <div class="rrmc-cc-carousel-slide-width-force js-cc-slide-zoom" data-controls-off="" data-autoplay-off="">\n                      <div class="rrmc-image-aspect-scale js-rrmc-image-aspect-scale">\n                        <img class="rrmc-image-aspect-img" \n                             data-srcset="'.concat(n,'"\n                             data-webp-srcset="').concat(r,'"\n                             data-webp-src="').concat(i,'" \n                             data-src="').concat(o,'"\n                             draggable="false" >\n                      </div>\n                      <div class="rrmc-cc-video-snippet-container">\n                      </div>\n                      <div data-embed="default" data-application-id="" loop="" poster="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=" class="video-js vjs-fluid rrmc-cc-video-player-video" playsinline=""></div>\n                    </div>\n                  </div>'),l.innerHTML+='<span class="rrmc-cc-carousel-bullet" data-glide-dir="='.concat(t,'"></span>');var s=a.querySelector(".rrmc-image-aspect-img");(0,u.Kj)(s,(function(){}))})),this.is_master_carousel=t,e.items.length>1&&this.accessory_carousel?this.accessory_carousel.load():e.items.length>1&&this.render_carousel(e)}}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var m=n(6189),v=n(6988),g=n(4861);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}const w=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textfield=t,this.subs={},this.subs.render=new v.B7,this.unsubs={},this.input=this.textfield.querySelector("input"),this.label=this.textfield.querySelector(".rrmc-accessory-textfield--label"),this.max_length=n,this.placeholder=r,this.input.setAttribute("maxlength",this.max_length)},t=[{key:"returnFieldValue",value:function(){var e=(0,g.A)(this.input);return{label:this.label.innerText,value:e}}},{key:"text_field_update",value:function(){this.subs.render.next(this.input.value)}},{key:"set_font",value:function(e){this.input.style.fontFamily=e}},{key:"enter_text_field",value:function(){this.input.focus(),(0,m.U)("small",this.label,"textfield"),this.textfield.removeEventListener("click",this.enter_text_field)}},{key:"prefill_text",value:function(){this.input.value=this.placeholder,(0,m.U)("small",this.label,"textfield"),this.subs.render.next(this.input.value)}},{key:"exit_text_field",value:function(){0===this.input.value.length&&this.prefill_text(),this.textfield.addEventListener("click",this.enter_text_field.bind(this))}},{key:"destroy",value:function(){this.input.removeEventListener("focus",this.enter_text_field.bind(this)),this.input.removeEventListener("blur",this.exit_text_field.bind(this)),this.input.removeEventListener("input",this.text_field_update.bind(this)),this.textfield.removeEventListener("click",this.enter_text_field.bind(this))}},{key:"addEventListener",value:function(e,t){this.unsubs[e]||(this.unsubs[e]={}),this.unsubs[e][t]=this.subs[e].subscribe({next:t})}},{key:"init_listeners",value:function(){this.textfield.addEventListener("click",this.enter_text_field.bind(this)),this.input.addEventListener("focus",this.enter_text_field.bind(this)),this.input.addEventListener("blur",this.exit_text_field.bind(this)),this.input.addEventListener("input",this.text_field_update.bind(this)),this.prefill_text()}},{key:"load",value:function(){this.init_listeners()}}],t&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}const k=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_input=this.container.querySelector(".rrmc-accessory-treadfield--input"),this.elm_length=this.container.querySelector(".rrmc-accessory-treadfield--input-length"),this.label=this.container.getAttribute("data-label"),this.align=this.container.getAttribute("data-align"),this.maxlength=this.container.getAttribute("data-maxlength"),this.on_input=function(){var e=n.elm_input.value.length;n.update_length(n.maxlength-e)}},(t=[{key:"update_length",value:function(e){if(0===e)return this.elm_length.innerHTML="&nbsp;";var t=e>1?"s":"";this.elm_length.textContent="".concat(e," character").concat(t," left")}},{key:"set_font",value:function(e){this.elm_input.style.fontFamily=e}},{key:"destroy",value:function(){this.elm_input.removeEventListenerRR("input",this.on_input)}},{key:"load",value:function(){this.elm_input.addEventListenerRR("input",this.on_input)}},{key:"returnFieldValue",value:function(){var e=(0,g.A)(this.elm_input);return{label:this.label,value:e}}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var T=n(6722),A=n(4853),C=n(5116),M=n(7455),L=n(2725),R=n(259),P=n(7293),I=n(1203),D=n(8521),O=n(3320);function F(e,t,n){return(t=j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==H(t)?t:t+""}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=z(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function z(e,t){if(e){if("string"==typeof e)return G(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function q(e,t,n){if("object"!==H(e)||Array.isArray(e)){if(Array.isArray(e)){if(e[0]===t)return!0}else if("string"==typeof e&&e===t)return!0}else for(var r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(q(e[o],t,n))return n(o),!0}}var V=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.dealerTable=this.sandbox.querySelector(".js-rr-dealer-table"),this.pdfDropdown=this.sandbox.querySelector(".js-rr-pdf-dropdown"),this.imgWrapperDesktop=this.sandbox.querySelector(".rrmc-accessory-hero-img-container"),this.imgWrapperMobile=this.sandbox.querySelector(".rrmc-accessory-mobile-image-container"),this.treadplate_wrapper_desktop=this.imgWrapperDesktop.querySelector(".rrmc-accessory-hero--treadplate-container"),this.treadplate_wrapper_mobile=this.imgWrapperMobile.querySelector(".rrmc-accessory-hero--treadplate-container"),this.imgWrappers=[this.imgWrapperMobile,this.imgWrapperDesktop],this.elm_dropdown_container=this.sandbox.querySelector(".rrmc-dropdown-container"),this.elm_select_button_container=this.sandbox.querySelector(".rrmc-accessory-select-button-container"),this.elm_customise_button_container=this.sandbox.querySelector(".rrmc-accessory-customise-button-container"),this.elm_select_button=this.elm_select_button_container.querySelector(".js-rrmc-lazy-load"),this.elm_customise_button=this.elm_customise_button_container.querySelector(".js-rrmc-lazy-load"),this.elm_select_button_text=this.elm_select_button.querySelector(".js-rrmc-button-text"),this.elm_select_button_icon=this.elm_select_button.querySelector(".js-rrmc-button-arrow"),this.elm_learn_more_cta=this.sandbox.querySelector(".rrmc-accessory-learn-more-cta"),this.accessory_disclaimer=this.sandbox.querySelector(".rrmc-accessory-disclaimer"),this.accessory_description=this.sandbox.querySelector(".rrmc-accessory-description"),this.learn_more_wrapper=this.sandbox.querySelector(".rrmc-accessory-learn-more-wrapper"),this.accessory_carousel_wrapper=this.sandbox.querySelector(".js-rrmc-accessory-carousel"),this.input_wrappers=[],this.bespoke_wrappers=[];var i=B((0,A.e)(window.rrmc_accessory.filters,window.rrmc_accessory.allVariants),2),o=i[0],a=i[1];this.store=o,this.dictionary=a,this.is_breakpoint=(0,C.h)(),this.accessory_type=window.rrmc_accessory.accessoryType,this.luggage_options=!1,this.tl_hide_bespoke_ctas={},this.scroll_to_learn_more=function(){var e=document.querySelector(".rrmc-secondary-nav--menu-wrapper").offsetHeight;n.scroll_pos=n.learn_more_wrapper.getBoundingClientRect().top+(window.pageYOffset-e),r.os.to(window,{duration:1,scrollTo:n.scroll_pos})},this.send_to_my_list=function(){if(n.selected_variant){n.animate_cta_text();var e={parent:window.rrmc_accessory.contentPath,id:n.selected_variant.id,bespokeFields:n.gather_bespoke_entries()},t=n.load_data.accessoryId;t?(e.accessoryId=t,L.A.sub_my_list_manager_bus.next({action:"change",data:e})):L.A.sub_my_list_manager_bus.next({action:"add",data:e}),n.selected_colour=Object.keys(n.selected_variant.color)>0?n.selected_variant.color.name:n.selected_variant.bespoke?"Bespoke":void 0;var r=(0,R.aS)({variant:n.selected_variant,store:n.store,accessory:window.rrmc_accessory});R.Gr.conListAdd({options:r}),(0,R.Gx)({event:"ee-addToCart",ecommerce:{add:{actionField:{list:n.product_list_name},products:[{id:window.rrmc_accessory.id,name:window.rrmc_accessory.title,category:window.rrmc_accessory.category,variant:e.id,price:"0.00",quantity:1,brand:n.selected_variant.modelLabel,dimension17:n.selected_variant.marketingTitle,dimension18:n.selected_colour}]}}})}},this.create_luggage_configurator=function(){L.A.sub_luggage_overlay.next({accessoryId:window.rrmc_accessory.id,selectedLuggage:n.selected_variant,previousLuggage:n.luggage_options});var e=document.createElement("div"),t='<div class="overlay parsys aem-GridColumn aem-GridColumn--default--12 rrmc-dynamic-overlay-parsys">\n      <div class="rrmc-dynamic-overlay rrmc-overlay-component rrmc-overlay-luggage--white"  data-overlay-name="l-luggage-overlay">\n        <div class="rrmc-overlay-nav-bar rrmc-overlay-nav-bar-light">\n          <button data-overlay-action="overlayBack" type="button"\n          class="rrmc-overlay-back-button rrmc-cta-component rrmc-button--regular-label-stroked">\n             <span class="rrmc-button-background js-rrmc-button-background"\n            data-color="#151515"></span>\n             <span class="rrmc-cta-i" data-icon="arrow-left">\n                <span class="rrmc-cta-icon-placeholder"></span>\n             </span>\n             <span class="rrmc-button-text js-rrmc-button-text">Back</span>\n          </button>\n          <button data-overlay-action="overlayClose" type="button"\n           class="rrmc-cta-component rrmc-button--regular-icon-stroked">\n          <span class="rrmc-button-background js-rrmc-button-background"\n            data-color="#151515"></span>\n            <span class="rrmc-cta-i" data-icon="close">\n                <span class="rrmc-cta-icon-placeholder"></span>\n             </span>\n            <span class="rrmc-button-text js-rrmc-button-text"></span>\n          </button>\n      </div>\n        <div class="default-overlay js-overlay rrmc-overlay-body-light">\n          <div class="js-luggage-configurator rrmc-multi-image-carousel-overlay js-rrmc-lazy-load" data-lazy-load-class="luggage-configurator-lazy-load">\n            <div class="rrmc-luggage-overlay-wrapper rrmc-component-grid-container">\n                <div class="rrmc-luggage-configurator-col-a">\n                    <h3 class="rrmc-selected-luggage-subtitle">'.concat((0,D.K)("Customise Your"),'</h3>\n                    <h2 class="rrmc-selected-luggage-title"></h2>\n                    <div class="rrmc-luggage-configurator-options-container">\n                    </div>\n                </div>\n                <div class="rrmc-luggage-configurator-col-b">\n                    <div class="rrmc-luggage-configurator-picture-wrapper">\n                      <img class="rrmc-luggage-configurator-img"\n                           src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="\n                           alt="Luggage Preview">\n                    </div>\n                </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>');e.innerHTML=t;var r=e.firstChild,i=(0,P.g)("local").overlay_container_wrapper,o=(0,P.K)(i);o.appendChild(r),n.elm_customise_button.removeEventListenerRR("click",n.create_luggage_configurator),L.A.sub_overlay_manager_bus.next({action:M.xb,data:{overlayName:"l-luggage-overlay",on_close_after:function(){setTimeout((function(){o.removeChild(r),n.elm_customise_button.addEventListenerRR("click",n.create_luggage_configurator)}),1e3)},on_back_after:function(){setTimeout((function(){o.removeChild(r),n.elm_customise_button.addEventListenerRR("click",n.create_luggage_configurator)}),1e3)},next_variant:n.selected_variant,done:function(e){n.load_data.variant?L.A.sub_overlay_manager_bus.next({action:M.Go,data:{luggage_options:e,next_variant:n.selected_variant}}):(L.A.sub_overlay_manager_bus.next({action:M.Jm,data:{}}),n.luggage_options=e,n.reveal_cta(n.elm_select_button_container),n.elm_customise_button.addEventListenerRR("click",n.create_luggage_configurator)),setTimeout((function(){o.removeChild(r)}),1e3)}}})}},t=[{key:"gather_bespoke_entries",value:function(){var e=[];return!1===this.luggage_options?[].slice.call(this.bespoke_wrappers).forEach((function(t){e.push(t.instance.returnFieldValue())})):e=this.luggage_options,e}},{key:"animate_cta_text",value:function(){var e=this;this.elm_select_button.removeEventListenerRR("click",this.send_to_my_list),this.elm_select_button.classList.add("static"),r.os.timeline().addLabel("start").to([this.elm_select_button_text,this.elm_select_button_icon],.25,{opacity:0,onComplete:function(){var t=e.elm_select_button.getAttribute("data-action-text")||"".concat((0,D.K)("Added"));e.elm_select_button_text.innerHTML=t,e.elm_select_button_icon.innerHTML=I.o["check-mark"]}}).to([this.elm_select_button_text,this.elm_select_button_icon],.25,{opacity:1}).to([this.elm_select_button_text,this.elm_select_button_icon],.25,{opacity:0,delay:1,onComplete:function(){e.elm_select_button_text.innerHTML=(0,D.K)("Save to my list"),e.elm_select_button_icon.innerHTML=I.o["my-list"],r.K3.set(e.elm_select_button_icon,{visibility:"visible",clearProps:"opacity"})}}).to(this.elm_select_button_text,.25,{opacity:1,onComplete:function(){e.elm_select_button.addEventListenerRR("click",e.send_to_my_list),r.K3.set(e.elm_select_button_icon,{visibility:"visible",clearProps:"opacity"})}}).add((function(){e.load_data.variant&&L.A.sub_overlay_manager_bus.next({action:M.Jm,data:{}}),e.elm_select_button.classList.remove("static")}))}},{key:"cancel_hide_cta",value:function(e){var t=e.className;this.tl_hide_bespoke_ctas[t]&&this.tl_hide_bespoke_ctas[t].kill(),i.uo.set(e,{clearProps:"all"})}},{key:"hide_cta",value:function(e){var t=e.className;this.tl_hide_bespoke_ctas[t]&&this.tl_hide_bespoke_ctas[t].kill(),this.tl_hide_bespoke_ctas[t]=r.os.timeline(),this.tl_hide_bespoke_ctas[t].to(e,.5,{opacity:0}).set(e,{visibility:"none",height:"0",padding:"0"})}},{key:"update_descriptions",value:function(e){var t=(0,D.K)(e),n=this.learn_more_wrapper.querySelector(".rrmc-long-copy-description-wrapper");if(!n.innerHTML.includes(t,0)){var i=this.learn_more_wrapper.querySelector(".rrmc-long-copy-description");this.set_marketing_description(t);var o=i.clientHeight,a={height:0};r.os.timeline().addLabel("start").to(i,.25,{opacity:0},"start").add((function(){i.innerHTML=t,a.height=i.clientHeight}),"start+=0.25").fromTo(n,.5,{height:o},a,"start+=1").to(i,.5,{opacity:1},"start+=1")}}},{key:"update_hero",value:function(e,t,n){var r=this.imgWrappers;[].slice.call(r).forEach((function(r){var o=r.querySelector(".rrmc-accessory-picture"),a=o.querySelector("source"),s=o.querySelector("img");if(-1===s.src.indexOf(n)){var l=a.getAttribute("srcset");s.setAttribute("data-src",n),a.setAttribute("data-webp-srcset",t),a.setAttribute("data-srcset",e);var c=1;null===l?(c=0,i.uo.to(o,c,{opacity:1})):l!==t&&l!==e&&i.uo.to(o,c,{opacity:0,onComplete:function(){s.removeAttribute("src"),a.removeAttribute("srcset"),(0,u.Il)(o,(function(){i.uo.to(o,1,{opacity:1})}))}})}}))}},{key:"render_stage",value:function(e){var t=window.rrmc_accessory.allVariants.filter((function(t){return t.id===e})).shift();if(this.selected_variant=t,void 0!==this.selected_variant.variantImage&&""!==this.selected_variant.variantImage.original?this.update_hero(this.selected_variant.variantImage.renditions,this.selected_variant.variantImage.webpRenditions,this.selected_variant.variantImage.original):this.update_hero(window.rrmc_accessory.heroImage.renditions,window.rrmc_accessory.heroImage.webpRenditions,window.rrmc_accessory.heroImage.original),this.accessory_carousel_wrapper&&this.selected_variant.carousel.items.length>0&&this.accessory_carousel.update_carousel(this.selected_variant.carousel,!1),this.learn_more_wrapper&&(this.selected_variant.marketingDescription?this.update_descriptions(this.selected_variant.marketingDescription):this.update_descriptions(window.rrmc_accessory.description)),this.selected_variant.bespoke&&"Luggage"===this.accessory_type)return this.cancel_hide_cta(this.elm_select_button_container),this.reveal_cta(this.elm_customise_button_container),void(this.luggage_options&&this.selection_order?this.reveal_cta(this.elm_select_button_container):this.hide_cta(this.elm_select_button_container));this.selected_variant.bespokeFields.length>0?(this.append_bespoke_fields(this.selected_variant.bespokeFields,this.accessory_type),this.reveal_cta(this.elm_select_button_container),this.animate_element()):(this.reveal_cta(this.elm_select_button_container),this.animate_element())}},{key:"append_bespoke_fields",value:function(e,t){var n=this;[].slice.call(e).forEach((function(e){if("text"===e.type){if("Treadplates"===t)return n.create_treadfield(e);n.create_textfield(e,!0)}else"dropdown"!==e.type&&"color"!==e.type||n.create_dropdown(e,!0)}))}},{key:"clear_bespoke",value:function(){[].slice.call(this.bespoke_wrappers).forEach((function(e){e.instance.destroy(),e.wrapper.parentNode.removeChild(e.wrapper)})),this.bespoke_wrappers=[],this.hide_cta(this.elm_customise_button_container)}},{key:"reveal_cta",value:function(e){this.cancel_hide_cta(e),r.os.timeline().addLabel("start").set(e,{visibility:"visible",height:"auto",clearProps:"padding"},"start").to(e,1,{opacity:1},"start+=0.5")}},{key:"is_wheelbase_selector",value:function(e){for(var t=["standard","extended"],n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(t.indexOf(i)>-1)return!0}return!1}},{key:"append_element",value:function(e){var t=this;this.elm_dropdown_container.appendChild(e),this.anim_element_list=r.os.timeline(),i.uo.to(e,1,{opacity:1}),setTimeout((function(){return t.animate_element()}),1e3)}},{key:"get_animated_elements_height",value:function(){var e=this.elm_dropdown_container.querySelectorAll([".rrmc-dropdown-wrapper",".rrmc-textfield-wrapper",".rrmc-treadfield-wrapper"]);return[].slice.call(e).reduce((function(e,t){return e+t.getBoundingClientRect().height+15}),0)}},{key:"animate_element",value:function(){this.anim_element_list&&this.anim_element_list.kill();var e=this.get_animated_elements_height();this.anim_element_list=r.os.timeline(),this.anim_element_list.to(this.elm_dropdown_container,1,{height:e,ease:i.WG.noEase,delay:.1}).set(this.elm_dropdown_container,{clearProps:"height,overflow"})}},{key:"create_treadfield",value:function(e){var t=document.createElement("div");t.classList.add("rrmc-treadfield-wrapper");var n,r,i,o=(this.selected_variant?e.value:"")||"";t.innerHTML=(r=o,i="padding-top: ".concat((n=e).image.height/n.image.width*100,"%"),'<div class="rrmc-accessory-treadfield"\n              data-maxlength="'.concat(n.maxLength,'"\n              data-align="').concat(n.align,'"\n              data-is-bespoke="true"\n              data-label="').concat(n.label,'">\n                <div class="rrmc-accessory-treadfield--container">\n                  <div class="rrmc-accessory-treadfield--scaler" style="').concat(i,'">\n                    <div class="rrmc-accessory-treadfield--aligner">\n                      <img class="rrmc-accessory-treadfield--image" src="').concat(n.image.original,'" alt="Treadplate">\n                      <div class="rrmc-accessory-treadfield--input-container">\n                        <input aria-label="Treadplate customisation entry" type="text" maxlength="').concat(n.maxLength,'"\n                        value="').concat(r,'"\n                        placeholder="').concat(n.placeholder,'" class="rrmc-accessory-treadfield--input">\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class="rrmc-accessory-treadfield--input-length">').concat(n.maxLength," characters left</div>\n            </div>")),this.append_element(t);var a=new k(t.querySelector(".rrmc-accessory-treadfield"));a.load();var s=this.bespoke_wrappers.reduce((function(e,t){var n=t.instance.returnFieldValue();return n.label===(0,D.K)("Font")?n:e}),null);s&&a.set_font(s.value),this.bespoke_wrappers.push({wrapper:t,instance:a})}},{key:"create_textfield",value:function(e,t){var n=e.label,r=document.createElement("div");r.classList.add("rrmc-textfield-wrapper"),this.append_element(r),r.innerHTML=function(e,t){return'<div class="rrmc-accessory-textfield" '.concat(t?'data-is-bespoke="true"':'data-is-bespoke="false"','>\n                <div class="rrmc-accessory-textfield--container">\n                    <span class="rrmc-accessory-textfield--label">').concat(e,'</span>\n                    <input type="text" class="rrmc-accessory-textfield--input" name="').concat(e,'"/>\n                </div>\n            </div>')}((0,D.K)(n),t);var i=new w(r.querySelector(".rrmc-accessory-textfield"),e.maxLength,e.placeholder);i.load(),t?this.bespoke_wrappers.push({wrapper:r,instance:i}):this.input_wrappers.push({wrapper:r,instance:i}),i.addEventListener("render",(function(e){}))}},{key:"create_dropdown",value:function(e,t){var n,r=this;if(t){var i=e.label,o=e.type,a=[],s=[];[].slice.call(e.values).forEach((function(e){a.push(e.name),s.push(e.code)})),n={label:[i],fieldType:o,values:a,codes:s}}var c=document.createElement("div");c.classList.add("rrmc-dropdown-wrapper"),this.append_element(c),c.innerHTML=function(e,t,n){var r,i=n?e.values:Object.keys((0,T.GS)(e)),o=n?e.codes:"",a="",s=U(i);try{for(s.s();!(r=s.n()).done;){var l=r.value;a+='<option value="'.concat(l,'">').concat(l,"</option>")}}catch(e){s.e(e)}finally{s.f()}var c,u="",h=n?(0,D.K)(e.label[0]):(0,D.K)(e.label),d=n?e.label[0]:e.label,p=(0,D.K)(e.fieldType),f=U(i.entries());try{var m=function(){var e=B(c.value,2),t=e[0],r=e[1];if(u+='<li class="rrmc-accessory-dropdown--select-option '.concat(p===O.o$?"rrmc-accessory-dropdown--color":"",'" data-dropdown-value="').concat(r,'">').concat((0,D.K)(r),"</li>"),p===O.o$){var i=window.rrmc_accessory.allVariants.filter((function(e){return Object.values(e).includes(r)}));u+='<span data-value="'.concat(r,'" style="background-color: ').concat(n?o[t]:i[0].color.code,';" class="rrmc-accessory-dropdown--color-disk"></span>')}};for(f.s();!(c=f.n()).done;)m()}catch(e){f.e(e)}finally{f.f()}return'<div class="rrmc-accessory-dropdown"\n            '.concat(h.toLowerCase()===(0,D.K)("font")?"data-font=true":"","\n            ").concat(n?'data-is-bespoke="true"':'data-is-bespoke="false"','\n            data-dropdown-status="closed" data-dropdown-type="').concat(p===O.o$?"color":"default",'">\n                <select class="rrmc-accessory-dropdown--select select-hidden">\n                    ').concat(a,'\n                </select>\n                <div class="rrmc-accessory-dropdown--container">\n                    <span class="rrmc-accessory-dropdown--label" data-key-label="').concat(d,'">').concat(h,'</span>\n                    <span class="rrmc-accessory-dropdown--value"></span>\n                    <span class="rrmc-accessory-dropdown--icon ').concat(p===O.o$?"rrmc-accessory-dropdown--icon-color":"rrmc-accessory-dropdown--icon-default",'"></span>\n                </div>\n                <div class="rrmc-accessory-dropdown--custom-select">\n                    <ul class="rrmc-accessory-dropdown--custom-select-list">\n                      ').concat(u,"\n                    </ul>\n                </div>\n            </div>")}(t?n:e,this.dictionary,t);var u=new l.A(c.querySelector(".rrmc-accessory-dropdown"));if(u.load(),u.addEventListener("open",(function(){[].slice.call(r.input_wrappers).forEach((function(e){e.instance!==u&&"Dropdown"===e.instance.constructor.name&&e.instance.closeDropdown()}))})),t){if(u.dropdown.getAttribute("data-font")&&u.addEventListener("select",(function(e){R.Gr.conClick({ctaTarget:e,options:[(0,R.YY)(F({category3:window.rrmc_accessory.category,name:window.rrmc_accessory.title},(0,R._r)(),e))]});var t=r.bespoke_wrappers.reduce((function(e,t){return"Text"===t.instance.returnFieldValue().label?t.instance:e}),null);t&&t.set_font(e)})),this.selection_order){var h=e.values.reduce((function(e,t){return t.selected?t.name:e}),"");u.preselect(h,!1)}else u.preselect(e.values[0].name,!1);this.bespoke_wrappers.push({wrapper:c,instance:u})}else{var d;u.addEventListener("select",(d=this.input_wrappers.length+1,function(t){R.Gr.conClick({ctaTarget:t,options:[(0,R.YY)(F({category3:window.rrmc_accessory.category,name:window.rrmc_accessory.title},(0,R.Mh)(r.dictionary[t]?r.dictionary[t].field:""),t))]}),r.remove_leaf_inputs(d),r.create_stage(e[t])})),this.input_wrappers.push({wrapper:c,instance:u})}}},{key:"remove_leaf_inputs",value:function(e){this.clear_bespoke();var t,n=U(this.input_wrappers.splice(e));try{for(n.s();!(t=n.n()).done;){var r=t.value;r.instance.destroy(),this.elm_dropdown_container.removeChild(r.wrapper)}}catch(e){n.e(e)}finally{n.f()}}},{key:"create_checkbox",value:function(e){var t=this,n=document.createElement("div");n.classList.add("rrmc-dropdown-wrapper"),this.append_element(n),n.innerHTML='<div class="js-rrmc-toggle-lazy rrmc-toggle-theme-light"\n         data-toggle-style="primary"\n         data-theme="light">\n      <div class="rrmc-toggle-columns">\n        <div class="rrmc-toggle-anim"></div>\n        <div class="rrmc-toggle-label">\n           <span>Extended</span>\n        </div>\n      </div>\n    </div>';var r,i=n.querySelector(".js-rrmc-toggle-lazy"),a=new o.default(i);a.load(),a.addEventListener("click",(r=this.input_wrappers.length+1,function(n){var i=n?"extended":"standard";t.remove_leaf_inputs(r),t.create_stage(e[i])}));var s={wrapper:n,instance:a};return this.input_wrappers.push(s),s}},{key:"create_stage",value:function(e){if(Array.isArray(e))this.render_stage(e[0]);else if(this.selected_variant&&(this.selected_variant="",this.update_hero(window.rrmc_accessory.heroImage.renditions,window.rrmc_accessory.heroImage.original),this.learn_more_wrapper&&this.update_descriptions(window.rrmc_accessory.description),this.hide_cta(this.elm_select_button_container),this.hide_cta(this.elm_customise_button_container),this.accessory_carousel_wrapper&&this.accessory_carousel.update_carousel(window.rrmc_accessory.carousel,!0)),this.is_wheelbase_selector(e)){var t=Object.keys(e);if(1===t.length){if(this.selection_order){var n=this.input_wrappers.length-1;this.selection_order.splice(n,1)}return void this.create_stage(e[t[0]])}var r=this.create_checkbox(e);if(this.selection_order){var i=this.input_wrappers.length-1,o="extended"===this.selection_order[i];r.instance.select(o,!0)}else r.instance.select(!1,!0)}else{this.create_dropdown(e,!1);var a=Object.keys(e);if(1!==a.length||this.is_wheelbase_selector(e)){if(this.selection_order){var s=this.input_wrappers.length-1;this.input_wrappers[s].instance.preselect(this.selection_order[s])}}else this.input_wrappers[this.input_wrappers.length-1].instance.preselect(a[0],!0)}}},{key:"hide_long_desc",value:function(){this.learn_more_wrapper&&(this.learn_more_wrapper.style.display="none"),this.elm_learn_more_cta&&(this.elm_learn_more_cta.style.display="none")}},{key:"set_marketing_description",value:function(e){var t,n,r=this,o=(0,D.K)(e),a=document.createElement("DIV");if(a.innerHTML=o,(o=(o=(o=a.textContent||a.innerText).replace(/(\r\n|\n|\r)/gm," ")).replace(/(\. \.)/gi," ")).length<=180)return this.accessory_description.innerHTML=o,void this.hide_long_desc();o.indexOf("。")>-1?(t="。",n="。"):(t=" ",n="..."),o=o.substr(0,o.lastIndexOf(t,180)),o+=n,i.uo.to(this.accessory_description,.25,{opacity:0,onComplete:function(){r.accessory_description.innerHTML=o,i.uo.to(r.accessory_description,.25,{opacity:1,delay:.25})}})}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.elm_dropdown_container.innerHTML="",this.load_data=t,L.A.sub_epaas.subscribe({next:function(t){e.isDealer(t),(0,R.Gx)({event:"ee-productView",ecommerce:{detail:{actionField:{list:e.product_list_name},products:[{id:window.rrmc_accessory.id,name:window.rrmc_accessory.title,category:window.rrmc_accessory.category,price:"0.00"}]}}})}}),[].slice.call(this.imgWrappers).forEach((function(e){(0,u.Il)(e,(function(){i.uo.to(e,1,{opacity:1})})),"objectFit"in document.documentElement.style||s()(e)})),this.set_marketing_description(window.rrmc_accessory.description),this.accessory_carousel_wrapper&&(this.accessory_carousel=new f(this.accessory_carousel_wrapper),this.accessory_carousel.render_carousel(this.accessory_carousel_wrapper)),n.luggage_options?(this.luggage_options=n.luggage_options,this.load_data.variant=n.next_variant):"Luggage"===this.load_data.accessoryType&&(this.luggage_options=this.load_data.variant.bespokeFields),this.load_data.variant){var r=[];q(this.store,t.variant.id,(function(e){return r.push(e)})),this.selection_order=r.reverse()}this.create_stage(this.store),this.load_data.variant&&delete this.selection_order,this.elm_learn_more_cta&&this.elm_learn_more_cta.addEventListenerRR("click",this.scroll_to_learn_more),this.elm_select_button.addEventListenerRR("click",this.send_to_my_list),this.elm_customise_button.addEventListenerRR("click",this.create_luggage_configurator),this.product_list_name=void 0,this.product_list=/productList=([^&]+)/.exec(window.location.search),Array.isArray(this.product_list)&&(this.product_list_name=this.product_list.length>0?decodeURIComponent(this.product_list[1]):decodeURIComponent(this.product_list[0]))}},{key:"destroy",value:function(){this.elm_select_button.removeEventListenerRR("click",this.send_to_my_list),this.elm_learn_more_cta&&this.elm_learn_more_cta.removeEventListenerRR("click",this.scroll_to_learn_more),this.elm_select_button&&this.elm_select_button.removeEventListenerRR("click",this.send_to_my_list),this.elm_customise_button&&this.elm_customise_button.removeEventListenerRR("click",this.create_luggage_configurator)}},{key:"revealTable",value:function(){this.dealerTable&&this.dealerTable.classList.add("reveal-dealer-table")}},{key:"isDealer",value:function(e){"true"===e.epaas.getPersistence("isDealer")?this.revealTable():this.dealerTable&&this.dealerTable.parentNode.removeChild(this.dealerTable)}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const W=V;var Y;Y=document.querySelectorAll(".js-rrmc-accessory"),document.addEventListener("DOMContentLoaded",(function(){[].slice.call(Y).forEach((function(e){var t=new V(e);e.data={accessoryInstance:t},t.load()}))}))},6722:(e,t,n)=>{"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){for(var n={},r=0;r<e.length;++r){var i=e[r].modelLabel;n[i]||(n[i]=[]),n[i].push(r)}for(var o=function(){var r=s[a];t(e.filter((function(e,t){return n[r].indexOf(t)>-1})))},a=0,s=Object.keys(n);a<s.length;a++)o()}function a(e){var t,n="subModels",i=[],o=r(e[0][n]);try{for(o.s();!(t=o.n()).done;){var a=t.value;i.push(a)}}catch(e){o.e(e)}finally{o.f()}var s,l=i.length,c=!0,u=r(e);try{for(u.s();!(s=u.n()).done;){var h=s.value;h[n].length!==l&&(c=!1);var d,p=r(h[n]);try{for(p.s();!(d=p.n()).done;){var f=d.value;-1===i.indexOf(f)&&(c=!1)}}catch(e){p.e(e)}finally{p.f()}if(!c)break}}catch(e){u.e(e)}finally{u.f()}if(!0===c)for(var m=0;m<e.length;++m)e[m][n]=["standard"]}function s(e,t,n,i,o){var a,l={},c=n.filter((function(e){return i.indexOf(e.id)>-1})),u=o.shift(),h=r(c);try{for(h.s();!(a=h.n()).done;){var d=a.value,p=d[u.name];if(Array.isArray(p)){var f,m=r(p);try{for(m.s();!(f=m.n()).done;){var v=f.value;l[u.title(v)]||(l[u.title(v)]=[]),l[u.title(v)].push(d.id)}}catch(e){m.e(e)}finally{m.f()}}else l[u.title(p)]||(l[u.title(p)]=[]),l[u.title(p)].push(d.id)}}catch(e){h.e(e)}finally{h.f()}Object.defineProperty(t,"label",{value:u.label,enumerable:!1}),Object.defineProperty(t,"fieldType",{value:u.name,enumerable:!1});for(var g=0,y=Object.keys(l);g<y.length;g++){var _=y[g];t[_]={},e[_]={label:u.label,field:u.name}}if(o.length>0)for(var b=0,w=Object.keys(l);b<w.length;b++){var x=w[b];s(e,t[x],n,l[x],o.slice())}else for(var S=0,E=Object.keys(l);S<E.length;S++){var k=E[S];t[k]=l[k]}}function l(e){var t={};return Object.keys(e).sort().forEach((function(n){t[n]=e[n]})),t}function c(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(n,r){return-1==t?r[e].localeCompare(n[e]):n[e].localeCompare(r[e])}}function u(e,t,n){var r=function(e){return e};"color"===t&&(r=function(e){return e.name}),e.push({name:t,label:n,title:r})}n.d(t,{AL:()=>c,CD:()=>o,GS:()=>l,Og:()=>u,p:()=>s,s9:()=>a})},9853:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(4692),i=n.n(r),o=n(8607),a=n(259),s=n(7709);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$container=i()(t),this.$accordion_tab=this.$container.find(".rrmc-accordion-tab"),this.$accordion_deeplinks=i()(document).find("[data-accordion-target]"),this.clickHandler=function(e){var t=i()(e.currentTarget);n.triggerAccordion(t)},this.deeplinkHandler=function(e){e.preventDefault(),e.stopPropagation();var t=n.$container.find("[data-accordion-id=".concat(e.target.getAttribute("data-accordion-target"),"]"));t.hasClass("active")||n.triggerAccordion(t);var r=t.offset().top;o.uo.to(window,.66,{scrollTo:{y:r-60,autoKill:!1}})}},(t=[{key:"toggleLinkId",value:function(e){var t=e.attr("data-tracking-linkid");e.attr("data-tracking-linkid",t.match(/open content$/)?t.replace(/open content$/,"close content"):t.replace(/close content$/,"open content"))}},{key:"triggerAccordion",value:function(e){e.siblings(".rrmc-accordion-body").slideToggle(),e.toggleClass("active"),this.toggleLinkId(e);var t=e.hasClass("active")?"Expand -":"Collapse -";a.fg(),a.Gx({event:"accordionClick",eventCategory:"Engagement",eventAction:"Accordion",eventLabel:"".concat(t," ").concat(e.get(0).innerText.toLowerCase())})}},{key:"load",value:function(){this.$accordion_tab.on("click",this.clickHandler),this.$accordion_deeplinks.on("click",this.deeplinkHandler);var e=s.parse(location.search);if(e.accordionId){var t=e.accordionId,n=this.$container.find("[data-accordion-id=".concat(t,"]"));n.hasClass("active")||this.triggerAccordion(n);var r=n.offset().top;setTimeout((function(){o.uo.to(window,.66,{scrollTo:{y:r-60,autoKill:!1}})}),1e3)}}},{key:"destroy",value:function(){this.$accordion_tab.off("click",this.clickHandler)}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const d=h;document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-accordion");[].slice.call(e).forEach((function(e){new h(e).load()}))}))},394:(e,t,n)=>{"use strict";n.r(t);var r=n(5116),i=n(1500);function o(e,t){var n=e.querySelectorAll("[data-row-to-animate=true]");0===n.length&&t(),[].slice.call(n).forEach((function(e){var t=e.getBoundingClientRect().top+window.pageYOffset;window.pageYOffset+window.innerHeight>t&&(e.setAttribute("data-row-to-animate",!1),function(e){var t=e.querySelectorAll(".rrmc-article-tile");i.os.timeline().staggerFromTo(t,1,{opacity:0,y:"100px"},{opacity:1,y:"0"},.33)}(e))}))}var a=n(259),s=n(2862);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var h,d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.parentEl=this.sandbox.parentElement,this.anchors=this.sandbox.querySelectorAll(".rrmc-article-tile-wrapping-link"),this.track=this.sandbox.querySelector(".js-rrmc-article-tile-carousel-track"),this.slides=this.sandbox.querySelectorAll(".rrmc-article-tile-slide"),this.currentSize=window.innerWidth>1440?"desktop":window.innerWidth>768?"tablet":"mobile",this.resetSlide=!1,this.unsubScroll=function(){document.removeEventListenerRR("scroll",n.scrollListener)},this.scrollListener=function(){o(n.sandbox,n.unsubScroll)}},t=[{key:"tileClickHandler",value:function(e){e.preventDefault();var t=e.target.classList,n=!1,r=e.target.getAttribute("href");if(t.contains("rrmc-article-tile-wrapping-link")||t.contains("js-rrmc-button-text")){e.target.classList.contains("js-rrmc-button-text")&&(n=!0,r=e.target.parentElement.href);var i=e.target.innerText.toLowerCase(),o=e.target.closest(".rrmc-article-tile--description"),s="",l="";!1===n?(s=o.querySelector(".rrmc-article-tile--title").innerText.toLowerCase(),l=""===i?"".concat(s).concat(i):"".concat(s,"/").concat(i)):l="".concat(i),a.Gx({event:"headlineClick",eventCategory:"Inspiring Greatness",eventAction:n?"CTA Click":"Headline Click",eventLabel:l,eventCallback:function(){window.location=r},eventTimeout:2e3})}}},{key:"load",value:function(){var e=this,t=this.sandbox.querySelectorAll(".rrmc-article-tile-img-wrapper img"),n=t[t.length-1];[].slice.call(t).forEach((function(r,i){(0,s.$l)(r,(function(){t[i]===n&&(e.parentEl.addEventListenerRR("click",e.tileClickHandler),document.addEventListenerRR("scroll",e.scrollListener))}))}))}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}h=document.querySelectorAll(".js-rrmc-article-tiles-carousel"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(h).forEach((function(e){var t=new d(e);e.data={articleTilesCarouselInstance:t},t.load()}))}));var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t}return t=e,i=[{key:"reflow",value:function(t){new e(t).reflow()}}],(n=[{key:"reset_state",value:function(){this.rowElements=this.container.querySelectorAll(".rrmc-article-tiles-row-container"),this.cardElements=this.container.querySelectorAll(".js-rrmc-article-tile"),this.fragment=document.createDocumentFragment(),this.templateContainer=this.rowElements.item(0).cloneNode(!1),this.cards=[].slice.call(this.cardElements),this.cardsSize=this.cards.length,this.rows=[].slice.call(this.rowElements),this.rowsSize=this.rows.length,this.itemsPerRow=null,this.tempRowContainer=this.templateContainer.cloneNode(!1)}},{key:"reflow_first_row",value:function(){if((0,r.h)()){this.cards=[].slice.call(this.cardElements);var e=this.cards.splice(0,1);this.tempRowContainer.appendChild(e[0]),this.itemsPerRow=2,this.cardsSize=this.cards.length}else{this.cards=[].slice.call(this.cardElements);var t=this.cards.splice(0,2);this.tempRowContainer.appendChild(t[0]),this.tempRowContainer.appendChild(t[1]),this.itemsPerRow=3,this.cardsSize=this.cards.length}}},{key:"reflow_rest",value:function(){for(var e=0;this.cardsSize>e;e++)e%this.itemsPerRow==0&&(this.fragment.appendChild(this.tempRowContainer),this.tempRowContainer=this.templateContainer.cloneNode(!1)),this.tempRowContainer.appendChild(this.cards[e])}},{key:"append_rows",value:function(){this.fragment.appendChild(this.tempRowContainer),this.container.appendChild(this.fragment)}},{key:"clean_up",value:function(){for(var e=0;this.rowsSize>e;e++)this.container.removeChild(this.rowElements.item(e))}},{key:"reflow",value:function(){this.reset_state(),this.reflow_first_row(),this.reflow_rest(),this.append_rows(),this.clean_up()}}])&&f(t.prototype,n),i&&f(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t}return t=e,i=[{key:"reflow",value:function(t){new e(t).reflow()}}],(n=[{key:"reset_state",value:function(){this.rowElements=this.container.querySelectorAll(".rrmc-article-tiles-row-container"),this.cardElements=this.container.querySelectorAll(".js-rrmc-article-tile"),this.fragment=document.createDocumentFragment(),this.templateContainer=this.rowElements.item(0).cloneNode(!1),this.cards=[].slice.call(this.cardElements),this.cardsSize=this.cards.length,this.rows=[].slice.call(this.rowElements),this.rowsSize=this.rows.length,this.itemsPerRow=null,this.tempRowContainer=this.templateContainer.cloneNode(!1),this.is_cards_suitable_for_last_row=(this.cardsSize-2)%3==0&&!(0,r.h)(),this.is_cards_suitable_for_last_row&&(this.lastTwoCards=this.cards.splice(-2,2),this.cardsSize=this.cards.length)}},{key:"attach_row_to_fragment",value:function(){this.fragment.appendChild(this.tempRowContainer),this.tempRowContainer=this.templateContainer.cloneNode(!1)}},{key:"reflow_start",value:function(){(0,r.h)()?this.itemsPerRow=2:this.itemsPerRow=3;for(var e=0;this.cardsSize>e;e++)e%this.itemsPerRow==0&&0!==e&&this.attach_row_to_fragment(),this.tempRowContainer.appendChild(this.cards[e]);this.attach_row_to_fragment()}},{key:"reflow_last",value:function(){this.is_cards_suitable_for_last_row&&(this.tempRowContainer.appendChild(this.lastTwoCards[0]),this.tempRowContainer.appendChild(this.lastTwoCards[1]),this.attach_row_to_fragment())}},{key:"append_rows",value:function(){this.container.appendChild(this.fragment)}},{key:"clean_up",value:function(){for(var e=0;this.rowsSize>e;e++)this.container.removeChild(this.rowElements.item(e))}},{key:"reflow",value:function(){this.reset_state(),this.reflow_start(),this.reflow_last(),this.append_rows(),this.clean_up()}}])&&y(t.prototype,n),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,i}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}n(5127);var E=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.rows=this.sandbox.querySelectorAll(".rrmc-article-tiles-row-container"),this.cards=this.sandbox.querySelectorAll(".js-rrmc-article-tile"),this.tilesTemplate=this.sandbox.getAttribute("data-article-titles-template"),this.completedReflowTablet=!1,this.completedReflowDesktop=!0,this.unsubScroll=function(){document.removeEventListenerRR("scroll",n.scrollListener)},this.scrollListener=function(){o(n.sandbox,n.unsubScroll)},this.tileClickHandler=function(e){if(e.preventDefault(),e.target.classList.contains("rrmc-article-tile-wrapping-link")){var t=e.target.getAttribute("href"),n=e.target.innerText.toLowerCase(),r=e.target.parentElement.querySelector(".rrmc-article-tile--title").innerText.toLowerCase(),i=""===n?"".concat(r).concat(n):"".concat(r,"/").concat(n);a.Gx({event:"headlineClick",eventCategory:"Inspiring Greatness",eventAction:"Headline Click",eventLabel:i,eventCallback:function(){window.location=t},eventTimeout:2e3})}},this.reflowTemplate=function(){if((0,r.h)()){if(n.completedReflowTablet)return;n.completedReflowTablet=!0,n.completedReflowDesktop=!1}else{if(n.completedReflowDesktop)return;n.completedReflowDesktop=!0,n.completedReflowTablet=!1}n.isMultipleRowsWithLastDouble()?b.reflow(n.sandbox):v.reflow(n.sandbox)}},(t=[{key:"isMultipleRowsWithLastDouble",value:function(){return"multipleRowsWithLastDouble"===this.tilesTemplate}},{key:"initListeners",value:function(){window.addEventListenerRR("resize",this.reflowTemplate),document.addEventListenerRR("scroll",this.scrollListener),this.sandbox.addEventListenerRR("click",this.tileClickHandler)}},{key:"load",value:function(){var e=this,t=this.sandbox.querySelectorAll(".rrmc-article-tile-img-wrapper img"),n=t[t.length-1];[].slice.call(t).forEach((function(i,o){(0,s.$l)(i,(function(){t[o]===n&&(e.initListeners(),(0,r.h)()&&e.reflowTemplate(),e.scrollListener())}))}))}}])&&x(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();!function(){var e=document.querySelectorAll(".js-rrmc-article-tiles-grid");document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(e).forEach((function(e){var t=new E(e);e.data={articleTilesInstance:t},t.load()}))}))}()},1174:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d}),n(5127);var r=n(5076),i=n(2862),o=n(915),a=n.n(o),s=n(8607);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.transitionMarker=this.container.querySelector(".rrmc-audio-hotspots-transition-marker"),this.originalWrapper=this.container.querySelector(".rrmc-audio-hotspots-wrapper-original"),this.alternateWrapper=this.container.querySelector(".rrmc-audio-hotspots-wrapper-alternate"),this.originalImage=this.container.querySelector(".js-rrmc-audio-hotspots-original-img"),this.originalImage&&(this.originalImage_img=this.container.querySelector(".rrmc-audio-hotspots-original-img")),this.alternateImage=this.container.querySelector(".js-rrmc-audio-hotspots-alternate-img"),this.alternateImage&&(this.alternateImage_img=this.container.querySelector(".rrmc-audio-hotspots-alternate-img")),this.aspect_ratio=this.container.querySelector(".js-rrmc-audio-hotspots-aspect"),this.transitionMarker=this.container.querySelector(".rrmc-audio-hotspots-transition-marker"),this.toggleSwitcher=this.container.querySelector("#isAlternateSelected"),this.toggleLabelOriginal=this.container.querySelector(".rrmc-audio-hotspots-toggle-label-original"),this.toggleLabelAlternate=this.container.querySelector(".rrmc-audio-hotspots-toggle-label-alternate"),this.originalDesktopHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-original-desktop"),this.originalTabletHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-original-tablet"),this.originalMobileHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-original-mobile"),this.alternateDesktopHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-alternate-desktop"),this.alternateTabletHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-alternate-tablet"),this.alternateMobileHotspotsData=document.getElementsByClassName("rrmc-audio-hotspots-dataset-alternate-mobile"),this.transitionTimeline=(new s.Y_).addLabel("start").fromTo(this.alternateImage,1,{opacity:0},{opacity:1},"start").fromTo(this.originalImage,1,{opacity:1},{opacity:0},"start"),this.load_images=function(e){(0,i.Il)(n.originalImage,(function(){n.alternateImage?(0,i.Il)(n.alternateImage,(function(){"objectFit"in document.documentElement.style==0&&a()(n.alternateImage_img),e()})):e()}))},this.set_aspect_ratio=function(){new Promise((function(e){n.load_images(e)})).then((function(){n.on_resize()}))},this.on_resize=function(){for(var e=document.getElementsByClassName("rrmc-audio-hotspots-audio-player"),t=0;t<e.length;t++)n.player=videojs.getPlayer(e[t]),n.player.pause();new IntersectionObserver((function(){n.container.querySelector("#isAlternateSelected").checked?n.renderHotspots(n.getHotspotsForAlternateImage()):n.renderHotspots(n.getHotspotsForOriginalImage()),n.toggleSwitcher.addEventListener("change",(function(){if(n.container.querySelector("#isAlternateSelected").checked){n.transitionTimeline.play(),n.renderHotspots(n.getHotspotsForAlternateImage());for(var e=document.getElementsByClassName("rrmc-audio-hotspots-audio-player"),t=0;t<e.length;t++)n.player=videojs.getPlayer(e[t]),n.player.pause();n.toggleLabelOriginal.classList.remove("active"),n.toggleLabelAlternate.classList.add("active")}else{n.transitionTimeline.reverse(),n.renderHotspots(n.getHotspotsForOriginalImage());for(var r=document.getElementsByClassName("rrmc-audio-hotspots-audio-player"),i=0;i<r.length;i++)n.player=videojs.getPlayer(r[i]),n.player.pause();n.toggleLabelAlternate.classList.remove("active"),n.toggleLabelOriginal.classList.add("active")}}))})).observe(n.transitionMarker),n.set_container_aspect_ratio_image()}},t=[{key:"getHotspotsForOriginalImage",value:function(){return window.innerWidth>=1020?this.getHotspotsPoints(this.originalDesktopHotspotsData):window.innerWidth>=768?this.getHotspotsPoints(this.originalTabletHotspotsData):this.getHotspotsPoints(this.originalMobileHotspotsData)}},{key:"getHotspotsForAlternateImage",value:function(){return window.innerWidth>=1020?this.getHotspotsPoints(this.alternateDesktopHotspotsData):window.innerWidth>=768?this.getHotspotsPoints(this.alternateTabletHotspotsData):this.getHotspotsPoints(this.alternateMobileHotspotsData)}},{key:"getHotspotsPoints",value:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n].dataset.posx,i=e[n].dataset.posy,o=e[n].dataset.audio,a={x:r/100*this.originalWrapper.offsetWidth+"px",y:i/100*this.originalWrapper.offsetHeight+"px",audio:o};t.push(a)}return t}},{key:"renderHotspots",value:function(e){for(var t=this,n=document.getElementsByClassName("rrmc-audio-hotspots-overlay-image");n[0];)n[0].parentNode.removeChild(n[0]);var r=[],i=[];e.forEach((function(e){var n="rrmc-audio-hotspots-audio-play-".concat(e.audio),i=document.getElementsByClassName(n);t.player=videojs.getPlayer(i[0]),r.push(t.player)}));var o=document.querySelector(".rrmc-audio-hotspots-display-overlay");e.forEach((function(e){var n=document.createElement("img");n.style.left=e.x,n.style.top=e.y,n.className="rrmc-audio-hotspots-overlay-image",n.src="/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/img/rr-hotspot-off.svg",o.appendChild(n);var a=!1;n.addEventListener("click",(function(){if(a){n.src="/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/img/rr-hotspot-off.svg",a=!1;var o="rrmc-audio-hotspots-audio-play-".concat(e.audio),s=document.getElementsByClassName(o);t.player=videojs.getPlayer(s[0]),t.player.pause()}else{n.src="/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/img/rr-hotspot-on.svg",a=!0;var l="rrmc-audio-hotspots-audio-play-".concat(e.audio),c=document.getElementsByClassName(l);t.player=videojs.getPlayer(c[0]),t.player.play(),r.forEach((function(e){e!=t.player&&e.pause()})),i.forEach((function(e){e!=n&&(e.src="/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/img/rr-hotspot-off.svg")}))}})),i.push(n)}))}},{key:"load",value:function(){window.addEventListenerRR("resize",this.on_resize),this.set_aspect_ratio()}},{key:"destroy",value:function(){this.alternateImage&&s.uo.set([this.alternateImage,this.originalImage],{clearProps:"all"})}},{key:"set_container_padding_bottom",value:function(e){this.aspect_ratio.style.paddingBottom="".concat(100*e,"%")}},{key:"set_container_aspect_ratio_image",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};(0,r.A)((function(){return 0!==e.originalImage_img.naturalWidth}),(function(){var n=e.originalImage_img,r=n.naturalWidth,i=n.naturalHeight;e.image_aspect_ratio=i/r,e.set_container_padding_bottom(e.image_aspect_ratio),t()}),this)}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const d=h;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-audio-hotspots-container");[].slice.call(e).forEach((function(e){var t=new h(e);e.data={audioHotspotsInstance:t},t.load()}))}))},6717:(e,t,n)=>{"use strict";n.r(t);var r=n(6988),i=n(1500),o=n(5116),a=n(2725);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}const u=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioPlayer=t,this.infoIcon=this.audioPlayer.querySelector(".rrmc-audio-episode-info-icon"),this.infoIconWrapper=this.audioPlayer.querySelector(".rrmc-audio-episode-info-icon-wrapper"),this.player=this.audioPlayer.querySelector(".vjs-tech"),this.controlWrapper=this.audioPlayer.querySelector(".rrmc-audio-button-wrapper"),this.playPause=this.audioPlayer.querySelector(".rrmc-audio-play-button"),this.dateInfo=this.audioPlayer.querySelector(".rrmc-date-wrapper"),this.infoWrapper=this.audioPlayer.querySelector(".rrmc-audio-episode-information-wrap"),this.playerWrapper=this.audioPlayer.querySelector(".rrmc-audio-player-wrapper"),this.desc=this.infoWrapper.querySelector(".rrmc-audio-episode-information"),this.isPlaying=!1,this.infoOpen=!1,this.currentLayout=(0,o.S)()?"mobile":"",this.subs={},this.subs.playing=new r.B7,this.subs.paused=new r.B7,this.vjsPlayer=videojs.getPlayer(this.player),this.unsubs={},this.toggleAudioPlay=function(){n.isPlaying?n.manualPause():n.playPlayer()},this.clearAnimations=function(){n.pausePlayer(),n.hidePlayer(),n.closeInfo()},this.fadeOut=function(){n.audioPlayer.classList.add("rrmc-audio-episode--faded")},this.fadeIn=function(){n.audioPlayer.classList.remove("rrmc-audio-episode--faded")},this.manualPause=function(){n.pausePlayer(),n.subs.paused.next()},this.pausePlayer=function(){n.pause(),n.hidePlayer(),n.playPause.classList.remove("rrmc-audio-pause-button"),n.audioPlayer.classList.remove("rrmc-audio-episode-playing"),n.playPause.setAttribute("aria-label","play"),n.isPlaying=!1},this.playPlayer=function(){n.fadeIn(),n.play(),n.showPlayer(),n.playPause.classList.add("rrmc-audio-pause-button"),n.playPause.setAttribute("aria-label","pause"),n.audioPlayer.classList.add("rrmc-audio-episode-playing"),n.subs.playing.next(),n.isPlaying=!0;var e=videojs.getPlayer(n.player);a.A.sub_audio_manager_bus.next({thisPlayer:e})},this.hidePlayer=function(){i.os.timeline().add("start").to(n.playerWrapper,.4,{height:0},"start")},this.showPlayer=function(){i.os.timeline().add("start").to(n.playerWrapper,.4,{height:50},"start")},this.resetProgress=function(){videojs(n.player).currentTime(0)},this.audioFinished=function(){n.clearAnimations(),n.resetProgress()},this.openInfo=function(){var e=10;(0,o.S)()&&(e+=n.audioPlayer.querySelector(".rrmc-audio-episode-information").clientHeight),[].slice.call(n.desc.childNodes).forEach((function(t){var n=parseInt(t.clientHeight);e+=isNaN(n)?0:n})),n.infoIconWrapper&&n.infoIconWrapper.classList.add("rrmc-audio-episode-info-icon-wrapper-expanded"),i.os.timeline().add("start").set(n.infoWrapper,{visibility:"visible"},"start").to(n.infoWrapper,.4,{height:e},"start").to([n.desc,n.dateInfo],.2,{opacity:1},"start+0.2"),n.infoOpen=!0},this.closeInfo=function(){i.os.timeline().add("start").to([n.desc,n.dateInfo],.2,{opacity:0},"start").to(n.infoWrapper,.4,{height:0},"start+0.2").set(n.infoWrapper,{visibility:"hidden"}),n.infoIconWrapper&&n.infoIconWrapper.classList.remove("rrmc-audio-episode-info-icon-wrapper-expanded"),n.infoOpen=!1},this.toggleInfoDisplay=function(){n.infoOpen?n.closeInfo():n.openInfo()}},t=[{key:"initAnalytics",value:function(){}},{key:"pause",value:function(){videojs(this.player).pause()}},{key:"play",value:function(){videojs(this.player).play()}},{key:"addJumpEventListeners",value:function(){for(var e=this,t=this.audioPlayer.querySelectorAll(".rrmc-audio-jump"),n=0;n<t.length;n++)t[n].addEventListener("click",(function(t){if(t.target.classList.contains("rrmc-audio-jump-back")){var n,r=videojs(e.player).currentTime();n=r>=15?r-15:0,videojs(e.player).currentTime(n)}else if(t.target.classList.contains("rrmc-audio-jump-ahead")){var i,o=videojs(e.player).currentTime(),a=videojs(e.player).duration();i=o+15<=a?o+15:a,videojs(e.player).currentTime(i)}}))}},{key:"initAudioLayout",value:function(){var e=document.createElement("div"),t=document.createElement("div"),n=this.playerWrapper.querySelector(".vjs-control-bar");e.classList.add("rrmc-audio-jump"),e.classList.add("rrmc-audio-jump-back"),t.classList.add("rrmc-audio-jump"),t.classList.add("rrmc-audio-jump-ahead"),n.appendChild(e),n.appendChild(t);var r=videojs(this.player);r.userActive(!0),r.bigPlayButton.hide(),r.controlBar.getChild("FullscreenToggle").hide(),r.controlBar.getChild("PlayToggle").hide();var i=r.getChild("errorDisplay");i.off(r,"error",i.open),i.dispose();for(var o=this.playerWrapper.querySelectorAll(".vjs-time-control"),a=0;a<o.length;a++)n.appendChild(o[a]);this.addJumpEventListeners()}},{key:"load",value:function(){this.initListeners(),this.initAudioLayout(),this.initAnalytics()}},{key:"updateLayout",value:function(){this.currentLayout}},{key:"initListeners",value:function(){var e=this;this.infoIcon&&this.infoIcon.addEventListenerRR("click",this.toggleInfoDisplay),this.controlWrapper.addEventListenerRR("click",this.toggleAudioPlay),videojs(this.player).on("ended",this.audioFinished),window.addEventListenerRR("resize",this.updateLayout),a.A.sub_audio_manager_bus.subscribe({next:function(t){e.vjsPlayer.id()!==t.thisPlayer.id()&&(e.pausePlayer(),e.fadeOut())}})}},{key:"addEventListener",value:function(e,t){this.unsubs[e]||(this.unsubs[e]={}),this.unsubs[e][t]=this.subs[e].subscribe({next:t})}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var f=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.audioPlaylist=t,this.audioPlaylist.setAttribute("data-id",Date.now().toString()),this.playerEls=this.audioPlaylist.querySelectorAll(".rrmc-audio-episode"),this.players=[]},(t=[{key:"createPlayer",value:function(e){var t=this,n=new u(e);this.players.push({wrapper:e,instance:n}),n.addEventListener("paused",(function(){[].slice.call(t.players).forEach((function(e){e.instance.fadeIn()}))})),n.load()}},{key:"load",value:function(){var e=this;[].slice.call(this.playerEls).forEach((function(t){e.createPlayer(t)}))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".rrmc-audio");[].slice.call(e).forEach((function(e){e.hasAttribute("data-initialised")||(e.setAttribute("data-initialised","true"),new f(e).load())}))}))},8527:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(2725);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.elm_quote=this.container.querySelector(".js-rrmc-blockquote-quote"),this.elm_name=this.container.querySelector(".js-rrmc-blockquote-name"),this.elm_title=this.container.querySelector(".js-rrmc-blockquote-job-title"),this.on_scroll=function(){(n.is_edit_mode||window.pageYOffset+window.innerHeight>n.container_top)&&(document.removeEventListenerRR("scroll",n.on_scroll),setTimeout((function(){n.reveal()}),500))}},(t=[{key:"reveal",value:function(){var e=new r.Y_;this.elm_quote&&e.fromTo(this.elm_quote,1.25,{opacity:0,y:"100%"},{opacity:1,y:"0%",ease:r.ys.easeOut}),this.elm_name&&e.fromTo(this.elm_name,.5,{opacity:0,y:"100%"},{opacity:1,y:"0%",ease:r.ys.easeOut},"-=.25"),this.elm_title&&e.fromTo(this.elm_title,.5,{opacity:0,y:"100%"},{opacity:1,y:"0%",ease:r.ys.easeOut},"-=.25")}},{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_top=e.top+window.pageYOffset}},{key:"load",value:function(){var e=this;this.get_container_top(),document.addEventListenerRR("scroll",this.on_scroll),i.A.sub_loaded_component.subscribe({next:function(){return e.get_container_top()}})}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-blockquote");[].slice.call(e).forEach((function(e){new l(e).load()}))}))},7406:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(4692),i=n.n(r),o=n(259),a=n(8521);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var p={DAWN:"dawn",GHOST:"ghost",CULLINAN:"cullinan",PHANTOM:"phantom","GHOST EXTENDED WHEELBASE":"ghost-ewb",WRAITH:"wraith","PHANTOM EXTENDED WHEELBASE":"phantom-ewb","BLACK BADGE":"black-badge","THE ACCESSORY COLLECTION":"boutique","PROVENANCE PRE-OWNED":"pre-owned","ENHANCED OWNERSHIP PROGRAMME":"ownership"};const f=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.brochureType=this.sandbox.getAttribute("data-brochure-type"),this.heading=this.sandbox.getAttribute("data-heading"),this.removeImage=this.sandbox.getAttribute("data-remove-image"),this._appendBrochureResponse=function(){var e="",t=n.brochureType?"?id=".concat(n.brochureType):"";i().getJSON("/bin/public/brochure".concat(t),(function(t){var r=[];n.brochureData=t;var o,s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(t.entries());try{for(s.s();!(o=s.n()).done;){var u=l(o.value,2),h=u[0],d=u[1],f=h;p[d.label]&&window.location.pathname.match(RegExp("".concat(p[d.label],"(?!-ewb)")))&&(f-=100,r.push(d.label)),t[h].rank=f}}catch(e){s.e(e)}finally{s.f()}t.sort((function(e,t){return e.rank-t.rank})),e+='<div class="rrmc-brochure-heading">',e+='<h2 class="rrmc-h2 rrmc-form-title">'.concat((0,a.K)(n.heading),"</h2>"),e+="</div>",e+='<div class="rrmc-brochure-wrap">',i()(t).each((function(t,r){for(var i in e+='<div class="rrmc-brochure-elm">',null===n.removeImage&&(e+='<div class="rrmc-brochure-elm-image-wrap">',e+='<h3 class="rrmc-h3 rrmc-brochure-title">'.concat(r.label,"</h3>"),e+='<img class="rrmc-brochure-image" src="'.concat(r.coverImage,'" />'),e+="</div>"),e+='<div class="rrmc-brochure-list-wrap">',r.categories){for(var o in e+='<div class="rrmc-brochure-list-node">',e+='<h3 class="rrmc-brochure-label">'.concat(r.categories[i].label,"</h3>"),e+="<div>",r.categories[i].brochures)e+='<div class="rrmc-download-link-brochure">\n                <a href="'.concat(r.categories[i].brochures[o].path,'" target="_blank" class="rrmc-download-link-label-brochure">').concat(r.categories[i].brochures[o].label,'</a>\n                <span class="rrmc-icon rrmc-download-icon"></span>\n              </div>');e+="</div>",e+="</div>"}e+="</div>",e+="</div>"})),e+="</div>",i()(n.sandbox).fadeOut(1e3,(function(){i()(".js-overlay").scrollTop(0),i()(n.sandbox).parents(".brochure-list").append(e),r.forEach((function(e){if(r.indexOf(e)>-1){var t=e.toUpperCase();i()(".rrmc-brochure-title").filter((function(){return i()(this).text()==t})).closest(".rrmc-brochure-elm").addClass("selected-brochure")}})),i()(".selected-brochure").last().addClass("end-selected"),i()('<div class="rrmc-brochure-heading"><h2 class="rrmc-h2 rrmc-form-title">'.concat((0,a.K)("Other EU tyre labels"),"</h2></div>")).insertAfter(".end-selected"),i()(".rrmc-brochure-wrap .js-rrmc-button").on("click",n.on_cta_click),i()(".rrmc-brochure-wrap .rrmc-download-link-label-brochure").on("click",n.on_download_click)}))}))},this.on_cta_click=function(e){o.Gx({event:"rbContactAdvisorClick",eventCategory:"form",eventAction:n.formName.id,eventLabel:e.target.innerText.toLowerCase()})},this.on_download_click=function(e){var t=i()(e.target).parents(".rrmc-brochure-elm").find(".rrmc-brochure-title").text().toLowerCase(),n=i()(e.target).parents(".rrmc-brochure-list-node").find(".rrmc-brochure-label").text().toLowerCase(),r=e.target.innerText.toLowerCase();o.Gx({event:"rbBrochureClick",eventCategory:"form",eventAction:"request a brochure",eventLabel:"download - ".concat(t," ").concat(n," ").concat(r)})},this.redirect_to_bespoke=function(){location.href=n.redirect_path}},(t=[{key:"load",value:function(){this._appendBrochureResponse()}},{key:"destroy",value:function(){i()(this.sandbox).parents(".brochure-list").find(".rrmc-brochure-wrap,.rrmc-brochure-heading").remove()}}])&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},2423:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var r=n(3336),i=n(9173),o=n(2130),a=n(4958),s=n(6180),l=n(1872),c=n(2314),u=n(412),h=n(2430),d=n(6270),p=n(6829),f=n(9719),m=n(719),v=n(8686),g=n(502),y=n(7289);function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n){var r=!1;function i(e,t){var n=Math.floor(t.length/2),r=t.slice(0,n).reverse(),i=t.slice(-1*n);return r.concat(e).concat(i)}var o={set:function(n){if(r)r=!1;else for(var o=i(t.Html.slides,t.Clones.items),a=Math.floor(t.Clones.items.length/2)+e.index-1,s=Math.floor(t.Clones.items.length/2)+e.index+1,l=n-e.index*t.Sizes.slideWidth,c=(1-.8)/t.Sizes.slideWidth,u=l>=0?[.8,-c*l+1,c*l+.8]:[-c*l+.8,-c*-l+1,.8],h=a,d=0;h<=s;++h,++d)o[h].style.transform="scale(".concat(u[d],")")},transitionEnable:function(){var e,n=_(i(t.Html.slides,t.Clones.items));try{for(n.s();!(e=n.n()).done;)e.value.style.transition="transform ".concat(t.Transition.duration,"ms cubic-bezier(.64,.55,.34,.98)")}catch(e){n.e(e)}finally{n.f()}},transitionDisable:function(){var e,n=_(i(t.Html.slides,t.Clones.items));try{for(n.s();!(e=n.n()).done;)e.value.style.transition="none"}catch(e){n.e(e)}finally{n.f()}},mount:function(){var r,a=i(t.Html.slides,t.Clones.items),s=_(a);try{for(s.s();!(r=s.n()).done;)r.value.style.transform="scale(0.8)"}catch(e){s.e(e)}finally{s.f()}a[e.index+Math.floor(t.Clones.items.length/2)].style.transform="scale(1.0)",n.on("translate.move",(function(e){o.set(e)}))}};(0,y.E8)(o,"clonedLength",{get:function(){return Math.floor(t.Clones.items.length/2)}});var a=function(){};return n.on("run.before",(function(n){o.transitionEnable();var i=n.direction,s=Math.floor(t.Clones.items.length/2);">"==i?e.index+1>=t.Html.slides.length&&(o.set(t.Html.slides.length*t.Sizes.slideWidth),r=!0,a=function(){t.Clones.items[s].style.transform="scale(0.8)"}):"<"==i?e.index-1<0&&(o.set(-t.Sizes.slideWidth),r=!0,a=function(){t.Clones.items[0].style.transform="scale(0.8)"}):"="==i&&(t.Html.slides[e.index].style.transform="scale(0.8)",a=function(){})})),n.on("run",(function(){})),n.on("run.after",(function(){o.transitionDisable(),a()})),o}function x(e,t,n){var r={setupSlides:function(){for(var e="".concat(this.slideWidth,"px"),n=t.Html.slides,r=0;r<n.length;r++)n[r].style.width=e},setupWrapper:function(){t.Html.wrapper.style.width="".concat(this.wrapperSize,"px")},remove:function(){for(var e=t.Html.slides,n=0;n<e.length;n++)e[n].style.width="";t.Html.wrapper.style.width=""}};return(0,y.E8)(r,"length",{get:function(){return t.Html.slides.length}}),(0,y.E8)(r,"width",{get:function(){return t.Html.root.offsetWidth}}),(0,y.E8)(r,"wrapperSize",{get:function(){return r.slideWidth*r.length+t.Gaps.grow+t.Clones.grow}}),(0,y.E8)(r,"slideWidth",{get:function(){var n=r.width/e.settings.perView-t.Peek.reductor-t.Gaps.reductor;return n>window.innerHeight?window.innerHeight-100:n}}),n.on(["build.before","resize","update"],(function(){r.setupSlides(),r.setupWrapper()})),n.on("destroy",(function(){r.remove()})),r}var S=n(353),E=n(7232),k=n(2725),T=n(2999);function A(e,t,n){var r=new T.A,i=new T.A,o={mount:function(){this.peek_control_left=t.Html.root.querySelector('[data-glide-el="peek-control-left"]'),this.peek_control_right=t.Html.root.querySelector('[data-glide-el="peek-control-right"]'),this.resize(),this.bind()},resize:function(){var e=.5*(window.innerWidth-t.Sizes.slideWidth-.2*t.Sizes.slideWidth);this.peek_control_left.style.width="".concat(e,"px"),this.peek_control_right.style.width="".concat(e,"px")},bind:function(){r.on("click",this.peek_control_left,this.click_left),i.on("click",this.peek_control_right,this.click_right),r.on("mouseover",this.peek_control_left,this.hover_left),r.on("mouseleave",this.peek_control_left,this.leave_left),i.on("mouseover",this.peek_control_right,this.hover_right),i.on("mouseleave",this.peek_control_right,this.leave_right)},unbind:function(){r.off("click",this.peek_control_left),i.off("click",this.peek_control_right),r.off("mouseover",this.peek_control_left),r.off("mouseleave",this.peek_control_left),i.off("mouseover",this.peek_control_right),i.off("mouseleave",this.peek_control_right)},hover_left:function(){k.A.sub_cursor.next(["scale","enter","arrow-left"])},leave_left:function(){k.A.sub_cursor.next(["scale","leave"])},hover_right:function(){k.A.sub_cursor.next(["scale","enter","arrow-right"])},leave_right:function(){k.A.sub_cursor.next(["scale","leave"])},click_left:function(){t.Run.make("<")},click_right:function(){t.Run.make(">")}};return(0,y.E8)(o,"value",{get:function(){return o._v},set:function(e){(0,E.Gv)(e)?(e.before=(0,E.RI)(e.before),e.after=(0,E.RI)(e.after)):e=(0,E.RI)(e),o._v=e}}),n.on(["resize","update"],(function(){o.resize()})),n.on("destroy",(function(){o.unbind(),r.destroy(),i.destroy()})),o}var C=n(4755),M=n(5699),L=n(9608),R=n(915),P=n.n(R),I=n(259),D=n(8607),O=n(2862);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(){N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==F(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(F(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function j(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,U(r.key),r)}}function U(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}var z=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.carousel=this.container.querySelector(".rrmc-cc-carousel-images"),this.settingPipsStyle=this.carousel.getAttribute("data-pips-style"),this.settingPipsMobileStyle=this.carousel.getAttribute("data-pips-mobile-style"),this.flagPipsVisible=this.carousel.hasAttribute("data-pips-visible"),this.flagAutoplayEnabled=this.carousel.hasAttribute("data-autoplay-enabled"),this.settingAutoplayDelay=parseFloat(this.carousel.getAttribute("data-autoplay-delay")),this.flagZoomEnabled=this.carousel.hasAttribute("data-zoom-enabled"),this.flagFullWidth=this.carousel.hasAttribute("data-is-full-width"),this.bibsContainer=null,this.peekLeft=null,this.peekRight=null,this.slides=this.container.querySelectorAll(".rrmc-cc-carousel-slide"),this.caption_container=this.container.querySelector(".js-rrmc-cc-captions"),this.caption_container&&(this.captions=this.caption_container.querySelectorAll(".rrmc-cc-carousel-caption")),this.caption_current=0,this.carousel_paused=!this.flagAutoplayEnabled,this.swipe_start=!1,this.swipe_move=!1,this.on_zoom_over=function(){k.A.sub_cursor.next(["scale","enter","add"])},this.on_zoom_out=function(){k.A.sub_cursor.next(["scale","leave"])},this.on_zoom_click=function(e){if(!n.swipe_move){n.glideCarousel.pause(),n.carousel_paused=!0;var t=e.currentTarget,r=(new DOMParser).parseFromString('<div class="rrmc-zoom-overlay">\n              <div class="rrmc-zoom-overlay-position">\n              </div>\n          </div>',"text/html").body.firstChild,i=r.querySelector(".rrmc-zoom-overlay-position"),o=t.getBoundingClientRect(),a=t.cloneNode(!0);a.querySelector(".rrmc-image-aspect-img").setAttribute("sizes","".concat(150,"vw")),i.appendChild(a),document.body.appendChild(r),(0,M.A)()?r.style.overflow="scroll":r.style.overflow="hidden";var s=1.5*Math.max(window.innerWidth,window.innerHeight)+(window.innerWidth<window.innerHeight?500:0),l=o.width/s;D.uo.set(i,{width:s,scale:l,x:o.x,y:o.y});var c=i.offsetHeight,u=-(s-window.innerWidth)/2,h=-(c-window.innerHeight)/2,d=2*-u,p=2*-h;(new D.Y_).add((function(){(0,C.disableBodyScroll)(r)})).to(i,.5,{scale:1,x:u,y:h},"+=.5").add((function(){var e=function(){};(0,M.A)()&&(D.uo.set(i,{x:0,y:0}),D.uo.set(r,{scrollLeft:-u,scrollTop:-h})),k.A.sub_cursor.next(["scale","leave"]),k.A.sub_cursor.next(["scale","enter","cross"]),(0,M.A)()||(e=function(e){var t=e.clientX,n=e.clientY,r=t/2/(window.innerWidth/2),o=n/2/(window.innerHeight/2),a=r*d+0,s=o*p+0;D.uo.to(i,.2,{x:-a,y:-s})}),I.Gx({event:"carouselOpen",eventCategory:"Carousel",eventAction:"Open",eventLabel:"classic carousel"});var t=function t(){n.glideCarousel.play(),n.carousel_paused=!1,(0,M.A)()||window.removeEventListenerRR("mousemove",e),r.removeEventListenerRR("click",t),window.removeEventListenerRR("resize",t),k.A.sub_cursor.next(["scale","leave"]),(0,M.A)()&&(D.uo.set(i,{x:-r.scrollLeft,y:-r.scrollTop}),D.uo.set(r,{scrollLeft:0,scrollTop:0})),(new D.Y_).to(i,.5,{scale:l,x:o.x,y:o.y}).add((function(){(0,C.enableBodyScroll)(r),document.body.removeChild(r)})),I.Gx({event:"carouselClose",eventCategory:"Carousel",eventAction:"Close",eventLabel:"classic carousel"})};(0,M.A)()||window.addEventListenerRR("mousemove",e),r.addEventListenerRR("click",t),window.addEventListenerRR("resize",t)}))}},this.flagZoomEnabled&&(this.slides_zoom=this.container.querySelectorAll(".js-cc-slide-zoom"),this.enableZoom()),this.js_video_class="js-cc-slide-video",this.slides_video=this.container.querySelectorAll(".".concat(this.js_video_class)),this.enableVideo(),this.clear_navigation_events=function(){n.bibsContainer.removeEventListenerRR("click",n.bibsClickHandler),n.peekLeft.removeEventListenerRR("click",n.peekLeftClickHandler),n.peekRight.removeEventListenerRR("click",n.peekRightClickHandler)},this.init=function(e){var t=n.gaps_peeks(),y=t.gap,_=t.peek;n.bibsContainer=n.container.querySelector(".rrmc-cc-carousel-bullets"),n.peekLeft=n.carousel.querySelector(".rrmc-cc-carousel-peek-controls-left"),n.peekRight=n.carousel.querySelector(".rrmc-cc-carousel-peek-controls-right"),n.glideCarousel=new r.A(n.carousel,{type:"carousel",perView:1,focusAt:"center",peek:_,startAt:e||0,gap:y,animationDuration:1e3,animationTimingFunc:"cubic-bezier(.64,.55,.34,.98)",autoplay:!!n.flagAutoplayEnabled&&1e3*n.settingAutoplayDelay,hoverpause:!1,bibsContainer:n.container.querySelectorAll(".rrmc-cc-carousel-bullets"),bibsColour:"light"===n.settingPipsStyle?"ffffff":"000000",bibsMobileColour:"light"===n.settingPipsMobileStyle?"ffffff":"000000"}),n.glideCarousel.on("run.before",(function(e){var t=e.direction;if(">"==t){var r=n.caption_current+1>=n.slides.length?0:n.caption_current+1;n.caption_next=r}else if("<"==t){var i=n.caption_current-1<0?n.slides.length-1:n.caption_current-1;n.caption_next=i}else if("="==t){var o=e.steps;n.caption_next=o}n.transition_caption(),n.video_stop()})),n.glideCarousel.on("run.after",(function(){n.caption_current=n.caption_next,n.video_init_slide()})),n.glideCarousel.on("mount.after",(function(){n.reveal(),n.polyfill_slide_images()})),n.glideCarousel.on("swipe.start",(function(){n.swipe_start=!0})),n.glideCarousel.on("swipe.move",(function(){n.swipe_move=!0,I.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Swipe",eventLabel:"classic carousel"})})),n.glideCarousel.on("swipe.end",(function(){setTimeout((function(){n.swipe_start=!1,n.swipe_move=!1}),200)})),n.glideCarousel.on("resize",(function(){n.polyfill_slide_images()})),n.glideCarousel.on("autoplay.start",(function(){n.carousel_paused&&setTimeout((function(){n.glideCarousel.pause()}),200)})),n.glideCarousel.on("autoplay.stop",(function(){}));var b={Html:a.A,Translate:s.A,Transition:l.A,Direction:c.A,Peek:u.A,Sizes:n.flagFullWidth?S.A:x,Gaps:h.A,Move:d.A,Clones:p.A,Resize:f.A,Build:m.A,Run:v.A,Swipe:i.A,Autoplay:g.A,PeekControls:A};n.flagPipsVisible&&(b.Bibs=o.A),n.flagFullWidth||(b.Scale=w),n.glideCarousel.mount(b),n.init_captions(),n.video_init_slide(),n.bibsContainer.addEventListenerRR("click",n.bibsClickHandler),n.peekLeft.addEventListenerRR("click",n.peekLeftClickHandler),n.peekRight.addEventListenerRR("click",n.peekRightClickHandler)},this.bc_init_proc=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n.dispose_snippet(),I.OV(n),n.glideCarousel.pause(),n.carousel_paused=!0,n.bc_init=!0;for(var r=e,i=r.querySelector(".video-js"),o=document.createElement("video-js"),a=0;a<i.attributes.length;++a)o.setAttribute(i.attributes.item(a).name,i.attributes.item(a).value);i.parentNode.appendChild(o),n.local_player=bc(o),n.local_player.reloadSourceOnError({errorInterval:5}),n.local_player.play(),n.local_icon=e.icon_animator,n.elm_image_aspect=r.querySelector(".js-rrmc-image-aspect-scale"),(new D.Y_).set(n.elm_image_aspect,{display:"none"}),t&&(n.elm_full_video_player=o.querySelector("video.vjs-tech"),n.elm_full_video_controls=o.querySelector(".vjs-control-bar"),n.elm_full_video_player.addEventListenerRR("mouseover",n.on_full_mouseover),n.elm_full_video_player.addEventListenerRR("mouseleave",n.on_full_mouseleave),n.elm_full_video_controls.addEventListenerRR("mouseover",n.on_controls_mouseover),n.elm_full_video_controls.addEventListenerRR("mouseleave",n.on_controls_mouseleave),n.local_player.on("useractive",(function(){n.is_fullscreen&&n.on_full_mouseover()})),n.local_player.on("userinactive",(function(){n.is_fullscreen&&(k.A.sub_cursor.next(["scale","leave"]),n.on_full_mouseleave())})),n.local_player.on("fullscreenchange",(function(){n.local_player.isFullscreen()?(n.is_fullscreen=!0,k.A.sub_cursor.next({action:"fullscreen_enter",elm:o})):(n.is_fullscreen=!1,k.A.sub_cursor.next({action:"fullscreen_leave",elm:o}))})),n.local_player.on("play",(function(){I.ao.videoStarted(I.o(n.local_player)),n.over_controls?n.full_video_hover="pause":"pause"!==n.full_video_hover&&(k.A.sub_cursor.next(["scale","enter","pause"]),n.full_video_hover="pause")})),n.local_player.on("pause",(function(){I.ao.videoStopped(I.o(n.local_player)),n.over_controls?n.full_video_hover="play":"play"!==n.full_video_hover&&(k.A.sub_cursor.next(["scale","enter","play"]),n.full_video_hover="play")})),n.local_player.on("ended",(function(){I.ao.videoEnded(I.o(n.local_player))})),n.local_player.on("timeupdate",(function(){I.vp(n,n.local_player)})))},this.bibsClickHandler=function(){I.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Bib Click ".concat(parseInt(n.caption_next)+1),eventLabel:"classic carousel"})},this.peekLeftClickHandler=function(){I.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Peek Left Click",eventLabel:"classic carousel"})},this.peekRightClickHandler=function(){I.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Peek Right Click",eventLabel:"classic carousel"})},this.update=function(){var e=n.gaps_peeks(),t=e.gap,r=e.peek;n.glideCarousel.update({gap:t,peek:r})},this.on_play_when_ready=function(){n.snippet_video&&(n.snippet_video.removeEventListenerRR("loadedmetadata",n.on_play_when_ready),n.snippet_video.play())}},t=[{key:"video_init_slide",value:function(){var e=this;this.current_video_slide=this.slides.item(this.glideCarousel.index);var t=this.current_video_slide.querySelector(".rrmc-cc-carousel-slide-width-force");if(t.classList.contains(this.js_video_class)){var n=t.hasAttribute("data-autoplay"),r=t.hasAttribute("data-controls");if(n||(r=!0),n)this.bc_init_proc(t,r);else{var i=this.current_video_slide.querySelector(".rrmc-cc-video-snippet-container").getAttribute("data-snippet");this.snippet_init=!1,this.on_mouseover_video_snippet=function(){(0,M.A)()||(e.snippet_init?e.snippet_video.play():(e.snippet_init=!0,e.snippet_video=e.make_video_snippet(i),e.snippet_container=e.current_video_slide.querySelector(".rrmc-cc-video-snippet-container"),e.snippet_container.appendChild(e.snippet_video),D.uo.to(e.current_video_slide.querySelector(".rrmc-image-aspect-img"),.5,{opacity:0}),e.snippet_video.addEventListenerRR("loadedmetadata",e.on_play_when_ready),e.snippet_video.readyState>=2&&(e.snippet_video.removeEventListenerRR("loadedmetadata",e.on_play_when_ready),e.snippet_video.play())))},this.on_mouseleave_video_snippet=function(){(0,M.A)()||e.snippet_init&&e.snippet_video.pause()},this.current_video_slide.addEventListenerRR("mouseover",this.on_mouseover_video_snippet),this.current_video_slide.addEventListenerRR("mouseleave",this.on_mouseleave_video_snippet)}}}},{key:"make_video_snippet",value:function(e){var t=document.createElement("video");return t.src=e,t.className="rrmc-video-player-snippet",t.setAttribute("playsinline",""),t.setAttribute("muted",""),t.setAttribute("loop",""),t.setAttribute("type","video/mp4"),t.setAttribute("preload","metadata"),t}},{key:"enableVideo",value:function(){var e=this;[].slice.call(this.slides_video).forEach((function(t){var n=t.hasAttribute("data-autoplay"),r=t.hasAttribute("data-controls");n||(r=!0),r&&(t.icon_animator=new L.A({c:t.querySelector(".rrmc-video-play-button"),c_border:t.querySelector(".rrmc-cursor-border"),c_icon:t.querySelector(".rrmc-cursor-icon")},{change_document:!1}),t.addEventListenerRR("mouseover",(function(){e.bc_init||(k.A.sub_cursor.next(["scale","enter","play"]),t.icon_animator.animate(["scale_strong","leave"]))})),t.addEventListenerRR("mouseleave",(function(){e.bc_init||(k.A.sub_cursor.next(["scale","leave"]),t.icon_animator.animate(["scale","enter","play"]))})),t.addEventListenerRR("click",(function(){e.bc_init||e.swipe_move||e.bc_init_proc(t,r)})))})),this.first_play_transition=!0,this.over_controls=!1,this.on_full_mouseover=function(){e.first_play_transition?e.first_play_transition=!1:k.A.sub_cursor.next(["scale","enter",e.full_video_hover])},this.on_full_mouseleave=function(){k.A.sub_cursor.next(["scale","leave"])},this.on_controls_mouseover=function(){e.over_controls=!0},this.on_controls_mouseleave=function(){e.over_controls=!1}}},{key:"video_stop",value:function(){var e=this;this.bc_init&&(new D.Y_).set(this.elm_image_aspect,{display:"block"}).to(this.elm_image_aspect,.5,{opacity:1}).add((function(){e.local_player.dispose()})).add((function(){e.bc_init=!1})).add((function(){e.local_icon&&e.local_icon.animate(["scale","enter","play"])})).add((function(){e.glideCarousel.play(),e.carousel_paused=!1})),this.dispose_snippet()}},{key:"dispose_snippet",value:function(){var e=this;this.snippet_container&&(new D.Y_).to(this.current_video_slide.querySelector(".rrmc-image-aspect-img"),.35,{opacity:1}).add((function(){e.on_mouseover_video_snippet&&(e.current_video_slide.removeEventListenerRR("mouseover",e.on_mouseover_video_snippet),e.current_video_slide.removeEventListenerRR("mouseleave",e.on_mouseleave_video_snippet),e.on_mouseover_video_snippet=null),e.snippet_video.removeAttribute("src"),e.snippet_video.load(),setTimeout((function(){e.snippet_container.removeChild(e.snippet_video),e.snippet_container=null}),50)}))}},{key:"destroyZoom",value:function(){var e=this;this.flagZoomEnabled&&[].slice.call(this.slides_zoom).forEach((function(t){t.removeEventListenerRR("mouseover",e.on_zoom_over),t.removeEventListenerRR("mouseleave",e.on_zoom_out),t.removeEventListenerRR("click",e.on_zoom_click)}))}},{key:"enableZoom",value:function(){var e=this;[].slice.call(this.slides_zoom).forEach((function(t){t.addEventListenerRR("mouseover",e.on_zoom_over),t.addEventListenerRR("mouseleave",e.on_zoom_out),t.addEventListenerRR("click",e.on_zoom_click)}))}},{key:"reveal",value:function(){D.uo.to(this.carousel,1.5,{opacity:1})}},{key:"transition_caption",value:function(){if(this.caption_container){var e=this.captions.item(this.caption_current),t=this.captions.item(this.caption_next);D.uo.killTweensOf(e),D.uo.killTweensOf(t),(new D.Y_).addLabel("start").fromTo(e,.7,{opacity:1},{opacity:0,ease:D.WG.easeNone}).fromTo(t,.7,{opacity:0},{opacity:1,ease:D.WG.easeNone},"start+=.9")}}},{key:"clear_caption_styles",value:function(){void 0!==this.captions&&[].slice.call(this.captions).forEach((function(e){D.uo.killTweensOf(e),D.uo.set(e,{clearProps:"opacity"})}))}},{key:"init_captions",value:function(){this.caption_container&&D.uo.set(this.captions.item(this.caption_current),{opacity:1})}},{key:"gaps_peeks",value:function(){if(this.flagFullWidth)return{gap:0,peek:0};var e=window.innerWidth;return{gap:0,peek:e<768?0:(e-(e<1440?(e-208)/12*10+144:1072))/2}}},{key:"polyfill_slide_images",value:function(){"objectFit"in document.documentElement.style==0&&P()(this.carousel.querySelectorAll(".rrmc-image-aspect-img"))}},{key:"load",value:(n=N().mark((function e(){var t,n=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(n.length>0&&void 0!==n[0]?n[0]:{}).activeIndex,e.next=4,this.loadImgs();case 4:e.sent&&(this.init(t),window.addEventListenerRR("resize",this.update));case 6:case"end":return e.stop()}}),e,this)})),y=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){j(o,r,i,a,s,"next",e)}function s(e){j(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return y.apply(this,arguments)})},{key:"loadImgs",value:function(){var e=this;return new Promise((function(t){var n=e.container.querySelectorAll(".rrmc-image-aspect-img"),r=n[n.length-1];[].slice.call(n).forEach((function(e,i){(0,O.Kj)(e,(function(){n[i]===r&&t(!0)}))}))}))}},{key:"destroy",value:function(){this.destroyZoom(),this.clear_navigation_events(),window.removeEventListenerRR("resize",this.update),this.glideCarousel.destroy(),this.clear_caption_styles()}}],t&&B(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,y}();const G=z;document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-cc-carousel");[].slice.call(e).forEach((function(e){new z(e).load()}))}))},9367:(e,t,n)=>{"use strict";n.r(t),n(5127);var r=n(1500);var i=n(259),o=n(915),a=n.n(o);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u,h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.rows=this.sandbox.querySelectorAll(".rrmc-collections-grid-row"),this.cards=this.sandbox.querySelectorAll(".js-rrmc-accessories-tile"),this.unsubScroll=function(){document.removeEventListener("scroll",n.scrollListener)},this.scrollListener=function(){!function(e,t){var n=e.querySelectorAll("[data-row-to-animate=true]");0===n.length&&t(),[].slice.call(n).forEach((function(e){var t=e.getBoundingClientRect().top+window.pageYOffset;window.pageYOffset+window.innerHeight>t&&(e.setAttribute("data-row-to-animate",!1),function(e){var t=e.querySelectorAll(".rrmc-accessories-tile");r.os.timeline().staggerFromTo(t,1,{opacity:0,y:"100px"},{opacity:1,y:"0"},.33)}(e))}))}(n.sandbox,n.unsubScroll)},this.tileClickHandler=function(e){if(e.preventDefault(),e.target.classList.contains("rrmc-accessories-tile-wrapping-link")){var t=e.target.getAttribute("href"),r="?productList="+encodeURIComponent("Collection "+n.sandbox.getAttribute("data-collection-name"));window.location=t+r}}},(t=[{key:"initListeners",value:function(){window.addEventListener("resize",this.generateTemplate),document.addEventListener("scroll",this.scrollListener),this.sandbox.addEventListener("click",this.tileClickHandler)}},{key:"polyfill_tile_images",value:function(){"objectFit"in document.documentElement.style==0&&a()(this.sandbox.querySelectorAll(".rrmc-accessories-tile-img-wrapper-img"))}},{key:"load",value:function(){this.polyfill_tile_images(),this.initListeners(),this.scrollListener(),i.u$(this.cards,"Collection "+this.sandbox.getAttribute("data-collection-name"))}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();u=document.querySelectorAll(".js-rrmc-collections-grid"),document.addEventListener("DOMContentLoaded",(function(){[].slice.call(u).forEach((function(e){var t=new h(e);e.data={articleTilesInstance:t},t.load()}))}))},3385:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c}),n(5127);var r=n(2862),i=n(1500);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.img=this.container.querySelector(".js-rrmc-collections-hero-img"),this.svg=this.container.querySelector(".rrmc-collections-hero--svg")},(t=[{key:"setSvg",value:function(){var e=this.svg.getAttribute("data-svg-name");this.svg.classList.add(e)}},{key:"imageLoaded",value:function(){i.os.timeline().fromTo(this.container,1,{opacity:0,y:"100px"},{opacity:1,y:"0"},.33)}},{key:"load",value:function(){(0,r.Il)(this.img,this.imageLoaded.bind(this)),this.setSvg()}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const c=l;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-collections-hero");[].slice.call(e).forEach((function(e){var t=new l(e);e.data={collectionsHeroInstance:t},t.load()}))}))},6898:(e,t,n)=>{"use strict";n.r(t);var r=n(9437);class i{constructor(e,t,n,r,o="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(r),this.$name=document.createElement("div"),this.$name.classList.add("name"),i.nextNameID=i.nextNameID||0,this.$name.id="lil-gui-name-"+ ++i.nextNameID,this.$widget=document.createElement(o),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.domElement.addEventListener("keydown",(e=>e.stopPropagation())),this.domElement.addEventListener("keyup",(e=>e.stopPropagation())),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class o extends i{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function a(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const s={isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:a,toHexString:a},l={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},c={isPrimitive:!1,match:e=>Array.isArray(e),fromHexString(e,t,n=1){const r=l.fromHexString(e);t[0]=(r>>16&255)/255*n,t[1]=(r>>8&255)/255*n,t[2]=(255&r)/255*n},toHexString:([e,t,n],r=1)=>l.toHexString(e*(r=255/r)<<16^t*r<<8^n*r)},u={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const r=l.fromHexString(e);t.r=(r>>16&255)/255*n,t.g=(r>>8&255)/255*n,t.b=(255&r)/255*n},toHexString:({r:e,g:t,b:n},r=1)=>l.toHexString(e*(r=255/r)<<16^t*r<<8^n*r)},h=[s,l,c,u];class d extends i{constructor(e,t,n,r){var i;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,h.find((e=>e.match(i)))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const e=a(this.$text.value);e&&this._setValueFromHexString(e)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class p extends i{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(e=>{e.preventDefault(),this.getValue().call(this.object),this._callOnChange()})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class f extends i{constructor(e,t,n,r,i,o){super(e,t,n,"number"),this._initInput(),this.min(r),this.max(i);const a=void 0!==o;this.step(a?o:this._getImplicitStep(),a),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),window.matchMedia("(pointer: coarse)").matches&&(this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any")),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=e=>{const t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())};let t,n,r,i,o,a=!1;const s=e=>{if(a){const r=e.clientX-t,i=e.clientY-n;Math.abs(i)>5?(e.preventDefault(),this.$input.blur(),a=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(r)>5&&l()}if(!a){const t=e.clientY-r;o-=t*this._step*this._arrowKeyMultiplier(e),i+o>this._max?o=this._max-i:i+o<this._min&&(o=this._min-i),this._snapClampSetValue(i+o)}r=e.clientY},l=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",l)};this.$input.addEventListener("input",(()=>{let e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.key&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t)*-1))})),this.$input.addEventListener("wheel",(t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))}),{passive:!1}),this.$input.addEventListener("mousedown",(e=>{t=e.clientX,n=r=e.clientY,a=!0,i=this.getValue(),o=0,window.addEventListener("mousemove",s),window.addEventListener("mouseup",l)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=e=>{const t=this.$slider.getBoundingClientRect();let n=(r=e,i=t.left,o=t.right,a=this._min,(r-i)/(o-i)*(this._max-a)+a);var r,i,o,a;this._snapClampSetValue(n)},t=t=>{e(t.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let r,i,o=!1;const a=t=>{t.preventDefault(),this._setDraggingStyle(!0),e(t.touches[0].clientX),o=!1},s=t=>{if(o){const e=t.touches[0].clientX-r,n=t.touches[0].clientY-i;Math.abs(e)>Math.abs(n)?a(t):(window.removeEventListener("touchmove",s),window.removeEventListener("touchend",l))}else t.preventDefault(),e(t.touches[0].clientX)},l=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",l)},c=this._callOnFinishChange.bind(this);let u;this.$slider.addEventListener("mousedown",(r=>{this._setDraggingStyle(!0),e(r.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(e=>{e.touches.length>1||(this._hasScrollBar?(r=e.touches[0].clientX,i=e.touches[0].clientY,o=!0):a(e),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",l))}),{passive:!1}),this.$slider.addEventListener("wheel",(e=>{if(Math.abs(e.deltaX)<Math.abs(e.deltaY)&&this._hasScrollBar)return;e.preventDefault();const t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(u),u=setTimeout(c,400)}),{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle(`lil-gui-${t}`,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class m extends i{constructor(e,t,n,r){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach((e=>{const t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class v extends i{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let g=!1;class y{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:r,title:i="Controls",closeFolders:o=!1,injectStyles:a=!0,touchStyles:s=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),s&&this.domElement.classList.add("allow-touch-styles"),!g&&a&&(function(e){const t=document.createElement("style");t.innerHTML='.lil-gui {\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  text-align: left;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  --background-color: #1f1f1f;\n  --text-color: #ebebeb;\n  --title-background-color: #111111;\n  --title-text-color: #ebebeb;\n  --widget-color: #424242;\n  --hover-color: #4f4f4f;\n  --focus-color: #595959;\n  --number-color: #2cc9ff;\n  --string-color: #a2db3c;\n  --font-size: 11px;\n  --input-font-size: 11px;\n  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;\n  --font-family-mono: Menlo, Monaco, Consolas, "Droid Sans Mono", monospace;\n  --padding: 4px;\n  --spacing: 4px;\n  --widget-height: 20px;\n  --title-height: calc(var(--widget-height) + var(--spacing) * 1.25);\n  --name-width: 45%;\n  --slider-knob-width: 2px;\n  --slider-input-width: 27%;\n  --color-input-width: 27%;\n  --slider-input-min-width: 45px;\n  --color-input-min-width: 45px;\n  --folder-indent: 7px;\n  --widget-padding: 0 0 0 3px;\n  --widget-border-radius: 2px;\n  --checkbox-size: calc(0.75 * var(--widget-height));\n  --scrollbar-width: 5px;\n}\n.lil-gui, .lil-gui * {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n.lil-gui.root {\n  width: var(--width, 245px);\n  display: flex;\n  flex-direction: column;\n}\n.lil-gui.root > .title {\n  background: var(--title-background-color);\n  color: var(--title-text-color);\n}\n.lil-gui.root > .children {\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.lil-gui.root > .children::-webkit-scrollbar {\n  width: var(--scrollbar-width);\n  height: var(--scrollbar-width);\n  background: var(--background-color);\n}\n.lil-gui.root > .children::-webkit-scrollbar-thumb {\n  border-radius: var(--scrollbar-width);\n  background: var(--focus-color);\n}\n@media (pointer: coarse) {\n  .lil-gui.allow-touch-styles, .lil-gui.allow-touch-styles .lil-gui {\n    --widget-height: 28px;\n    --padding: 6px;\n    --spacing: 6px;\n    --font-size: 13px;\n    --input-font-size: 16px;\n    --folder-indent: 10px;\n    --scrollbar-width: 7px;\n    --slider-input-min-width: 50px;\n    --color-input-min-width: 65px;\n  }\n}\n.lil-gui.force-touch-styles, .lil-gui.force-touch-styles .lil-gui {\n  --widget-height: 28px;\n  --padding: 6px;\n  --spacing: 6px;\n  --font-size: 13px;\n  --input-font-size: 16px;\n  --folder-indent: 10px;\n  --scrollbar-width: 7px;\n  --slider-input-min-width: 50px;\n  --color-input-min-width: 65px;\n}\n.lil-gui.autoPlace {\n  max-height: 100%;\n  position: fixed;\n  top: 0;\n  right: 15px;\n  z-index: 1001;\n}\n\n.lil-gui .controller {\n  display: flex;\n  align-items: center;\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n}\n.lil-gui .controller.disabled {\n  opacity: 0.5;\n}\n.lil-gui .controller.disabled, .lil-gui .controller.disabled * {\n  pointer-events: none !important;\n}\n.lil-gui .controller > .name {\n  min-width: var(--name-width);\n  flex-shrink: 0;\n  white-space: pre;\n  padding-right: var(--spacing);\n  line-height: var(--widget-height);\n}\n.lil-gui .controller .widget {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  min-height: var(--widget-height);\n}\n.lil-gui .controller.string input {\n  color: var(--string-color);\n}\n.lil-gui .controller.boolean .widget {\n  cursor: pointer;\n}\n.lil-gui .controller.color .display {\n  width: 100%;\n  height: var(--widget-height);\n  border-radius: var(--widget-border-radius);\n  position: relative;\n}\n@media (hover: hover) {\n  .lil-gui .controller.color .display:hover:before {\n    content: " ";\n    display: block;\n    position: absolute;\n    border-radius: var(--widget-border-radius);\n    border: 1px solid #fff9;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n}\n.lil-gui .controller.color input[type=color] {\n  opacity: 0;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n}\n.lil-gui .controller.color input[type=text] {\n  margin-left: var(--spacing);\n  font-family: var(--font-family-mono);\n  min-width: var(--color-input-min-width);\n  width: var(--color-input-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.option select {\n  opacity: 0;\n  position: absolute;\n  width: 100%;\n  max-width: 100%;\n}\n.lil-gui .controller.option .display {\n  position: relative;\n  pointer-events: none;\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  line-height: var(--widget-height);\n  max-width: 100%;\n  overflow: hidden;\n  word-break: break-all;\n  padding-left: 0.55em;\n  padding-right: 1.75em;\n  background: var(--widget-color);\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .display.focus {\n    background: var(--focus-color);\n  }\n}\n.lil-gui .controller.option .display.active {\n  background: var(--focus-color);\n}\n.lil-gui .controller.option .display:after {\n  font-family: "lil-gui";\n  content: "↕";\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  padding-right: 0.375em;\n}\n.lil-gui .controller.option .widget,\n.lil-gui .controller.option select {\n  cursor: pointer;\n}\n@media (hover: hover) {\n  .lil-gui .controller.option .widget:hover .display {\n    background: var(--hover-color);\n  }\n}\n.lil-gui .controller.number input {\n  color: var(--number-color);\n}\n.lil-gui .controller.number.hasSlider input {\n  margin-left: var(--spacing);\n  width: var(--slider-input-width);\n  min-width: var(--slider-input-min-width);\n  flex-shrink: 0;\n}\n.lil-gui .controller.number .slider {\n  width: 100%;\n  height: var(--widget-height);\n  background-color: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  padding-right: var(--slider-knob-width);\n  overflow: hidden;\n  cursor: ew-resize;\n  touch-action: pan-y;\n}\n@media (hover: hover) {\n  .lil-gui .controller.number .slider:hover {\n    background-color: var(--hover-color);\n  }\n}\n.lil-gui .controller.number .slider.active {\n  background-color: var(--focus-color);\n}\n.lil-gui .controller.number .slider.active .fill {\n  opacity: 0.95;\n}\n.lil-gui .controller.number .fill {\n  height: 100%;\n  border-right: var(--slider-knob-width) solid var(--number-color);\n  box-sizing: content-box;\n}\n\n.lil-gui-dragging .lil-gui {\n  --hover-color: var(--widget-color);\n}\n.lil-gui-dragging * {\n  cursor: ew-resize !important;\n}\n\n.lil-gui-dragging.lil-gui-vertical * {\n  cursor: ns-resize !important;\n}\n\n.lil-gui .title {\n  height: var(--title-height);\n  line-height: calc(var(--title-height) - 4px);\n  font-weight: 600;\n  padding: 0 var(--padding);\n  -webkit-tap-highlight-color: transparent;\n  cursor: pointer;\n  outline: none;\n  text-decoration-skip: objects;\n}\n.lil-gui .title:before {\n  font-family: "lil-gui";\n  content: "▾";\n  padding-right: 2px;\n  display: inline-block;\n}\n.lil-gui .title:active {\n  background: var(--title-background-color);\n  opacity: 0.75;\n}\n@media (hover: hover) {\n  body:not(.lil-gui-dragging) .lil-gui .title:hover {\n    background: var(--title-background-color);\n    opacity: 0.85;\n  }\n  .lil-gui .title:focus {\n    text-decoration: underline var(--focus-color);\n  }\n}\n.lil-gui.root > .title:focus {\n  text-decoration: none !important;\n}\n.lil-gui.closed > .title:before {\n  content: "▸";\n}\n.lil-gui.closed > .children {\n  transform: translateY(-7px);\n  opacity: 0;\n}\n.lil-gui.closed:not(.transition) > .children {\n  display: none;\n}\n.lil-gui.transition > .children {\n  transition-duration: 300ms;\n  transition-property: height, opacity, transform;\n  transition-timing-function: cubic-bezier(0.2, 0.6, 0.35, 1);\n  overflow: hidden;\n  pointer-events: none;\n}\n.lil-gui .children:empty:before {\n  content: "Empty";\n  padding: 0 var(--padding);\n  margin: var(--spacing) 0;\n  display: block;\n  height: var(--widget-height);\n  font-style: italic;\n  line-height: var(--widget-height);\n  opacity: 0.5;\n}\n.lil-gui.root > .children > .lil-gui > .title {\n  border: 0 solid var(--widget-color);\n  border-width: 1px 0;\n  transition: border-color 300ms;\n}\n.lil-gui.root > .children > .lil-gui.closed > .title {\n  border-bottom-color: transparent;\n}\n.lil-gui + .controller {\n  border-top: 1px solid var(--widget-color);\n  margin-top: 0;\n  padding-top: var(--spacing);\n}\n.lil-gui .lil-gui .lil-gui > .title {\n  border: none;\n}\n.lil-gui .lil-gui .lil-gui > .children {\n  border: none;\n  margin-left: var(--folder-indent);\n  border-left: 2px solid var(--widget-color);\n}\n.lil-gui .lil-gui .controller {\n  border: none;\n}\n\n.lil-gui input {\n  -webkit-tap-highlight-color: transparent;\n  border: 0;\n  outline: none;\n  font-family: var(--font-family);\n  font-size: var(--input-font-size);\n  border-radius: var(--widget-border-radius);\n  height: var(--widget-height);\n  background: var(--widget-color);\n  color: var(--text-color);\n  width: 100%;\n}\n@media (hover: hover) {\n  .lil-gui input:hover {\n    background: var(--hover-color);\n  }\n  .lil-gui input:active {\n    background: var(--focus-color);\n  }\n}\n.lil-gui input:disabled {\n  opacity: 1;\n}\n.lil-gui input[type=text],\n.lil-gui input[type=number] {\n  padding: var(--widget-padding);\n}\n.lil-gui input[type=text]:focus,\n.lil-gui input[type=number]:focus {\n  background: var(--focus-color);\n}\n.lil-gui input::-webkit-outer-spin-button,\n.lil-gui input::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n.lil-gui input[type=number] {\n  -moz-appearance: textfield;\n}\n.lil-gui input[type=checkbox] {\n  appearance: none;\n  -webkit-appearance: none;\n  height: var(--checkbox-size);\n  width: var(--checkbox-size);\n  border-radius: var(--widget-border-radius);\n  text-align: center;\n  cursor: pointer;\n}\n.lil-gui input[type=checkbox]:checked:before {\n  font-family: "lil-gui";\n  content: "✓";\n  font-size: var(--checkbox-size);\n  line-height: var(--checkbox-size);\n}\n@media (hover: hover) {\n  .lil-gui input[type=checkbox]:focus {\n    box-shadow: inset 0 0 0 1px var(--focus-color);\n  }\n}\n.lil-gui button {\n  -webkit-tap-highlight-color: transparent;\n  outline: none;\n  cursor: pointer;\n  font-family: var(--font-family);\n  font-size: var(--font-size);\n  color: var(--text-color);\n  width: 100%;\n  height: var(--widget-height);\n  text-transform: none;\n  background: var(--widget-color);\n  border-radius: var(--widget-border-radius);\n  border: 1px solid var(--widget-color);\n  text-align: center;\n  line-height: calc(var(--widget-height) - 4px);\n}\n@media (hover: hover) {\n  .lil-gui button:hover {\n    background: var(--hover-color);\n    border-color: var(--hover-color);\n  }\n  .lil-gui button:focus {\n    border-color: var(--focus-color);\n  }\n}\n.lil-gui button:active {\n  background: var(--focus-color);\n}\n\n@font-face {\n  font-family: "lil-gui";\n  src: url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff");\n}';const n=document.querySelector("head link[rel=stylesheet], head style");n?document.head.insertBefore(t,n):document.head.appendChild(t)}(),g=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this._closeFolders=o}add(e,t,n,r,i){if(Object(n)===n)return new m(this,e,t,n);const a=e[t];switch(typeof a){case"number":return new f(this,e,t,n,r,i);case"boolean":return new o(this,e,t);case"string":return new v(this,e,t);case"function":return new p(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",a)}addColor(e,t,n=1){return new d(this,e,t,n)}addFolder(e){const t=new y({parent:this,title:e});return this.root._closeFolders&&t.close(),t}load(e,t=!0){return e.controllers&&this.controllers.forEach((t=>{t instanceof p||t._name in e.controllers&&t.load(e.controllers[t._name])})),t&&e.folders&&this.folders.forEach((t=>{t._title in e.folders&&t.load(e.folders[t._title])})),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach((e=>{if(!(e instanceof p)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}})),e&&this.folders.forEach((e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()})),t}open(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}_setClosed(e){this._closed!==e&&(this._closed=e,this._callOnOpenClose(this))}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._setClosed(!e),this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame((()=>{this.$children.style.height=r+"px"}))})),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach((e=>e.reset())),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onOpenClose(e){return this._onOpenClose=e,this}_callOnOpenClose(e){this.parent&&this.parent._callOnOpenClose(e),void 0!==this._onOpenClose&&this._onOpenClose.call(this,e)}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((e=>e.destroy()))}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach((t=>{e=e.concat(t.controllersRecursive())})),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach((t=>{e=e.concat(t.foldersRecursive())})),e}}const _=y;var b=n(8607),w=n(259);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var k=function(){return e=function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=window.location.search,a=new URLSearchParams(o);this.defaultObjectByName=a.get("default"),this.callingId=Math.round(this.getRandomArbitrary(1e5,999999)),this.autoProgress=null,this.inView=!1,this.scrollPosition=0,this.scrollPercentage=0,this.screenHeights=window.innerHeight,this.scene=new r.Z58,this.vertex="varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",this.fragment=n.fragment,this.uniforms=n.uniforms,this.renderer=new r.JeP,this.width=window.innerWidth,this.height=window.innerHeight,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.setClearColor(15658734,1),this.duration=n.duration||1,this.debug=n.debug||!1,this.easing=n.easing||"easeInOut",this.position=n.position,this.coloursSeen=[],this.container=t.querySelector(".innerContent"),this.selectors=t.querySelector(".selectors"),this.selectorElements=t.querySelectorAll(".colourSquare"),this.images=t.querySelectorAll(".slider"),this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.container.appendChild(this.renderer.domElement),this.camera=new r.ubm(70,window.innerWidth/window.innerHeight,.001,1e3),this.camera.position.set(0,0,2),this.time=0,this.clock=new r.zD7,this.current=0,this.textures=[],this.texturesIDs=[],this.texturesNames=[],this.transitionTexture=null,this.paused=!0,this.initiate((function(){null!==i.defaultObjectByName&&i.setDefault(),i.setupResize(),i.settings(),i.addObjects(),i.resize(),i.clickEvent(),i.play(),i.events(),i.checkScroll(i),i.autoChange(),i.defaultPip=t.querySelector(".defaultFocus"),void 0!==i.defaultPip.dataset.id&&null===i.defaultObjectByName&&i.addFocus(parseInt(i.defaultPip.dataset.id))}))},t=[{key:"restartInterval",value:function(){this.autoChange()}},{key:"autoChange",value:function(){var e=this,t=this;clearInterval(t.autoProgress),t.autoProgress=setInterval((function(){t.changeToNext();var n=t.texturesNames[(t.current+1)%t.textures.length];t.inView&&-1===e.coloursSeen.indexOf(n)&&(w.Gx({event:"colour picker",eventCategory:"colour picker",eventAction:"".concat(e.position,": auto cycle"),eventLabel:n}),e.coloursSeen.push(n))}),7500)}},{key:"changeToNext",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this;t.isRunning||(t.clock=new r.zD7,t.time=0,t.removeFocus(),t.next(e))}},{key:"getRandomArbitrary",value:function(e,t){return Math.random()*(t-e)+e}},{key:"selectTexture",value:function(e){var t=window.innerWidth;switch(!0){case t<=768:return e.mobile;case t<=1024:return e.tablet;default:return e.desktop}}},{key:"initiate",value:function(e){var t=this,n=[],i=this;this.images.forEach((function(e,o){var a=new Promise((function(n){i.textures[o]=(new r.Tap).load(t.selectTexture(e.dataset),n),void 0!==e.dataset.colorname&&(i.texturesIDs[e.dataset.colorname]=o,i.texturesNames[o]=e.dataset.colorname),void 0!==e.dataset.defaultcolor&&null===t.defaultObjectByName&&t.setById(o)}));n.push(a)})),Promise.all(n).then((function(){e()}))}},{key:"removeFocus",value:function(){this.selectorElements.forEach((function(e){e.classList.remove("focus")}))}},{key:"addFocus",value:function(e){this.selectorElements.forEach((function(t,n){parseInt(e)===n&&t.classList.add("focus")}))}},{key:"clickEvent",value:function(){var e=this,t=this;this.container.addEventListener("click",(function(){if(!t.isRunning){var n=t.texturesNames[(t.current+1)%t.textures.length];w.Gx({event:"colour picker",eventCategory:"colour picker",eventAction:"".concat(e.position,": image cycle"),eventLabel:n}),-1===e.coloursSeen.indexOf(n)&&e.coloursSeen.push(n),t.changeToNext(),e.restartInterval()}})),this.selectors.addEventListener("pointerup",(function(n){if(!t.isRunning){var r=t.texturesNames[n.target.dataset.id];w.Gx({event:"colour picker",eventCategory:"colour picker",eventAction:"".concat(e.position,": pip select"),eventLabel:r}),-1===e.coloursSeen.indexOf(r)&&e.coloursSeen.push(r),t.changeToNext(n.target.dataset.id),e.restartInterval()}}))}},{key:"settings",value:function(){var e=this;this.debug&&(this.gui=new _),this.settings={progress:.5},Object.keys(this.uniforms).forEach((function(t){e.settings[t]=e.uniforms[t].value,e.debug&&e.gui.add(e.settings,t,e.uniforms[t].min,e.uniforms[t].max,.01)}))}},{key:"setupResize",value:function(){window.addEventListener("resize",this.resize.bind(this))}},{key:"resize",value:function(){var e,t;this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.renderer.setSize(this.width,this.height),this.camera.aspect=this.width/this.height,this.imageAspect=this.textures[0].image.height/this.textures[0].image.width,this.height/this.width>this.imageAspect?(e=this.width/this.height*this.imageAspect,t=1):(e=1,t=this.height/this.width/this.imageAspect),this.material.uniforms.resolution.value.x=this.width,this.material.uniforms.resolution.value.y=this.height,this.material.uniforms.resolution.value.z=e,this.material.uniforms.resolution.value.w=t;var n=this.camera.position.z;this.camera.fov=180/Math.PI*2*Math.atan(1/(2*n)),this.plane.scale.x=this.camera.aspect,this.plane.scale.y=1,this.camera.updateProjectionMatrix()}},{key:"addObjects",value:function(){this.material=new r.BKk({extensions:{derivatives:"#extension GL_OES_standard_derivatives : enable"},side:r.$EB,uniforms:{time:{type:"f",value:0},progress:{type:"f",value:0},border:{type:"f",value:0},intensity:{type:"f",value:0},scaleX:{type:"f",value:40},scaleY:{type:"f",value:40},transition:{type:"f",value:40},swipe:{type:"f",value:0},width:{type:"f",value:0},radius:{type:"f",value:0},texture1:{type:"f",value:this.textures[this.current]},texture2:{type:"f",value:this.textures[this.current+1]},texture3:{type:"f",value:null},displacement:{type:"f",value:null},resolution:{type:"v4",value:new r.IUQ},uSpikes:{value:1.5,type:"f"},uRadius:{value:.5,type:"f"},direction:{value:new r.I9Y(1,-1),type:"v2"},strength:{value:.1,type:"f"}},vertexShader:this.vertex,fragmentShader:this.fragment}),this.geometry=new r.bdM(1,1,2,2),this.plane=new r.eaF(this.geometry,this.material),this.scene.add(this.plane)}},{key:"stop",value:function(){this.paused=!0}},{key:"setDefault",value:function(){void 0!==this.texturesIDs[this.defaultObjectByName]?this.setByName(this.defaultObjectByName):this.defaultObjectByName=null}},{key:"setById",value:function(e){this.removeFocus(),this.current=e,this.addFocus(this.current)}},{key:"setByName",value:function(e){this.removeFocus(),this.current=this.texturesIDs[e],this.addFocus(this.current)}},{key:"play",value:function(){this.paused=!1,this.render()}},{key:"next",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.isRunning){this.isRunning=!0;var r=this.textures.length,i=null!==t?this.textures[t]:this.textures[(this.current+1)%r];this.material.uniforms.texture2.value=i;var o=new b.oh,a=null!==t?t:(this.current+1)%r;if(this.addFocus(a),n){var s=new CustomEvent("changeSlide",{detail:{id:a,colour:void 0!==this.texturesNames[a]?this.texturesNames[a]:null,callingId:this.callingId}});window.dispatchEvent(s)}o.to(this.material.uniforms.progress,this.duration,{value:1,ease:b.ys[this.easing],onComplete:function(){console.log("FINISH"),e.current=parseInt(null!==t?t:(e.current+1)%r),e.material.uniforms.texture1.value=i,e.material.uniforms.progress.value=0,e.isRunning=!1}})}}},{key:"events",value:function(){var e=this;window.addEventListener("scroll",(function(){e.checkScroll(e)})),window.addEventListener("changeSlide",(function(t){t.detail.callingId!==e.callingId&&void 0!==e.texturesIDs[t.detail.colour]&&(e.removeFocus(),e.next(e.texturesIDs[t.detail.colour],!1))}),{passive:!0})}},{key:"getOffset",value:function(e){return{top:e.getBoundingClientRect().top}}},{key:"checkScroll",value:function(e){if(e.scrollPosition=e.getOffset(e.container).top,e.scrollPosition>-e.screenHeights&&e.scrollPosition<e.screenHeights){var t=e.texturesNames[e.current];-1===this.coloursSeen.indexOf(t)&&(w.Gx({event:"colour picker",eventCategory:"colour picker",eventAction:"".concat(this.position,": view"),eventLabel:e.texturesNames[e.current]}),this.coloursSeen.push(t)),e.inView=!0,e.scrollPercentage=Math.abs(Math.min(0,e.scrollPosition/e.screenHeights))}else e.inView=!1}},{key:"render",value:function(){var e=this;if(this.isRunning&&this.inView){if(this.paused)return;this.time+=6*this.clock.getDelta(),this.material.uniforms.time.value=this.time,Object.keys(this.uniforms).forEach((function(t){e.material.uniforms[t].value=e.settings[t]}))}requestAnimationFrame(this.render.bind(this)),this.inView&&this.renderer.render(this.scene,this.camera)}}],t&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),T=n(2692),A=n.n(T),C=n(6801);function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function R(e,t,n){return t&&L(e.prototype,t),n&&L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var D=R((function e(t,n){I(this,e);var r=t.querySelector(".js-rrmc-color-picker-scroll-icon-cp");r.hasAttribute("data-anim-on")&&A().loadAnimation({container:r,renderer:"svg",loop:!0,autoplay:!0,animationData:C.h7}),new k(t,{position:n+1,duration:3.85,debug:!1,easing:"easeOut",uniforms:{radius:{value:.9,type:"f",min:.1,max:2},width:{value:0,type:"f",min:0,max:1},uSpikes:{value:2.75,type:"f"},uRadius:{value:.25,type:"f"}},fragment:"\n                uniform float time;\n                uniform float progress;\n                uniform float width;\n                uniform float scaleX;\n                uniform float scaleY;\n                uniform float transition;\n                uniform float radius;\n                uniform float swipe;\n                uniform sampler2D texture1;\n                uniform sampler2D texture2;\n                uniform sampler2D texture3;\n                uniform sampler2D displacement;\n                uniform vec4 resolution;\n                uniform float uSpikes;\n                  uniform float uRadius;\n\n                varying vec2 vUv;\n                varying vec4 vPosition;\n\n                vec3 mod289(vec3 x) {\n                    return x - floor(x * (1.0 / 289.0)) * 289.0;\n                }\n\n                vec4 mod289(vec4 x) {\n                    return x - floor(x * (1.0 / 289.0)) * 289.0;\n                }\n\n                vec4 permute(vec4 x) {\n                    return mod289(((x*34.0)+10.0)*x);\n                }\n\n                vec4 taylorInvSqrt(vec4 r)\n                {\n                    return 1.79284291400159 - 0.85373472095314 * r;\n                }\n\n                float snoise(vec3 v)\n                {\n                    const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n                    const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n                    // First corner\n                    vec3 i  = floor(v + dot(v, C.yyy) );\n                    vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n                    // Other corners\n                    vec3 g = step(x0.yzx, x0.xyz);\n                    vec3 l = 1.0 - g;\n                    vec3 i1 = min( g.xyz, l.zxy );\n                    vec3 i2 = max( g.xyz, l.zxy );\n\n                    //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n                    //   x1 = x0 - i1  + 1.0 * C.xxx;\n                    //   x2 = x0 - i2  + 2.0 * C.xxx;\n                    //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n                    vec3 x1 = x0 - i1 + C.xxx;\n                    vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n                    vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n                    // Permutations\n                    i = mod289(i);\n                    vec4 p = permute( permute( permute(\n                      i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n                    + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n                    + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n                    // Gradients: 7x7 points over a square, mapped onto an octahedron.\n                    // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n                    float n_ = 0.142857142857; // 1.0/7.0\n                    vec3  ns = n_ * D.wyz - D.xzx;\n\n                    vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n                    vec4 x_ = floor(j * ns.z);\n                    vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n                    vec4 x = x_ *ns.x + ns.yyyy;\n                    vec4 y = y_ *ns.x + ns.yyyy;\n                    vec4 h = 1.0 - abs(x) - abs(y);\n\n                    vec4 b0 = vec4( x.xy, y.xy );\n                    vec4 b1 = vec4( x.zw, y.zw );\n\n                    //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n                    //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n                    vec4 s0 = floor(b0)*2.0 + 1.0;\n                    vec4 s1 = floor(b1)*2.0 + 1.0;\n                    vec4 sh = -step(h, vec4(0.0));\n\n                    vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n                    vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n                    vec3 p0 = vec3(a0.xy,h.x);\n                    vec3 p1 = vec3(a0.zw,h.y);\n                    vec3 p2 = vec3(a1.xy,h.z);\n                    vec3 p3 = vec3(a1.zw,h.w);\n\n                    //Normalise gradients\n                    vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n                    p0 *= norm.x;\n                    p1 *= norm.y;\n                    p2 *= norm.z;\n                    p3 *= norm.w;\n\n                    // Mix final noise value\n                    vec4 m = max(0.5 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n                    m = m * m;\n                    return 105.0 * dot(m*m, vec4(dot(p0,x0), dot(p1,x1), dot(p2,x2), dot(p3,x3)));\n                }\n\n                float circle(in vec2 st, in float r, vec2 pos){\n                    float dist = distance(st, pos);\n                    return 1.0 - smoothstep(r-r*0.001, r+r*0.001, dist);\n                }\n                float circle(in vec2 st, in float r){\n                    float dist = distance(st, vec2(0.5));\n                    return 1.0 - smoothstep(r-r*0.2, r+r*0.2, dist);\n                    //return 1.0 - smoothstep(r-r*0.3, r+r*0.3, dist);\n                    //return 1.0 - smoothstep(r-r*0.65, r+r*0.65, dist);\n                    //return 1.0 - smoothstep(r-r*0.15, r+r*0.15, dist);\n                    //return 1.0 - smoothstep(r-r*0.001, r+r*0.001, dist);\n                }\n\n                float map(float value, float min1, float max1, float min2, float max2) {\n                    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n                }\n\n                void main()\t{\n                    vec2 newUV = (vUv - vec2(0.5))*resolution.zw + vec2(0.5);\n\n                    vec2 uv = newUV;\n\n                    vec4 t1 = texture2D( texture1, uv );\n                    vec4 t2 = texture2D( texture2, uv );\n                    vec4 t3 = texture2D( texture3, uv );\n\n                    vec2 tempUV = uv;\n                    tempUV.x += 0.6;\n                    tempUV.y /= 2.0;\n                    tempUV.y += 0.5;\n\n                    float radiusModifier = uRadius*(time/3.25);\n                    //float radiusModifier = uRadius*(time/4.8);\n                    //float radiusModifier = uRadius*(time/7.5);\n                    float imageBlobNoise = snoise(vec3((uv.x) * uSpikes, (uv.y) * uSpikes, time / 10.0));\n\n                    float radius = map(imageBlobNoise, 0.0, 1.0, radiusModifier*0.85, radiusModifier);\n                    float mask = circle(tempUV, radius);\n                    float maskB = circle(tempUV, radius*1.1);\n                    float maskC = circle(tempUV, radius*0.9);\n\n                    vec4 colour1 = mix( t1, t3, maskB);\n                    vec4 colour2 = mix( t3, t2, maskC);\n                    //vec4 finalColour = mix( colour1, colour2, mask);\n                    vec4 finalColour = mix( t1, t2, mask);\n                    gl_FragColor = finalColour;\n                }\n            "})})),O=function(){return R((function e(){I(this,e),this.containers=document.querySelectorAll(".contentWrapper")}),[{key:"load",value:function(){[].slice.call(this.containers).forEach((function(e,t){return new D(e,t)}))}}])}();window.addEventListenerRR("load",(function(){(new O).load()}))},4183:(e,t,n)=>{"use strict";n.r(t);var r=n(259),i=n(1500),o=n(8607),a=n(2862),s=n(915),l=n.n(s);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){u=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=p(e[i],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,l,"Generator"),h(k,a,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function h(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){h(o,r,i,a,s,"next",e)}function s(e){h(o,r,i,a,s,"throw",e)}a(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var m="default",v=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.continueTout=t,this.acceptCta=this.continueTout.querySelector(".rrmc-continue-tout--accept"),this.rejectCta=this.continueTout.querySelector(".rrmc-continue-tout--reject"),this.evergage_experience_id=this.continueTout.getAttribute("data-evergage-experience"),this.edit_mode=this.continueTout.getAttribute("data-edit-mode"),this.acceptTrigger=function(e){var t=e.target.href,n=e.target.target;"_blank"!==n&&e.preventDefault(),r.Gx({event:"continueToutCTA",eventCategory:"continueTout",eventAction:"Continue Tout CTA Clicked - Accept",eventLabel:"".concat(e.target.innerText),eventCallback:function(){"_blank"!==n&&(window.location=t)}})},this.rejectTrigger=function(e){n.animateOut(),r.Gx({event:"continueToutCTA",eventCategory:"continueTout",eventAction:"Continue Tout CTA Clicked - Decline",eventLabel:"".concat(e.target.innerText)})}},t=[{key:"init_evergage",value:(s=d(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.rrmc_experiences){e.next=4;break}return e.next=3,new Promise((function(e){var t=setTimeout((function(){e(m)}),5e3);window.rrmc_experiences.subscribe((function(n){var r=n.campaign,i=n.experience;"continuity-tout"===r&&(clearTimeout(t),e(i))}))}));case 3:this.experience=e.sent;case 4:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"load",value:(n=d(u().mark((function e(){var t=this;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init_evergage();case 2:this.experience!==m&&this.experience===this.evergage_experience_id?((0,a.Il)(this.continueTout,(function(){"objectFit"in document.documentElement.style==0&&l()(t.continueTout.querySelector("img")),t.animateIn()})),this.initListeners()):this.destroy();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"animateIn",value:function(){this.tlForward=i.os.timeline(),this.tlForward.add("start"),this.tlForward.to(this.continueTout,.5,{y:-48,ease:o.WG.easeNone},"start"),this.tlForward.to(this.continueTout,.5,{opacity:1,ease:o.WG.easeNone},"start=+0.25"),this.tlForward.set(this.continueTout,{pointerEvents:"auto"})}},{key:"animateOut",value:function(){var e=this;this.tlBackwards=i.os.timeline(),this.tlBackwards.add("start"),this.tlBackwards.set(this.continueTout,{pointerEvents:"none"}),this.tlBackwards.to(this.continueTout,.5,{y:200,ease:o.WG.easeNone},"start"),this.tlBackwards.to(this.continueTout,.5,{opacity:0,ease:o.WG.easeNone},"start=+0.25"),this.tlBackwards.add((function(){e.destroy()}))}},{key:"destroy",value:function(){this.acceptCta.removeEventListenerRR("click",this.acceptTrigger),this.rejectCta.removeEventListenerRR("click",this.rejectTrigger);try{this.continueTout.parentNode.removeChild(this.continueTout)}catch(e){console.log(e)}}},{key:"initListeners",value:function(){this.acceptCta.addEventListenerRR("click",this.acceptTrigger),this.rejectCta.addEventListenerRR("click",this.rejectTrigger)}}],t&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,s}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".rrmc-continue-tout");[].slice.call(e).forEach((function(e){new v(e).load()}))}))},9570:(e,t,n)=>{"use strict";n.r(t);var r=n(8607);function i(){}var o=n(259),a=n(2725);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.querySelector(".js-rrmc-cookie-banner"),this.container&&(this.btn_accept=this.container.querySelector(".js-rrmc-cookie-banner-accept"),this.btn_reject=this.container.querySelector(".js-rrmc-cookie-banner-reject"),this.learn=this.container.querySelector(".js-rrmc-cookie-banner a"),this.accept_regulations=function(){t.epaas.setRegulationAccepted(),t.detach_callbacks(),t.conceal_banner(),o.Gx({event:"cookieContinue",eventCategory:"Cookies",eventAction:"Cookie Continue",eventLabel:"continue"})},this.reject_regulations=function(){t.epaas.setRegulationRejected(),t.detach_callbacks(),t.conceal_banner(),o.Gx({event:"cookieNo",eventCategory:"Cookies",eventAction:"Cookie No",eventLabel:"no thanks"})},this.learn_handler=function(){o.Gx({event:"cookieLearnMore",eventCategory:"Cookies",eventAction:"Cookie Learn More",eventLabel:"here"})})},t=[{key:"attach_callbacks",value:function(){var e;this.btn_accept.addEventListenerRR("click",this.accept_regulations),this.btn_reject.addEventListenerRR("click",this.reject_regulations),this.learn&&this.learn.addEventListenerRR("click",this.learn_handler),e=this.container.querySelectorAll("button, a"),[].slice.call(e).forEach((function(e){e.setAttribute("tabindex",0),e.addEventListenerRR("focus",i)}))}},{key:"detach_callbacks",value:function(){var e;this.btn_accept.removeEventListenerRR("click",this.accept_regulations),this.btn_reject.removeEventListenerRR("click",this.reject_regulations),this.learn&&this.learn.removeEventListenerRR("click",this.learn_handler),e=this.container.querySelectorAll("button, a"),[].slice.call(e).forEach((function(e){e.setAttribute("tabindex",-1),e.removeEventListenerRR("focus",i)}))}},{key:"conceal_banner",value:function(){var e=this;r.uo.to(this.container,.75,{y:"100%",ease:r.ys.easeInOut,onComplete:function(){e.container.style.display="none",e.update_footer_height(),a.A.sub_us_banner_state.next("concealed")}})}},{key:"update_footer_height",value:function(){var e=document.querySelector(".js-rrmc-footer > .rrmc-footer");if(e){var t=this.container.getBoundingClientRect().height;e.style.marginBottom="".concat(t,"px")}}},{key:"reveal_banner",value:function(){var e=this;r.uo.set(this.container,{display:"block"}),r.uo.to(this.container,.75,{y:0,ease:r.ys.easeInOut,onComplete:function(){e.attach_callbacks(),e.update_footer_height(),a.A.sub_us_banner_state.next("revealed")}}),o.Gx({event:"cookieLoad",eventCategory:"Cookies",eventAction:"Cookie Load",eventLabel:"load"})}},{key:"reveal_check",value:function(e){var t=e.epaas;t.getRegulationState&&(this.epaas=t,t.getRegulationState()||this.reveal_banner())}},{key:"load",value:function(){var e=this;this.container&&a.A.sub_epaas.subscribe({next:function(t){return e.reveal_check(t)}})}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){(new u).load()}))},6382:(e,t,n)=>{"use strict";n.r(t);var r=n(8607);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t},t=[{key:"load",value:function(){this.init_countdown(),this.timerValue=this.container.getAttribute("data-timer"),this.targetDate=new Date(this.timerValue),this.dateContainer=this.container.querySelector(".rrmc-countdown-timer--control"),this.hrsWrapper=this.container.querySelector("[data-countdown-timer-hours]"),this.minsWrapper=this.container.querySelector("[data-countdown-timer-minutes]"),this.secsWrapper=this.container.querySelector("[data-countdown-timer-seconds]"),this.timerSection=this.container.querySelector(".rrmc-countdown-timer--main-section"),this.revealSection=this.container.querySelector(".rrmc-countdown-timer--reveal-section"),this.isFinished=!1}},{key:"calc_countdown",value:function(){var e=(new Date).getTime(),t=this.targetDate-e;t>=0?(this.days=Math.floor(t/864e5),this.hoursPlusDays=Math.floor(t%864e5/36e5+24*this.days),this.mins=Math.floor(t%36e5/6e4),this.secs=Math.floor(t%6e4/1e3),this.isFinished=!1):this.isFinished=!0}},{key:"triggerHiddenSection",value:function(){(new r.Y_).to(this.timerSection,.2,{opacity:0,bottom:"-50px"},"0").to(this.timerSection,0,{display:"none"},"+=.2").to(this.revealSection,0,{display:"block"},"+=0").to(this.revealSection,.2,{opacity:1,bottom:0},"+=.1")}},{key:"timerHandler",value:function(){this.calc_countdown(),this.isFinished?(this.hrsWrapper.innerText="00H",this.minsWrapper.innerText="00M",this.secsWrapper.innerText="00S",this.triggerHiddenSection(),clearInterval(this.timerInterval)):(this.hrsWrapper.innerText=this.hoursPlusDays>=10?"".concat(this.hoursPlusDays,"H"):"0".concat(this.hoursPlusDays,"H"),this.minsWrapper.innerText=this.mins>=10?"".concat(this.mins,"M"):"0".concat(this.mins,"M"),this.secsWrapper.innerText=this.secs>=10?"".concat(this.secs,"S"):"0".concat(this.secs,"S"))}},{key:"init_countdown",value:function(){this.timerInterval=setInterval(this.timerHandler.bind(this),1e3)}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-countdown-timer");[].slice.call(e).forEach((function(e){new s(e).load()}))}))},3224:(e,t,n)=>{"use strict";n.r(t)},7482:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>E});var r=n(4692),i=n.n(r),o=n(8607),a=n(5847),s=n(2725),l=n(259);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}window.rrmc_cta_find_by=function(e){var t,n=[],r=d(window.rrmc_cta_manager);try{for(r.s();!(t=r.n()).done;){var i=t.value;e(i)&&n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n},window.rrmc_cta_find_by_text=function(e,t){t(window.rrmc_cta_find_by((function(t){return t.ctaText&&t.ctaText.textContent===e})))},window.rrmc_cta_find_by_overlay_id=function(e,t){t(window.rrmc_cta_find_by((function(t){return t.cta.dataset.overlay===e})))},window.rrmc_html_cta=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"primary",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"light";return console.warn("This CTA method can be deprecated and lead to unexpected behaviour"),'<button data-action="open-default-form" data-overlay="'.concat(e,'" data-theme="').concat(r,'" data-lazy-load-class="cta-lazy-load" class="rrmc-cta-component rrmc-button--').concat(n," rrmc-button--").concat(r,' rrmc-button--add js-rrmc-button">')+'<span class="rrmc-cta-i"></span>'+'<span class="rrmc-button-text js-rrmc-button-text">'.concat(t,"</span>")+'<span class="rrmc-button-arrow js-rrmc-button-arrow"></span></button>'},window.rrmc_cta_replace=function(e,t){console.warn("This CTA method can be deprecated and lead to unexpected behaviour"),e.destroy();var n=document.createElement("div");n.innerHTML=t;var r=e.cta.parentNode,i=n.firstElementChild;r.replaceChild(i,e.cta),new window.rrmc_cta_class(i).load()},window.rrmc_cta_replace_by_func=function(e,t){var n,r=d(window.rrmc_cta_find_by(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;window.rrmc_cta_replace(i,t)}}catch(e){r.e(e)}finally{r.f()}},window.rrmc_cta_replace_by_overlay_id=function(e,t){window.rrmc_cta_find_by_overlay_id(e,(function(e){var n,r=d(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;window.rrmc_cta_replace(i,t)}}catch(e){r.e(e)}finally{r.f()}}))},window.rrmc_cta_replace_by_overlay_id_map=function(e){var t,n={},r=d(window.rrmc_cta_manager);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,o=0,a=Object.keys(e);o<a.length;o++){var s=a[o];i.cta.dataset.overlay===s&&(n[s]||(n[s]=[]),n[s].push(i))}}catch(e){r.e(e)}finally{r.f()}for(var l=0,c=Object.keys(e);l<c.length;l++){var u=c[l];if(n[u]){var h,p=d(n[u]);try{for(p.s();!(h=p.n()).done;){var f=h.value;window.rrmc_cta_replace(f,e[u])}}catch(e){p.e(e)}finally{p.f()}}}};const f=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cb_added=[],window.rrmc_cta_manager=[],window.rrmc_add_cta_added_callback=function(e){t.cb_added.push(e)}},(t=[{key:"add_cta",value:function(e){window.rrmc_cta_manager.push(e);var t,n=d(this.cb_added);try{for(n.s();!(t=n.n()).done;)(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}}},{key:"remove_cta",value:function(e){for(var t=window.rrmc_cta_manager.length,n=0;n<t;++n)window.rrmc_cta_manager[n]===e&&(window.rrmc_cta_manager.splice(n,1),--t,--n)}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}());var m=n(1203),v=n(4315),g=n(3169),y=n(330);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var x={"#6d30a7":"#57208c","#6fdbc7":"#4ebfaa","#e7d2c3":"#dbbda7","#ff6432":"#f05b2b","#b4c7cb":"#93a8ab","#f7a177":"#e98c5f","#ffffff":"#dadada","#000000":"#313030"},S=function(){return e=function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cta=t,this.cta){if(this.ctaText=this.cta.querySelector(".js-rrmc-button-text"),this.ctaArrow=this.cta.querySelector(".js-rrmc-button-arrow"),this.backgroundOverlay=this.cta.querySelector(".js-rrmc-button-background"),this.backgroundOverlay&&this.init_background(),this.ctaArrow){var r=this.ctaArrow.dataset.icon;(0,g.v)(this.ctaArrow,m.o[r||"arrow-right"])}if(this.icon_elm=this.cta.querySelector(".rrmc-cta-i"),this.icon_elm){var a=this.icon_elm.querySelector(".rrmc-cta-icon-placeholder"),c=this.icon_elm.dataset.icon;(0,g.v)(a,m.o[c])}this.isCtaPair=!1,this.dispose=function(){}}this.deg_tilt=0,this.on_resize=function(){n.icon_elm&&o.uo.set(n.icon_elm,{clearProps:"all"}),n.dispose(),n.setup_svg(),n.icon_elm&&o.uo.set(n.icon_elm,{rotation:n.deg_tilt})},this.on_click=function(e){var t,r=n.cta.dataset.ctaIndex,o=n.cta.querySelector(".rrmc-button-text"),a=o?o.innerHTML.toLowerCase():n.cta.innerHTML.toLowerCase();if(e.currentTarget.dataset.windowProps)try{JSON.parse(e.currentTarget.dataset.windowProps);var c=JSON.parse(e.currentTarget.dataset.windowProps);window.ctaWindowProps=window.ctaWindowProps?i().extend(!0,window.ctaWindowProps,c):c}catch(e){console.error("incorrect json structure")}if(e.currentTarget.dataset.overlayAction&&!e.currentTarget.dataset.overlay&&(t=i()(e.currentTarget).closest("[data-overlay-name]").attr("data-overlay-name")),e.currentTarget.dataset.overlay){t=e.currentTarget.dataset.overlay.slice(2).replace(/-/g," ");var u=e.currentTarget.dataset.action,h=!1;if("isAForm"in e.currentTarget.dataset&&(h=!0),"request accessories"!=t&&"open-default-form"===u||h)if("dealer locator"===t)l.Gx({event:"fadOpen",eventCategory:"form",eventAction:"Find A Dealer",eventLabel:"Open",ctaPosition:r,clickText:a});else{var d=t;if("g-enq"===t||"g-enq-owner"===t||"g-enq-future"===t)switch(t){case"g-enq":d="enquire";break;case"g-enq-owner":d="enq owner";break;case"g-enq-future":d="enq prospect";break;default:d=t}l.Gx({event:"formOpen",eventCategory:"form",eventAction:d,eventLabel:"Open",ctaPosition:r,clickText:a})}}else if("overlayClose"===e.currentTarget.dataset.overlayAction){if("g-enq"===t||"g-enq-owner"===t||"g-enq-future"===t){var p="";switch(t){case"g-enq":p="enquire";break;case"g-enq-owner":p="enq owner";break;case"g-enq-future":p="enq prospect"}l.Gx({event:"formClosed",eventCategory:"form",eventAction:p,eventLabel:"close",ctaPosition:r})}else if("overlayClose"===e.currentTarget.dataset.overlayAction&&e.currentTarget.parentNode.parentNode.querySelector("form")){var f,m;void 0!==window.ctaWindowProps&&void 0!==window.ctaWindowProps.existingOwner&&(f=!0===window.ctaWindowProps.existingOwner?"owner":"prospect");var v=e.currentTarget.parentNode.parentNode.querySelector("form").id;switch(v){case"purchase-enquiry":m="".concat(f?"".concat(f," "):"","purchase enq");break;case"general-enquiry":m="".concat(f?"".concat(f," "):"","general enq");break;default:m=v}var g=m;l.Gx({event:"formClosed",eventCategory:"form",eventAction:g,eventLabel:"close",ctaPosition:r})}}else if(document.querySelector("#js-rrmc-page-overlay-container-local")&&document.querySelector("#js-rrmc-page-overlay-container-local").contains(e.currentTarget)){var y=i()(e.currentTarget).closest("[data-overlay-name]").attr("data-overlay-name");l.Gx({event:"overlayCTA",eventCategory:"CTA",eventAction:"Overlay CTA Clicked",eventLabel:"".concat(y," - ").concat(a),ctaPosition:"overlay"})}else{var _=e.currentTarget.getAttribute("href");_&&_.match(/^#/)&&l.fg(),document.querySelector(".rrmc-page-canvas").contains(e.currentTarget)&&l.Gx({event:n.cta.classList.contains("rrmc-button--primary")?"primaryCTAClicked":n.cta.classList.contains("rrmc-button--secondary")?"secondaryCTAClicked":"tertiary",eventCategory:"CTA",eventAction:n.cta.classList.contains("rrmc-button--primary")?"Primary CTA Clicked":n.cta.classList.contains("rrmc-button--secondary")?"Secondary CTA Clicked":"Tertiary CTA Clicked",eventLabel:a,ctaPosition:r})}var b=n.cta.dataset.action,w=n.cta.dataset.overlay;b&&(l.fg(),e.preventDefault(),s.A.sub_overlay_manager_bus.next({action:b,data:{overlayName:w}}))},f.add_cta(this)},(t=[{key:"init_background",value:function(){var e=this,t=this.get_colour(),n=this.get_hover(),r=function(){e.backgroundOverlay.style.backgroundColor=t};this.cta.addEventListenerRR("mouseenter",(function(){n&&(e.backgroundOverlay.style.backgroundColor=n)})),this.cta.addEventListenerRR("mouseleave",r),r()}},{key:"load_rounded_square",value:function(){var e=this,t=this.cta.getBoundingClientRect(),n=t.width,r=t.height,i=(0,a.A)(n,r,1),s=this.get_colour(),l=this.get_hover(),c='\n          <svg class="rrmc-button-svg-anim" width="'.concat(n,'" height="').concat(r,'" viewBox="0 0 ').concat(n," ").concat(r,'" xmlns="http://www.w3.org/2000/svg">\n          ').concat((0,y.p)(i,s,l),"\n          </svg>\n      "),u=document.createRange().createContextualFragment(c);this.cta.appendChild(u);var h=this.cta.querySelector(".rrmc-button-svg-anim-path"),d=this.cta.querySelector(".rrmc-initial-path");this.on_mouseover=function(){d.style.opacity=0,o.uo.to(h,.4,{delay:.15,strokeDashoffset:"-".concat(2*i.dash_length)})},this.on_mouseleave=function(){d.style.opacity=1,o.uo.to(h,.4,{strokeDashoffset:"-".concat(i.dash_length)})},this.cta.addEventListenerRR("mouseenter",this.on_mouseover),this.cta.addEventListenerRR("mouseleave",this.on_mouseleave),this.dispose=function(){e.cta.removeEventListenerRR("mouseenter",e.on_mouseover),e.cta.removeEventListenerRR("mouseleave",e.on_mouseleave),e.cta.removeChild(e.cta.querySelector(".rrmc-button-svg-anim"))}}},{key:"get_colour",value:function(){return this.backgroundOverlay&&this.backgroundOverlay.dataset.color||"#6D30A7"}},{key:"get_hover",value:function(){return this.backgroundOverlay&&this.backgroundOverlay.dataset.hoverColor||x[this.get_colour().toLowerCase()]||(0,v.x)(this.get_colour(),-10)}},{key:"tilt_icon_in",value:function(){this.deg_tilt=45,o.uo.to(this.icon_elm,.4,{rotation:45}),o.uo.to(this.elm_path,.4,{transformOrigin:"50% 50%",rotation:-45})}},{key:"tilt_icon_out",value:function(){this.deg_tilt=0,o.uo.to(this.icon_elm,.4,{rotation:0}),o.uo.to(this.elm_path,.4,{transformOrigin:"50% 50%",rotation:0})}},{key:"load_circle",value:function(){var e=this,t=this.icon_elm.getBoundingClientRect(),n=t.width,r=t.height,i=(0,a.A)(n,r,1),s=this.get_colour(),l=this.get_hover(),c='<g transform="rotate(90 '.concat(n/2," ").concat(r/2,')">'),u='\n          <svg class="rrmc-button-svg-anim" width="'.concat(n,'" height="').concat(r,'" viewBox="0 0 ').concat(n," ").concat(r,'" xmlns="http://www.w3.org/2000/svg">\n            ').concat(c,"\n            ").concat((0,y.p)(i,s,l),"\n           ").concat("</g>","\n          </svg>\n      "),h=document.createRange().createContextualFragment(u);this.icon_elm.appendChild(h),this.elm_path=this.icon_elm.querySelector(".rrmc-button-svg-anim-path");var d=this.cta.querySelector(".rrmc-initial-path");this.on_mouseover=function(){d.style.opacity=0,o.uo.to(e.elm_path,.4,{delay:.15,strokeDashoffset:"-".concat(2*i.dash_length)})},this.on_mouseleave=function(){d.style.opacity=1,o.uo.to(e.elm_path,.4,{strokeDashoffset:"-".concat(i.dash_length)})},this.cta.addEventListenerRR("mouseenter",this.on_mouseover),this.cta.addEventListenerRR("mouseleave",this.on_mouseleave),this.dispose=function(){e.cta.removeEventListenerRR("mouseenter",e.on_mouseover),e.cta.removeEventListenerRR("mouseleave",e.on_mouseleave);var t=e.icon_elm.querySelector(".rrmc-button-svg-anim");t&&e.icon_elm.removeChild(t)}}},{key:"destroy",value:function(){this.cta.removeEventListenerRR("click",this.on_click),window.removeEventListenerRR("resize",this.on_resize),this.dispose(),f.remove_cta(this)}},{key:"setup_svg",value:function(){var e=this.cta.querySelector(".rrmc-button-svg-anim");e&&e.parentNode.removeChild(e),this.cta.classList.contains("rrmc-button--secondary")?this.load_rounded_square():(this.cta.classList.contains("rrmc-button--regular-icon-stroked")||this.cta.classList.contains("rrmc-button--regular-label-stroked")||this.cta.classList.contains("rrmc-button--tiny-label-stroked")||this.cta.classList.contains("rrmc-button--tiny-icon-stroked"))&&this.load_circle()}},{key:"load",value:function(){this.cta&&(this.cta.addEventListenerRR("click",this.on_click),this.setup_svg(),window.addEventListenerRR("resize",this.on_resize))}}])&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-button");[].slice.call(e).forEach((function(e){var t=new S(e);e.data={ctaInstance:t},t.load()}))})),window.rrmc_cta_class=S;const E=S},6574:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var r=n(7482),i=n(8607);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var d=function(){return u((function e(t,n){l(this,e),this.data=t,this.i18n=n}),[{key:"generate_tabs",value:function(){return'\n      <div class="rrmc-dealer-locator-content--tab-button-container js-rrmc-dealer-locator-content--tab-button-container">\n        <button class="rrmc-dealer-locator-content--tab-button js-rrmc-dealer-locator-content--tab-button" data-index="0"\n                data-tracking-linkid="text¦1¦showrooms¦open content">\n          '.concat(this.i18n.get("showrooms"),'\n        </button>\n      </div>\n      <div class="rrmc-dealer-locator-content--tab-button-container js-rrmc-dealer-locator-content--tab-button-container">\n        <button class="rrmc-dealer-locator-content--tab-button js-rrmc-dealer-locator-content--tab-button" data-index="1"\n                data-tracking-linkid="text¦2¦ownership services¦open content">\n          ').concat(this.i18n.get("ownership-services"),"\n        </button>\n      </div>\n        ")}},{key:"generate_underscores",value:function(){return'\n      <div class="rrmc-dealer-locator-content--underscore-container js-rrmc-dealer-locator-content--underscore-container" data-index="0">\n        <div class="rrmc-dealer-locator-content--underscore js-rrmc-dealer-locator-content--underscore"></div>\n      </div>\n      <div class="rrmc-dealer-locator-content--underscore-container js-rrmc-dealer-locator-content--underscore-container" data-index="1">\n        <div class="rrmc-dealer-locator-content--underscore js-rrmc-dealer-locator-content--underscore"></div>\n      </div>\n        '}},{key:"generate",value:function(){return'<div class="rrmc-dealer-locator-content--tabs-container">\n      <div class="rrmc-dealer-locator-content--tabs">\n        '.concat(this.generate_tabs(),'\n      </div>\n      <div class="rrmc-dealer-locator-content--underscores">\n        ').concat(this.generate_underscores(),"\n      </div>\n    </div>")}}])}(),p=function(){return u((function e(t,n){l(this,e),this.data=t,this.i18n=n}),[{key:"if_not_empty",value:function(e){return e?e+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:""):""}},{key:"dealerLabel",value:function(e){return e?"services":"showroom"}},{key:"generate_telephone_number",value:function(e){return e.contactInformation.telephoneNumber?'<div class="rrmc-dealer-locator--telephone">\n      <span class="rrmc-dealer-locator-telephone-icon"></span>\x3c!--\n              --\x3e<a class="rrmc-dealer-locator--anchor js-rrmc-dealer-locator--telephone-anchor" href="tel:'.concat(e.contactInformation.telephoneNumber,'"\n                    data-tracking-linkid="text¦1¦').concat((e.shortName.toString()||"").toLowerCase()," ").concat(this.dealerLabel(e.afterSale),'¦call"\n              >').concat(this.i18n.get("tel"),':\n              <span class="anchor-copy">').concat(e.contactInformation.telephoneNumber,"</span></a>\n          </div>"):""}},{key:"paste_if",value:function(e,t){return e?t:""}},{key:"generate_entry",value:function(e,t){return'\n    <div class="rrmc-dealer-locator-location js-rrmc-dealer-locator-location"\n       data-dealer-name="'.concat(t.shortName,'">\n       <div class="rrmc-dealer-locator-location-row-one">\n          <div class="rrmc-dealer-locator-location--split-index">\n            <div class="rrmc-dealer-locator--location-index">').concat(e+1,'</div>\n          </div>\n          <div class="rrmc-dealer-locator-location--split-left">\n            <h2 class="rrmc-dealer-locator--location-title">\n              ').concat(this.if_not_empty(t.dealerTradingName[0])," <br>\n              ").concat(this.if_not_empty(t.dealerTradingName[1]),"\n            </h2>\n            ").concat(this.paste_if(!t.hideAddress,'\n                <div class="rrmc-dealer-locator--address">\n                  <div><span class="rrmc-dealer-locator-pin-icon"></span></div>\n                  <a class="rrmc-dealer-locator--anchor\n                            rrmc-dealer-locator--anchor-no-underline\n                            js-rrmc-dealer-locator--address-anchor"\n                     href="'.concat(t.website[0],'#find_us">\n                    <span class="anchor-copy">').concat(t.postalAddress.fullAddress[0],"</span>\n                  </a>\n                </div>\n           ")),"\n            ").concat(this.paste_if(t.postalAddress.fullAddress[1]&&!t.hideAddress,'\n              <div class="rrmc-dealer-locator--address">\n                <div><span class="rrmc-dealer-locator-pin-icon"></span></div>\n                  <a class="rrmc-dealer-locator--anchor\n                            rrmc-dealer-locator--anchor-no-underline\n                            js-rrmc-dealer-locator--address-anchor"\n                      href="'.concat(t.website[1],'#find_us">\n                    <span class="anchor-copy">').concat(t.postalAddress.fullAddress[1],"</span>\n                  </a>\n              </div>\n            ")),"\n            ").concat(this.paste_if(!t.hideAddress,this.generate_telephone_number(t)),'\n          </div>\n          <div class="rrmc-dealer-locator-location--split-right">\n            <div class="rrmc-dealer-locator--distance">\n              ').concat(parseInt(t.distance.value)," ").concat(this.i18n.get(t.distance.unit),'\n            </div>\n            <div class="rrmc-dealer-locator-location--split-right--cta-container">\n              ').concat(this.generate_select_cta(t,t.selectText[0],t.website[0],"tertiary"),"\n              ").concat(this.paste_if(t.postalAddress.fullAddress[1]&&!t.hideAddress,this.generate_select_cta(t,t.selectText[1],t.website[1],"tertiary")),'\n            </div>\n          </div>\n          </div>\n          <div class="rrmc-dealer-locator-location-row-two">\n            ').concat(this.generate_select_cta(t,t.selectText[0],t.website[0],"secondary"),"\n            ").concat(this.paste_if(t.postalAddress.fullAddress[1]&&!t.hideAddress,this.generate_select_cta(t,t.selectText[1],t.website[1],"secondary")),"\n         </div>\n      </div>\n    ")}},{key:"generate_select_secondary_cta",value:function(e,t,n){return'<div class="rrmc-dealer-locator--more-information js-rrmc-dealer-select-with-copy"\n        data-tracking-linkid="icon-text¦1¦'.concat((e.shortName.toString()||"").toLowerCase()," ").concat(this.dealerLabel(e.afterSale),'¦internal link"\n        data-href="').concat(n,'"\n        data-new-tab="').concat(e.hideAddress?"_blank":"",'"\n        data-number="').concat(e.dealerNumber,'"\n        data-name="').concat(e.shortName,'"\n        data-trading-name="').concat(e.dealerTradingName,'">\n      <button\n        data-lazy-load-class="cta-lazy-load" style="color: #FFFFFF;"\n        class="rrmc-cta-component rrmc-button--secondary dealer-locator-cta js-dealer-locator-cta js-dealer-select">\n          <span class="rrmc-button-background js-rrmc-button-background" data-color="#FFFFFF"></span>\n          <span class="rrmc-button-text js-rrmc-button-text">').concat(t,'</span>\n          <span class="rrmc-button-arrow js-rrmc-button-arrow" style="color: #FFFFFF;"></span>\n        </button>\n      </div>\n      ')}},{key:"generate_select_tertiary_cta",value:function(e,t,n){return'<div class="rrmc-dealer-locator--more-information js-rrmc-dealer-select-with-copy"\n      data-href="'.concat(n,'"\n      data-new-tab="').concat(e.hideAddress?"_blank":"",'"\n      data-number="').concat(e.dealerNumber,'"\n      data-name="').concat(e.shortName,'"\n      data-trading-name="').concat(e.dealerTradingName,'">\n      <span class="rrmc-button-text">').concat(t,'</span>\n      <button style="color: #FFFFFF;"\n        data-tracking-linkid="icon-text¦1¦').concat((e.shortName.toString()||"").toLowerCase()," ").concat(this.dealerLabel(e.afterSale),'¦internal link"\n        class="rrmc-cta-component rrmc-button--regular-icon-stroked js-dealer-locator-cta js-dealer-select">\n        <span class="rrmc-button-background js-rrmc-button-background" data-color="#6D5F73"></span>\n        <span class="rrmc-cta-i" data-icon="arrow-right">\n          <span class="rrmc-cta-icon-placeholder" style="color: #FFFFFF;"></span>\n        </span>\n        <span class="rrmc-button-text js-rrmc-button-text">').concat(t,"</span>\n      </button>\n    </div>")}},{key:"generate_select_cta",value:function(e,t,n,r){return"secondary"===r?this.generate_select_secondary_cta(e,t,n):this.generate_select_tertiary_cta(e,t,n)}},{key:"generate_panel",value:function(e,t,n){var r,i,o,s='<div class="rrmc-dealer-locator-content--split js-rrmc-dealer-locator-content--split" data-index="'.concat(t,'" ').concat(n?"is_default_tab":"",">"),l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(e.entries());try{for(l.s();!(r=l.n()).done;){var c=(i=r.value,o=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(i,o)||a(i,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],h=c[1];s+=this.generate_entry(u,h.value)}}catch(e){l.e(e)}finally{l.f()}return s+"</div>"}},{key:"generate_sections",value:function(){var e="";return(e+=this.generate_panel(this.data.showrooms,0,!0))+this.generate_panel(this.data.aftersales,1,!1)}},{key:"generate",value:function(){return'<div class="rrmc-dealer-locator-content--split-section js-rrmc-dealer-locator-content--split-section">\n      '.concat(this.generate_sections(),"\n    </div>")}}])}(),f=n(8509),m=n(4111),v=n(2725);function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function b(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==g(t)?t:t+""}var x=function(){function e(){y(this,e),this.callback=function(){},this.widget_id=""}return b(e,[{key:"set_callback",value:function(e){this.callback=e}},{key:"get_callback",value:function(){return this.callback}},{key:"set_widget_id",value:function(e){this.widget_id=e}},{key:"get_widget_id",value:function(){return this.widget_id}}],[{key:"make",value:function(t,n){var r=new e;return r.set_callback(t),r.set_widget_id(n),r}}])}(),S=function(){return b((function e(t){y(this,e),this.config=t}),[{key:"generate_unique_callback_name",value:function(){this.callback_name="rrmcVerifyRecaptcha".concat(this.config.get_widget_id())}},{key:"get_callback_label",value:function(){return this.callback_name}},{key:"generate_unique_widget_id_label",value:function(){this.widget_id_name="recaptcha_widget_id_".concat(this.config.get_widget_id())}},{key:"get_widget_id_label",value:function(){return this.widget_id_name}},{key:"get_widget_id",value:function(){return window[this.get_widget_id_label()]}},{key:"assign_callback_subscriber",value:function(){window[this.get_callback_label()]=function(e){v.A.sub_dealer_recaptcha.next(e)}}},{key:"set_recaptcha_token",value:function(e){this.recaptcha_token=e}},{key:"get_recaptcha_token",value:function(){return this.recaptcha_token}},{key:"assign_application_callback",value:function(){var e=this;this.application_subscription=v.A.sub_dealer_recaptcha.subscribe({next:function(t){e.unlock_recaptcha(),e.set_recaptcha_token(t),e.config.get_callback()(t)}})}},{key:"release_application_callback",value:function(){this.application_subscription.unsubscribe()}},{key:"setup_callback",value:function(){this.generate_unique_callback_name(),this.assign_callback_subscriber(),this.assign_application_callback()}},{key:"create_widget",value:function(){this.is_initialised()||(window[this.get_widget_id_label()]=grecaptcha.render(this.config.get_widget_id(),{sitekey:window.recaptcha_sitekey,callback:window[this.get_callback_label()],theme:"dark"}))}},{key:"is_initialised",value:function(){return void 0!==this.get_widget_id()}},{key:"init_recaptcha_lib",value:function(){this.generate_unique_widget_id_label(),this.create_widget()}},{key:"init",value:function(){this.setup_callback(),this.init_recaptcha_lib()}},{key:"lock_recaptcha",value:function(){this.recaptcha_active=!0}},{key:"unlock_recaptcha",value:function(){this.recaptcha_active=!1}},{key:"is_recaptcha_active",value:function(){return this.recaptcha_active}},{key:"verify",value:function(){this.is_recaptcha_active()||(this.lock_recaptcha(),grecaptcha.reset(this.get_widget_id()),grecaptcha.execute(this.get_widget_id()))}},{key:"unlock",value:function(){this.unlock_recaptcha()}},{key:"destroy",value:function(){this.release_application_callback()}}])}(),E=n(6692),k=n(7455);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var L=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.i18n={},this.i18n_regexp=new RegExp("^data-i18n-(.*)$"),this.parse_i18n_attributes()},(t=[{key:"match_attribute",value:function(e){var t=this.i18n_regexp.exec(e);return null!==t?t[1]:null}},{key:"add_i18n_string",value:function(e,t){null!==e&&(this.i18n[e]=t)}},{key:"parse_i18n_attributes",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}([].slice.call(this.container.attributes));try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.match_attribute(n.name);this.add_i18n_string(r,n.value)}}catch(e){t.e(e)}finally{t.f()}}},{key:"get",value:function(e){return this.i18n[e.toLowerCase()]}}])&&C(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),R=n(259);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function I(){I=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==P(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(P(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function D(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){D(o,r,i,a,s,"next",e)}function s(e){D(o,r,i,a,s,"throw",e)}a(void 0)}))}}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=P(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=P(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}const j=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_header=this.container.querySelector(".js-rrmc-dealer-locator-header"),this.btn_search=this.container.querySelector(".js-rrmc-dealer-submit-location"),this.btn_locate=this.container.querySelector(".js-locate"),this.btns_search_locate_recaptcha=this.container.querySelectorAll(".js-rrmc-dealer-button-anim"),this.elm_dealer_list=this.container.querySelector(".js-rrmc-dealer-details-locations"),this.input_location_country=this.elm_header.querySelector('input[name="dealer-location-country"]'),this.input_location_city=this.elm_header.querySelector('input[name="dealer-location-city"]'),this.input_label_country=this.elm_header.querySelector(".rrmc-form-label-country"),this.input_label_city=this.elm_header.querySelector(".rrmc-form-label-city"),this.dealer_content=this.container.querySelector(".rrmc-dealer-locator-content"),this.form_location=this.elm_header.querySelector(".js-rrmc-dealer-locator-container"),this.i18n=new L(this.container),this.const_boutiqueOverlay="accessoriesRequest",this.active_split_cta_instances=[],this.selected_dealership=0,this.set_ctas_visible(),this.on_recaptcha_valid=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.unlock_request_progress(),e.next=3,n.collapse_ctas();case 3:return e.prev=3,e.next=6,n.fetch_dealers_list();case 6:return n.update_input_field_with_location(),e.next=9,n.populate_dealers_list();case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(3),console.log(e.t0),e.next=16,n.process_error();case 16:n.reset_browser_location();case 17:case"end":return e.stop()}}),e,null,[[3,11]])}))),this.on_form_submit=function(e){(0,R.fg)(),e&&e.preventDefault(),n.is_request_progress_active()||(n.validate_input_field_city(),n.validate_input_field_country(),n.inputCountryChecker(),n.inputCityChecker(),n.is_input_field_invalid_city()||n.is_input_field_invalid_country()||(n.lock_request_progress(),n.track_search(),n.dim_buttons(),n.recaptcha.verify()))},this.on_geolocation_invalid=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.undim_buttons();case 1:case"end":return e.stop()}}),e)}))),this.on_geolocation_valid=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.recaptcha.verify();case 1:case"end":return e.stop()}}),e)}))),this.on_locate=function(){var e=O(I().mark((function e(t){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,R.fg)(),t&&t.preventDefault(),!n.is_request_progress_active()){e.next=4;break}return e.abrupt("return");case 4:return n.lock_request_progress(),n.dim_buttons(),n.track_locate(),e.next=9,n.request_current_location();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.on_input_focus_city=function(){n.is_request_progress_active()||(n.input_location_shift_label_up_city(),n.reveal_ctas())},this.on_input_focus_country=function(){n.is_request_progress_active()||(n.input_location_shift_label_up_country(),n.reveal_ctas())},this.on_input_blur_city=function(){n.is_input_location_populated_city()&&n.input_location_shift_label_down_city()},this.on_input_blur_country=function(){n.is_input_location_populated_country()&&n.input_location_shift_label_down_country()},this.store_service_request_response=function(e){n.service_request_response=e},this.get_service_request_response=function(){return n.service_request_response},this.get_city=function(){return n.get_service_request_response().query.city},this.setup_click_on_tab=function(e){n.tabs.get_tab_button(e).addEventListenerRR("click",n.on_tab_click)},this.remove_click_on_tab=function(e){n.tabs.get_tab_button(e).removeEventListenerRR("click",n.on_tab_click)},this.on_tab_click=function(){var e=O(I().mark((function e(t){var r;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,R.fg)(),!n.tabs.is_tab_click_locked()){e.next=3;break}return e.abrupt("return");case 3:return n.tabs.lock_tab_click(),r=t.currentTarget,n.select_dealership(n.tabs.get_button_index(r)),n.setup_navigation(),e.next=9,n.setup_tab_details();case 9:n.tabs.unlock_tab_click();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.on_select_dealer_default=function(e){(0,R.fg)();var t=e.currentTarget;t.getAttribute("data-new-tab")?window.open(t.getAttribute("data-href"),t.getAttribute("data-new-tab")):window.location.href=t.getAttribute("data-href")},this.on_select_dealer_boutique=function(e){(0,R.fg)();var t=e.currentTarget;v.A.sub_overlay_manager_bus.next({action:k.xb,data:{overlayName:"g-request-accessories",overlayPurpose:n.const_boutiqueOverlay,wishListProducts:n.list_products,dealership_title:t.getAttribute("data-trading-name"),dealership_number:t.getAttribute("data-number")}})},this.on_click_address=function(e){var t=e.currentTarget,r=n.get_dealer_name(t);n.track_addres(r)},this.on_click_telephone=function(e){var t=e.currentTarget,r=n.get_dealer_name(t);n.track_tel(r)}},t=[{key:"get_search_input_value",value:function(){return this.input_location_city.value+","+this.input_location_country.value}},{key:"process_error",value:(h=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.reveal_ctas();case 2:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"update_input_field_with_location",value:function(){this.is_geolocation_request_type()&&this.paste_city_into_input_field()}},{key:"paste_city_into_input_field",value:function(){this.input_location_city.value=this.get_city(),this.input_location_shift_label_up_city()}},{key:"request_current_location",value:(u=O(I().mark((function e(){var t;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.geolocation_request();case 3:t=e.sent,this.set_browser_location(t),this.on_geolocation_valid(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.on_geolocation_invalid(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])}))),function(){return u.apply(this,arguments)})},{key:"reset_browser_location",value:function(){delete this.browser_location}},{key:"set_browser_location",value:function(e){this.browser_location=e}},{key:"geolocation_request",value:function(){return new Promise((function(e,t){navigator.geolocation.getCurrentPosition((function(t){return e(t.coords)}),(function(e){return t(e)}))}))}},{key:"validate_input_field_country",value:function(){this.input_field_valid_country=E.A.validateTextInput(this.input_location_country)}},{key:"validate_input_field_city",value:function(){this.input_field_valid_city=E.A.validateTextInput(this.input_location_city)}},{key:"inputCountryChecker",value:function(){var e=this;this.input_location_country.addEventListenerRR("input",(function(){e.validate_input_field_country()}))}},{key:"inputCityChecker",value:function(){var e=this;this.input_location_city.addEventListenerRR("input",(function(){e.validate_input_field_city()}))}},{key:"is_input_field_invalid_country",value:function(){return!this.input_field_valid_country}},{key:"is_input_field_invalid_city",value:function(){return!this.input_field_valid_city}},{key:"select_dealership",value:function(e){this.selected_dealership=e,this.tabs.set_selected_tab(e)}},{key:"fetch_dealers_list",value:(c=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.prepare_service_request_data(),e.next=3,this.send_service_request();case 3:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"send_service_request",value:(l=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send_service_request_ajax();case 2:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"send_service_request_ajax",value:function(){var e=this;return new Promise((function(t,n){$.ajax({type:"POST",url:"/bin/public/dealerlocator",data:e.get_service_request_package(),success:function(e){return t(e)},error:function(e){return n(e)}}).then(e.store_service_request_response)}))}},{key:"prepare_service_request_data",value:function(){this.reset_service_request_package(),this.set_service_request_package_location_parameter(),this.set_service_request_package_recaptcha_token()}},{key:"reset_service_request_package",value:function(){this.service_request_package={}}},{key:"set_service_request_package_recaptcha_token",value:function(){this.service_request_package["g-recaptcha-response"]=this.recaptcha.get_recaptcha_token()}},{key:"set_service_request_package_latlong",value:function(){this.service_request_package.query="".concat(this.browser_location.latitude,",").concat(this.browser_location.longitude)}},{key:"set_service_request_package_location_string",value:function(){this.service_request_package.query=this.input_location_city.value+","+this.input_location_country.value}},{key:"get_service_request_package",value:function(){return this.service_request_package}},{key:"set_service_request_package_location_parameter",value:function(){if(this.is_string_request_type())return this.set_service_request_package_location_string();this.set_service_request_package_latlong()}},{key:"is_geolocation_request_type",value:function(){return!this.is_string_request_type()}},{key:"is_string_request_type",value:function(){return!this.browser_location}},{key:"reset_html",value:function(){this.elm_dealer_list.innerHTML=""}},{key:"inject_dealers_list_html",value:function(){var e=new d(this.get_service_request_response(),this.i18n),t=new p(this.get_service_request_response(),this.i18n);this.elm_dealer_list.innerHTML="".concat(e.generate()," ").concat(t.generate())}},{key:"get_location_address_links",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-dealer-locator--address-anchor"))}},{key:"get_location_telephone_links",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-dealer-locator--telephone-anchor"))}},{key:"get_split_locations",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-dealer-locator-location"))}},{key:"get_split_ctas",value:function(e){return[].slice.call(e.querySelectorAll(".js-dealer-locator-cta"))}},{key:"get_split_select_dealer_ctas",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-dealer-select-with-copy"))}},{key:"set_dataset_property",value:function(e,t,n){e.dataset[t]=n}},{key:"get_dataset_property",value:function(e,t){return e.dataset[t]}},{key:"set_dealer_name",value:function(e,t){this.set_dataset_property(e,"dealerName",t)}},{key:"get_dealer_name",value:function(e){return this.get_dataset_property(e,"dealerName")}},{key:"get_location_name",value:function(e){return e.getAttribute("data-dealer-name")}},{key:"init_select_dealer_listener",value:function(e){if(this.is_boutique_overlay())return e.addEventListenerRR("click",this.on_select_dealer_boutique);e.addEventListenerRR("click",this.on_select_dealer_default)}},{key:"dispose_select_dealer_listener",value:function(e){if(this.is_boutique_overlay())return e.removeEventListenerRR("click",this.on_select_dealer_boutique);e.removeEventListenerRR("click",this.on_select_dealer_default)}},{key:"init_telephone_click",value:function(e,t){this.set_dealer_name(e,t),e.addEventListenerRR("click",this.on_click_telephone)}},{key:"init_address_click",value:function(e,t){this.set_dealer_name(e,t),e.addEventListenerRR("click",this.on_click_address)}},{key:"dispose_telephone_click",value:function(e){e.removeEventListenerRR("click",this.on_click_address)}},{key:"dispose_address_click",value:function(e){e.removeEventListenerRR("click",this.on_click_telephone)}},{key:"init_contact_details_tracking",value:function(e){var t=this,n=this.get_location_telephone_links(e),r=this.get_location_address_links(e),i=this.get_location_name(e);n.forEach((function(e){return t.init_telephone_click(e,i)})),r.forEach((function(e){return t.init_address_click(e,i)}))}},{key:"dispose_contact_details_tracking",value:function(e){var t=this,n=this.get_location_telephone_links(e),r=this.get_location_address_links(e);n.forEach((function(e){return t.dispose_telephone_click(e)})),r.forEach((function(e){return t.dispose_address_click(e)}))}},{key:"init_split_ctas",value:function(e){var t=this,n=this.get_split_ctas(e);this.active_split_cta_instances=n.map((function(e){return new r.default(e)})),this.active_split_cta_instances.forEach((function(e){return e.load()})),this.active_split_select_dealer_ctas=this.get_split_select_dealer_ctas(e),this.active_split_select_dealer_ctas.forEach((function(e){return t.init_select_dealer_listener(e)})),this.active_split_locations=this.get_split_locations(e),this.active_split_locations.forEach((function(e){return t.init_contact_details_tracking(e)}))}},{key:"dispose_active_split_ctas",value:function(){var e=this;this.active_split_cta_instances.forEach((function(e){return e.destroy()})),this.active_split_select_dealer_ctas.forEach((function(t){return e.dispose_select_dealer_listener(t)})),this.active_split_locations.forEach((function(t){return e.dispose_contact_details_tracking(t)}))}},{key:"setup_navigation",value:(s=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tabs.apply_nav_button_styles(),this.tabs.apply_nav_underscore_styles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setup_tab_details",value:(a=O(I().mark((function e(){var t=this;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sections.deactivate_current_split((function(){return t.dispose_active_split_ctas()}));case 2:return this.sections.set_active_split(this.selected_dealership),e.next=5,this.sections.activate_current_split((function(e){return t.init_split_ctas(e)}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"setup_tab_listeners",value:function(){var e=this;this.tabs&&this.tabs.forEachButton((function(t){return e.setup_click_on_tab(t)}))}},{key:"remove_tab_listeners",value:function(){var e=this;this.tabs&&this.tabs.forEachButton((function(t){return e.remove_click_on_tab(t)}))}},{key:"setup_dealer_list_listeners",value:(o=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tabs=new f.A(this.elm_dealer_list,"dealer-locator"),this.sections=new m.A(this.elm_dealer_list,"dealer-locator"),this.setup_tab_listeners();case 3:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"populate_dealers_list",value:(n=O(I().mark((function e(){return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.remove_tab_listeners(),this.inject_dealers_list_html(),e.next=4,this.setup_dealer_list_listeners();case 4:return this.setup_navigation(),e.next=7,this.setup_tab_details();case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"are_ctas_visible",value:function(){return this.ctas_visible}},{key:"set_ctas_visible",value:function(){this.ctas_visible=!0}},{key:"set_ctas_invisible",value:function(){this.ctas_visible=!1}},{key:"collapse_ctas",value:function(){var e=this;return this.are_ctas_visible()?(this.set_ctas_invisible(),new Promise((function(t){var n=new i.Y_;n.addLabel("start"),n.set(e.btns_search_locate_recaptcha,{"pointer-events":"none"}),n.to(e.btns_search_locate_recaptcha,.6,{opacity:0},"start"),n.to(e.elm_dealer_list,.6,{y:"-270px",opacity:1}),n.add(t)}))):Promise.resolve()}},{key:"reveal_ctas",value:function(){var e=this;return this.are_ctas_visible()?Promise.resolve():(this.set_ctas_visible(),new Promise((function(t){var n=new i.Y_;n.addLabel("start"),n.to(e.elm_dealer_list,.6,{y:"0px"}),n.to(e.btns_search_locate_recaptcha,.6,{opacity:1}),n.set(e.btns_search_locate_recaptcha,{"pointer-events":"auto"}),n.add(t)})))}},{key:"dim_buttons",value:function(){i.uo.to(this.btns_search_locate_recaptcha,1,{opacity:.5})}},{key:"undim_buttons",value:function(){i.uo.to(this.btns_search_locate_recaptcha,1,{opacity:1})}},{key:"is_input_location_populated_country",value:function(){return 0==this.input_location_country.value.length}},{key:"is_input_location_populated_city",value:function(){return 0==this.input_location_city.value.length}},{key:"input_location_shift_label_up_country",value:function(){this.input_label_country.classList.add("input-focus")}},{key:"input_location_shift_label_down_country",value:function(){this.input_label_country.classList.remove("input-focus")}},{key:"input_location_shift_label_up_city",value:function(){this.input_label_city.classList.add("input-focus")}},{key:"input_location_shift_label_down_city",value:function(){this.input_label_city.classList.remove("input-focus")}},{key:"schedule_unlock_request_progress",value:function(){var e=this;this.unlock_timeout=setTimeout((function(){return e.unlock_controls()}),5e3)}},{key:"remove_sheduled_unlock",value:function(){clearTimeout(this.unlock_timeout)}},{key:"unlock_controls",value:function(){this.is_request_progress_active()&&(this.unlock_request_progress(),this.undim_buttons(),this.recaptcha.unlock())}},{key:"lock_request_progress",value:function(){this.request_progress_active=!0,this.schedule_unlock_request_progress()}},{key:"unlock_request_progress",value:function(){this.request_progress_active=!1,this.remove_sheduled_unlock()}},{key:"is_request_progress_active",value:function(){return this.request_progress_active}},{key:"init_recaptcha",value:function(){var e=x.make(this.on_recaptcha_valid,"dealer-recaptcha-v2");this.recaptcha=new S(e),this.recaptcha.init()}},{key:"init_ctas",value:function(){this.use_my_location=new r.default(this.btn_locate),this.use_my_location.load(),this.btn_locate.addEventListenerRR("click",this.on_locate),this.btn_search.addEventListenerRR("click",this.on_form_submit),this.input_location_country.addEventListenerRR("focus",this.on_input_focus_country),this.input_location_country.addEventListenerRR("blur",this.on_input_blur_country),this.input_location_city.addEventListenerRR("focus",this.on_input_focus_city),this.input_location_city.addEventListenerRR("blur",this.on_input_blur_city)}},{key:"dispose_ctas",value:function(){this.btn_locate.removeEventListenerRR("click",this.on_locate),this.btn_search.removeEventListenerRR("click",this.on_form_submit),this.input_location_country.removeEventListenerRR("focus",this.on_input_focus_country),this.input_location_country.removeEventListenerRR("blur",this.on_input_blur_country),this.input_location_city.removeEventListenerRR("focus",this.on_input_focus_city),this.input_location_city.removeEventListenerRR("blur",this.on_input_blur_city)}},{key:"init_form",value:function(){this.form_location.addEventListenerRR("submit",this.on_form_submit)}},{key:"dispose_form",value:function(){this.form_location.removeEventListenerRR("submit",this.on_form_submit)}},{key:"set_overlay_purpose",value:function(e){this.overlay_purpose=e.overlayPurpose||"default",this.form_location_id=this.overlay_purpose==this.const_boutiqueOverlay?"Wish List Checkout":"Find A Dealer",this.list_products=e.wishListProducts||void 0}},{key:"is_boutique_overlay",value:function(){return this.overlay_purpose===this.const_boutiqueOverlay}},{key:"track_close_event",value:function(){(0,R.Gx)({event:"fadClose",eventCategory:"form",eventAction:"Find A Dealer",eventLabel:"Close"})}},{key:"track_search",value:function(){var e=this.get_search_input_value();(0,R.Gx)({event:"fadLocationClick",eventCategory:"form",eventAction:"search",eventLabel:e})}},{key:"track_locate",value:function(){(0,R.Gx)({event:"fadLocationClick",eventCategory:"form",eventAction:"click",eventLabel:"Use My Location"})}},{key:"track_tel",value:function(e){(0,R.Gx)({event:"fadTelClick",eventCategory:"form",eventAction:"call",eventLabel:e})}},{key:"track_addres",value:function(e){(0,R.Gx)({event:"fadMapClick",eventCategory:"form",eventAction:"map",eventLabel:e})}},{key:"load",value:function(e){this.set_overlay_purpose(e),this.init_recaptcha(),this.init_ctas(),this.init_form()}},{key:"destroy",value:function(){this.track_close_event(),this.recaptcha.destroy(),this.dispose_ctas(),this.dispose_form(),this.remove_tab_listeners(),this.reset_html(),this.reveal_ctas()}}],t&&F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o,a,s,l,c,u,h}()},5964:(e,t,n)=>{"use strict";n.r(t)},446:(e,t,n)=>{"use strict";n.r(t)},7768:(e,t,n)=>{"use strict";n.r(t)},7964:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(2725),i=n(7455),o=n(1203),a=n(5847),s=n(3169),l=n(4315),c=n(330),u=n(8607),h=n(259);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var g=function(){return m((function e(t){p(this,e),this.enquireBlock=t,this.enquireButtons=this.enquireBlock.querySelectorAll(".rrmc-enquire-block--item")}),[{key:"setUpEnquireButtons",value:function(){[].slice.call(this.enquireButtons).forEach((function(e){var t=new y(e);e.data={enquireButtonInstance:t},t.load()}))}},{key:"load",value:function(){this.setUpEnquireButtons()}},{key:"destroy",value:function(){[].slice.call(this.enquireButtons).forEach((function(e){e.data.enquireButtonInstance.destroy()}))}}])}(),y=function(){return m((function e(t){p(this,e),this.enquireButton=t,this.enquireButtonArrow=this.enquireButton.querySelector(".js-rrmc-button-arrow"),this.enquireArrowWrapper=this.enquireButton.querySelector(".rrmc-button--regular-icon-stroked"),this.on_click=function(e){r.A,i.xb;var t="default",n=e.currentTarget;void 0!==window.ctaWindowProps&&void 0!==window.ctaWindowProps.existingOwner&&(t=!0===window.ctaWindowProps.existingOwner?"owner":"prospect");var o,a=n.dataset.action,s=n.dataset.overlay;if("open-default-form"===a)h.fg(),o="".concat(t," ").concat("g-purchase-enquiry"===s?"purchase enq":"general enq"),e.preventDefault(),h.Gx({event:"formOpen",eventCategory:"form",eventAction:o,eventLabel:"open"}),r.A.sub_overlay_manager_bus.next({action:a,data:{overlayName:s}});else if("direct-link"===a){"_blank"!==n.getAttribute("target")&&e.preventDefault();var l=n.getAttribute("href"),c=n.querySelector(".rrmc-enquire-block--text").textContent.toLowerCase();o="".concat(t," ").concat(c),h.Gx({event:"formOpen",eventCategory:"form",eventAction:o,eventLabel:"click",eventCallback:function(){l&&"_blank"!==n.getAttribute("target")&&(window.location=l)},eventTimeout:2e3})}},this.setUpAnimatedArrow()}),[{key:"setUpAnimatedArrow",value:function(){var e=this.enquireButtonArrow.dataset.icon;(0,s.v)(this.enquireButtonArrow,o.o[e||"arrow-right"]),this.loadCircle()}},{key:"setUpEventListeners",value:function(){var e=this;setTimeout((function(){return e.enquireButton.addEventListenerRR("click",e.on_click)}),1e3)}},{key:"loadCircle",value:function(){var e=this,t=this.enquireArrowWrapper.getBoundingClientRect(),n=t.width,r=t.height,i=(0,a.A)(n,r,1),o="#6D30A7",s=(0,l.x)(o,-10),h='<g transform="rotate(90 '.concat(n/2," ").concat(r/2,')">'),d='\n          <svg class="rrmc-button-svg-anim" width="'.concat(n,'" height="').concat(r,'" viewBox="0 0 ').concat(n," ").concat(r,'" xmlns="http://www.w3.org/2000/svg">\n            ').concat(h,"\n            ").concat((0,c.p)(i,o,s),"\n           ").concat("</g>","\n          </svg>\n      "),p=document.createRange().createContextualFragment(d);this.enquireButtonArrow.appendChild(p),this.elm_path=this.enquireButtonArrow.querySelector(".rrmc-button-svg-anim-path");var f=this.enquireButton.querySelector(".rrmc-initial-path");this.on_mouseover=function(){f.style.opacity=0,u.uo.to(e.elm_path,.4,{delay:.15,strokeDashoffset:"-".concat(2*i.dash_length)})},this.on_mouseleave=function(){f.style.opacity=1,u.uo.to(e.elm_path,.4,{strokeDashoffset:"-".concat(i.dash_length)})},this.enquireButton.addEventListenerRR("mouseenter",this.on_mouseover),this.enquireButton.addEventListenerRR("mouseleave",this.on_mouseleave),this.dispose=function(){e.enquireButton.removeEventListenerRR("click",e.on_click),e.enquireButton.removeEventListenerRR("mouseenter",e.on_mouseover),e.enquireButton.removeEventListenerRR("mouseleave",e.on_mouseleave),e.enquireButtonArrow.removeChild(e.enquireButtonArrow.querySelector(".rrmc-button-svg-anim"))}}},{key:"load",value:function(){this.setUpEventListeners()}},{key:"destroy",value:function(){this.dispose()}}])}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-enquire-block");[].slice.call(e).forEach((function(e){var t=new g(e);e.data={enquireInstance:t}}))}));const _=g},1734:(e,t,n)=>{"use strict";n.r(t);var r=n(6575),i=n(1500),o=n(915),a=n.n(o),s=n(2862),l=n(299);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}i.os.registerPlugin(r.u);var d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.u.defaults({toggleActions:"restart pause resume pause"}),this.imageMask=t,this.maskTrigger=this.imageMask.querySelector(".rrmc-mask-trigger-fade"),this.maskWrap=this.imageMask.querySelector(".rrmc-mask-wrap-fade"),this.allPictures=this.imageMask.querySelectorAll(".rrmc-preload-target"),this.image=this.imageMask.querySelector(".rrmc-mask-image-fade"),this.fadeImage=this.imageMask.querySelector(".fade-image"),this.mainimage=this.imageMask.querySelector(".main-image"),this.wrapper=this.imageMask.querySelector(".wrapper"),this.timeline=null,this.hasPinned=!1,l.A.listenToBodyResize((function(){n.timeline&&n.timeline.scrollTrigger.refresh()}))},(t=[{key:"load",value:function(){var e=this;[].slice.call(this.allPictures).forEach((function(t){(0,s.Il)(t,(function(){var n=t.querySelector("img");"objectFit"in document.documentElement.style||a()(n),setTimeout((function(){!1===e.hasPinned?e.pinMask():e.timeline.scrollTrigger.refresh()}),1e3)}))}))}},{key:"pinMask",value:function(){this.hasPinned=!0,this.timeline=i.os.timeline({scrollTrigger:{trigger:this.imageMask,pin:this.imageMask,scrub:0,start:"top top",ease:"power4.out",pinSpacing:!1,duration:"100vh"}}).set(this.fadeImage,{opacity:0}).to(this.image,{css:{borderWidth:"0px 0px 0px 0px"},duration:.01}).to(this.fadeImage,{opacity:1,duration:.0025})}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".rrmc-mask-fade");[].slice.call(e).forEach((function(e){new d(e).load()}))}))},2800:(e,t,n)=>{"use strict";n.r(t);var r=n(1500),i=n(6575),o=n(915),a=n.n(o),s=n(2862),l=n(299);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}r.os.registerPlugin(i.u);var d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i.u.defaults({toggleActions:"restart pause resume pause"}),this.imageMask=t,this.video=this.imageMask.querySelector(".vjs-tech"),this.maskElement=this.imageMask.querySelector(".rrmc-mask-element"),this.copyElement=this.imageMask.querySelector(".rrmc-mask-copy"),this.maskTrigger=this.imageMask.querySelector(".rrmc-mask-trigger"),this.maskWrap=this.imageMask.querySelector(".rrmc-mask-wrap"),this.maskCopyWrap=this.imageMask.querySelector(".rrmc-mask-copy-wrap"),this.picture=this.imageMask.querySelector(".rrmc-preload-picture"),this.currentWidth=window.innerWidth,this.borderAnim=null,this.copyAnim=null,this.picture.style.opacity=0,this.maskWrap.style.opacity=0,l.A.listenToBodyResize((function(){n.borderAnim&&n.borderAnim.scrollTrigger.refresh(),n.copyAnim&&n.copyAnim.scrollTrigger.refresh()}))},(t=[{key:"load",value:function(){var e=this;(0,s.Il)(this.picture,(function(){e.imageMask.querySelector(".loading-icon").style.display="none",e.maskWrap.style.opacity=1,e.picture.style.opacity=1,"objectFit"in document.documentElement.style||a()(e.imageMask.querySelector(".rrmc-mask-image")),e.pinMask()}))}},{key:"pinMask",value:function(){if(this.borderAnim=r.os.to(this.maskElement,{duration:1,css:{borderWidth:"58px 0 0 0"},scrollTrigger:{trigger:this.imageMask,pin:this.maskWrap,scrub:0,start:"top top",ease:"power4.out",end:"+=800"}}),this.copyAnim=r.os.to(this.copyElement,{duration:1,opacity:1,top:"50vh",transform:"translateY(-50%)",scrollTrigger:{trigger:this.imageMask,pin:this.maskCopyWrap,scrub:0,start:"top top",ease:"power4.out",end:"+=800"}}),this.video&&null!==this.video.getAttribute("data-video-id-desktop")){var e=window.innerWidth>768?this.video.getAttribute("data-video-id-desktop"):this.video.getAttribute("data-video-id-mobile");videojs.getPlayer(this.video).ready((function(){var t=this;t.catalog.getVideo(e,(function(e,n){t.catalog.load(n)}))}))}}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".rrmc-mask");[].slice.call(e).forEach((function(e){new d(e).load()}))}))},7719:(e,t,n)=>{"use strict";n.r(t);var r=n(2725),i=n(7455),o=(n(8624),n(8607)),a=n(6692),s=n(259);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_submit_btn=this.container.querySelector(".js-rrmc-extended-warranty-submit"),this.elm_request_cont=this.container.querySelector(".js-rrmc-extended-warranty-request-container"),this.elm_response_cont=this.container.querySelector(".js-rrmc-extended-warranty-response-container"),this.elm_response_accordion=this.elm_response_cont.querySelector(".js-rrmc-extended-warranty-response-container-accordion"),this.elm_back_btn=this.elm_response_cont.querySelector(".js-rrmc-extended-warranty-back"),this.input_warranty=this.container.querySelector("input[name=extended-warranty]"),this.input_label=this.elm_request_cont.querySelector(".rrmc-form-label"),this.input_error=this.elm_request_cont.querySelector(".rrmc-form-label-error"),this.on_submit=function(e){e&&e.preventDefault(),a.A.validateTextInput(n.input_warranty)&&n.validateVinInput(n.input_warranty)?(n.hide_request_elements(),fetch(n.endpoint_warranty(n.input_warranty.value)).then((function(e){if(e.ok)return e.json();throw e.text()})).then(n.on_response_warranty).catch((function(e){e.then((function(e){return console.log(e)}))}))):s.Gx({event:"warrantySubmit",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:"submit error: invalid ".concat(n.input_warranty.name)})},this.on_response_warranty=function(e){var t=e.extendedWarranty,r=!!t;if(s.Gx({event:"warrantySubmit",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:"Submit - ".concat("true"===t?"True":"False"),vin:n.input_warranty.value}),r)return n.present_form();n.show_ineligible_message()},this.present_form=function(){r.A.sub_overlay_manager_bus.next({action:i.xb,data:{overlayName:"g-request-information",on_close_after:function(){return n.on_back()},fields:[{name:"vin",value:n.input_warranty.value},{name:"digitalLeadSource",value:"Extended Service Contract Request Form"}]}})},this.reveal_request_elements=function(){o.uo.set(n.elm_request_cont,{display:"block"})},this.reveal_response_elements=function(){o.uo.set(n.elm_response_cont,{display:"block"})},this.hide_request_elements=function(){o.uo.set(n.elm_request_cont,{display:"none"})},this.hide_response_elements=function(){o.uo.set(n.elm_response_cont,{display:"none"})},this.show_ineligible_message=function(){n.reveal_response_elements(),n.elm_response_accordion.innerHTML="Your vehicle is not eligible."},this.on_back=function(){n.reveal_request_elements(),n.hide_response_elements(),n.input_warranty.value=null,n.input_label.classList.remove("-hidden"),n.on_input_blur()},this.on_input_focus=function(e){n.input_label.classList.add("input-focus"),o.uo.set(n.input_warranty,{"border-bottom":"2px solid #ddd"}),s.Gx({event:"formClick",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:e.target.name})},this.on_input_blur=function(){o.uo.set(n.input_warranty,{"border-bottom":"2px solid #696969"}),0!==n.input_warranty.value.length?o.uo.set(n.input_warranty,{"border-bottom":"2px solid #ddd"}):n.input_label.classList.remove("input-focus")},this.form_submit=function(e){e.preventDefault(),n.on_submit()}},(t=[{key:"validateVinInput",value:function(){return 17!=this.input_warranty.value.trim().length?(o.uo.set(this.input_warranty,{"border-bottom":"2px solid #f94564"}),this.input_error.classList.remove("-hidden"),this.input_error.textContent="VIN must be 17 characters.",!1):(this.input_label.classList.add("-hidden"),!0)}},{key:"endpoint_warranty",value:function(e){return"/bin/public/warranty?vin=".concat(e)}},{key:"load",value:function(){this.elm_submit_btn.addEventListenerRR("click",this.on_submit),this.elm_back_btn.addEventListenerRR("click",this.on_back),this.input_warranty.addEventListenerRR("focus",this.on_input_focus),this.input_warranty.addEventListenerRR("blur",this.on_input_blur),this.elm_request_cont.addEventListenerRR("submit",this.form_submit)}},{key:"destroy",value:function(){this.elm_submit_btn.removeEventListenerRR("click",this.on_submit),this.elm_back_btn.removeEventListenerRR("click",this.on_back),this.input_warranty.removeEventListenerRR("focus",this.on_input_focus),this.input_warranty.removeEventListenerRR("blur",this.on_input_blur),this.elm_request_cont.removeEventListenerRR("submit",this.form_submit)}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-extended-warranty-container");[].slice.call(e).forEach((function(e){new h(e).load()}))}))},3626:(e,t,n)=>{"use strict";n.r(t);var r=n(7482),i=n(5116),o=n(8509),a=n(4111),s=n(259);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var p=function(){return h((function e(t){c(this,e),this.contact=t}),[{key:"get_phone_number",value:function(){var e=this.contact.data_href.split(":");return e.length>1?e[1]:e[0]}},{key:"get_analytics_object",value:function(){return{event:"clickDealerNumber",eventCategory:"Engagement",eventAction:"call",eventLabel:this.get_phone_number()}}}])}(),f=function(){return h((function e(t){c(this,e),this.contact=t}),[{key:"get_analytics_object",value:function(){return{event:"ClickDealerSocial",eventCategory:"Engagement",eventAction:"Exit Click",eventLabel:this.contact.data_channel}}}])}(),m=function(){return h((function e(t){c(this,e),this.link=t,this.parse_link(),this.choose_contact_type()}),[{key:"parse_link",value:function(){this.data_channel=this.link.getAttribute("data-channel"),this.data_href=this.link.getAttribute("href")}},{key:"is_phone_channel",value:function(){return"telephone"===this.data_channel}},{key:"choose_contact_type",value:function(){this.is_phone_channel()?this.contact=new p(this):this.contact=new f(this)}},{key:"get_analytics_object",value:function(){return this.contact.get_analytics_object()}}])}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};function _(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==v(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function y(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))}}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}var x=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elms_nav_buttons=[].slice.call(this.container.querySelectorAll(".js-rrmc-find-us-content--tab-button-container")),this.map_urls=this.elms_nav_buttons.map((function(e){return e.getAttribute("data-embedded-map-url")})),this.elm_map_container=this.container.querySelector(".js-find-us-map-container"),this.const_defaultTabAttribute="data-default-tab",this.tabs=new o.A(this.container),this.sections=new a.A(this.container),this.active_split_cta_instances=[],this.set_selected_dealership(),this.on_tab_click=function(){var e=_(g().mark((function e(t){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.tabs.is_tab_click_locked()){e.next=2;break}return e.abrupt("return");case 2:return n.tabs.lock_tab_click(),r=t.currentTarget,n.select_dealership(n.tabs.get_button_index(r)),n.setup_navigation(),e.next=8,n.setup_tabs();case 8:n.tabs.unlock_tab_click();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.on_resize=function(){n.set_map_container_height(),n.sections.fix_split_height()},this.on_click_track_contact=function(e){var t=new m(e.currentTarget);(0,s.fg)(),(0,s.Gx)(t.get_analytics_object())}},t=[{key:"assert_html",value:function(){if(0===this.elms_nav_buttons.length)throw new Error("Invalid number of tabs: 0")}},{key:"select_dealership",value:function(e){this.selected_dealership=e,this.tabs.set_selected_tab(e)}},{key:"get_default_open_tab_index",value:function(){return parseInt(this.container.getAttribute(this.const_defaultTabAttribute))}},{key:"get_default_open_tab",value:function(){var e=this.get_default_open_tab_index();return e>=this.sections.get_split_number()?this.sections.get_split_number()-1:e}},{key:"set_selected_dealership",value:function(){this.select_dealership(this.get_default_open_tab())}},{key:"set_split_to_active_dealership",value:function(){this.sections.set_active_split(this.selected_dealership)}},{key:"setup_click_on_tab",value:function(e){this.tabs.get_tab_button(e).addEventListenerRR("click",this.on_tab_click)}},{key:"setup_on_resize",value:function(){window.addEventListenerRR("resize",this.on_resize)}},{key:"get_split_ctas",value:function(e){return[].slice.call(e.querySelectorAll(".js-find-us-cta"))}},{key:"init_contacts_tracking",value:function(e){var t=this;this.tracking_split_events=[].slice.call(e.querySelectorAll(".js-find-us--contact")),this.tracking_split_events.forEach((function(e){return e.addEventListenerRR("click",t.on_click_track_contact)}))}},{key:"dispose_contacts_tracking",value:function(){var e=this;this.tracking_split_events.forEach((function(t){return t.removeEventListenerRR("click",e.on_click_track_contact)}))}},{key:"init_split_ctas",value:function(e){var t=this.get_split_ctas(e);this.active_split_cta_instances=t.map((function(e){return new r.default(e)})),this.active_split_cta_instances.forEach((function(e){return e.load()})),this.init_contacts_tracking(e)}},{key:"dispose_active_split_ctas",value:function(){this.active_split_cta_instances.forEach((function(e){return e.destroy()})),this.dispose_contacts_tracking()}},{key:"set_active_map_url",value:function(){var e=this.sections.get_active_split_index();this.active_map_url=this.map_urls[e]}},{key:"get_active_map_url",value:function(){return this.active_map_url}},{key:"generate_map_html",value:function(e){return' <iframe\n                  title="Google Maps" frameborder="0" style="border:0; width: 100%; height: 100%"\n                  src="'.concat(e,'" allowfullscreen>\n                </iframe>\n              ')}},{key:"map_container_aspect_ratio",value:function(){return(0,i.h)()?1:2.892}},{key:"generate_map_dimensions",value:function(){var e=this.map_container_aspect_ratio();return{width:window.innerWidth,height:window.innerWidth/e}}},{key:"reveal_active_map",value:(f=_(g().mark((function e(){var t;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.get_active_map_url(),this.elm_map_container.innerHTML=this.generate_map_html(t);case 2:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"hide_active_map",value:(p=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.elm_map_container.innerHTML="";case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"activate_map_by_active_dealership",value:(d=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.set_split_to_active_dealership(),this.set_active_map_url(),this.reveal_active_map();case 3:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"deactivate_current_map",value:(h=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this.sections.get_active_split_index()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:this.hide_active_map();case 3:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"activate_split_by_active_dealership",value:(u=_(g().mark((function e(){var t=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.set_split_to_active_dealership(),e.next=3,this.sections.activate_current_split((function(e){return t.init_split_ctas(e)}));case 3:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)})},{key:"add_tracking_indices",value:function(){this.sections.add_tracking_indices()}},{key:"setup_navigation",value:(c=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.tabs.apply_nav_button_styles(),this.tabs.apply_nav_underscore_styles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"set_map_container_height",value:function(){var e=this.generate_map_dimensions();this.elm_map_container.style.height="".concat(e.height,"px")}},{key:"setup_tabs",value:(l=_(g().mark((function e(){var t=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.deactivate_current_map(),e.next=3,this.sections.deactivate_current_split((function(){return t.dispose_active_split_ctas()}));case 3:return this.activate_map_by_active_dealership(),e.next=6,this.activate_split_by_active_dealership();case 6:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},{key:"setup_listeners",value:function(){var e=this;this.tabs.forEachButton((function(t){return e.setup_click_on_tab(t)})),this.setup_on_resize()}},{key:"load",value:(n=_(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.assert_html(),this.add_tracking_indices(),this.setup_navigation(),this.set_map_container_height(),e.next=7,this.setup_tabs();case 7:this.setup_listeners(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])}))),function(){return n.apply(this,arguments)})}],t&&b(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,l,c,u,h,d,p,f}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-find-us-component");[].slice.call(e).forEach((function(e){new x(e).load()}))}))},4111:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(8607),i=n(9018);function o(e){var t=e.root,n=e.attributeName,r=e.placeholder,i="%".concat(r,"%");t.querySelectorAll("[".concat(n,'*="').concat(i,'"]')).forEach((function(e,t){var r=t+1;e.setAttribute(n,e.getAttribute(n).replaceAll(i,r))}))}function a(){a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,s,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,s)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=p(e[i],e,o);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(c(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,l,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,s,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function s(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){s(o,r,i,a,l,"next",e)}function l(e){s(o,r,i,a,l,"throw",e)}a(void 0)}))}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var f=function(){return d((function e(t){u(this,e),this.container=t,this.attr_visible_display_rule=this.container.getAttribute("data-visible-display-rule"),this.isIE=(0,i.en)()}),[{key:"is_split_display_rule_set_explicitly",value:function(){return!!this.attr_visible_display_rule}},{key:"get_visible_value_grid",value:function(){return this.isIE?"-ms-grid":"grid"}},{key:"get_visible_value_block",value:function(){return"block"}},{key:"get_visible_split_default_value",value:function(){return this.get_visible_value_grid()}},{key:"get_display_rule_explicit",value:function(){return"block"===this.attr_visible_display_rule?this.get_visible_value_block():this.get_visible_value_grid()}},{key:"get_visible_split_display_value",value:function(){return this.is_split_display_rule_set_explicitly()?this.get_display_rule_explicit():this.get_visible_value_grid()}},{key:"get_visible_split_display_rule",value:function(){return{display:this.get_visible_split_display_value()}}}])}();const m=function(){return d((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"find-us";u(this,e),this.container=t,this.component_name=n,this.elms_content_split=[].slice.call(this.container.querySelectorAll(".js-rrmc-".concat(this.get_component_name(),"-content--split"))),this.active_split=null,this.visible_rule=new f(this.container)}),[{key:"get_component_name",value:function(){return this.component_name}},{key:"set_active_split",value:function(e){this.active_split=e}},{key:"get_active_split_index",value:function(){return this.active_split}},{key:"get_split_elm_by_index",value:function(e){return this.elms_content_split[e]}},{key:"get_active_split_elm",value:function(){return this.get_split_elm_by_index(this.get_active_split_index())}},{key:"get_split_number",value:function(){return this.elms_content_split.length}},{key:"fix_split_height",value:function(){if(null===this.get_active_split_index())return Promise.resolve();var e=this.container.querySelector(".js-rrmc-".concat(this.get_component_name(),"-content--split-section")),t=this.get_active_split_container_height();r.uo.to(e,.5,{height:t}),this.prev_split_container_height=t}},{key:"get_active_split_container_height",value:function(){return this.get_active_split_elm().getBoundingClientRect().height}},{key:"add_tracking_indices",value:function(){this.elms_content_split.forEach((function(e){!function(e){var t=e.placeholder,n=e.root;o({root:n,attributeName:"data-tracking-linkid",placeholder:t}),o({root:n,attributeName:"data-tracking-regionid",placeholder:t})}({placeholder:"finduscontact",root:e})}))}},{key:"deactivate_current_split",value:(t=l(a().mark((function e(){var t,n=this,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:function(){},null!==this.get_active_split_index()){e.next=3;break}return e.abrupt("return",Promise.resolve());case 3:return e.abrupt("return",new Promise((function(e){n.fix_split_height();var i=n.get_active_split_elm(),o=new r.Y_;o.to(i,.5,{opacity:0}),o.add((function(){return t(i)})),o.set(i,{display:"none"}),o.add(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"activate_current_split",value:(e=l(a().mark((function e(){var t,n=this,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:function(){},null!==this.get_active_split_index()){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",new Promise((function(e){var i=n.get_active_split_elm(),o=new r.Y_;o.set(i,{opacity:0}),o.set(i,n.visible_rule.get_visible_split_display_rule()),o.add((function(){return n.fix_split_height()})),o.add((function(){return t(i)})),o.to(i,.5,{opacity:1}),o.add(e)})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t}()},8509:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(){i=function(){return t};var e,t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),s=new P(r||[]);return a(o,"_invoke",{value:C(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&o.call(E,l)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,a,s,l){var c=p(e[i],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==r(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,l,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function o(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){o(a,r,i,s,l,"next",e)}function l(e){o(a,r,i,s,l,"throw",e)}s(void 0)}))}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>c});const c=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"find-us";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.component_name=n,this.elms_nav_buttons=[].slice.call(this.container.querySelectorAll(".js-rrmc-".concat(this.get_component_name(),"-content--tab-button-container"))),this.elms_nav_underscores=[].slice.call(this.container.querySelectorAll(".js-rrmc-".concat(this.get_component_name(),"-content--underscore-container"))),this.const_isActiveClass="is-active",this.const_indexAttribute="data-index",this.selected_tab=0},t=[{key:"get_component_name",value:function(){return this.component_name}},{key:"set_selected_tab",value:function(e){this.selected_tab=e}},{key:"is_tab_click_locked",value:function(){return this.tab_click_lock}},{key:"lock_tab_click",value:function(){this.tab_click_lock=!0}},{key:"unlock_tab_click",value:function(){this.tab_click_lock=!1}},{key:"get_button_index",value:function(e){return e.getAttribute(this.const_indexAttribute)}},{key:"get_active_tab",value:function(){return this.elms_nav_buttons[this.selected_tab]}},{key:"get_active_underscore",value:function(){return this.elms_nav_underscores[this.selected_tab]}},{key:"get_tab_button",value:function(e){return e.querySelector(".js-rrmc-".concat(this.get_component_name(),"-content--tab-button"))}},{key:"deactivate_a_tab",value:function(e){this.get_tab_button(e).classList.remove(this.const_isActiveClass)}},{key:"activate_a_tab",value:function(e){this.get_tab_button(e).classList.add(this.const_isActiveClass)}},{key:"deactivate_tabs",value:function(e){var t=this;e.forEach((function(e){return t.deactivate_a_tab(e)}))}},{key:"get_underscore_line",value:function(e){return e.querySelector(".js-rrmc-".concat(this.get_component_name(),"-content--underscore"))}},{key:"deactivate_an_underscore",value:function(e){this.get_underscore_line(e).classList.remove(this.const_isActiveClass)}},{key:"activate_an_underscore",value:function(e){this.get_underscore_line(e).classList.add(this.const_isActiveClass)}},{key:"deactivate_underscores",value:function(e){var t=this;e.forEach((function(e){return t.deactivate_an_underscore(e)}))}},{key:"apply_nav_button_styles",value:(r=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.deactivate_tabs(this.elms_nav_buttons),this.activate_a_tab(this.get_active_tab());case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"apply_nav_underscore_styles",value:(n=a(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.deactivate_underscores(this.elms_nav_underscores),this.activate_an_underscore(this.get_active_underscore());case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"forEachButton",value:function(e){this.elms_nav_buttons.forEach((function(t){return e(t)}))}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}()},5e3:(e,t,n)=>{"use strict";n.r(t);var r=n(2725),i=n(259),o=n(7455),a=n(4344),s=n(637);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.footer=document.querySelector(".js-rrmc-footer"),this.footer&&(this.footerLinks=document.querySelector(".js-rrmc-footer-links"),this.footerSocial=document.querySelector(".js-rrmc-footer-social-icons-list"),this.logoLink=document.querySelector(".js-rrmc-footer-logo-link"),this.dealerLogoWrapper=this.footer.querySelector(".js-rrmc-footer--dealer-wrapper"),this.monogram=this.footer.querySelector(".rrmc-footer-monogram"),this.announce_height=function(){var e=t.footer.clientHeight-1;r.A.sub_footer_height.next(e)},this.on_click_brochure=function(e){e.preventDefault();var t=event.target.dataset.overlay;r.A.sub_overlay_manager_bus.next({action:o.xb,data:{overlayName:t}})})},t=[{key:"update_footer_logo",value:function(){var e=this.dealer_preference;if(e){var t=e.get_english_name();if(t){t=t.replace(/[.,/#!’'$%^&*;:{}=\-_`~()]/g,"").replace(/ /g,"_"),this.dealerLogoWrapper.classList.add("dealer-selected");var n=this.monogram.getAttribute("data-override-logo");this.monogram.style.backgroundImage="false"!==n?"url('".concat(n,"')"):"url('/content/dam/rrmc/dealers/dealer_logos/showroom_".concat(t,".svg')"),this.logoLink.setAttribute("href",e.get_href())}}}},{key:"setup_flags",value:function(){this.elms_flag=[].slice.call(this.footerLinks.querySelectorAll(".js-rrmc-footer-link--flag")),this.elms_flag.forEach((function(e){var t=e.getAttribute("data-locale");e.classList.add("iti__flag"),e.classList.add(a.Nv[t])}))}},{key:"update_dealer_preference",value:function(e){this.dealer_preference=e}},{key:"load",value:function(){var e=this;if(this.footer){var t=document.getElementsByClassName("js-rrmc-eg-footer-link");if(t.length)for(var n=0;n<t.length;n++)t[n].addEventListenerRR("click",this.on_click_brochure);this.setup_flags(),r.A.sub_us_banner_state.subscribe((function(){e.announce_height()})),window.addEventListenerRR("resize",this.announce_height),this.footerLinks.addEventListenerRR("click",(function(e){var t=e.target.getAttribute("href");"_blank"!=e.target.getAttribute("target")&&e.preventDefault(),e.target.hasAttribute("data-is-external")&&(0,i.fg)();var n=e.target.textContent.toLowerCase();(0,i.Gx)({event:"footerClick",eventCategory:"Footer",eventAction:"Footer Click",eventLabel:n,eventCallback:function(){t&&"_blank"!=e.target.getAttribute("target")&&(window.location=t)},eventTimeout:2e3})})),this.footerSocial&&this.footerSocial.addEventListenerRR("click",(function(e){e.target.getAttribute("href")&&((0,i.fg)(),(0,i.Gx)({event:"footerSocialClick",eventCategory:"Footer",eventAction:"Footer Social Click",eventLabel:e.target.innerHTML.toLowerCase()}))})),s.n.subscribe((function(t){e.update_dealer_preference(t),e.update_footer_logo()})),window.addEventListenerRR("resize",(function(){e.update_footer_logo()}))}}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){setTimeout((function(){document.querySelector(".js-rrmc-footer")&&(new h).load()}),1e3)}))},5914:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});var r="whispers-referral"},2870:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ye});var r=n(4692),i=n.n(r),o=n(2692),a=n.n(o),s=n(7709),l=n(6801),c=n(4344),u=n(5410),h=n.n(u),d=n(6692),p={salutation:'<div class="rrmc-selectmenu js-rrmc-selectmenu">\n    <select class="js-form-select js-rrmc-form-input" id="salutation" name="salutation"\n        aria-labelledby="salutation" aria-describedby="salutation" aria-required="false" data-default="{{Title}}">\n        <option value=""></option>\n        <option value="Mr.">{{Mr.}}</option>\n        <option value="Mrs.">{{Mrs.}}</option>\n        <option value="Ms.">{{Ms.}}</option>\n        <option value="Captain">{{Captain}}</option>\n        <option value="Chief">{{Chief}}</option>\n        <option value="Darin Sri">{{Darin Sri}}</option>\n        <option value="Datin">{{Datin}}</option>\n        <option value="Dato">{{Dato}}</option>\n        <option value="Dato Sri">{{Dato Sri}}</option>\n        <option value="Dr.">{{Dr.}}</option>\n        <option value="Engineer">{{Engineer}}</option>\n        <option value="Esq.">{{Esq.}}</option>\n        <option value="Frau">{{Frau}}</option>\n        <option value="H.E.">{{H.E.}}</option>\n        <option value="H. E. Dr.">{{H. E. Dr.}}</option>\n        <option value="H.E. Mr.">{{H.E. Mr.}}</option>\n        <option value="H.E. Mrs.">{{H.E. Mrs.}}</option>\n        <option value="H.E. Sheikh">{{H.E. Sheikh}}</option>\n        <option value="H.E. Sheikha">{{H.E. Sheikha}}</option>\n        <option value="H.H.">{{H.H.}}</option>\n        <option value="H.H. Prince">{{H.H. Prince}}</option>\n        <option value="H.H. Sheikh">{{H.H. Sheikh}}</option>\n        <option value="H.H. Sheikha">{{H.H. Sheikha}}</option>\n        <option value="H.M.">{{H.M.}}</option>\n        <option value="H.R.H.">{{H.R.H.}}</option>\n        <option value="H.R.H. Prince">{{H.R.H. Prince}}</option>\n        <option value="Herr">{{Herr}}</option>\n        <option value="Lord">{{Lord}}</option>\n        <option value="Messrs.">{{Messrs.}}</option>\n        <option value="Princess">{{Princess}}</option>\n        <option value="Puan Sri">{{Puan Sri}}</option>\n        <option value="Reverend">{{Reverend}}</option>\n        <option value="Sheikh">{{Sheikh}}</option>\n        <option value="Sheikha">{{Sheikha}}</option>\n        <option value="Sir.">{{Sir.}}</option>\n        <option value="Tan Sri">{{Tan Sri}}</option>\n        <option value="先生">{{先生}}</option>\n        <option value="女士">{{女士}}</option>\n        <option value="Mdm.">{{Mdm.}}</option>\n    </select>\n    <span class="rrmc-form-label-error -hidden"></span>\n</div>',caseSalutation:'<div class="rrmc-selectmenu js-rrmc-selectmenu">\n    <select class="js-form-select js-rrmc-form-input" id="salutation" name="salutation"\n        aria-labelledby="salutation" aria-describedby="salutation" aria-required="false" data-default="{{Title}}">\n        <option value=""></option>\n        <option value="Mr.">{{Mr.}}</option>\n        <option value="Mrs.">{{Mrs.}}</option>\n        <option value="Ms.">{{Ms.}}</option>\n        <option value="Miss.">{{Miss.}}</option>\n\t\t    <option value="先生">{{先生}}</option>\n        <option value="女士">{{女士}}</option>\n        <option value="Datin">{{Datin}}</option>\n\t\t    <option value="Dato">{{Dato}}</option>\n        <option value="Dr.">{{Dr.}}</option>\n        <option value="H.E.">{{H.E.}}</option>\n        <option value="H.H.">{{H.H.}}</option>\n        <option value="H.M.">{{H.M.}}</option>\n        <option value="H.R.H.">{{H.R.H.}}</option>\n        <option value="Lord">{{Lord}}</option>\n        <option value="Messers.">{{Messers.}}</option>\n        <option value="Puan Sri">{{Puan Sri}}</option>\n        <option value="Sheikh">{{Sheikh}}</option>\n        <option value="Sheikha">{{Sheikha}}</option>\n        <option value="Sir.">{{Sir.}}</option>\n        <option value="Tan Sri">{{Tan Sri}}</option>\n    </select>\n    <span class="rrmc-form-label-error -hidden"></span>\n</div>',localisedDealer:'\n  <div class="rrmc-localised-dealer-selector js-rrmc-localised-dealer-selector">\n    <div class="rrmc-selectmenu js-rrmc-selectmenu">\n      <select class="js-form-select js-rrmc-form-input" id="localisedDealer" name="localisedDealer"\n          aria-labelledby="localisedDealer" aria-describedby="localisedDealer" aria-required="false" data-default="{{Select a dealer}}">\n          <option value=""></option>\n      </select>\n      <span class="rrmc-form-label-error -hidden"></span>\n    </div>\n    <div class="rrmc-localised-dealer-legal js-rrmc-localised-dealer-legal">\n    </div>\n  </div>\n  ',selectMyEvent:'\n  <div class="js-rrmc-select-my-event-wrapper">\n    <div class="rrmc-select-my-event js-rrmc-select-my-event">\n      <div class="rrmc-selectmenu js-rrmc-selectmenu">\n        <select class="js-form-select js-rrmc-form-input" id="selectMyEvent" name="selectMyEvent"\n            aria-labelledby="Desired Test Drive Location" aria-describedby="Desired Test Drive Location" aria-required="false" data-default="{{Desired Test Drive Location}}">\n            <option value=""></option>\n        </select>\n        <span class="rrmc-form-label-error -hidden"></span>\n      </div>\n    </div>\n    <div class="js-rrmc-event-option-wrapper">\n    <div class="rrmc-select-my-event-option rrmc-select-my-event-option--faded js-rrmc-select-my-event-option">\n      <div class="rrmc-selectmenu js-rrmc-selectmenu">\n        <div class="select"><select class="js-form-select js-rrmc-form-input select-hidden" id="selectMyEventOption" name="selectMyEventOption" aria-labelledby="{{Date}}" aria-describedby="{{Date}}" aria-required="false" data-default="{{Date}}"><option value=""></option></select><div class="select-custom" id="medium">{{Date}}</div></div>\n        <span class="rrmc-form-label-error -hidden"></span>\n      </div>\n    </div>\n    </div>\n  </div>\n  ',modelOfInterest:'<div class="rrmc-selectmenu js-rrmc-selectmenu">\n\t<div class="rrmc-selectmenu js-rrmc-selectmenu">\n\t\t<select class="js-form-select js-rrmc-form-input js-rrmc-model-of-interest" id="modelOfInterest" name="modelOfInterest"\n\t\t\taria-labelledby="modelOfInterest" aria-describedby="modelOfInterest" aria-required="false" data-default="{{Model of Interest}}">\n\t\t\t<option value=""></option>\n\t\t\t<option value="All Models">{{All Models}}</option>\n\t\t\t<option value="Spectre">{{Spectre}}</option>\n\t\t\t<option value="Cullinan">{{Cullinan}}</option>\n\t\t\t<option value="Phantom">{{Phantom}}</option>\n\t\t\t<option value="Phantom Extended">{{Phantom Extended}}</option>\n\t\t\t<option value="New Ghost">{{Ghost}}</option>\n\t\t\t<option value="New Ghost Extended">{{Ghost Extended}}</option>\n\t\t\t<option value="Black Badge Cullinan">{{Black Badge Cullinan}}</option>\n\t\t\t<option value="Black Badge Ghost">{{Black Badge Ghost}}</option>\n\t\t<span class="rrmc-form-label-error -hidden"></span>\n</div>',modelBrochure:'<div class="rrmc-form-checkbox-section js-rrmc-form-input js-rrmc-model-brochure" data-type="checkbox">\n    <p class="rrmc-checkbox-section-header">{{MODEL BROCHURES}}</p>\n    <ul class="rrmc-form-checkbox-list">\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="cullinan" type="checkbox" id="cullinan" name="modelBrochure" data-model="cullinan">\n            <label for="Cullinan" class="rrmc-form-checkbox-label">{{Cullinan}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="dawn" type="checkbox" id="dawn" name="modelBrochure" data-model="dawn">\n            <label for="Dawn" class="rrmc-form-checkbox-label">{{Dawn}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="black-badge" type="checkbox" id="black-badge" name="modelBrochure" data-model="black-badge-dawn">\n            <label for="Dawn-Black-Badge" class="rrmc-form-checkbox-label">{{Dawn Black Badge}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="wraith" type="checkbox" id="wraith" name="modelBrochure" data-model="wraith">\n            <label for="Wraith" class="rrmc-form-checkbox-label">{{Wraith}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="black-badge" type="checkbox" id="black-badge" name="modelBrochure" data-model="black-badge-wraith">\n            <label for="Wraith-Black-Badge" class="rrmc-form-checkbox-label">{{Wraith Black Badge}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="ghost" type="checkbox" id="ghost" name="modelBrochure" data-model="ghost">\n            <label for="Ghost" class="rrmc-form-checkbox-label">{{Ghost}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="ghost-extended-wheelbase" type="checkbox" id="ghost-extended-wheelbase" name="modelBrochure" data-model="ghost-ewb">\n            <label for="Ghost-Extended-Wheelbase" class="rrmc-form-checkbox-label">{{Ghost Extended Wheelbase}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="black-badge" type="checkbox" id="black-badge" name="modelBrochure" data-model="black-badge-ghost">\n            <label for="Ghost-Black-Badge" class="rrmc-form-checkbox-label">{{Ghost Black Badge}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="phantom" type="checkbox" id="phantom" name="modelBrochure" data-model="phantom">\n            <label for="Phantom" class="rrmc-form-checkbox-label">{{Phantom}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="phantom-extended-wheelbase" type="checkbox" id="phantom-extended-wheelbase" name="modelBrochure" data-model="phantom-ewb">\n            <label for="Phantom-Extended-Wheelbase" class="rrmc-form-checkbox-label">{{Phantom Extended Wheelbase}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item -hidden">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" value="model-range" type="checkbox" id="model-range" name="modelBrochure" data-model="phantom-ewb">\n            <label for="MODEL-RANGE" class="rrmc-form-checkbox-label">{{Model Range}}</label>\n        </li>\n    </ul>\n    <span class="rrmc-form-label-error -hidden"></span>\n</div>',brandBrochure:'<div class="rrmc-form-checkbox-section js-rrmc-form-input js-rrmc-brand-brochure" data-type="checkbox">\n    <p class="rrmc-checkbox-section-header">{{BRAND BROCHURES}}</p>\n    <ul class="rrmc-form-checkbox-list rrmc-form-checkbox-brand-list">\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" id="enhanced_ownership_programme" type="checkbox" value="enhanced-ownership-programme" name="brandBrochure">\n            <label for="enhanced_ownership_programme" class="rrmc-form-checkbox-label">{{Enhanced Ownership Programme}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" id="provenance_pre_owned" type="checkbox" value="provenance-pre_owned" name="brandBrochure">\n            <label for="provenance_pre_owned" class="rrmc-form-checkbox-label">{{Provenance Pre-owned}}</label>\n        </li>\n        <li class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input js-checkbox-input-brochure" id="the_accessory_collection" type="checkbox" value="the-accessory-collection" name="brandBrochure">\n            <label for="the_accessory_collection" class="rrmc-form-checkbox-label">{{The Accessory Collection}}</label>\n        </li>\n    </ul>\n    <span class="rrmc-form-label-error -hidden"></span>\n</div>',brochureRegion:'<div class="rrmc-selectmenu js-rrmc-selectmenu rrmc-region-select">\n    <select class="js-form-select" id="region" name="region"\n        aria-labelledby="region" aria-describedby="region" aria-required="false" data-default="{{Brochure Region}}">\n        <option value=""></option>\n        <option value="Global">{{Global}}</option>\n        <option value="eu">{{EU}}</option>\n        <option value="ru">{{RU}}</option>\n        <option value="de">{{DE}}</option>\n        <option value="cn">{{CN}}</option>\n        <option value="jp">{{JP}}</option>\n        <option value="ar">{{AR}}</option>\n        <option value="us">{{US}}</option>\n    </select>\n</div>',formSuccess:'<div class="js-rrmc-reset-form js-rrmc-form-success rrmc-form-success js-rrmc-form-endstate">\n        <h2 class="rrmc-form-success-header rrmc-h2"></h2>\n        <p class="rrmc-form-succuess-copy">{{Your details have been received securely.}}</p>\n        <div class="form-row noborder ctacontainer">\n            <div class="rrmc-cta-component rrmc-button--primary rrmc-button--brand rrmc-button--add js-rrmc-button js-form-return-success js-rrmc-form-close" data-theme="brand" data-overlay-action="overlayClose">\n                <span class="rrmc-button-text js-rrmc-button-text">{{Return}}</span>\n                <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </div>\n        </div>\n    </div>',formSuccessAccessories:'<div class="js-rrmc-reset-form js-rrmc-form-success rrmc-form-success js-rrmc-form-endstate">\n        <h2 class="rrmc-form-success-header rrmc-h2"></h2>\n        <p class="rrmc-form-succuess-copy">{{Your request has been received successfully. We will aim to contact you in 48 hours.}}</p>\n        <div class="form-row noborder ctacontainer">\n            <div class="rrmc-cta-component rrmc-button--primary rrmc-button--brand rrmc-button--add js-rrmc-button js-form-return-success js-rrmc-form-close" data-overlay-action="overlayClose">\n                <span class="rrmc-button-text js-rrmc-button-text">{{Get inspired}}</span>\n                <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </div>\n        </div>\n    </div>',formFailure:'<div class="js-rrmc-form-failure rrmc-form-failure js-rrmc-form-endstate">\n        <div class="form-failure-wrapper">\n        <h2 class="rrmc-form-failure-header rrmc-h2"></h2>\n        <p class="rrmc-form-failure-copy">{{Unfortunately your details were not submitted on this occasion.<br/>Please try again, although if the problem persists try again later.}}</p>\n        <div class="form-row noborder ctacontainer">\n            <div class="rrmc-cta-component rrmc-button--primary rrmc-button--brand rrmc-button--add js-rrmc-button js-form-return">\n                <span class="rrmc-button-text js-rrmc-button-text">{{Return to form}}</span>\n                <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </div>\n        </div>\n        </div>\n    </div>',existingOwner:'<div class="rrmc-form-checkbox-section js-rrmc-form-input" data-type="checkbox">\n        <div class="rrmc-form-checkbox-item">\n            <input class="rrmc-form-checkbox-input" id="existing-owner" type="checkbox" name="existingOwner">\n            <label for="existing-owner" class="rrmc-form-checkbox-label">{{Are you an existing Rolls-Royce owner?}}</label>\n        </div>\n    </div>',communicationDisclaimer:'<div class="rrmc-form-communication-disclaimer">\n      <div class="rrmc-form-communication-disclaimer-separator"></div>\n      <div class="rrmc-form-communication-disclaimer-copy">\n        {{To receive on going marketing communications from Rolls-Royce Motor Cars Limited, please complete the section below.}}\n      </div>\n    </div>',boutique:'<div class="rrmc-form-circular-input-wrapper rrmc-form-row-marketing">\n                <article class="rrmc-marketing-article">{{<p>You agree to the information included in the above form being passed onto your chosen Rolls-Royce Motor Cars Authorised Dealer to fulfil your accessory request.</p>}}</article>\n                </div>',marketing:'<div class="rrmc-form-circular-input-wrapper rrmc-form-row-marketing">\n\t\t\t\t<article class="rrmc-marketing-article">{{<p>Please keep me informed, so I can receive:</p><ul><li>Information on products and services which are of interest to me.</li><li>Personalised communications delivered by the method that suits me best.</li><li>Unique opportunities to have my say and help shape the future of Rolls-Royce Motor Cars</li></ul>}}</article>\n\t\t\t\t        <p class="rrmc-form-acceptance-error"></p>\n                <input class="rrmc-form-circular-input js-rrmc-marketing" id="agreeMarketing" type="checkbox" name="agreeMarketing">\n                <label for="agreeMarketing" class="rrmc-form-circular-label js-rrmc-marketing">\n\t\t\t\t<p class="">{{I would like to receive marketing communications on products, services and events offered by Rolls-Royce Motor Cars Limited. I understand these communications may be personalised to me based on my interests, preferences and use of products and services, including invitations to provide customer experience feedback.}}</p>\n                </label>\n\t\t\t\t<span href="#" class="js-rrmc-form-more-information rrmc-form-more-information">{{More Information}}</span>\n                </div>',marketingOptions:'<div class="rrmc-form-marketing-options -hidden">\n                    <p class="rrmc-form-marketing-heading">{{Please select the channels we may use to contact you:}}</p>\n                    <p class="rrmc-form-marketing-error"></p>\n                    <ul class="rrmc-form-checkbox-list">\n                    <li class="rrmc-form-checkbox-item">\n                        <input class="rrmc-form-checkbox-input" id="email" type="checkbox" value="email" name="agreeEmailMarketing">\n                        <label for="email" class="rrmc-form-checkbox-label">{{Email}}</label>\n                    </li>\n                    <li class="rrmc-form-checkbox-item">\n                        <input class="rrmc-form-checkbox-input" id="phone" type="checkbox" value="phone" name="agreePhoneMarketing">\n                        <label for="phone" class="rrmc-form-checkbox-label">{{Phone}}</label>\n                    </li>\n                    <li class="rrmc-form-checkbox-item">\n                        <input class="rrmc-form-checkbox-input" id="inCarMarketing" type="checkbox" value="inCarMarketing" name="agreeInCarMarketing">\n                        <label for="inCarMarketing" class="rrmc-form-checkbox-label">{{In-car (where available)}}</label>\n                    </li>\n                    <li class="rrmc-form-checkbox-item">\n                        <input class="rrmc-form-checkbox-input" id="messengerMarketing" type="checkbox" value="messengerMarketing" name="agreeMessengerMarketing">\n                        <label for="messengerMarketing" class="rrmc-form-checkbox-label">{{Messenger Services (e.g. SMS, Whatsapp)}}</label>\n                    </li>\n                    </ul>\n                    <p>{{You can amend or withdraw your marketing preferences, or request information about your data stored by us at any time.}}<br/><span href="#" class="js-rrmc-form-legal-information rrmc-form-more-information">{{More Information}}</span>\n                    </p>\n                </div>',submit:'<div class="rrmc-form-row rrmc-form-row-submit">\n                    <button type=""\n                        class="js-rrmc-form-submit rrmc-form-submit js-rrmc-button rrmc-button--add js-rrmc-button rrmc-cta-component rrmc-button--primary">\n                        <span class="rrmc-button-background js-rrmc-button-background"></span>\n                        <span class="rrmc-button-text js-rrmc-button-text js-rrmc-form-submit">{{Send Request}}</span>\n                        <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n                    </button>\n                </div>',textarea:'<div class="rrmc-form-row rrmc-form-row--labelled rrmc-form-row-textarea"><label for="rrmc-textarea" class="rrmc-textarea-label"></label><textarea class="rrmc-textarea" id="question" name="question" aria-label="{{Type enquiry here}}" placeholder="{{Type enquiry here}}"></textarea></div>',marketingInfo:'<div class="js-rrmc-marketing-popup rrmc-marketing-popup">\n                        <div class="rrmc-marketing-popup-wrap">\n                            <button type="button" data-theme="dark" class="rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--dark rrmc-button--close js-rrmc-marketing-button-close rrmc-marketing-button-close">\n                            <span class="rrmc-cta-i js-rrmc-marketing-button-close"></span>\n                            </button>\n                            <h4 class="rrmc-h4 rrmc-marketing-popup-header">{{More Information About Marketing Communications}}</h4>\n                            <p class="rrmc-marketing-popup-copy">{{You agree that Rolls-Royce Motor Cars Limited (‘us’, ‘our’, ‘we’), may process and use your personal data to communicate information about our products, services and events which we think may be of interest to you, via your chosen channels. Such communications may include requests to participate in customer experience feedback sessions.}}</p>\n                            <p class="rrmc-marketing-popup-copy">{{In order to ensure that you receive relevant and personalised communications, we will use data we hold about you to create an individual customer profile. This may include but is not limited to data you have provided to us or which is generated by your use of our products, for example contact details, preferences, customer history, vehicle data, usage of apps and other digital platforms and online behaviour. Further information about these customer profiles can be found in our <a href=\'/en_GB/information/privacy-policy.html\' target=\'_blank\'>Privacy Policy</a>.}}</p>\n                        </div>\n                    </div>',legalInfo:'<div class="js-rrmc-marketing-popup rrmc-marketing-popup">\n                        <div class="rrmc-marketing-popup-wrap">\n                            <button type="button" data-theme="dark" class="rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--dark rrmc-button--close js-rrmc-marketing-button-close rrmc-marketing-button-close">\n                            <span class="rrmc-cta-i js-rrmc-marketing-button-close"></span>\n                            </button>\n                            <h4 class="rrmc-h4 rrmc-marketing-popup-header">{{More Information About Your Data And Preferences}}</h4>\n                            <p class="rrmc-marketing-popup-copy">{{You can amend or withdraw your marketing preferences by contacting us via one of the following channels:}}</p>\n                            <p class="rrmc-marketing-popup-copy">{{Calling the Customer Contact Team on <a href=\'tel:+44 (0)1243 525700\'>+44 (0)1243 525700</a> (09:00 - 17:00 Monday to Friday) Sending an email to <a href=\'mailto:enquiries@rolls-roycemotorcars.com\'>enquiries@rolls-roycemotorcars.com</a>. You are also able to use the above channels to ask us for information about the personal data Rolls-Royce Motor Cars Limited stores about you, as well as request the correction, deletion or restriction of use of your personal data. Further details regarding the processing of your personal data can be found in our <a href=\'/en_GB/information/privacy-policy.html\' target=\'_blank\'>Privacy Policy</a>.}}</p>\n                        </div>\n                    </div>',countries:'<div class="rrmc-selectmenu js-rrmc-selectmenu">\n    <select class="js-form-select js-rrmc-form-input" id="country" name="country"\n        aria-labelledby="country" aria-describedby="country" aria-required="false" data-default="{{Country}}">\n\t\t<option value="" selected="selected"></option>\n    <option value="United Kingdom">{{United Kingdom}}</option>\n\t\t<option value="United States">{{United States}}</option>\n\t\t<option value="Afghanistan">{{Afghanistan}}</option>\n    <option value="Aland Islands">{{Aland Islands}}</option>\n\t\t<option value="Albania">{{Albania}}</option>\n\t\t<option value="Algeria">{{Algeria}}</option>\n\t\t<option value="American Samoa">{{American Samoa}}</option>\n\t\t<option value="American Virgin Islands">{{American Virgin Islands}}</option>\n\t\t<option value="Andorra">{{Andorra}}</option>\n\t\t<option value="Angola">{{Angola}}</option>\n\t\t<option value="Anguilla">{{Anguilla}}</option>\n\t\t<option value="Antarctica">{{Antarctica}}</option>\n\t\t<option value="Antigua and Barbuda">{{Antigua and Barbuda}}</option>\n\t\t<option value="Argentina">{{Argentina}}</option>\n\t\t<option value="Armenia">{{Armenia}}</option>\n\t\t<option value="Aruba">{{Aruba}}</option>\n\t\t<option value="Australia">{{Australia}}</option>\n\t\t<option value="Austria">{{Austria}}</option>\n\t\t<option value="Azerbaijan">{{Azerbaijan}}</option>\n\t\t<option value="Bahamas">{{Bahamas}}</option>\n\t\t<option value="Bahrain">{{Bahrain}}</option>\n\t\t<option value="Bangladesh">{{Bangladesh}}</option>\n\t\t<option value="Barbados">{{Barbados}}</option>\n\t\t<option value="Belarus">{{Belarus}}</option>\n\t\t<option value="Belgium">{{Belgium}}</option>\n\t\t<option value="Belize">{{Belize}}</option>\n\t\t<option value="Benin">{{Benin}}</option>\n\t\t<option value="Bermuda">{{Bermuda}}</option>\n\t\t<option value="Bhutan">{{Bhutan}}</option>\n\t\t<option value="Bolivia, Plurinational State of">{{Bolivia, Plurinational State of}}</option>\n\t\t<option value="Bosnia and Herzegovina">{{Bosnia and Herzegovina}}</option>\n\t\t<option value="Botswana">{{Botswana}}</option>\n\t\t<option value="Bouvet Island">{{Bouvet Island}}</option>\n\t\t<option value="Brazil">{{Brazil}}</option>\n\t\t<option value="Brunei Darussalam">{{Brunei Darussalam}}</option>\n\t\t<option value="Bulgaria">{{Bulgaria}}</option>\n\t\t<option value="Burkina Faso">{{Burkina Faso}}</option>\n\t\t<option value="Burundi">{{Burundi}}</option>\n\t\t<option value="Cambodia">{{Cambodia}}</option>\n\t\t<option value="Cameroon">{{Cameroon}}</option>\n\t\t<option value="Canada">{{Canada}}</option>\n\t\t<option value="Cape Verde">{{Cape Verde}}</option>\n\t\t<option value="Cayman Islands">{{Cayman Islands}}</option>\n\t\t<option value="Central African Republic">{{Central African Republic}}</option>\n\t\t<option value="Chad">{{Chad}}</option>\n\t\t<option value="Chile">{{Chile}}</option>\n\t\t<option value="China">{{China}}</option>\n\t\t<option value="Christmas Island">{{Christmas Island}}</option>\n\t\t<option value="Cocos (Keeling) Islands">{{Cocos (Keeling) Islands}}</option>\n\t\t<option value="Colombia">{{Colombia}}</option>\n\t\t<option value="Congo">{{Congo}}</option>\n\t\t<option value="Congo, The Democratic Republic of the">{{Congo, The Democratic Republic of the}}</option>\n\t\t<option value="Cook Islands">{{Cook Islands}}</option>\n\t\t<option value="Costa Rica">{{Costa Rica}}</option>\n\t\t<option value="Cote d\'Ivoire">{{Cote d\'Ivoire}}</option>\n\t\t<option value="Croatia">{{Croatia}}</option>\n\t\t<option value="Cuba">{{Cuba}}</option>\n\t\t<option value="Cyprus">{{Cyprus}}</option>\n\t\t<option value="Czech Republic">{{Czech Republic}}</option>\n\t\t<option value="Denmark">{{Denmark}}</option>\n\t\t<option value="Djibouti">{{Djibouti}}</option>\n\t\t<option value="Dominica">{{Dominica}}</option>\n\t\t<option value="Dominican Republic">{{Dominican Republic}}</option>\n\t\t<option value="Dutch Antilles">{{Dutch Antilles}}</option>\n\t\t<option value="Ecuador">{{Ecuador}}</option>\n\t\t<option value="Egypt">{{Egypt}}</option>\n\t\t<option value="El Salvador">{{El Salvador}}</option>\n\t\t<option value="Equatorial Guinea">{{Equatorial Guinea}}</option>\n\t\t<option value="Eritrea">{{Eritrea}}</option>\n\t\t<option value="Estonia">{{Estonia}}</option>\n\t\t<option value="Ethiopia">{{Ethiopia}}</option>\n\t\t<option value="Falkland Islands (Malvinas)">{{Falkland Islands (Malvinas)}}</option>\n\t\t<option value="Faroe Islands">{{Faroe Islands}}</option>\n\t\t<option value="Fiji">{{Fiji}}</option>\n\t\t<option value="Finland">{{Finland}}</option>\n\t\t<option value="France">{{France}}</option>\n\t\t<option value="French Guiana">{{French Guiana}}</option>\n\t\t<option value="French Polynesia">{{French Polynesia}}</option>\n\t\t<option value="French Southern Territories">{{French Southern Territories}}</option>\n\t\t<option value="Gabon">{{Gabon}}</option>\n\t\t<option value="Gambia">{{Gambia}}</option>\n\t\t<option value="Georgia">{{Georgia}}</option>\n\t\t<option value="Germany">{{Germany}}</option>\n\t\t<option value="Ghana">{{Ghana}}</option>\n\t\t<option value="Gibraltar">{{Gibraltar}}</option>\n\t\t<option value="Greece">{{Greece}}</option>\n\t\t<option value="Greenland">{{Greenland}}</option>\n\t\t<option value="Grenada">{{Grenada}}</option>\n\t\t<option value="Guadeloupe">{{Guadeloupe}}</option>\n\t\t<option value="Guam">{{Guam}}</option>\n\t\t<option value="Guatemala">{{Guatemala}}</option>\n\t\t<option value="Guernsey">{{Guernsey}}</option>\n\t\t<option value="Guinea">{{Guinea}}</option>\n\t\t<option value="Guinea-Bissau">{{Guinea-Bissau}}</option>\n\t\t<option value="Guyana">{{Guyana}}</option>\n\t\t<option value="Haiti">{{Haiti}}</option>\n\t\t<option value="Holy See (Vatican City State)">{{Holy See (Vatican City State)}}</option>\n\t\t<option value="Honduras">{{Honduras}}</option>\n\t\t<option value="Hong Kong SAR">{{Hong Kong}}</option>\n\t\t<option value="Hungary">{{Hungary}}</option>\n\t\t<option value="Iceland">{{Iceland}}</option>\n\t\t<option value="India">{{India}}</option>\n\t\t<option value="Indonesia">{{Indonesia}}</option>\n\t\t<option value="Iran, Islamic Republic of">{{Iran, Islamic Republic of}}</option>\n\t\t<option value="Iraq">{{Iraq}}</option>\n\t\t<option value="Ireland">{{Ireland}}</option>\n\t\t<option value="Israel">{{Israel}}</option>\n\t\t<option value="Italy">{{Italy}}</option>\n\t\t<option value="Jamaica">{{Jamaica}}</option>\n\t\t<option value="Japan">{{Japan}}</option>\n\t\t<option value="Jersey">{{Jersey}}</option>\n\t\t<option value="Jordan">{{Jordan}}</option>\n\t\t<option value="Kazakhstan">{{Kazakhstan}}</option>\n\t\t<option value="Kenya">{{Kenya}}</option>\n\t\t<option value="Kiribati">{{Kiribati}}</option>\n\t\t<option value="Kosovo">{{Kosovo}}</option>\n\t\t<option value="Korea, Democratic People\'s Republic of">{{Korea, Democratic People\'s Republic of}}</option>\n\t\t<option value="Korea, Republic of">{{Korea, Republic of}}</option>\n\t\t<option value="Kuwait">{{Kuwait}}</option>\n\t\t<option value="Kyrgyzstan">{{Kyrgyzstan}}</option>\n\t\t<option value="Lao People\'s Democratic Republic">{{Lao People\'s Democratic Republic}}</option>\n\t\t<option value="Latvia">{{Latvia}}</option>\n\t\t<option value="Lebanon">{{Lebanon}}</option>\n\t\t<option value="Lesotho">{{Lesotho}}</option>\n\t\t<option value="Liberia">{{Liberia}}</option>\n\t\t<option value="Libyan Arab Jamahiriya">{{Libyan Arab Jamahiriya}}</option>\n\t\t<option value="Liechtenstein">{{Liechtenstein}}</option>\n\t\t<option value="Lithuania">{{Lithuania}}</option>\n\t\t<option value="Luxembourg">{{Luxembourg}}</option>\n\t\t<option value="Macedonia, The Former Yugoslav Republic of">{{Macedonia, The Former Yugoslav Republic of}}</option>\n\t\t<option value="Macao SAR">{{Macau}}</option>\n\t\t<option value="Madagascar">{{Madagascar}}</option>\n\t\t<option value="Malawi">{{Malawi}}</option>\n\t\t<option value="Malaysia">{{Malaysia}}</option>\n\t\t<option value="Maldives">{{Maldives}}</option>\n\t\t<option value="Mali">{{Mali}}</option>\n\t\t<option value="Malta">{{Malta}}</option>\n\t\t<option value="Martinique">{{Martinique}}</option>\n\t\t<option value="Mauritania">{{Mauritania}}</option>\n\t\t<option value="Mauritius">{{Mauritius}}</option>\n\t\t<option value="Mayotte">{{Mayotte}}</option>\n\t\t<option value="Mexico">{{Mexico}}</option>\n\t\t<option value="Micronesia, Federated States of">{{Micronesia, Federated States of}}</option>\n\t\t<option value="Moldova, Republic of">{{Moldova, Republic of}}</option>\n\t\t<option value="Monaco">{{Monaco}}</option>\n\t\t<option value="Mongolia">{{Mongolia}}</option>\n\t\t<option value="Montenegro">{{Montenegro}}</option>\n\t\t<option value="Montserrat">{{Montserrat}}</option>\n\t\t<option value="Morocco">{{Morocco}}</option>\n\t\t<option value="Mozambique">{{Mozambique}}</option>\n\t\t<option value="Myanmar">{{Myanmar}}</option>\n\t\t<option value="Namibia">{{Namibia}}</option>\n\t\t<option value="Nauru">{{Nauru}}</option>\n\t\t<option value="Nepal">{{Nepal}}</option>\n\t\t<option value="Netherlands">{{Netherlands}}</option>\n\t\t<option value="New Caledonia">{{New Caledonia}}</option>\n\t\t<option value="New Zealand">{{New Zealand}}</option>\n\t\t<option value="Nicaragua">{{Nicaragua}}</option>\n\t\t<option value="Niger">{{Niger}}</option>\n\t\t<option value="Nigeria">{{Nigeria}}</option>\n\t\t<option value="Niue">{{Niue}}</option>\n\t\t<option value="Norfolk Island">{{Norfolk Island}}</option>\n\t\t<option value="Northern Mariana Islands">{{Northern Mariana Islands}}</option>\n\t\t<option value="Norway">{{Norway}}</option>\n\t\t<option value="Oman">{{Oman}}</option>\n\t\t<option value="Pakistan">{{Pakistan}}</option>\n\t\t<option value="Palau">{{Palau}}</option>\n\t\t<option value="Palestinian Territory, Occupied">{{Palestinian Territory, Occupied}}</option>\n\t\t<option value="Panama">{{Panama}}</option>\n\t\t<option value="Papua New Guinea">{{Papua New Guinea}}</option>\n\t\t<option value="Paraguay">{{Paraguay}}</option>\n\t\t<option value="Peru">{{Peru}}</option>\n\t\t<option value="Philippines">{{Philippines}}</option>\n\t\t<option value="Pitcairn">{{Pitcairn}}</option>\n\t\t<option value="Poland">{{Poland}}</option>\n\t\t<option value="Portugal">{{Portugal}}</option>\n\t\t<option value="Puerto Rico">{{Puerto Rico}}</option>\n\t\t<option value="Qatar">{{Qatar}}</option>\n\t\t<option value="Reunion">{{Reunion}}</option>\n\t\t<option value="Romania">{{Romania}}</option>\n\t\t<option value="Russian Federation">{{Russian Federation}}</option>\n\t\t<option value="Rwanda">{{Rwanda}}</option>\n\t\t<option value="Saint Barthélemy">{{Saint Barthélemy}}</option>\n\t\t<option value="Saint Helena, Ascension and Tristan Da Cunha">{{Saint Helena, Ascension and Tristan Da Cunha}}</option>\n\t\t<option value="Saint Kitts and Nevis">{{Saint Kitts and Nevis}}</option>\n\t\t<option value="Saint Lucia">{{Saint Lucia}}</option>\n\t\t<option value="Saint Pierre and Miquelon">{{Saint Pierre and Miquelon}}</option>\n\t\t<option value="Saint Vincent and the Grenadines">{{Saint Vincent and the Grenadines}}</option>\n\t\t<option value="Samoa">{{Samoa}}</option>\n\t\t<option value="San Marino">{{San Marino}}</option>\n\t\t<option value="Sao Tome and Principe">{{Sao Tome and Principe}}</option>\n\t\t<option value="Saudi Arabia">{{Saudi Arabia}}</option>\n\t\t<option value="Senegal">{{Senegal}}</option>\n\t\t<option value="Serbia">{{Serbia}}</option>\n\t\t<option value="Seychelles">{{Seychelles}}</option>\n\t\t<option value="Sierra Leone">{{Sierra Leone}}</option>\n\t\t<option value="Singapore">{{Singapore}}</option>\n\t\t<option value="Slovakia">{{Slovakia}}</option>\n\t\t<option value="Slovenia">{{Slovenia}}</option>\n\t\t<option value="Solomon Islands">{{Solomon Islands}}</option>\n\t\t<option value="Somalia">{{Somalia}}</option>\n\t\t<option value="South Africa">{{South Africa}}</option>\n    <option value="South Sudan">{{South Sudan}}</option>\n\t\t<option value="Spain">{{Spain}}</option>\n\t\t<option value="Sri Lanka">{{Sri Lanka}}</option>\n\t\t<option value="Sudan">{{Sudan}}</option>\n\t\t<option value="Suriname">{{Suriname}}</option>\n\t\t<option value="Svalbard and Jan Mayen">{{Svalbard and Jan Mayen}}</option>\n\t\t<option value="Swaziland">{{Swaziland}}</option>\n\t\t<option value="Sweden">{{Sweden}}</option>\n\t\t<option value="Switzerland">{{Switzerland}}</option>\n\t\t<option value="Syrian Arab Republic">{{Syrian Arab Republic}}</option>\n\t\t<option value="Taiwan, Province of China">{{Taiwan}}</option>\n\t\t<option value="Tajikistan">{{Tajikistan}}</option>\n\t\t<option value="Tanzania, United Republic of">{{Tanzania, United Republic of}}</option>\n\t\t<option value="Thailand">{{Thailand}}</option>\n\t\t<option value="Timor-Leste">{{Timor-Leste}}</option>\n\t\t<option value="Togo">{{Togo}}</option>\n\t\t<option value="Tokelau">{{Tokelau}}</option>\n\t\t<option value="Tonga">{{Tonga}}</option>\n\t\t<option value="Trinidad and Tobago">{{Trinidad and Tobago}}</option>\n\t\t<option value="Tunisia">{{Tunisia}}</option>\n\t\t<option value="Turkey">{{Turkey}}</option>\n\t\t<option value="Turkmenistan">{{Turkmenistan}}</option>\n\t\t<option value="Turks and Caicos Islands">{{Turks and Caicos Islands}}</option>\n\t\t<option value="Tuvalu">{{Tuvalu}}</option>\n\t\t<option value="Uganda">{{Uganda}}</option>\n\t\t<option value="Ukraine">{{Ukraine}}</option>\n\t\t<option value="United Arab Emirates">{{United Arab Emirates}}</option>\n\t\t<option value="United Kingdom">{{United Kingdom}}</option>\n\t\t<option value="United States Minor Outlying Islands">{{United States Minor Outlying Islands}}</option>\n\t\t<option value="Uruguay">{{Uruguay}}</option>\n\t\t<option value="Uzbekistan">{{Uzbekistan}}</option>\n\t\t<option value="Vanuatu">{{Vanuatu}}</option>\n\t\t<option value="Venezuela, Bolivarian Republic of">{{Venezuela, Bolivarian Republic of}}</option>\n\t\t<option value="Viet Nam">{{Viet Nam}}</option>\n\t\t<option value="Virgin Islands, British">{{Virgin Islands, British}}</option>\n\t\t<option value="Wallis and Futuna">{{Wallis and Futuna}}</option>\n\t\t<option value="Western Sahara">{{Western Sahara}}</option>\n\t\t<option value="Yemen">{{Yemen}}</option>\n\t\t<option value="Zambia">{{Zambia}}</option>\n\t\t<option value="Zimbabwe">{{Zimbabwe}}</option>\n    </select>\n    <span class="rrmc-form-label-error -hidden"></span>\n</div>',preferredDealer:'<div class="js-rrmc-preferred-dealer rrmc-preferred-dealer">\n      <div class="rrmc-preferred-dealer-title">{{Preferred dealer}}</div>\n      <div class="js-rrmc-preferred-dealer-dealer-name rrmc-preferred-dealer-dealer-name">\n        {{Rolls-Royce motor cars london}}\n      </div>\n      <div>\n        <button class="js-rrmc-preferred-dealer-change rrmc-preferred-dealer-change"\n        type="button">{{Change}}</button>\n      </div>\n      <input type="hidden" id="wishList" name="wishList" value="">\n    </div>\n    <input class="rrmc-form-input" type="hidden" id="dealerNumber" name="dealerNumber" value="%dealerNumber">',whispersMarketing:'<div class="rrmc-form-row-whispers-marketing">{{<p>Whispers membership is reserved exclusively for current owners of Rolls-Royce motor cars produced in Goodwood since 2003. As such, we may need to validate your ownership as part of your membership request. </p><br/><p>The information you provide on this form, and any supplementary information you are requested to provide such as proof of vehicle ownership, will be used by Rolls-Royce Motor Cars Limited for the purposes of processing your Whispers application. Your details may be shared with Rolls-Royce Motor Cars Limited’s respective parent, service providers and assigns, in addition to our carefully selected Whispers partners (if you request their services), as necessary to enable us to fulfil your requests. Except as otherwise stated, we will not provide your information to third parties.</p><br/>}}</div>',whispersDisclaimer:'<div class="rrmc-form-row-whispers-disclaimer">{{<br/><p class="whispers-disclaimer">Whispers has been designed exclusively for Rolls-Royce owners.<br/>Kindly note that Whispers membership is not guaranteed through the submission of this form.</p>}}</div>',whispersReferralMarketing:'<div class="rrmc-form-row-whispers-marketing">{{<p>Whispers membership is reserved exclusively for current owners of Rolls-Royce motor cars produced in Goodwood since 2003 and their designated Plus One. As such, we may need to validate your ownership as part of your membership request. </p><br/><p>Rolls-Royce owners can add one Plus One to their existing account, no further individuals may be added.</p><br/><p>The information you provide on this form, and any supplementary information you are requested to provide such as proof of vehicle ownership, will be used by Rolls-Royce Motor Cars Limited for the purposes of processing your Whispers application. Your details may be shared with Rolls-Royce Motor Cars Limited’s respective parent, service providers and assigns, in addition to our carefully selected Whispers partners (if you request their services), as necessary to enable us to fulfil your requests. Except as otherwise stated, we will not provide your information to third parties.</p><br/>}}</div>',whispersReferralDisclaimer:'<div class="rrmc-form-row-whispers-disclaimer">{{<br/><p class="whispers-disclaimer">To maintain the exclusivity of the Whispers Community, the complimentary Plus One membership is reserved solely for a spouse or life partner of the Rolls-Royce owner. As such, Owners can add one Plus One to their existing account, no further individuals may be added. Kindly note that Whispers membership is not guaranteed through the submission of this form.</p>}}</div>',subscribeIntro:"<div class='rrmc-form-row-subscribe-intro'>{{<p>Rolls-Royce invites you to expand your horizons, to push beyond the boundaries of normality, to inspire greatness.<br/><br/>It takes 90 pairs of hands, more than 600 hours to design and construct each Rolls-Royce Motor Car before it is handed to its owner. Small things make perfection, but perfection is no small thing. At Rolls-Royce, we aim to deliver the pinnacle luxury driving experience, full of potential and endless possibilities.<br/><br/>Inspiring Greatness</p>}}</div>",kryptosQuizIntro:"<div class='rrmc-form-row-kryptos-quiz-intro'><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>",kryptosTAndC:'<div class="rrmc-form-checkbox-section js-rrmc-form-input" data-type="checkbox">\n                        <div class="rrmc-form-checkbox-item">\n                            <input class="rrmc-form-checkbox-input" id="terms-and-conditions" type="checkbox" name="terms-and-conditions">\n                            <label for="terms-and-conditions" class="rrmc-form-checkbox-label">I accept the <a href="" target="_blank">terms & conditions</a> of the competition.</label>\n                        </div>\n                   </div>',USMarketing:'<div class="rrmc-form-row-marketing">\n                        <article class="rrmc-marketing-article">\n                            <p>{{I would like to receive marketing communications on products, services and events offered by Rolls-Royce Motor Cars Limited. I understand these communications may be personalised to me based on my interests, preferences and use of products and services, including invitations to provide customer experience feedback.}}</p>\n                        </article>\n                    </div>',rr25Disclaimer:"<div class=\"rrmc-form-row-disclaimer rrmc-rr25-jwl-disclaimer\">\n        <p>{{Upon submitting the request you will be contacted by our Rolls-Royce Motor Cars Ltd Client Contact Team to discuss your interest.  Unless otherwise stated we do not share your personal data with third parties. For more information on how we handle personal data please see our <a href='/en_GB/information/privacy-policy.html' target='_blank'>Privacy Policy</a>.}}</p>\n    </div>"};function f(e,t){return(window.rrmc_i18n||{})[t]||t}function m(e){return p[e].replace(/{{([^}]+)}}/g,f)}var v=n(7455),g=n(259);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}const w=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$sandbox=t,this.$selectMenu=this.$sandbox.find(".js-form-select"),this.onSelectFn=function(){},this.onCloseFn=function(){}},t=[{key:"on",value:function(e,t){this.$sandbox.on(e,t)}},{key:"setOnSelect",value:function(e){return this.onSelectFn=e,this}},{key:"setOnClose",value:function(e){return this.onCloseFn=e,this}},{key:"select",value:function(e){var t=this;this.$customListItems.each((function(n,r){var i=r.getAttribute("rel");if(i===e){var o=r.innerText,a=i;t.$styledSelect.text(o),t.$selectMenu.val(a),t.$selectMenu.attr("data-preset",o),t.$selectMenu.trigger("menu:change",[o,a])}}))}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this,r=this.$selectMenu.closest(".active-form form");n.parentFormName=r[0].id;var o=this.$selectMenu.children("option").length;this.$selectMenu.addClass("select-hidden"),this.$selectMenu.wrap('<div class="select"></div>'),this.$selectMenu.after('<div class="select-custom" id="'.concat(this.$selectMenu[0].id,'"></div>')),this.$styledSelect=this.$selectMenu.next("div.select-custom"),this.$styledSelect.text(this.$selectMenu.children("option").eq(0).text());for(var a=i()("<ul />",{class:"select-options"}).insertAfter(this.$styledSelect),s=0;s<o;s++)i()("<li />",{text:this.$selectMenu.children("option").eq(s).text(),rel:this.$selectMenu.children("option").eq(s).val()}).appendTo(a);return this.$customListItems=a.children("li"),this.$customListItems.click((function(e){e.stopPropagation();var t,r,o=e.target.innerHTML,s=e.target.getAttribute("rel");n.$styledSelect.text(o),n.$selectMenu.val(s),n.$selectMenu.trigger("menu:change",[o,s]),a.hide(),i()(".select-custom").removeClass("select-active"),e.target.innerHTML.length>0&&i()(".select-custom").parent().next("span.rrmc-form-label-error").addClass("-hidden");var l="default";switch(void 0!==window.ctaWindowProps&&void 0!==window.ctaWindowProps.existingOwner&&(l=!0===window.ctaWindowProps.existingOwner?"owner":"prospect"),n.parentFormName){case"general-enquiry":t="".concat(l," general enq");break;case"purchase-enquiry":t="".concat(l," purchase enq");break;default:t=n.parentFormName}r="model of interest"===n.$selectMenu.get(0).dataset.default.toLowerCase()?"field: model: ".concat(e.target.getAttribute("rel").toLowerCase()):"field: ".concat(n.$selectMenu.get(0).dataset.default.toLowerCase()),n.onSelectFn({eventLabel:r}),g.Gx({event:"formClick",eventCategory:"form",eventAction:t,eventLabel:r,selectedValue:e.target.getAttribute("rel")})})),this.$styledSelect.click((function(e){e.stopPropagation();var t=i()(this).next(n.$selectMenu),r=i()(".select-options").not(t);r.removeClass("select-active").hide(),r.next(".select-options").hide(),i()(this).hasClass("select-active")?(i()(this).removeClass("select-active"),a.hide(),i()(this).text()||i()(this).css("border-bottom","2px solid #f2f2f2")):(i()(this).next(".select-options").css({display:"block","z-index":"10"}),i()("div.select-custom.select-active").not(t).each((function(){t.removeClass("select-active").next("ul.select-options").hide()})),i()(this).addClass("select-active"),t.toggleClass("select-active").next("ul.select-options").show(),i()(".rrmc-option-default").addClass("-hidden"))})),i()(document).click((function(){if(n.$styledSelect.hasClass("select-active")){var e="close";n.onCloseFn({eventLabel:e}),g.Gx({event:"formClick",eventCategory:"form",eventAction:n.$styledSelect.get(0).id,eventLabel:e})}})),e&&this.select(t),this}}],t&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var x=n(2725);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}const T=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_dealership_name=this.container.querySelector(".js-rrmc-preferred-dealer-dealer-name"),this.elm_change_cta=this.container.querySelector(".js-rrmc-preferred-dealer-change"),this.elm_wishlist=this.container.querySelector("#wishList"),this.on_change=function(){x.A.sub_overlay_manager_bus.next({action:v.xb,data:{overlayName:"g-dealer-locator",overlayPurpose:"accessoriesRequest",wishListProducts:n.list_products}})},this.populate_title=function(e){n.elm_dealership_name.textContent=n.dealership_title,n.elm_wishlist.value=JSON.stringify(e.data)}},t=[{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.list_products=e.wishListProducts,this.dealership_title=e.dealership_title,this.elm_change_cta.addEventListenerRR("click",this.on_change),this.sub_wishlist=x.A.sub_my_list_updated.subscribe({next:this.populate_title})}},{key:"destroy",value:function(){this.sub_wishlist.unsubscribe(),this.elm_change_cta.removeEventListenerRR("click",this.on_change)}}],t&&E(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function P(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function I(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}var D=function(){return P((function e(){L(this,e)}),null,[{key:"from",value:function(e){return Array.isArray(e)?e[0]:e}}])}(),O=function(){return P((function e(t,n,r){L(this,e),this.data=t,this.value_property=n,this.text_property=r,this.setup_options()}),[{key:"make_empty_option",value:function(){return this.make_option(C(C({},this.value_property,""),this.text_property,""))}},{key:"setup_options",value:function(){this.options=[this.make_empty_option()];var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.data);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.options.push(this.make_option(n))}}catch(e){t.e(e)}finally{t.f()}}},{key:"make_option",value:function(e){return{value:D.from(e[this.value_property]),text:D.from(e[this.text_property])}}},{key:"render_entry",value:function(e){return'<option value="'.concat(e.value,'">').concat(e.text,"</option>")}},{key:"render_options",value:function(){var e=this;return this.options.reduce((function(t,n){return"".concat(t).concat(e.render_entry(n))}),"")}},{key:"toString",value:function(){return this.render_options()}}])}();const F=function(){return P((function e(t){var n=this;L(this,e),this.container=t[0],this.elm_dropdown=this.container.querySelector(".js-rrmc-selectmenu"),this.elm_legal=this.container.querySelector(".js-rrmc-localised-dealer-legal"),this.elm_select=this.container.querySelector(".js-form-select"),this.on_dealer_change=function(e,t,r){n.selected_dealer_number=r,n.paste_legal_copy()}}),[{key:"paste_legal_copy",value:function(){this.get_legal_copy_by_dealer_number(),this.elm_legal.innerHTML=this.legal_copy}},{key:"find_dealer_data_entry_by_dealer_number",value:function(){var e=this;return this.selected_dealer_number,window.rrmc_form_dealers.filter((function(t){return t.dealerNumber==e.selected_dealer_number}))[0]}},{key:"get_legal_copy_by_dealer_number",value:function(){var e=this.find_dealer_data_entry_by_dealer_number();this.legal_copy=D.from(e.formText)||""}},{key:"populate_select",value:function(){var e=new O(window.rrmc_form_dealers,"dealerNumber","shortName");this.elm_select.innerHTML=e.toString()}},{key:"get_first_option_value",value:function(){var e=this.elm_select.firstChild;return e?e.value:""}},{key:"load",value:function(){this.populate_select(),this.inst_dropdown=new w(i()(this.elm_dropdown)),this.inst_dropdown.load(),this.inst_dropdown.on("menu:change",this.on_dealer_change)}}])}();var N=n(8521);function j(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function U(e,t,n){return(t=V(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function q(e,t,n){return t&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function V(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==z(t)?t:t+""}var W=function(){return q((function e(){G(this,e)}),null,[{key:"from",value:function(e){return Array.isArray(e)?e[0]:e}}])}(),Y='\n    <div class="rrmc-select-my-event-option js-rrmc-select-my-event-option">\n      <div class="rrmc-selectmenu js-rrmc-selectmenu">\n        <select class="js-form-select js-rrmc-form-input" id="selectMyEventOption" name="selectMyEventOption"\n            aria-labelledby="'.concat((0,N.K)("Date"),'" aria-describedby="').concat((0,N.K)("Date"),'" aria-required="false" data-default="').concat((0,N.K)("Date"),'">\n            <option value=""></option>\n        </select>\n        <span class="rrmc-form-label-error -hidden"></span>\n      </div>\n    </div>'),X=function(){return q((function e(t,n,r){G(this,e),this.data=t,this.value_property=n,this.text_property=r,this.setup_options()}),[{key:"make_empty_option",value:function(){return this.make_option(U(U({},this.value_property,""),this.text_property,""))}},{key:"setup_options",value:function(){this.options=[this.make_empty_option()];var e,t=j(this.data);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.options.push(this.make_option(n))}}catch(e){t.e(e)}finally{t.f()}}},{key:"make_option",value:function(e){return{value:W.from(e[this.value_property]),text:W.from(e[this.text_property])}}},{key:"render_entry",value:function(e){return'<option value="'.concat(e.value,'">').concat(e.text,"</option>")}},{key:"render_options",value:function(){var e=this;return this.options.reduce((function(t,n){return"".concat(t).concat(e.render_entry(n))}),"")}},{key:"toString",value:function(){return this.render_options()}}])}();const K=function(){return q((function e(t){var n=this;G(this,e),this.event_data=window.rrmc_form_events,this.container=t[0],this.event_dropdown_wrapper=this.container.querySelector(".js-rrmc-select-my-event"),this.elm_event_dropdown=this.event_dropdown_wrapper.querySelector(".js-rrmc-selectmenu"),this.elm_event_select=this.event_dropdown_wrapper.querySelector(".js-form-select"),this.elm_eventOption_wrapper=this.container.querySelector(".js-rrmc-event-option-wrapper"),this.on_event_change=function(){n.destroy_event_option(),n.create_event_option()}}),[{key:"destroy_event_option",value:function(){this.elm_eventOption_wrapper.innerHTML='\n    <div class="rrmc-select-my-event-option rrmc-select-my-event-option--faded js-rrmc-select-my-event-option">\n      <div class="rrmc-selectmenu js-rrmc-selectmenu">\n        <div class="select"><select class="js-form-select js-rrmc-form-input select-hidden" id="selectMyEventOption" \n             name="selectMyEventOption" aria-labelledby="'.concat((0,N.K)("Date"),'" aria-describedby="').concat((0,N.K)("Date"),'" \n             aria-required="false" data-default="').concat((0,N.K)("Date"),'">\n                <option value=""></option></select>\n                <div class="select-custom" id="medium">').concat((0,N.K)("Date"),'</div>\n        </div>\n        <span class="rrmc-form-label-error -hidden"></span>\n      </div>\n    </div>')}},{key:"create_event_option",value:function(){var e;this.elm_eventOption_wrapper.innerHTML=Y,this.eventOption_dropdown_wrapper=this.container.querySelector(".js-rrmc-select-my-event-option"),this.elm_eventOption_dropdown=this.eventOption_dropdown_wrapper.querySelector(".js-rrmc-selectmenu"),this.elm_eventOption_select=this.eventOption_dropdown_wrapper.querySelector(".js-form-select");var t,n=this.elm_event_select.value,r=j(window.rrmc_form_events);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.eventName===n&&(e=o.dates)}}catch(e){r.e(e)}finally{r.f()}var a=[];[].slice.call(e).forEach((function(e){a.push({option:e})})),this.populate_event_options_select(a),this.inst_eventOption_dropdown=new w(i()(this.elm_eventOption_dropdown)),this.inst_eventOption_dropdown.load(),this.eventOption_dropdown_wrapper.classList.remove("-hidden"),this.elm_eventOption_wrapper.querySelector(".select-custom").innerText=this.elm_eventOption_select.getAttribute("data-default")}},{key:"populate_event_select",value:function(){var e=new X(this.event_data,"eventName","eventName","array");this.elm_event_select.innerHTML=e.toString()}},{key:"getValue",value:function(e){return"eventName"===e?this.elm_event_select.value:"eventOption"===e?this.elm_eventOption_select.value:void 0}},{key:"populate_event_options_select",value:function(e){var t=new X(e,"option","option");this.elm_eventOption_select.innerHTML="",this.elm_eventOption_select.innerHTML=t.toString()}},{key:"load",value:function(){this.populate_event_select(),this.inst_event_dropdown=new w(i()(this.elm_event_dropdown)),this.inst_event_dropdown.load(),this.inst_event_dropdown.on("menu:change",this.on_event_change)}}])}();function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Z(r.key),r)}}function Z(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}var Q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"mapLeadSource",value:function(t){return e.leadSourceMap[t]||"RRMC.COM"}},{key:"getHtmlLang",value:function(){return document.documentElement.getAttribute("lang")}},{key:"resolveLeadSource",value:function(){var t=e.getHtmlLang();return t?e.mapLeadSource(t):"RRMC.COM"}},{key:"getLeadSource",value:function(){return e.resolveLeadSource()}}],null&&J(t.prototype,null),n&&J(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();Q.leadSourceMap={"en-GB":"RRMC.COM","en-US":"RRMCNA.COM","ja-JP":"RRMC.com.jp","ru-RU":"RRMC.com.ru","ko-KR":"RRMC.com.kr"};var ee=n(5914);function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,oe(r.key),r)}}function ie(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function oe(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==te(t)?t:t+""}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var se=ie((function e(t){ae(this,e),this.name=t.name,this.value=t.value})),le=function(){return ie((function e(t){ae(this,e),this.fields=t}),[{key:"isEmpty",value:function(){return 0===this.fields.length}},{key:"forEachField",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ne(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.fields);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(e){n.e(e)}finally{n.f()}}}])}();function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,he(r.key),r)}}function he(e){var t=function(e,t){if("object"!=ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ce(t)?t:t+""}var de=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elmForm=t,this.elmLegal=t.querySelector(".rrmc-form-legal"),this.elmEmail=this.elmForm.querySelector('[name="email"]'),this.elmPhone=this.elmForm.querySelector('[name="phone"]'),this.elmMarketing=this.elmLegal.querySelector(".rrmc-form-marketing-options"),-1===window.location.href.indexOf("boutique/my-list")&&(this.elmCheckboxList=this.elmMarketing.querySelector(".rrmc-form-checkbox-list"),this.elmEmailChannelCheckbox=this.elmMarketing.querySelector('[name="agreeEmailMarketing"]'),this.elmPhoneChannelCheckbox=this.elmMarketing.querySelector('[name="agreePhoneMarketing"]'),this.elmMessengerChannelCheckbox=this.elmMarketing.querySelector('[name="agreeMessengerMarketing"]'),this.heightReductionTerm=0)},(t=[{key:"isEmailFieldUnavailable",value:function(){return!this.elmEmail}},{key:"isPhoneFieldUnavailable",value:function(){return!this.elmPhone}},{key:"hideEmailChannel",value:function(){this.elmEmailChannelCheckbox.parentNode.classList.add("-hidden"),this.heightReductionTerm+=40}},{key:"hidePhoneRelatedChannels",value:function(){this.elmPhoneChannelCheckbox.parentNode.classList.add("-hidden"),this.elmMessengerChannelCheckbox.parentNode.classList.add("-hidden"),this.heightReductionTerm+=80}},{key:"testEmailChannel",value:function(){if(this.isEmailFieldUnavailable())return this.hideEmailChannel()}},{key:"testPhoneRelatedChannels",value:function(){if(this.isPhoneFieldUnavailable())return this.hidePhoneRelatedChannels()}},{key:"reduceSectionHeight",value:function(){this.elmCheckboxList.style.height="".concat(200-this.heightReductionTerm,"px")}},{key:"test",value:function(){-1===window.location.href.indexOf("boutique/my-list")&&(this.testEmailChannel(),this.testPhoneRelatedChannels(),this.reduceSectionHeight())}}])&&ue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function pe(e){return pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pe(e)}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ve(r.key),r)}}function ve(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==pe(t)?t:t+""}var ge=["cullinan","ghost","ghost-extended","phantom","phantom-extended","black-badge-ghost","black-badge-cullinan"];const ye=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.sandbox.classList.add("active-form"),this.selectMenu=this.sandbox.querySelectorAll(".js-rrmc-selectmenu"),this.formName=this.sandbox.querySelector(".active-form form"),this.formRow=this.sandbox.querySelectorAll(".rrmc-form-input"),this.form=this.sandbox.querySelector(".rrmc-form"),this.requiredTextInput=this.sandbox.querySelectorAll(".js-rrmc-required-true"),this.legal=this.sandbox.querySelector(".rrmc-form-legal"),this.title=this.sandbox.querySelector(".rrmc-form-title"),this.titleText=this.title?this.title.textContent:"",this.sub=this.sandbox.querySelector(".rrmc-form-submit-wrap");var r=this.sandbox.getAttribute("data-redirect-path");this.redirect_path=r?(0,c.T2)(r,(0,c.fI)()):null,this.formType=this.form.id,this.presetModel=this.form.getAttribute("data-preset-model"),this.selectedBoxes=this.form.querySelector(".rrmc-form-checkbox-list"),this.modelsSelected=[],this.brandsSelected=[],this.isCase=this.sandbox.hasAttribute("data-case"),this.getActiveForm=function(){return document.querySelector(".active-form")},this.gatherFormData=function(e){var t,r=n.getActiveForm(),o=i()(r).find('input[name="firstName"]').val(),a=i()(".active-form form"),s={},l=r.hasAttribute("data-case");if(a.serializeArray().forEach((function(e){if("agreePhoneMarketing"===e.name)s.agreePhoneMarketing=!0;else if("agreeEmailMarketing"===e.name)s.agreeEmailMarketing=!0;else if("agreeMessengerMarketing"===e.name)s.agreeMessengerMarketing=!0;else if("agreeInCarMarketing"===e.name)s.agreeInCarMarketing=!0;else if("phone"===e.name){var t=n.form.querySelector(".iti__selected-dial-code").innerHTML;s.phone=i().trim(t+e.value)}else s[e.name]=i().trim(e.value);if(window.ctaWindowProps){var r=window.ctaWindowProps;Object.keys(r).forEach((function(e){s[e]=r[e]}))}})),!s.country&&s.phone){var c=n.form.querySelector(".iti__selected-flag").getAttribute("title");c&&(c=c.substring(0,c.indexOf(":"))),s.country=c}if(s["g-recaptcha-response"]=e,s.digitalLeadSource=n.sandbox.querySelector(".digitalLeadSource").innerHTML,s.digitalUID=n.sandbox.querySelector(".digitalUID").innerHTML,s.leadSource=Q.getLeadSource(),s.campaignContext=n.sandbox.querySelector(".campaignContext").innerHTML,s.channel=n.getChannel(),s.deviceUrl=window.location.href.substring(0,250),s.websiteButtonLabel=n.sandbox.querySelector(".campaignContext").innerHTML,s.submissionTimestamp=Date.now(),s.dealerNumber=s.dealerNumber||n.sandbox.querySelector(".dealerNumber").innerHTML,"whispers"!=n.formType&&n.formType!=ee.Y||(s.whispersAppVersion="en-US"===i()("html").attr("lang")?"NA":"ROW"),"subscribe"!=n.formType&&"kryptos-quiz"!=n.formType||(s.subscribeCampaign=n.sandbox.querySelector(".formCampaign").innerHTML),n.localisedDealerNumber(s),n.evergageDealerNumber(s),n.populateUTM(s),n.sandbox.querySelector("#modelOfInterest"))t=n.sandbox.querySelector("#modelOfInterest").value,s.modelOfInterest=t;else if(""!=i()(".modelOfInterest").html())s.modelOfInterest=i()(".modelOfInterest").html();else{var u=window.location.href.toLowerCase();ge.forEach((function(e){RegExp("/".concat(e)).test(u)&&(RegExp("phantom-extended").test(e)?e="Phantom Extended":RegExp("ghost-extended").test(e)?e="New Ghost Extended":RegExp("ghost").test(e)&&(e="New Ghost"),RegExp("black-badge-").test(e)?s.modelOfInterest="".concat(e.substring(e.lastIndexOf("-")+1)," Black Badge"):(e=e.replace(/-/g," ").replace(/^./,(function(e){return e.toUpperCase()})),s.modelOfInterest=e))}))}n.dataFieldList.isEmpty()||n.dataFieldList.forEachField((function(e){s[e.name]=e.value})),n.submitForm(s,o,l)},this.submitForm=function(e,t,r){i()("body").append('<div class="rrmc-form-progress-loader"></div>'),n.form.classList.add("-disabled"),n.lottie_form=a().loadAnimation({container:document.querySelector(".rrmc-form-progress-loader"),renderer:"svg",loop:!0,autoplay:!0,animationData:l.SJ});var o=n.titleText+" Submit";window.Evergage&&window.Evergage.sendEvent({action:o,user:{attributes:{emailAddress:e.email,ownerCheck:n.ownerCheck()}}}),i().ajax({type:"POST",contentType:"application/x-www-form-urlencoded",data:e,url:r?"/bin/public/case":"/bin/public/lead",success:function(e){n.lottie_form.destroy(),grecaptcha.reset(window.recaptcha_widget_id),i()(".rrmc-form-progress-loader").remove(),"request-brochure"==n.formType?n._appendBrochureResponse():n._appendSuccess(t),i()(".js-rrmc-model-brochure .rrmc-form-checkbox-input:checked + label").each((function(e,t){n.modelsSelected.push(t.innerText.toLowerCase())})),i()(".js-rrmc-brand-brochure .rrmc-form-checkbox-input:checked + label").each((function(e,t){n.brandsSelected.push(t.innerText.toLowerCase())})),"accessoriesRequest"==n.form_purpose?(n.analytics={event:"ee-transaction",ecommerce:{purchase:{actionField:{id:Math.random().toString(36).substr(2,5)+"."+(new Date).getTime(),revenue:0,affiliation:"Accessories"},products:n.list_products}}},g.Gx(n.analytics),window.Evergage&&window.Evergage.sendEvent({action:"Boutique - Successful List Submission"})):(n.modelsSelected.length&&(n.analytics.modelsSelected=n.modelsSelected),n.brandsSelected.length&&(n.analytics.brandsSelected=n.brandsSelected));var r=n.getFormName(n.formName.id);g.l.formFinished({formType:n.formType,formName:n.titleText}),n.analytics={event:"formSubmit",eventCategory:"form",eventAction:r,eventLabel:"submit success",leadId:e.leadId},g.Gx(n.analytics)},error:function(e){n.lottie_form.destroy(),grecaptcha.reset(window.recaptcha_widget_id),i()(".rrmc-form-progress-loader").remove(),n._appendFailure();var t=void 0===e.responseJSON.errorMessage?"recaptcha error":e.responseJSON.errorMessage;g.Gx({event:"formSubmit",eventCategory:"form",eventAction:n.formName.id,eventLabel:"Submit Failed: ".concat(t)})}})},this.ownerCheck=function(){return void 0!==window.ctaWindowProps&&void 0!==window.ctaWindowProps.existingOwner?!0===window.ctaWindowProps.existingOwner?"owner":"prospect":null},this.getFormName=function(e){var t,r=n.ownerCheck();switch(e){case"purchase-enquiry":t="".concat(r?"".concat(r," "):"","purchase enq");break;case"general-enquiry":t="".concat(r?"".concat(r," "):"","general enq");break;default:t=n.formName.id}return t},this.validateFormData=function(){var e=n.getActiveForm();if(d.A.loadOthers(e))i()("js-rrmc-form-submit").attr("disabled",""),g.l.formFinishIntention({formType:n.formType,formName:n.titleText}),grecaptcha.execute(window.widget_id);else{var t=n.getFormName(n.formName.id);i().each(i()(".active-form .rrmc-form-label-error:not(.-hidden)"),(function(e,r){var o=i()(r),a=o.prev().get(0),s=a?a.name:void 0;void 0===s&&a&&(s=a.querySelector("select").id),g.l.formValidationError(n,{formType:n.formType,formName:n.titleText,errorCode:"000",errorCause:"invalid field: ".concat(s),errorMessage:o.text()}),g.Gx({event:"formSubmit",eventCategory:"form",eventAction:t,eventLabel:"submit error: invalid ".concat(s)})}))}},this._appendBrochureResponse=function(){var e=[],t=[];[].forEach.call(document.querySelectorAll(".js-checkbox-input-brochure"),(function(n){n.checked?e.push(n.value.toUpperCase().replace("-"," ").replace("-"," ").replace("_","-")):t.push(n.value.toUpperCase().replace("-"," ").replace("-"," ").replace("_","-"))}));var r,o=e.concat(t);i().getJSON("/bin/public/brochure",(function(t){n.brochureData=t;var a=function(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(new Set(o));a.forEach((function(e){var t=e;a.push(t)})),t.sort((function(e,t){return a.indexOf(e.label)-a.indexOf(t.label)})),r+='<div class="rrmc-brochure-wrap">',r+='<div class="rrmc-brochure-heading">',r+='<h2 class="rrmc-h2 rrmc-form-title">Requested Brochures</h2>',r+="<p>You have requested the following brochures.</p>",r+="</div>",i()(t).each((function(e,t){for(var n in r+='<div class="rrmc-brochure-elm">',r+='<div class="rrmc-brochure-elm-image-wrap">',r+='<h3 class="rrmc-h3 rrmc-brochure-title">'.concat(t.label,"</h3>"),r+='<img class="rrmc-brochure-image" src="'.concat(t.coverImage,'" />'),r+="</div>",r+='<div class="rrmc-brochure-list-wrap">',t.categories){for(var i in r+='<div class="rrmc-brochure-list-node">',r+='<h3 class="rrmc-brochure-label">'.concat(t.categories[n].label,"</h3>"),r+="<div>",t.categories[n].brochures)r+='<div class="rrmc-download-link-brochure">\n                <a href="'.concat(t.categories[n].brochures[i].path,'" target="_blank" class="rrmc-download-link-label-brochure">').concat(t.categories[n].brochures[i].label,'</a>\n                <span class="rrmc-icon rrmc-download-icon"></span>\n              </div>');r+="</div>",r+="</div>"}r+="</div>",r+="</div>"})),r+="</div>",i()(n.sandbox).fadeOut(1e3,(function(){i()(".js-overlay").scrollTop(0),i()(".form").append(r),e.forEach((function(t){if(e.indexOf(t)>-1){var n=t.toUpperCase();i()(".rrmc-brochure-title").filter((function(){return i()(this).text()==n})).closest(".rrmc-brochure-elm").addClass("selected-brochure")}})),i()(".selected-brochure").last().addClass("end-selected"),i()('<div class="rrmc-brochure-heading"><h2 class="rrmc-h2 rrmc-form-title">Other Brochures</h2></div>').insertAfter(".end-selected"),i()(".rrmc-brochure-wrap .js-rrmc-button").on("click",n.on_cta_click),i()(".rrmc-brochure-wrap .rrmc-download-link-label-brochure").on("click",n.on_download_click)}))}))},this.on_cta_click=function(e){g.Gx({event:"rbContactAdvisorClick",eventCategory:"form",eventAction:n.formName.id,eventLabel:e.target.innerText.toLowerCase()})},this.on_download_click=function(e){var t=i()(e.target).parents(".rrmc-brochure-elm").find(".rrmc-brochure-title").text().toLowerCase(),n=i()(e.target).parents(".rrmc-brochure-list-node").find(".rrmc-brochure-label").text().toLowerCase(),r=e.target.innerText.toLowerCase();g.Gx({event:"rbBrochureClick",eventCategory:"form",eventAction:"request a brochure",eventLabel:"download - ".concat(t," ").concat(n," ").concat(r)})},this.redirect_to_bespoke=function(){location.href=n.redirect_path},this._appendSuccess=function(e){i()(n.sandbox).fadeOut(1e3,(function(){n.form.classList.remove("-disabled"),i()("rrmc-form-marketing-options").addClass("-hidden"),"accessoriesRequest"===n.form_purpose?i()(".form").append(m("formSuccessAccessories")):i()(".form").append(m("formSuccess")),i()(".rrmc-form-success-header").html("".concat((0,N.K)("Thank you"),", ").concat(e)),i()(".js-form-return-success").on("click",(function(){"accessoriesRequest"===n.form_purpose?(x.A.sub_my_list_manager_bus.next({action:"set",data:[],options:{broadcast:!1}}),setTimeout(n.redirect_to_bespoke,100)):x.A.sub_overlay_manager_bus.next({action:v.Jm,data:{}})}))}))},this._appendFailure=function(){n.form.classList.add("-disabled"),i()(".form").append(m("formFailure")),i()(".js-form-return").on("click",(function(){i()(".rrmc-form-failure").remove(),n.form.classList.remove("-disabled")})),i()("js-rrmc-form-submit").removeAttr("disabled")},this.checkboxClickHandler=function(e){if(e.stopPropagation(),e.preventDefault(),!e.target.parentNode.classList.contains("rrmc-form-checkbox-list")){var t=e.target.parentNode.querySelector('[type="checkbox"]');t.checked=!t.checked;var r,o=n.getFormName(n.formName.id);switch(t.id.toLowerCase()){case"email":r="field: marketingEmail";break;case"phone":r="field: marketingPhone";break;case"incarmarketing":r="field: marketingInCar";break;case"messengermarketing":r="field: marketingMessenger";break;default:r="field: ".concat(t.id.toLowerCase())}i()(e.target).closest(".rrmc-form-checkbox-list").next(".rrmc-form-label-error").addClass("-hidden"),g.l.formInteraction(n,{eventEffect:r,formType:n.formType,formName:n.titleText}),g.Gx({event:"formClick",eventCategory:"form",eventAction:o,eventLabel:r})}},this.circularClickHandler=function(e){var t,r=e.currentTarget,o=n.getFormName(n.formName.id);t="agreemarketing"===r.id.toLowerCase()?"field: marketingAccept":"field: ".concat(r.id.toLowerCase()),r.id.toLowerCase().startsWith("consent")||i()(".rrmc-form-marketing-options").toggleClass("-hidden"),g.l.formInteraction(n,{eventEffect:t,formType:n.formType,formName:n.titleText}),g.Gx({event:"formClick",eventCategory:"form",eventAction:o,eventLabel:t})},this.getChannel=function(){var e=window.location.href;return RegExp("utm_source").test(e)?location.search.split("utm_source=")[1]:RegExp("channel").test(e)?location.search.split("channel=")[1]:"not set"}},t=[{key:"load",value:function(e){var t=this;"g-dealer-locator-enquire"!=e.overlayInstance&&("subscribe"===this.formType&&i()(this.title).append(m("subscribeIntro")),this.dataFieldList=function(e){var t=(e.fields||[]).map((function(e){return new se(e)}));return new le(t)}(e),this.list_products=e.wishListProducts||void 0,this.dealership_title=e.dealership_title,this.dealership_number=e.dealership_number,this.form_purpose=e.overlayPurpose||"default",this.applyInputTypes(),this.applyIntlPhoneInput(),this.applyFormRowListener(),this.applyFormTextRowListener(),this.appendMarketing(),this.applyPreselectedOptions(),i()(this.legal).append('<div id="form-recaptcha" class="g-recaptcha" data-size="invisible" data-badge="inline" ></div>'),void 0!==window.widget_id&&"number"!=typeof window.widget_id||(window.verifyCallbackForm=function(e){x.A.sub_form_recaptcha.next(e)},window.widget_id=grecaptcha.render("form-recaptcha",{sitekey:window.recaptcha_sitekey,callback:window.verifyCallbackForm,theme:"dark"})),this.sub_recaptcha=x.A.sub_form_recaptcha.subscribe({next:function(e){return t.gatherFormData(e)}}),i()(this.sandbox).on("click",(function(e){t.callFormActions(e)})),i()(".rrmc-form-circular-input").click(this.circularClickHandler),i()(".rrmc-form-checkbox-item").on("click",this.checkboxClickHandler),x.A.sub_epaas.subscribe({next:function(e){t.epaas=e.epaas,t.onDeviceInfoLoaded(e)}}),i()(".js-rrmc-selectmenu").each((function(e,t){var n;n=i()(t).find(".js-form-select").data("preset")?i()(t).find(".js-form-select").data("preset"):i()(t).find(".js-form-select").data("default"),i()(t).find(".select-custom").html(n).css("border-bottom","2px solid #676776")})),g.l.formStarted(this,{formType:this.formType,formName:this.titleText}),window.Evergage&&window.Evergage.sendEvent({action:this.titleText+" Open"}))}},{key:"localisedDealerNumber",value:function(e){e.localisedDealer&&(e.dealerNumber=e.localisedDealer)}},{key:"evergageDealerNumber",value:function(e){if(!e.dealerNumber){var t=window.rrmc_dealer_number_override;t&&(e.dealerNumber=t)}}},{key:"populateUTM",value:function(e){var t={};this.epaas.isUsageAllowed("utm_source")&&this.epaas.getPersistence("utm_source")&&(t.utm_source=this.epaas.getPersistence("utm_source")),this.epaas.isUsageAllowed("utm_medium")&&this.epaas.getPersistence("utm_medium")&&(t.utm_medium=this.epaas.getPersistence("utm_medium")),this.epaas.isUsageAllowed("utm_campaign")&&this.epaas.getPersistence("utm_campaign")&&(t.utm_campaign=this.epaas.getPersistence("utm_campaign")),this.epaas.isUsageAllowed("campaign_id")&&this.epaas.getPersistence("campaign_id")&&(t.campaign_id=this.epaas.getPersistence("campaign_id"));var n=location.search,r=Object.assign({},s.parse(n),t);r.utm_source&&(e.channel=r.utm_source),r.utm_medium&&(e.medium=r.utm_medium),r.utm_campaign&&(e.campaignContext=r.utm_campaign),r.campaign_id&&(e.digitalUID=r.campaign_id)}},{key:"callFormActions",value:function(e){e.target.classList.contains("js-rrmc-form-close")?(x.A.sub_overlay_manager_bus.next({action:v.Jm,data:{}}),this.event_instance&&this.event_instance.destroy_event_option()):e.target.classList.contains("js-rrmc-form-submit")?(e.preventDefault(),this.validateFormData()):e.target.classList.contains("js-rrmc-marketing")||(e.target.classList.contains("js-rrmc-form-more-information")?(i()(this.form).addClass("-disabled"),i()(this.sandbox).append(m("marketingInfo")),i()(".js-overlay").animate({scrollTop:0},400)):e.target.classList.contains("js-rrmc-form-legal-information")?(i()(this.form).addClass("-disabled"),i()(this.sandbox).append(m("legalInfo")),i()(".js-overlay").animate({scrollTop:0},400)):e.target.classList.contains("js-rrmc-marketing-button-close")&&(i()(this.form).removeClass("-disabled"),i()(".js-rrmc-marketing-popup").remove()))}},{key:"appendMarketing",value:function(){var e=(0,c.fI)();return"whispers"==this.formType&&(i()(this.title).append(m("whispersDisclaimer")),i()(this.legal).append(m("whispersMarketing"))),"join-waiting-list"===this.formType&&"en_US"===e?(i()(this.legal).append(m("USMarketing")),void i()(this.legal).append(m("submit"))):("join-waiting-list"===this.formType&&"en_US"!==e&&i()(this.legal).append(m("rr25Disclaimer")),"keep-me-informed-rr25"===this.formType&&"en_US"===e?(i()(this.legal).append(m("USMarketing")),void i()(this.legal).append(m("submit"))):(this.formType==ee.Y&&(i()(this.title).append(m("whispersReferralDisclaimer")),i()(this.legal).append(m("whispersReferralMarketing"))),"kryptos-quiz"==this.formType&&(i()(this.title).append(m("kryptosQuizIntro")),i()(this.legal).append(m("kryptosTAndC"))),window.location.href.includes("boutique/my-list")?i()(this.legal).append(m("boutique")):(i()(this.legal).append(m("marketing")),i()(this.legal).append(m("marketingOptions"))),i()(this.legal).append(m("submit")),void new de(this.getActiveForm()).test()))}},{key:"removeMarketing",value:function(){i()(".rrmc-form-row-marketing, .rrmc-form-marketing-options, .rrmc-form-row-submit, .rrmc-form-row-whispers-marketing, .rrmc-form-row-whispers-disclaimer, .rrmc-form-row-subscribe-intro, .rrmc-rr25-kmi-disclaimer, .rrmc-rr25-jwl-disclaimer").remove()}},{key:"destroy",value:function(){i()(this.formRow).off("focus"),i()(this.formRowText).off("focus"),this.sub_recaptcha.unsubscribe(),i()(this.sandbox).off("click"),this.sandbox.classList.remove("active-form");var e=this.formName,t=e.querySelectorAll("label");[].slice.call(t).forEach((function(e){e.classList.remove("input-focus"),i()(e).next("input").css("border-bottom","2px solid #676776")})),this.instance_preferred_dealer&&this.instance_preferred_dealer.destroy(),this.event_instance&&this.event_instance.destroy_event_option(),i()(this.sandbox).show(),e.reset(),grecaptcha.reset(window.widget_id),i()("#form-recaptcha").remove(),i()(".rrmc-form-progress-loader, .rrmc-brochure-wrap").remove(),this.removeMarketing(),i()(".js-rrmc-form-submit").removeAttr("disabled"),i()(".rrmc-form-checkbox-item").off("click",this.checkboxClickHandler),i()(".js-rrmc-form-submit").off("click",this.validateFormData,!1),i()(".js-rrmc-form-endstate").remove(),i()(".rrmc-form-marketing-options, .rrmc-form-label-error").addClass("-hidden"),i()(".form-device-info").remove(),this.form.classList.remove("-disabled"),i()(".js-rrmc-selectmenu").each((function(e,t){var n=i()(t).find(".js-form-select").data("default");i()(t).find(".select-custom").html(n).css("border-bottom","2px solid #676776")}))}},{key:"applyInputTypes",value:function(){var e=this;i()(this.formRow).each((function(t,n){if("salutation"==n.name){var r=i()(n).parent();return e.isCase?r.html(m("caseSalutation")):r.html(m("salutation")),new w(r.find(".rrmc-selectmenu")).load().setOnSelect((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})})).setOnClose((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})}))}if("localisedDealer"==n.name){var o=i()(n).parent();return o.html(m("localisedDealer")),void new F(o.find(".js-rrmc-localised-dealer-selector")).load()}if(["firstName","lastName","street","postalCode"].indexOf(n.name)>-1)n.classList.add("rrmc-text-input"),n.type="text";else{if("country"==n.name){var a=i()(n).parent();return a.html(m("countries")),new w(a.find(".rrmc-selectmenu")).load().setOnSelect((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})})).setOnClose((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})}))}if("email"==n.name)n.type="email",n.classList.add("js-rrmc-email-input");else if("events"==n.name){var s=i()(n).parent();s.html(m("selectMyEvent")),e.event_instance=new K(s.find(".js-rrmc-select-my-event-wrapper")),e.event_instance.load()}else if("phone"==n.name)i()(n).parent().attr("id","intl-tel"),n.type="text",n.classList.add("js-rrmc-phone-input");else{if("modelOfInterest"==n.name){var l=i()(n).parent();return l.html(m("modelOfInterest")),void 0!==e.presetModel&&null!==e.presetModel?new w(l.find(".rrmc-selectmenu")).load(!0,e.presetModel).setOnSelect((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})})).setOnClose((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})})):new w(l.find(".rrmc-selectmenu")).load().setOnSelect((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})})).setOnClose((function(t){var n=t.eventLabel;return g.l.formInteraction(e,{eventEffect:n,formType:e.formType,formName:e.titleText})}))}if("agreeMarketing"==n.name)i()(n).parent().remove();else if("communicationDisclaimer"==n.name)i()(n).parent().html(m("communicationDisclaimer"));else if("question"==n.name)i()(n).parent().html(m("textarea"));else if("existingOwner"==n.name)i()(n).parent().html(m("existingOwner"));else if("modelBrochure"==n.name)i()(n).parent().html(m("modelBrochure"));else if("brandBrochure"==n.name)i()(n).parent().html(m("brandBrochure"));else if("dealerNumber"==n.name){var c=i()(n).parent();c.html(m("preferredDealer").replace(/%dealerNumber/,e.dealership_number)),e.instance_preferred_dealer=new T(c.find(".js-rrmc-preferred-dealer")[0]),e.instance_preferred_dealer.load({dealership_title:e.dealership_title,wishListProducts:e.list_products})}}}}))}},{key:"applyPreselectedOptions",value:function(){var e=window.location.href.toLowerCase();ge.forEach((function(t){RegExp("/".concat(t)).test(e)&&i()('.rrmc-form-checkbox-input[data-model="'.concat(t,'"]')).prop("checked",!0)}))}},{key:"applyFormTextRowListener",value:function(){var e=this;this.formRowText=this.sandbox.querySelectorAll(".rrmc-textarea"),i()(this.formRowText).on("focus",(function(t){i()(t.target).prev(".rrmc-form-label").addClass("input-focus");var n=e.getFormName(e.formName.id),r="field: ".concat("question"===t.target.name?"enquiry":t.target.name);g.l.formInteraction(e,{eventEffect:r,formType:e.formType,formName:e.titleText}),g.Gx({event:"formClick",eventCategory:"form",eventAction:n,eventLabel:r})}))}},{key:"applyFormRowListener",value:function(){var e=this;i()(this.formRow).on("focus",(function(t){i()(t.target).prev(".rrmc-form-label").addClass("input-focus");var n=e.getFormName(e.formName.id),r="field: ".concat(t.target.name);g.l.formInteraction(e,{eventEffect:r,formType:e.formType,formName:e.titleText}),g.Gx({event:"formClick",eventCategory:"form",eventAction:n,eventLabel:r})})),this.applyActiveInput=function(){i()(e.formRow).each((function(e,t){i()(t).css("border-bottom","2px solid #676776"),i()(t).val()?(i()(t).prev(".rrmc-form-label").addClass("input-focus"),i()(t).next("span.rrmc-form-label-error").addClass("-hidden")):(i()(t).next("span.rrmc-form-label-error").hasClass("-hidden")||i()(t).css("border-bottom","2px solid #f94564"),i()(t).prev(".rrmc-form-label").removeClass("input-focus"))}))};for(var t=0;this.formRow.length>t;t++)this.formRow[t].addEventListenerRR("blur",(function(){e.applyActiveInput()}))}},{key:"getPreferredCountry",value:function(){switch((0,c.fI)()){case"ru_RU":return["ru"];case"ja_JP":return["jp"];case"ko_KR":return["kr"];case"en_US":return["us"];default:return["gb"]}}},{key:"applyIntlPhoneInput",value:function(){var e=this.sandbox.querySelector(".js-rrmc-phone-input"),t=navigator.userAgent.match("iPhone")?document.getElementById("intl-tel"):"";e&&h()(e,{allowDropdown:!0,separateDialCode:!0,nationalMode:!0,preferredCountries:this.getPreferredCountry(),dropdownContainer:t})}},{key:"onDeviceInfoLoaded",value:function(e){var t=e.epaas,n=i()('<div class="form-device-info"/>');if(i()(this.form).length){for(var r=function(){var e=a[o];if(t.isUsageAllowed(e)){var r=function(){var n=t.getPersistence(e);return r=""!=n?n:"Not available"};n.append('<input type="hidden" id="'.concat(e,'" name="').concat(e,'" value=').concat(r(),">"))}},o=0,a=["devicePreviousVisit","deviceName","deviceVersion","deviceOs","deviceOsVersion","deviceBrowser","deviceBrowserVersion","deviceBrowserLanguage","deviceReferringUrl","deviceCarModelPagesVisited"];o<a.length;o++)r();i()(this.form).append(n)}}}],t&&me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},6692:(e,t,n)=>{"use strict";n.d(t,{A:()=>b});var r=n(8521),i=n(5914);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var u=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elmForm=t,this.elmEmail=this.elmForm.querySelector('[name="email"]'),this.elmPhone=this.elmForm.querySelector('[name="phone"]'),this.elmLegal=t.querySelector(".rrmc-form-legal"),this.elmMarketingAgreed=this.elmLegal.querySelector("#agreeMarketing"),this.elmMarketingError=this.elmLegal.querySelector(".rrmc-form-marketing-error"),this.elmsChannel=this.elmLegal.querySelectorAll(".rrmc-form-checkbox-input"),this.classError="is-shown",this.setMarketingValid(),this.setEmailValid(),this.setPhoneValid()},(t=[{key:"setMarketingValid",value:function(){this.marketingAgreedValid=!0}},{key:"setMarketingInvalid",value:function(){this.marketingAgreedValid=!1}},{key:"setEmailValid",value:function(){this.emailValid=!0}},{key:"setEmailInvalid",value:function(){this.emailValid=!1}},{key:"setPhoneValid",value:function(){this.phoneValid=!0}},{key:"setPhoneInvalid",value:function(){this.phoneValid=!1}},{key:"isMarketingSelected",value:function(){return this.elmMarketingAgreed.checked}},{key:"areThereErrors",value:function(){return!this.emailValid||!this.marketingAgreedValid||!this.phoneValid}},{key:"showError",value:function(){this.elmMarketingError.innerHTML=this.latestError,this.elmMarketingError.classList.add(this.classError)}},{key:"hideError",value:function(){this.elmMarketingError.classList.remove(this.classError)}},{key:"errorMarketing",value:function(){this.setMarketingInvalid(),this.latestError=(0,r.K)("Please select at least one channel")}},{key:"clearErrorMarketing",value:function(){this.setMarketingValid()}},{key:"isEmailEmpty",value:function(){return this.elmEmail&&0===this.elmEmail.value.trim().length}},{key:"isPhoneEmpty",value:function(){return this.elmPhone&&0===this.elmPhone.value.trim().length}},{key:"noChannelsSelected",value:function(){var e,t=a([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;)if(e.value.checked)return!1}catch(e){t.e(e)}finally{t.f()}return!0}},{key:"isEmailChannelSelected",value:function(){var e,t=a([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("email"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"isPhoneChannelSelected",value:function(){var e,t=a([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("phone"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"isMessengerChannelSelected",value:function(){var e,t=a([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("messengerMarketing"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"errorEmail",value:function(){this.setEmailInvalid(),this.latestError=(0,r.K)("Please provide an email address")}},{key:"clearErrorEmail",value:function(){this.setEmailValid()}},{key:"errorPhone",value:function(){this.setPhoneInvalid(),this.latestError=(0,r.K)("Please provide a phone number")}},{key:"clearErrorPhone",value:function(){this.setPhoneValid()}},{key:"validateMarketingAgreed",value:function(){if(this.isMarketingSelected()&&this.noChannelsSelected())return this.errorMarketing();this.clearErrorMarketing()}},{key:"validateEmailChannel",value:function(){if(this.isEmailChannelSelected()&&this.isEmailEmpty())return this.errorEmail();this.clearErrorEmail()}},{key:"validatePhoneChannels",value:function(){if((this.isPhoneChannelSelected()||this.isMessengerChannelSelected())&&this.isPhoneEmpty())return this.errorPhone();this.clearErrorPhone()}},{key:"presentErrorsIfAny",value:function(){if(this.areThereErrors())return this.showError();this.hideError()}},{key:"validate",value:function(){this.validateMarketingAgreed(),this.validateEmailChannel(),this.validatePhoneChannels(),this.presentErrorsIfAny()}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var v=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elmForm=t,this.elmFormType=this.elmForm.id,this.elmEmail=this.elmForm.querySelector('[name="email"]'),this.elmPhone=this.elmForm.querySelector('[name="phone"]'),this.elmLegal=t.querySelector(".rrmc-form-legal"),this.elmMarketingAgreed=this.elmLegal.querySelector("#agreeMarketing"),this.elmMarketingError=this.elmLegal.querySelector(".rrmc-form-marketing-error"),this.elmAcceptanceError=this.elmForm.querySelector(".rrmc-form-acceptance-error"),this.elmsChannel=this.elmLegal.querySelectorAll(".rrmc-form-checkbox-input"),this.classError="is-shown",this.setMarketingValid(),this.setEmailValid(),this.setPhoneValid(),this.setAcceptanceValid()},(t=[{key:"setMarketingValid",value:function(){this.marketingAgreedValid=!0}},{key:"setMarketingInvalid",value:function(){this.marketingAgreedValid=!1}},{key:"setAcceptanceValid",value:function(){this.acceptanceAgreedValid=!0}},{key:"setAcceptanceInvalid",value:function(){this.acceptanceAgreedValid=!1}},{key:"setEmailValid",value:function(){this.emailValid=!0}},{key:"setEmailInvalid",value:function(){this.emailValid=!1}},{key:"setPhoneValid",value:function(){this.phoneValid=!0}},{key:"setPhoneInvalid",value:function(){this.phoneValid=!1}},{key:"isMarketingSelected",value:function(){return this.elmMarketingAgreed.checked}},{key:"forcedAcceptance",value:function(){return!this.acceptanceAgreedValid}},{key:"areThereErrors",value:function(){return!this.emailValid||!this.marketingAgreedValid||!this.phoneValid}},{key:"isThereMarketingAcceptance",value:function(){return this.isMarketingSelected()}},{key:"showError",value:function(){this.elmMarketingError.innerHTML=this.latestError,this.elmMarketingError.classList.add(this.classError)}},{key:"showAcceptanceError",value:function(){this.elmAcceptanceError.innerHTML=this.acceptanceError,this.elmAcceptanceError.classList.add(this.classError)}},{key:"hideError",value:function(){this.elmMarketingError.classList.remove(this.classError)}},{key:"hideAcceptanceError",value:function(){this.elmAcceptanceError.classList.remove(this.classError)}},{key:"errorMarketing",value:function(){this.setMarketingInvalid(),this.latestError=(0,r.K)("Please select at least one channel")}},{key:"errorMarketingAcceptance",value:function(){this.setAcceptanceInvalid(),this.acceptanceError=(0,r.K)("Please accept our terms to allow us to contact you")}},{key:"errorEmailRequired",value:function(){this.setMarketingInvalid(),this.latestError=(0,r.K)("Email acceptance is required to allow us to contact you")}},{key:"clearErrorMarketing",value:function(){this.setMarketingValid()}},{key:"clearErrorAcceptance",value:function(){this.setAcceptanceValid()}},{key:"isEmailEmpty",value:function(){return this.elmEmail&&0===this.elmEmail.value.trim().length}},{key:"isPhoneEmpty",value:function(){return this.elmPhone&&0===this.elmPhone.value.trim().length}},{key:"noChannelsSelected",value:function(){var e,t=d([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;)if(e.value.checked)return!1}catch(e){t.e(e)}finally{t.f()}return!0}},{key:"isEmailChannelSelected",value:function(){var e,t=d([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("email"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"isPhoneChannelSelected",value:function(){var e,t=d([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("phone"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"isMessengerChannelSelected",value:function(){var e,t=d([].slice.call(this.elmsChannel));try{for(t.s();!(e=t.n()).done;){var n=e.value;if("messengerMarketing"===n.id&&n.checked)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"errorEmail",value:function(){this.setEmailInvalid(),this.latestError=(0,r.K)("Please provide an email address")}},{key:"clearErrorEmail",value:function(){this.setEmailValid()}},{key:"errorPhone",value:function(){this.setPhoneInvalid(),this.latestError=(0,r.K)("Please provide a phone number")}},{key:"clearErrorPhone",value:function(){this.setPhoneValid()}},{key:"validateMarketingAgreed",value:function(){return this.isMarketingSelected()?this.isMarketingSelected()&&!this.isEmailChannelSelected()?(this.clearErrorAcceptance(),this.errorEmailRequired()):(this.isMarketingSelected()&&this.isEmailChannelSelected()&&(this.clearErrorAcceptance(),this.clearErrorMarketing()),this.clearErrorMarketing()):this.errorMarketingAcceptance()}},{key:"validateEmailChannel",value:function(){if(this.isEmailChannelSelected()&&this.isEmailEmpty())return this.errorEmail();this.clearErrorEmail()}},{key:"validatePhoneChannels",value:function(){if((this.isPhoneChannelSelected()||this.isMessengerChannelSelected())&&this.isPhoneEmpty())return this.errorPhone();this.clearErrorPhone()}},{key:"presentAcceptanceError",value:function(){if(this.forcedAcceptance())return this.showAcceptanceError();this.hideAcceptanceError()}},{key:"presentErrorsIfAny",value:function(){return this.areThereErrors()?this.showError():this.isThereMarketingAcceptance()?this.showAcceptanceError():void this.hideError()}},{key:"validate",value:function(){this.validateMarketingAgreed(),this.validateEmailChannel(),this.validatePhoneChannels(),this.presentErrorsIfAny(),this.presentAcceptanceError()}}])&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),g=n(4861),y=n(4344),_=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;const b=new function(){return{validateTextInput:function(e){var t=!0;return e.classList.contains("js-rrmc-required-true")&&(0==e.value.trim().length?($(e).css("border-bottom","2px solid #f94564"),$(e).next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),t=!1):($(e).next("span.rrmc-form-label-error").addClass("-hidden"),t=!0,$(e).css("border-bottom","2px solid #676776"))),t},validatePhoneInput:function(e,t){var n=!0,i=t.querySelector(".iti__selected-flag").getAttribute("min-length")?t.querySelector(".iti__selected-flag").getAttribute("min-length"):4;return e.value.trim().length>0&&e.value.trim().length<i?($(e).css("border-bottom","2px solid #f94564"),$(e).next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),n=!1):e.classList.contains("js-rrmc-required-true")&&(e.value.trim().length<i?($(e).css("border-bottom","2px solid #f94564"),$(e).next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),n=!1):($(e).next("span.rrmc-form-label-error").addClass("-hidden"),n=!0)),n},validateEmailInput:function(e){var t=!0;if(0!=e.classList.contains("js-rrmc-required-true"))return 0==e.value.trim().length?($(e).css("border-bottom","2px solid #f94564"),$(e).next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),t=!1):_.test(e.value)?($(e).next("span.rrmc-form-label-error").addClass("-hidden"),t=!0):($(e).css("border-bottom","2px solid #f94564"),$(e).next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("Please enter a valid email address")),t=!1),t},validateCheckboxFieldInput:function(e){var t=!0,n=$(e).find(".rrmc-form-checkbox-list");return $(e).hasClass("js-rrmc-model-brochure")&&Array.from(n).forEach((function(e){$(e).find(".rrmc-form-checkbox-input").is(":checked")?($(e).next("span.rrmc-form-label-error").addClass("-hidden"),t=!0):($(e).next(".rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("Please select at least one item.")),t=!1)})),$(e).hasClass("js-rrmc-whisper-checkbox")&&($('input[name="whisperCheckBox"]').is(":checked")?($(".rrmc-whisper-checkbox-label-error").addClass("-hidden"),t=!0):($(".rrmc-whisper-checkbox-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),t=!1)),t},validateSalutation:function(e){var t=!0;return $(e).children("option:selected").val()?($(e).parent().next("span.rrmc-form-label-error").addClass("-hidden"),t=!0):($(e).next(".select-custom").css("border-bottom","2px solid #f94564"),$(e).parent().next("span.rrmc-form-label-error").removeClass("-hidden").html((0,r.K)("This field is required.")),t=!1),t},loadOthers:function(e){var t=this,n=e.querySelectorAll(".js-rrmc-form-input"),r=e.querySelector("form"),o=r?r.id:"",a=!0;Array.from(n).forEach((function(e){!function(e,t){return"text"==e.type&&"vin"==e.name&&t===i.Y}(e,o)?"phone"==e.name?(e.value=(0,g.A)(e),t.validatePhoneInput(e,r)||(a=!1)):"text"==e.type?(e.value=(0,g.A)(e),t.validateTextInput(e)||(a=!1)):"email"==e.type?t.validateEmailInput(e)||(a=!1):"checkbox"==e.dataset.type?t.validateCheckboxFieldInput(e)||(a=!1):"salutation"==e.name||"localisedDealer"==e.name||"selectMyEvent"==e.name||"selectMyEventOption"==e.name?t.validateSalutation(e)||(a=!1):"checkbox"==e.type&&(t.validateCheckboxFieldInput(e)||(a=!1)):t.validateEmailInput(e)||(a=!1)}));var s=window.location.href,l=(0,y.fI)(),c=("join-waiting-list"===o||"keep-me-informed-rr25"===o)&&"en_US"===l;if(-1===s.indexOf("boutique/my-list")&&!c){var h=new u(r);h.validate(),h.areThereErrors()&&(a=!1)}if("keep-me-informed-rr25"===o&&"en_US"!==l){var d=new v(r);d.validate(),!d.areThereErrors()&&d.isThereMarketingAcceptance()||(a=!1)}return a}}}},9389:(e,t,n)=>{"use strict";n.r(t);var r=n(14),i=n(8607),o=n(1500),a=n(915),s=n.n(a),l=n(2862),c=n(2692),u=n.n(c),h=n(6801),d=n(1203),p=n(4540);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var g,y=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.heroWrapper=document.querySelector(".js-rrmc-hero-wrapper"),this.mainImage=this.sandbox.querySelector(".js-rrmc-hero-image"),this.blurImage=this.sandbox.querySelector(".js-rrmc-hero-image--blurred"),this.heroCopy=this.sandbox.querySelector(".js-rrmc-hero-copy"),this.heroTopSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--top"),this.heroTopSubtitle&&(0,p.Xq)(this.heroTopSubtitle,d.o),this.heroBottomSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--bottom"),this.heroBottomSubtitle&&(0,p.Xq)(this.heroBottomSubtitle,d.o),this.ctaWrapper=this.sandbox.querySelector(".js-rrmc-hero-cta-wrapper"),this.scrollIcon=this.sandbox.querySelector(".js-rrmc-hero-scroll-icon"),this.proxyTween=i.uo.to({},1,{paused:!0}),this.isScrolljack=!1,this.lottie_scroll=u().loadAnimation({container:this.scrollIcon,renderer:"svg",loop:!0,autoplay:!0,animationData:h.h7}),"objectFit"in document.documentElement.style==0&&s()(this.sandbox.querySelectorAll(".rrmc-hero-image")),this.heroTimeline=o.os.timeline({paused:!0,ease:i.FL.easeInOut});var r=[this.heroCopy,this.ctaWrapper,this.scrollIcon].filter((function(e){return!!e}));this.heroTimeline.addLabel("start").staggerTo(r,.5,{opacity:0,pointerEvents:"none"},.5,"start").to(this.blurImage,1,{opacity:1},"start+=0.33"),this.ticker=function(){var e=n.heroTimeline,t=e.progress();t+=.05*(n.proxyTween.progress()-t),e.progress(t)},o.os.ticker.add(this.ticker)},(t=[{key:"outerHeight",value:function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+(parseInt(n.marginTop)+parseInt(n.marginBottom))}},{key:"scrollAnimation",value:function(){this.outerHeight(this.mainImage)-73<window.pageYOffset?this.lottie_scroll.pause():this.lottie_scroll.play()}},{key:"initListeners",value:function(){window.addEventListenerRR("scroll",this.scrollAnimation.bind(this),r.C?{passive:!0}:"")}},{key:"load",value:function(){var e=this;this.sandbox.classList.contains("disable-scroll-hero")||((0,l.Ss)(this.sandbox),this.initListeners(),this.isScrolljack&&(this.heroWrapper.appendChild(this.sandbox),document.querySelector(".rrmc-page-canvas").style.top="".concat(this.heroWrapper.offsetHeight-200,"px"),document.querySelector(".rrmc-page-canvas").style.paddingTop="200px"),window.addEventListenerRR("scroll",(function(){var t=window.pageYOffset;e.proxyTween.progress(t/300)})))}}])&&m(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();g=document.querySelectorAll(".js-rrmc-hero-image-wrapper"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(g).forEach((function(e){var t=new y(e);e.data={heroInstance:t},t.load()}))}))},6387:(e,t,n)=>{"use strict";n.r(t);var r=n(14),i=n(1500),o=n(8607),a=n(915),s=n.n(a),l=n(2862),c=n(4540),u=n(1203);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var f,m=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.heroWrapper=document.querySelector(".js-rrmc-hero-parallax-wrapper"),this.mainImage=this.sandbox.querySelector(".js-rrmc-hero-image"),this.staticImage=this.sandbox.querySelector(".js-rrmc-static-image"),this.parallaxWrapper=this.sandbox.querySelector(".js-rrmc-hero-image--parallax"),this.parallaxImage=this.parallaxWrapper.querySelector("img"),this.heroCopy=this.sandbox.querySelector(".js-rrmc-hero-copy"),this.heroTopSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--top"),this.heroTopSubtitle&&(0,c.Xq)(this.heroTopSubtitle,u.o),this.heroBottomSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--bottom"),this.heroBottomSubtitle&&(0,c.Xq)(this.heroBottomSubtitle,u.o),this.ctaWrapper=this.sandbox.querySelector(".js-rrmc-hero-cta-wrapper"),this.scrollIcon=this.sandbox.querySelector(".js-rrmc-hero-scroll-icon"),this.isScrolljack=!1,"objectFit"in document.documentElement.style==0&&s()(this.sandbox.querySelectorAll(".rrmc-hero-image")),this.heroTimeline=i.os.timeline({paused:!0,ease:o.WG.noEase}),this.heroTimeline.addLabel("start").fromTo(this.parallaxImage,10,{y:0},{y:-300},"start+=0.40").fromTo(this.mainImage,25,{y:0},{y:-300},"start+=0.25").fromTo(this.heroCopy,25,{y:0},{y:400},"start+=1")},(t=[{key:"outerHeight",value:function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+(parseInt(n.marginTop)+parseInt(n.marginBottom))}},{key:"scrollAnimation",value:function(){this.outerHeight(this.parallaxImage),window.pageYOffset;var e=window.innerHeight,t=window.pageYOffset,n=Math.max(t/e,0);this.heroTimeline.progress(n).pause()}},{key:"initListeners",value:function(){window.addEventListenerRR("scroll",this.scrollAnimation.bind(this),r.C?{passive:!0}:""),window.addEventListenerRR("resize",this.scrollAnimation.bind(this),r.C?{passive:!0}:"")}},{key:"init",value:function(){var e=this;(0,l.Il)(this.sandbox,(function(){e.load()}))}},{key:"load",value:function(){this.sandbox.classList.contains("disable-scroll-hero")||(this.initListeners(),this.isScrolljack&&(this.heroWrapper.appendChild(this.sandbox),document.querySelector(".rrmc-page-canvas").style.top="".concat(this.heroWrapper.offsetHeight-200,"px"),document.querySelector(".rrmc-page-canvas").style.paddingTop="200px"))}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();f=document.querySelectorAll(".js-rrmc-hero-parallax-wrapper"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(f).forEach((function(e){var t=new m(e);e.data={heroInstance:t},t.init()}))}))},5956:(e,t,n)=>{"use strict";n.r(t);var r=n(14),i=n(8607),o=n(1500),a=n(2131),s=n.n(a),l=n(6801),c=n(9018),u=n(2692),h=n.n(u),d=n(259);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var v,g=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.video=this.sandbox.querySelector(".vjs-tech"),this.player=videojs.getPlayer(this.video),this.title=this.sandbox.querySelector(".rrmc-hero-video-mask--title"),this.trigger=this.sandbox.querySelector(".rrmc-hero-video-mask--trigger"),this.textWrapper=this.sandbox.querySelector(".rrmc-hero-video-mask--text"),this.pinnedSection=this.sandbox.querySelector(".rrmc-hero-video-mask--pinned-section"),this.videoWrapperMask=this.sandbox.querySelector(".js-rrmc-hero-video-wrapper-mask"),this.scrollIcon=this.sandbox.querySelector(".js-rrmc-hero-video-mask-scroll-icon"),this.proxyTween=i.uo.to({},1,{paused:!0}),this.desktopId=this.video.getAttribute("data-video-id-desktop"),this.mobileId=this.video.getAttribute("data-video-id-mobile"),this.loopTime=this.video.getAttribute("data-loop-time"),this.overlaybox=this.sandbox.querySelector(".rrmc-hero-video-mask--overlay"),this.isScrolljack=!1,this.currentWidth=window.innerWidth,this.windowSize,this.scrollController,this.heroVideoMaskTracking={scrollTrack:!1,loopTrack:!1},this.mobileSize=.06,this.tabletHorizontal=.135,this.tabletPortrait=.15,this.desktop=.26,this.isFFAndroid=(0,c.Kz)(),this.isFF=(0,c.Lo)(),this.endScale,this.lottie_scroll=h().loadAnimation({container:this.scrollIcon,renderer:"svg",loop:!0,autoplay:!0,animationData:l.h7});var r=videojs(this.video),a=r.getChild("errorDisplay");a.off(r,"error",a.open),a.dispose(),("objectFit"in document.documentElement.style==0||(0,c.nK)())&&this.video.classList.add("video-obj-fit"),this.heroTimeline=o.os.timeline({paused:!0,ease:i.FL.easeInOut});var s=[this.scrollIcon];this.heroTimeline.addLabel("start").staggerTo(s,.5,{opacity:0,pointerEvents:"none"},.5,"start"),this.ticker=function(){var e=n.heroTimeline,t=e.progress();t+=.05*(n.proxyTween.progress()-t),e.progress(t)},o.os.ticker.add(this.ticker)},(t=[{key:"outerHeight",value:function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+(parseInt(n.marginTop)+parseInt(n.marginBottom))}},{key:"scrollAnimation",value:function(){this.outerHeight(this.videoWrapperMask)-73<window.pageYOffset?(this.lottie_scroll.pause(),videojs(this.video).pause()):(this.lottie_scroll.play(),videojs(this.video).play())}},{key:"startHeroVideo",value:function(){var e=this,t=function t(){videojs(e.video).paused()?setTimeout((function(){t()}),200):e.video.classList.add("rrmc-hero-video-visible")},n=window.innerWidth>768?this.desktopId:this.mobileId;videojs.getPlayer(this.video).ready((function(){var e=this;e.catalog.getVideo(n,(function(t,n){e.catalog.load(n),e.play(),d.Gx({event:"pinned-hero-component",eventCategory:"pinned-hero",eventAction:"video-start"})})),t()}))}},{key:"lockPageAtFirst",value:function(){$(document).ready((function(){history.scrollRestoration?history.scrollRestoration="manual":window.onbeforeunload=function(){window.scrollTo(0,0)},document.body.classList.add("rrmc-hero-video-mask--stop-scrolling")}))}},{key:"loop",value:function(){!1===this.heroVideoMaskTracking.loopTrack&&(this.heroVideoMaskTracking.loopTrack=!0,d.Gx({event:"pinned-hero-component",eventCategory:"pinned-hero",eventAction:"loop-start"})),this.player.currentTime(this.loopTime>this.player.duration()?0:this.loopTime),this.player.play(),this.scrollIcon.style.opacity=1,document.body.classList.remove("rrmc-hero-video-mask--stop-scrolling")}},{key:"loopSectionVideo",value:function(){var e=this;this.player.on("ended",(function(){e.loop()}))}},{key:"setFontSize",value:function(){var e=window.innerWidth/{mobileSize:101,desktopSize:100,tabletH:100,tabletP:101}[this.windowSize]+3.2,t={mobileSize:361,desktopSize:320,tabletH:323,tabletP:319}[this.windowSize];this.isFFAndroid&&(t-=104,e+=5),this.isFF&&!1===this.isFFAndroid&&(e+=.2,t-=10);var n=e*t,r=o.os.timeline();r.set(this.title,{transformStyle:"preserve-3d",x:"".concat(n),y:0,scale:"".concat(e)}),r.set(this.textWrapper,{opacity:1})}},{key:"recalcFont",value:function(){window.innerWidth>768&&window.innerWidth<950?(this.endScale=this.tabletPortrait,this.title.style.letterSpacing="15px",this.windowSize="tabletP"):window.innerWidth>950&&window.innerWidth<1080?(this.endScale=this.tabletHorizontal,this.title.style.letterSpacing="25px",this.windowSize="tabletH"):window.innerWidth>1080?(this.endScale=this.desktop,this.title.style.letterSpacing="30px",this.windowSize="desktopSize"):window.innerWidth<768&&(this.endScale=this.mobileSize,this.title.style.letterSpacing="100px",this.windowSize="mobileSize")}},{key:"userScrollAnimation",value:function(){var e=this,t=o.os.timeline(),n=o.os.timeline();t.to(this.title,5,{opacity:1,x:0,y:0,scale:this.endScale}),n.to(this.overlaybox,window.innerWidth>1920?4:1,{opacity:0});var r=o.os.timeline({paused:!0});r.add(t,0),r.add(n,window.innerWidth>1920?2:0),this.scrollController=new(s().Controller),this.sandbox.style.height="".concat(this.pinnedSection.scrollHeight,"px"),new(s().Scene)({triggerElement:this.trigger,triggerHook:0,duration:window.innerWidth>1080?1600:800}).setPin(this.pinnedSection).setTween(r).addTo(this.scrollController).on("end",(function(){!1===e.heroVideoMaskTracking.scrollTrack&&(e.heroVideoMaskTracking.scrollTrack=!0,d.Gx({event:"pinned-hero-component",eventCategory:"pinned-hero",eventAction:"scroll-end"}))}))}},{key:"initListeners",value:function(){window.addEventListenerRR("scroll",this.scrollAnimation.bind(this),r.C?{passive:!0}:"")}},{key:"load",value:function(){var e=this;this.initListeners(),this.startHeroVideo(),this.loopSectionVideo(),this.lockPageAtFirst(),this.recalcFont(),this.setFontSize(),this.userScrollAnimation(),window.addEventListenerRR("resize",function(){this.currentWidth!==window.innerWidth&&(this.currentWidth=window.innerWidth,this.recalcFont(),this.scrollController.destroy(!0),this.setFontSize(),this.userScrollAnimation())}.bind(this)),window.addEventListenerRR("scroll",(function(){var t=window.pageYOffset;e.proxyTween.progress(t/300)}),r.C?{passive:!0}:"")}}])&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();v=document.querySelectorAll(".js-rrmc-hero-video-mask"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(v).forEach((function(e){var t=new g(e);e.data={heroInstance:t},t.load()}))}))},2023:(e,t,n)=>{"use strict";n.r(t);var r=n(14),i=n(8607),o=n(1500),a=n(6801),s=n(9018),l=n(2692),c=n.n(l),u=n(1203),h=n(4540);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var m,v=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.video=this.sandbox.querySelector(".vjs-tech"),this.videoWrapper=this.sandbox.querySelector(".js-rrmc-hero-video-wrapper"),this.heroCopy=this.sandbox.querySelector(".js-rrmc-hero-copy"),this.heroTopSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--top"),this.heroTopSubtitle&&(0,h.Xq)(this.heroTopSubtitle,u.o),this.heroBottomSubtitle=this.sandbox.querySelector(".rrmc-hero-subtitle--bottom"),this.heroBottomSubtitle&&(0,h.Xq)(this.heroBottomSubtitle,u.o),this.ctaWrapper=this.sandbox.querySelector(".js-rrmc-hero-cta-wrapper"),this.scrollIcon=this.sandbox.querySelector(".js-rrmc-hero-scroll-icon"),this.proxyTween=i.uo.to({},1,{paused:!0}),this.desktopId=this.video.getAttribute("data-video-id-desktop"),this.noLoop="true"===this.video.getAttribute("data-video-no-loop"),this.mobileId=this.video.getAttribute("data-video-id-mobile"),this.isScrolljack=!1,this.lottie_scroll=c().loadAnimation({container:this.scrollIcon,renderer:"svg",loop:!0,autoplay:!0,animationData:a.h7});var r=videojs(this.video),l=r.getChild("errorDisplay");l.off(r,"error",l.open),l.dispose(),("objectFit"in document.documentElement.style==0||(0,s.nK)())&&this.video.classList.add("video-obj-fit"),this.heroTimeline=o.os.timeline({paused:!0,ease:i.FL.easeInOut});var d=[this.heroCopy,this.ctaWrapper,this.scrollIcon].filter((function(e){return!!e}));this.heroTimeline.addLabel("start").staggerTo(d,.5,{opacity:0,pointerEvents:"none"},.5,"start"),this.ticker=function(){var e=n.heroTimeline,t=e.progress();t+=.05*(n.proxyTween.progress()-t),e.progress(t)},o.os.ticker.add(this.ticker)},(t=[{key:"outerHeight",value:function(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+(parseInt(n.marginTop)+parseInt(n.marginBottom))}},{key:"restartNoLoop",value:function(){var e=this.video.getBoundingClientRect(),t=window.innerHeight-e.height;e.top>=t&&videojs(this.video).paused()&&(this.video.currentTime=0,this.video.play())}},{key:"scrollAnimation",value:function(){this.outerHeight(this.videoWrapper)-73<window.pageYOffset?(videojs(this.video).pause(),this.lottie_scroll.pause()):(!this.noLoop&&videojs(this.video).paused()&&videojs(this.video).play(),this.lottie_scroll.play())}},{key:"scrollHandler",value:function(){this.scrollAnimation(),this.noLoop&&this.restartNoLoop()}},{key:"startHeroVideo",value:function(){var e=this,t=function t(){videojs(e.video).paused()?setTimeout((function(){t()}),200):e.video.classList.add("rrmc-hero-video-visible")},n=window.innerWidth>768?this.desktopId:this.mobileId;videojs.getPlayer(this.video).ready((function(){var e=this;e.catalog.getVideo(n,(function(t,n){e.catalog.load(n),e.play()})),t()}))}},{key:"initListeners",value:function(){window.addEventListenerRR("scroll",this.scrollHandler.bind(this),r.C?{passive:!0}:"")}},{key:"load",value:function(){var e=this;this.initListeners(),this.startHeroVideo(),window.addEventListenerRR("scroll",(function(){var t=window.pageYOffset;e.proxyTween.progress(t/300)}))}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();m=document.querySelectorAll(".js-rrmc-hero-video"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(m).forEach((function(e){var t=new v(e);e.data={heroInstance:t},t.load()}))}))},7656:(e,t,n)=>{"use strict";n.r(t);var r=n(4692),i=n.n(r),o=(n(9381),n(5847)),a=n(8607),s=n(259),l=n(5116),c=n(6801),u=n(2692),h=n.n(u),d=n(9018),p=n(915),f=n.n(p),m=n(2862),v=n(2453),g=n(1203),y=n(4540),_=n(5699);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(){w=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=_.prototype=g.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==b(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(b(t)+" is not iterable")}return y.prototype=_,i(k,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function x(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function S(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){x(o,r,i,a,s,"next",e)}function s(e){x(o,r,i,a,s,"throw",e)}a(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var M="default";setTimeout((function(){var e=(new Date).getHours();return location.href.indexOf("night")>-1?window.rrmc_experiences.push({campaign:"homepage-personalisation",experience:"night"}):location.href.indexOf("day")>-1?window.rrmc_experiences.push({campaign:"homepage-personalisation",experience:"day"}):void(e>=17||e<7?window.rrmc_experiences.push({campaign:"homepage-personalisation",experience:"night"}):window.rrmc_experiences.push({campaign:"homepage-personalisation",experience:"day"}))}),2e3);var L=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),history.scrollRestoration&&(history.scrollRestoration="manual"),this.container=t,this.oldIndex=-1,this.timer=null,this.settingAutoplayDelay=parseInt(1e3*i()(".js-rrmc-homepage-carousel").data("transition")),this.pagination=".js-rrmc-homepage-carousel-pagination",this.section=".js-rrmc-homepage-carousel-section",this.img_section=".js-rrmc-homepage-carousel-section--img",this.elm_image_sections=this.container.querySelectorAll(this.img_section),this.elm_sections=this.container.querySelectorAll(this.section),this.elm_nav_items=this.container.querySelectorAll(".js-rrmc-homepage-carousel-nav-item"),this.scrollIcon=this.container.querySelector(".js-rrmc-homepage-scroll-icon"),this.dataSection="data-section-name",this.bullet_progress=[],this.autoplay=!0,this.autoplay_stopped=!this.container.hasAttribute("data-autoplay-enabled"),this.elm_copy_subheading=[].slice.call(this.container.querySelectorAll(".rrmc-homepage-carousel-subheading")),this.elm_copy_heading=[].slice.call(this.container.querySelectorAll(".rrmc-homepage-carousel-heading")),this.elm_copy_bodytext=[].slice.call(this.container.querySelectorAll(".rrmc-homepage-carousel-bodytext"));for(var r=0;r<this.elm_copy_subheading.length;++r)(0,y.Xq)(this.elm_copy_subheading[r],g.o);for(var o=0;o<this.elm_copy_heading.length;++o)(0,y.Xq)(this.elm_copy_heading[o],g.o);for(var a=0;a<this.elm_copy_bodytext.length;++a)(0,y.Xq)(this.elm_copy_bodytext[a],g.o);this.current_section=null,this.boundary_magnitude=function(e){return e/2.5},this.on_scroll_mobile=function(){n.window_height=window.innerHeight,n.scroll_pos=window.pageYOffset,n.user_focus=n.scroll_pos+n.window_height/2,n.update_scroll_indicator(n.scroll_pos);var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(n.section_heights.entries());try{for(t.s();!(e=t.n()).done;){var r=E(e.value,2),i=r[0],o=r[1]+n.window_height/2,a=o-n.boundary_magnitude(n.window_height),s=o+n.boundary_magnitude(n.window_height);if(n.user_focus>a&&n.user_focus<s)return void n.change_current_section(i)}}catch(e){t.e(e)}finally{t.f()}n.change_current_section(null)},this.on_scroll_desktop=function(){n.scroll_pos=window.pageYOffset,n.update_scroll_indicator(n.scroll_pos),(0,_.A)()&&n.on_scroll_mobile()},this.on_resize=function(){n.store_section_heights()}},t=[{key:"change_current_section",value:function(e){e!==this.current_section&&(this.publish_section_change(e,this.current_section),this.current_section=e)}},{key:"publish_section_change",value:function(e,t){this.hide_copy(t),this.show_copy(e)}},{key:"store_section_heights",value:function(){this.section_heights=[].slice.call(this.elm_sections).map((function(e){return e.getBoundingClientRect().top+window.pageYOffset})),this.container_bottom=window.pageYOffset+this.container.getBoundingClientRect().bottom-window.innerHeight/2}},{key:"update_scroll_indicator",value:function(e){if(e>0&&!this.scroll_hide&&(this.scroll_hide=!0,this.lottie_scroll.pause(),this.container.classList.add("hide-scroll")),e>this.container_bottom){if(this.lottie_paused)return;this.lottie_paused=!0,this.container.classList.add("hide-nav")}else{if(!this.lottie_paused)return;this.lottie_paused=!1,this.container.classList.remove("hide-nav")}}},{key:"show_copy",value:function(e){if(null!==e){var t=this.elm_sections.item(e);t.classList.add("active"),this.video_current&&this.video_current.pause(),this.video_current=videojs.getPlayer(t.querySelector(".rrmc-home-carousel-video-js")),this.video_current&&this.video_current.ready((function(){this.paused&&this.play()}))}}},{key:"hide_copy",value:function(e){null!==e&&this.elm_sections.item(e).classList.remove("active")}},{key:"autoPlay",value:function(e){var t=this;if(!this.autoplay_stopped){var n=this;clearTimeout(this.timer),this.timer=setTimeout((function(){document.body.classList.contains("pause-hpc")||e.next(),e.currentIndex()===i()(n.section).length&&(t.autoplay_stopped=!0,clearTimeout(n.timer))}),n.settingAutoplayDelay)}}},{key:"addSvg",value:function(){for(var e=i()("".concat(this.pagination," a")),t=0;t<e.length;t++){var n=this.load_rounded_square(e[t]);this.bullet_progress.push(n)}}},{key:"load_rounded_square",value:function(e){var t=this,n=e.getBoundingClientRect(),r=n.width,i=n.height,s=(0,o.A)(r,i,1.5),l='\n        <svg class="rrmc-button-svg-anim" width="'.concat(r,'" height="').concat(i,'" viewBox="0 0 ').concat(r," ").concat(i,'" xmlns="http://www.w3.org/2000/svg">\n        ').concat(this.makeSvgPaths(s,"#ffffff"),"\n        </svg>\n    "),c=document.createRange().createContextualFragment(l);e.appendChild(c);var u=e.querySelector(".rrmc-button-svg-anim-path"),h=e.querySelector(".rrmc-button-svg-anim-scale"),d=e.querySelector(".rrmc-button-svg-anim-circle");return{start:function(){if(a.uo.killTweensOf(h),a.uo.killTweensOf(u),a.uo.killTweensOf(d),t.autoplay_stopped){var e=r/2-r/2*.4;a.uo.set(d,{opacity:1,attr:{r:r/8},autoRound:!1,ease:a.WG.easeNone}),a.uo.set(u,{strokeDashoffset:"-".concat(2*s.dash_length)}),a.uo.set(h,{transform:"matrix(".concat(.4,",0,0,").concat(.4,",").concat(e,",").concat(e,")"),autoRound:!1,ease:a.WG.easeNone}),a.uo.to(h,.4,{transform:"matrix(1,0,0,1,0,0)",autoRound:!1,ease:a.WG.easeNone})}else a.uo.set(h,{transform:"matrix(1,0,0,1,0,0)"}),a.uo.set(u,{strokeDashoffset:"-".concat(s.dash_length)}),a.uo.to(u,t.settingAutoplayDelay/1e3,{strokeDashoffset:"-".concat(2*s.dash_length),autoRound:!1,ease:a.WG.easeNone}),a.uo.to(d,.4,{opacity:1,attr:{r:r/8},autoRound:!1,ease:a.WG.easeNone})},stop:function(){a.uo.killTweensOf(u),a.uo.killTweensOf(h),a.uo.killTweensOf(d);var e=r/2-r/2*.4;a.uo.to(h,.4,{transform:"matrix(".concat(.4,",0,0,").concat(.4,",").concat(e,",").concat(e,")"),autoRound:!1,ease:a.WG.easeNone}),a.uo.set(u,{strokeDashoffset:"-".concat(s.dash_length-1),delay:.4}),a.uo.to(d,.4,{opacity:.5,attr:{r:r/5},autoRound:!1,ease:a.WG.easeNone})}}}},{key:"makeSvgPaths",value:function(e,t){return'\n          <circle class="rrmc-button-svg-anim-circle"\n            opacity=".5"\n            cx="'.concat(e.w/2,'" cy="').concat(e.w/2,'" fill="').concat(t,'" r="').concat(e.w/5,'"/>\n          <g class="rrmc-button-svg-anim-scale" transform="">\n            <path class="rrmc-button-svg-anim-path" d="\n                     M ').concat(e.middle_left," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_left_x," ").concat(e.arc_top_left_y,"\n                     L ").concat(e.arc_top_right_x," ").concat(e.arc_top_right_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_right," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_right_x," ").concat(e.arc_bottom_y,"\n                     L ").concat(e.arc_top_left_x," ").concat(e.arc_bottom_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_left," ").concat(e.middle_vertical,'\n                     "\n                  stroke-dasharray="').concat(e.dash_length," ").concat(e.dash_length,'"\n                  stroke-dashoffset="').concat(Math.ceil(-e.dash_length),'"\n                  stroke="').concat(t,'" stroke-width="1.5"\n                  stroke-linecap="square" stroke-linejoin="round"\n                  fill="transparent"></path>\n          </g>\n ')}},{key:"stop",value:function(){var e=this.oldIndex,t=this.bullet_progress[e];t&&t.stop()}},{key:"start",value:function(){var e=this.oldIndex,t=this.bullet_progress[e];t&&t.start()}},{key:"set_target_slides",value:function(){for(var e=[].slice.call(this.elm_sections),t=[].slice.call(this.elm_nav_items),n=0,r=0;n<e.length;++n,++r){var i=e[n].getAttribute("data-experience");e[n].setAttribute(this.dataSection,"section".concat(r)),this.match_slide_experience(i)&&(e[n].parentElement.removeChild(e[n]),--r)}for(var o=0,s=0;o<t.length;++o,++s){var l=t[o].getAttribute("data-experience");t[o].querySelector("a").setAttribute("href","#section".concat(s)),s&&t[o].querySelector("a").classList.add("active"),this.match_slide_experience(l)&&(t[o].parentElement.removeChild(t[o]),--s)}a.uo.to([this.elm_sections,this.elm_nav_items],.3,{opacity:1})}},{key:"match_slide_experience",value:function(e){return e!==this.experience&&e!==M}},{key:"load_images",value:function(){var e=this;return new Promise((function(t){var n=[].slice.call(e.container.querySelectorAll(".rrmc-home-carousel-image-default"));0===n.length&&t();var r=n[n.length-1];n.forEach((function(e,i){(0,m.Il)(e,(function(){n[i]===r&&t(!0)}))}))}))}},{key:"init_evergage",value:(r=S(w().mark((function e(){var t,n;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.rrmc_experiences){e.next=2;break}return e.abrupt("return",this.experience=M);case 2:return t=v.cy.makeStrategy("homepage-personalisation"),e.next=5,t.wait_for_experience();case 5:n=e.sent,this.experience=null===n?M:n;case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"load",value:(n=S(w().mark((function e(){var t,n,r,o=this;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init_evergage();case 2:return this.set_target_slides(),e.next=5,this.load_images();case 5:(0,d.en)()&&[].slice.call(this.elm_image_sections).forEach((function(e){var t=e.querySelector("img");t.src=t.getAttribute("data-src"),f()(t)})),this.addSvg(),window.addEventListenerRR("resize",this.on_resize),this.on_resize(),this.lottie_scroll=h().loadAnimation({container:this.scrollIcon,renderer:"svg",loop:!0,autoplay:!0,animationData:c.h7}),(t=this.container.querySelectorAll(".video-js")).length>0&&[].slice.call(t).forEach((function(e){var t=videojs.getPlayer(e),n=t.getChild("errorDisplay");n.off(t,"error",n.open),n.dispose()})),i()("[".concat(this.dataSection,"]")).each((function(){i()(this).find(".rrmc-homepage-carousel-copy").children().each((function(e){i()(this).css("animation-delay",200*e+"ms")}))})),window.addEventListenerRR("scroll",this.on_scroll_desktop),n="onwheel"in document?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",r=function e(){o.autoplay_stopped=!0,clearTimeout(o.timer),window.removeEventListenerRR(n,e)},window.addEventListenerRR(n,r),this.on_scroll_desktop(),i().scrollify({section:this.section,scrollSpeed:750,updateHash:!1,touchScroll:!1,interstitialSection:"",before:function(e,t){var n=t[e].attr(o.dataSection);o.stop(),clearTimeout(o.timer),i()("".concat(o.pagination," .active")).removeClass("active"),i()(o.pagination).find("a[href='#"+n+"']").addClass("active"),o.oldIndex>=0&&t[o.oldIndex].children().children(".vjs-tech").length&&t[o.oldIndex].children().children(".vjs-tech")[0].pause()},after:function(e,t){o.oldIndex=i().scrollify.currentIndex(),o.start(),i()("[".concat(o.dataSection,"].active")).removeClass("active"),t[e].addClass("active");var n=t[e].children().children(".vjs-tech")[0];if(n){var r=window.innerWidth>1024?n.getAttribute("data-video-id-desktop"):window.innerWidth<=768?n.getAttribute("data-video-id-mobile"):n.getAttribute("data-video-id-tablet");videojs.getPlayer(n).ready((function(){var e=this;e.catalog.getVideo(r,(function(t,n){try{e.catalog.load(n)}catch(t){console.log(t)}e.play()}))}))}o.autoPlay(i().scrollify)},afterRender:function(){i().scrollify.current().addClass("active"),o.oldIndex=i().scrollify.currentIndex(),o.start();var e=i().scrollify.current().children().children(".vjs-tech")[0];if(e){var t=window.innerWidth>1024?e.getAttribute("data-video-id-desktop"):window.innerWidth<=768?e.getAttribute("data-video-id-mobile"):e.getAttribute("data-video-id-tablet");videojs.getPlayer(e).ready((function(){var e=this;e.catalog.getVideo(t,(function(t,n){try{e.catalog.load(n)}catch(t){console.log(t)}e.play()}))}))}o.autoPlay(i().scrollify),i()("".concat(o.pagination," a")).on("click",(function(){this.autoplay_stopped=!0,clearTimeout(this.timer),i().scrollify.move(i()(this).attr("href")),s.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Bib Click ".concat(i()(this).parent().index()+1),eventLabel:"homepage carousel"})}))}}),(0,l.S)()&&(window.addEventListenerRR("scroll",this.on_scroll_mobile),this.on_scroll_mobile());case 20:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"destroy",value:function(){window.removeEventListenerRR("scroll",this.on_scroll_mobile),window.removeEventListenerRR("scroll",this.on_scroll_desktop),window.removeEventListenerRR("resize",this.on_resize)}}],t&&A(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelector(".js-rrmc-homepage-carousel");e&&new L(e).load()}))},9028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(8607),i=n(2862),o=n(7482),a=n(4755),s=n(2725);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}const h=function(){return e=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.is_overlay=n,this.hover_bounding_rect=r,this.hover_area=this.container,this.peek_window=this.container.querySelector(".js-rrmc-image-reveal-peek-max"),this.peek_canvas=this.container.querySelector(".js-rrmc-image-reveal-peek-canvas-max"),this.peek_canvas_context=this.peek_canvas.getContext("2d"),this.peek_dimension=125,this.peek_canvas.width=this.peek_dimension,this.peek_canvas.height=this.peek_dimension,this.reveal_image_desktop_url=this.container.getAttribute("data-hover-image-reveal-desktop-url"),this.reveal_image_desktop_width=parseInt(this.container.getAttribute("data-hover-image-reveal-desktop-width")),this.reveal_image_desktop_height=parseInt(this.container.getAttribute("data-hover-image-reveal-desktop-height")),this.reveal_image_mobile_url=this.container.getAttribute("data-hover-image-reveal-mobile-url"),this.reveal_image_mobile_width=parseInt(this.container.getAttribute("data-hover-image-reveal-mobile-width")),this.reveal_image_mobile_height=parseInt(this.container.getAttribute("data-hover-image-reveal-mobile-height")),this.peek_prev_pageX=0,this.peek_prev_pageY=0,this.peek_window_pos_x=0,this.peek_window_pos_y=0,this.on_mouse_move=function(e){i.is_hovering||i.show_peek();var t=e.pageX,n=e.pageY;i.peek_prev_pageX=t,i.peek_prev_pageY=n,i.udpate_peek_window_pos(t,n),i.move_peek_window()},this.on_scroll=function(){i.get_container_pos(),i.is_overlay?i.setup_orientation():i.hide_peek(),i.move_peek_window()},this.on_resize=function(){i.get_container_pos(),i.is_overlay?i.setup_orientation():i.hide_peek(),i.move_peek_window()},this.on_mouse_enter=function(){i.show_peek()},this.on_mouse_leave=function(){i.hide_peek()},this.on_orientation=function(e){var t=e.beta,n=e.gamma;t>=0&&i.move_by(.001*t,"up"),t<0&&i.move_by(.001*t,"down"),n>=0&&i.move_by(.001*n,"right"),n<0&&i.move_by(.001*n,"left"),i.move_peek_window()},this.movement_configuration={left:{local:"peek_window_pos_x",scaled:"peek_window_pos_x_scaled",axis:"width"},right:{local:"peek_window_pos_x",scaled:"peek_window_pos_x_scaled",axis:"width"},up:{local:"peek_window_pos_y",scaled:"peek_window_pos_y_scaled",axis:"height"},down:{local:"peek_window_pos_y",scaled:"peek_window_pos_y_scaled",axis:"height"}}},(t=[{key:"move_by",value:function(e,t){var n=this.movement_configuration[t],r=n.local,i=n.scaled,o=n.axis,a=this[i],s=this[r];this[i]=this[i]+e,this[r]=this[i]*this.hover_area_dimensions[o];var l=this[r]-this.hover_area_dimensions[o]/2,c=this[i]>1||this[i]<0;(Math.abs(l)>Math.abs(this.bounding_box_area_dimensions[o]/2)||c)&&(this[i]=a,this[r]=s)}},{key:"setup_orientation",value:function(){this.container.classList.add("show-peek"),this.peek_window_pos_x=this.hover_area_dimensions.width/2,this.peek_window_pos_y=this.hover_area_dimensions.height/2,this.peek_window_pos_x_scaled=.5,this.peek_window_pos_y_scaled=.5}},{key:"show_peek",value:function(){this.is_hovering=!0,this.container.classList.add("show-peek"),s.A.sub_cursor.next(["scale_large","enter"])}},{key:"hide_peek",value:function(){this.is_hovering=!1,this.container.classList.remove("show-peek"),s.A.sub_cursor.next(["scale_large","leave"])}},{key:"udpate_peek_window_pos",value:function(e,t){var n=window.pageXOffset,r=window.pageYOffset,i=e-n-this.hover_area_dimensions.left,o=t-r-this.hover_area_dimensions.top,a=i/this.hover_area_dimensions.width,s=o/this.hover_area_dimensions.height;this.peek_window_pos_x=i,this.peek_window_pos_y=o,this.peek_window_pos_x_scaled=a,this.peek_window_pos_y_scaled=s}},{key:"move_peek_window",value:function(){this.peek_window_pos_x_scaled<0||this.peek_window_pos_y_scaled<0||(r.uo.set(this.peek_window,{x:this.peek_window_pos_x,y:this.peek_window_pos_y}),this.draw_peek_image(this.peek_window_pos_x_scaled,this.peek_window_pos_y_scaled))}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e,this.is_overlay&&(this.bounding_box_area_dimensions=this.hover_bounding_rect.getBoundingClientRect())}},{key:"draw_peek_image",value:function(e,t){var n=e*this.reveal_image_width,r=t*this.reveal_image_height;this.peek_canvas_context.drawImage(this.reveal_image,Math.floor(n-this.peek_dimension/2),Math.floor(r-this.peek_dimension/2),this.peek_dimension,this.peek_dimension,0,0,this.peek_dimension,this.peek_dimension)}},{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"supports_orientation",value:function(){var e="ontouchstart"in window,t=window.DeviceOrientationEvent;return e&&t}},{key:"load",value:function(){var e=this;this.get_container_pos(),this.reveal_image=new Image,this.reveal_image.onload=function(){e.on_scroll(),e.supports_orientation()?(e.setup_orientation(),setTimeout((function(){window.addEventListenerRR("deviceorientation",e.on_orientation)}),1e3)):(e.hover_area.addEventListenerRR("mousemove",e.on_mouse_move),e.hover_area.addEventListenerRR("mouseenter",e.on_mouse_enter),e.hover_area.addEventListenerRR("mouseleave",e.on_mouse_leave))},this.reveal_image.src=this.is_desktop()?this.reveal_image_desktop_url:this.reveal_image_mobile_url,this.reveal_image_width=this.is_desktop()?this.reveal_image_desktop_width:this.reveal_image_mobile_width,this.reveal_image_height=(this.is_desktop(),this.reveal_image_desktop_height)}},{key:"destroy",value:function(){this.hover_area.removeEventListenerRR("mousemove",this.on_mouse_move),this.hover_area.removeEventListenerRR("mouseenter",this.on_mouse_enter),this.hover_area.removeEventListenerRR("mouseleave",this.on_mouse_leave),window.removeEventListenerRR("deviceorientation",this.on_orientation)}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var m=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_display=this.container.querySelector(".js-rrmc-image-reveal-display"),this.hover_area=this.container.querySelector(".js-rrmc-image-reveal-hover-area-max"),this.image_original=this.container.querySelector(".js-rrmc-image-reveal-original-img-max"),this.image_in_page=this.container.querySelector(".js-rrmc-image-hover-in-page-img-max"),this.f_original_image_aspect_ratio_desktop=this.hover_area.getAttribute("data-hover-image-reveal-desktop-aspect-ratio"),this.f_original_image_aspect_ratio_mobile=this.hover_area.getAttribute("data-hover-image-reveal-mobile-aspect-ratio"),this.on_resize=function(){n.get_container_pos(),n.set_aspect_ratio(),n.inst_hover_reveal&&n.inst_hover_reveal.on_resize()},this.on_scroll=function(){n.get_container_pos(),n.inst_hover_reveal&&n.inst_hover_reveal.on_scroll()};var r=this;this.on_display=function(){"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&r.make_overlay().animate_in()})).catch(console.error):r.make_overlay().animate_in()}},(t=[{key:"make_overlay",value:function(){var e=this,t=(new DOMParser).parseFromString('<div class="rrmc-image-reveal-overlay">\n        <div class="rrmc-image-reveal-overlay-position">\n          <div class="rrmc-overlay-nav-bar rrmc-overlay-nav-bar-dark">\n            <button data-overlay-action="overlayClose" type="button" data-theme="dark"\n             class="js-rrmc-hover-cta-close rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--dark rrmc-button--close">\n              <span class="rrmc-cta-i" data-icon="close" style="transform: matrix(1, 0, 0, 1, 0, -23);">\n                <span class="rrmc-cta-icon-placeholder"><svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M13.3139,2.0003 L14.7279,3.4143 L11.8989,6.2433 L10.4849,4.8293 L13.3139,2.0003 Z M3.4139,2.0003 L14.7279,13.3143 L13.3139,14.7283 L8.3639,9.7783 L3.4139,14.7283 L1.9999,13.3143 L6.9499,8.3643 L1.9999,3.4143 L3.4139,2.0003 Z" id="close"></path></defs><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon/close"><mask id="mask-2" fill="white"><use xlink:href="#close"></use></mask><use id="Combined-Shape" fill="currentColor" xlink:href="#close"></use></g></g></svg></span>\n          <svg class="rrmc-button-svg-anim" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n            <g transform="rotate(90 23 23)">\n            \n            <path class="rrmc-initial-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke="#6D30A7" stroke-opacity="1" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n            <path class="rrmc-button-svg-anim-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke-dasharray="143.3716694115407 143.3716694115407" stroke-dashoffset="-143.3716694115407" stroke="#57208c" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n   \n           </g>\n          </svg>\n      </span>\n              <span class="rrmc-button-text js-rrmc-button-text"></span>\n              <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </button>\n          </div>\n          <div class="js-rrmc-image-reveal-overlay-content rrmc-image-reveal-overlay-content">\n            <div class="js-rrmc-image-reveal-overlay-content-wrapper rrmc-image-reveal-overlay-content-wrapper">\n            </div>\n          </div>\n        </div>\n      </div>',"text/html").body.firstChild;document.body.appendChild(t);var n=t.querySelector(".js-rrmc-hover-cta-close"),i=new o.default(n);i.load();var s=this.hover_area.cloneNode(!0),l=t.querySelector(".js-rrmc-image-reveal-overlay-content"),c=t.querySelector(".js-rrmc-image-reveal-overlay-content-wrapper");c.appendChild(s);var u=window.innerHeight,d=this.is_desktop()?s.getAttribute("data-hover-image-reveal-desktop-aspect-ratio"):s.getAttribute("data-hover-image-reveal-mobile-aspect-ratio"),p=(u-82-64)/(parseFloat(d)/100);c.style.width="".concat(p,"px");var f={animate_in:function(){(0,a.disableBodyScroll)(t),(new r.Y_).to(t,.8,{y:"0%"}).add((function(){e.inst_hover_reveal=new h(s,!0,l),e.inst_hover_reveal.load()}))},animate_out:function(){(new r.Y_).to(t,.8,{y:"100%"}).add((function(){(0,a.clearAllBodyScrollLocks)(),i.destroy(),document.body.removeChild(t)}))}};return n.addEventListenerRR("click",(function(){f.animate_out()})),f}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e}},{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"set_aspect_ratio",value:function(){var e=this.is_desktop()?this.f_original_image_aspect_ratio_desktop:this.f_original_image_aspect_ratio_mobile;this.hover_area.style.paddingBottom="".concat(e,"%")}},{key:"load",value:function(){this.get_container_pos(),this.set_aspect_ratio(),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.on_scroll),(0,i.Il)(this.image_original),(0,i.Il)(this.image_in_page),this.is_desktop()&&(this.inst_hover_reveal=new h(this.hover_area,!1),this.inst_hover_reveal.load()),this.cta_display_cta=new o.default(this.elm_display),this.cta_display_cta.load(),this.elm_display.addEventListenerRR("click",this.on_display)}},{key:"destroy",value:function(){window.removeEventListenerRR("resize",this.on_resize),window.removeEventListenerRR("scroll",this.on_scroll),this.cta_display_cta&&this.cta_display_cta.destroy(),this.cta_display_cta&&this.cta_display_cta.removeEventListenerRR("click",this.on_display),this.inst_hover_reveal&&this.inst_hover_reveal.destroy()}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const v=m;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-image-reveal-container-max");[].slice.call(e).forEach((function(e){var t=new m(e);e.data={imageRevealInstance:t},t.load()}))}))},3176:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(8607),i=n(2862),o=n(7482),a=n(4755),s=n(2725);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}const h=function(){return e=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.is_overlay=n,this.hover_bounding_rect=r,this.hover_area=this.container,this.peek_window=this.container.querySelector(".js-rrmc-image-reveal-peek"),this.peek_canvas=this.container.querySelector(".js-rrmc-image-reveal-peek-canvas"),this.peek_canvas_context=this.peek_canvas.getContext("2d"),this.peek_dimension=125,this.peek_canvas.width=this.peek_dimension,this.peek_canvas.height=this.peek_dimension,this.reveal_image_desktop_url=this.container.getAttribute("data-hover-image-reveal-desktop-url"),this.reveal_image_desktop_width=parseInt(this.container.getAttribute("data-hover-image-reveal-desktop-width")),this.reveal_image_desktop_height=parseInt(this.container.getAttribute("data-hover-image-reveal-desktop-height")),this.reveal_image_mobile_url=this.container.getAttribute("data-hover-image-reveal-mobile-url"),this.reveal_image_mobile_width=parseInt(this.container.getAttribute("data-hover-image-reveal-mobile-width")),this.reveal_image_mobile_height=parseInt(this.container.getAttribute("data-hover-image-reveal-mobile-height")),this.peek_prev_pageX=0,this.peek_prev_pageY=0,this.peek_window_pos_x=0,this.peek_window_pos_y=0,this.on_mouse_move=function(e){i.is_hovering||i.show_peek();var t=e.pageX,n=e.pageY;i.peek_prev_pageX=t,i.peek_prev_pageY=n,i.udpate_peek_window_pos(t,n),i.move_peek_window()},this.on_scroll=function(){i.get_container_pos(),i.is_overlay?i.setup_orientation():i.hide_peek(),i.move_peek_window()},this.on_resize=function(){i.get_container_pos(),i.is_overlay?i.setup_orientation():i.hide_peek(),i.move_peek_window()},this.on_mouse_enter=function(){i.show_peek()},this.on_mouse_leave=function(){i.hide_peek()},this.on_orientation=function(e){var t=e.beta,n=e.gamma;t>=0&&i.move_by(.001*t,"up"),t<0&&i.move_by(.001*t,"down"),n>=0&&i.move_by(.001*n,"right"),n<0&&i.move_by(.001*n,"left"),i.move_peek_window()},this.movement_configuration={left:{local:"peek_window_pos_x",scaled:"peek_window_pos_x_scaled",axis:"width"},right:{local:"peek_window_pos_x",scaled:"peek_window_pos_x_scaled",axis:"width"},up:{local:"peek_window_pos_y",scaled:"peek_window_pos_y_scaled",axis:"height"},down:{local:"peek_window_pos_y",scaled:"peek_window_pos_y_scaled",axis:"height"}}},(t=[{key:"move_by",value:function(e,t){var n=this.movement_configuration[t],r=n.local,i=n.scaled,o=n.axis,a=this[i],s=this[r];this[i]=this[i]+e,this[r]=this[i]*this.hover_area_dimensions[o];var l=this[r]-this.hover_area_dimensions[o]/2,c=this[i]>1||this[i]<0;(Math.abs(l)>Math.abs(this.bounding_box_area_dimensions[o]/2)||c)&&(this[i]=a,this[r]=s)}},{key:"setup_orientation",value:function(){this.container.classList.add("show-peek"),this.peek_window_pos_x=this.hover_area_dimensions.width/2,this.peek_window_pos_y=this.hover_area_dimensions.height/2,this.peek_window_pos_x_scaled=.5,this.peek_window_pos_y_scaled=.5}},{key:"show_peek",value:function(){this.is_hovering=!0,this.container.classList.add("show-peek"),s.A.sub_cursor.next(["scale_large","enter"])}},{key:"hide_peek",value:function(){this.is_hovering=!1,this.container.classList.remove("show-peek"),s.A.sub_cursor.next(["scale_large","leave"])}},{key:"udpate_peek_window_pos",value:function(e,t){var n=window.pageXOffset,r=window.pageYOffset,i=e-n-this.hover_area_dimensions.left,o=t-r-this.hover_area_dimensions.top,a=i/this.hover_area_dimensions.width,s=o/this.hover_area_dimensions.height;this.peek_window_pos_x=i,this.peek_window_pos_y=o,this.peek_window_pos_x_scaled=a,this.peek_window_pos_y_scaled=s}},{key:"move_peek_window",value:function(){this.peek_window_pos_x_scaled<0||this.peek_window_pos_y_scaled<0||(r.uo.set(this.peek_window,{x:this.peek_window_pos_x,y:this.peek_window_pos_y}),this.draw_peek_image(this.peek_window_pos_x_scaled,this.peek_window_pos_y_scaled))}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e,this.is_overlay&&(this.bounding_box_area_dimensions=this.hover_bounding_rect.getBoundingClientRect())}},{key:"draw_peek_image",value:function(e,t){var n=e*this.reveal_image_width,r=t*this.reveal_image_height;this.peek_canvas_context.drawImage(this.reveal_image,Math.floor(n-this.peek_dimension/2),Math.floor(r-this.peek_dimension/2),this.peek_dimension,this.peek_dimension,0,0,this.peek_dimension,this.peek_dimension)}},{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"supports_orientation",value:function(){var e="ontouchstart"in window,t=window.DeviceOrientationEvent;return e&&t}},{key:"load",value:function(){var e=this;this.get_container_pos(),this.reveal_image=new Image,this.reveal_image.onload=function(){e.on_scroll(),e.supports_orientation()?(e.setup_orientation(),setTimeout((function(){window.addEventListenerRR("deviceorientation",e.on_orientation)}),1e3)):(e.hover_area.addEventListenerRR("mousemove",e.on_mouse_move),e.hover_area.addEventListenerRR("mouseenter",e.on_mouse_enter),e.hover_area.addEventListenerRR("mouseleave",e.on_mouse_leave))},this.reveal_image.src=this.is_desktop()?this.reveal_image_desktop_url:this.reveal_image_mobile_url,this.reveal_image_width=this.is_desktop()?this.reveal_image_desktop_width:this.reveal_image_mobile_width,this.reveal_image_height=(this.is_desktop(),this.reveal_image_desktop_height)}},{key:"destroy",value:function(){this.hover_area.removeEventListenerRR("mousemove",this.on_mouse_move),this.hover_area.removeEventListenerRR("mouseenter",this.on_mouse_enter),this.hover_area.removeEventListenerRR("mouseleave",this.on_mouse_leave),window.removeEventListenerRR("deviceorientation",this.on_orientation)}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}var m=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_display=this.container.querySelector(".js-rrmc-image-reveal-display"),this.hover_area=this.container.querySelector(".js-rrmc-image-reveal-hover-area"),this.image_original=this.container.querySelector(".js-rrmc-image-reveal-original-img"),this.image_in_page=this.container.querySelector(".js-rrmc-image-hover-in-page-img"),this.f_original_image_aspect_ratio_desktop=this.hover_area.getAttribute("data-hover-image-reveal-desktop-aspect-ratio"),this.f_original_image_aspect_ratio_mobile=this.hover_area.getAttribute("data-hover-image-reveal-mobile-aspect-ratio"),this.on_resize=function(){n.get_container_pos(),n.set_aspect_ratio(),n.inst_hover_reveal&&n.inst_hover_reveal.on_resize()},this.on_scroll=function(){n.get_container_pos(),n.inst_hover_reveal&&n.inst_hover_reveal.on_scroll()};var r=this;this.on_display=function(){"function"==typeof DeviceOrientationEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&r.make_overlay().animate_in()})).catch(console.error):r.make_overlay().animate_in()}},(t=[{key:"make_overlay",value:function(){var e=this,t=(new DOMParser).parseFromString('<div class="rrmc-image-reveal-overlay">\n        <div class="rrmc-image-reveal-overlay-position">\n          <div class="rrmc-overlay-nav-bar rrmc-overlay-nav-bar-dark">\n            <button data-overlay-action="overlayClose" type="button" data-theme="dark"\n             class="js-rrmc-hover-cta-close rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--dark rrmc-button--close">\n              <span class="rrmc-cta-i" data-icon="close" style="transform: matrix(1, 0, 0, 1, 0, -23);">\n                <span class="rrmc-cta-icon-placeholder"><svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M13.3139,2.0003 L14.7279,3.4143 L11.8989,6.2433 L10.4849,4.8293 L13.3139,2.0003 Z M3.4139,2.0003 L14.7279,13.3143 L13.3139,14.7283 L8.3639,9.7783 L3.4139,14.7283 L1.9999,13.3143 L6.9499,8.3643 L1.9999,3.4143 L3.4139,2.0003 Z" id="close"></path></defs><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon/close"><mask id="mask-2" fill="white"><use xlink:href="#close"></use></mask><use id="Combined-Shape" fill="currentColor" xlink:href="#close"></use></g></g></svg></span>\n          <svg class="rrmc-button-svg-anim" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n            <g transform="rotate(90 23 23)">\n            \n            <path class="rrmc-initial-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke="#6D30A7" stroke-opacity="1" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n            <path class="rrmc-button-svg-anim-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke-dasharray="143.3716694115407 143.3716694115407" stroke-dashoffset="-143.3716694115407" stroke="#57208c" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n   \n           </g>\n          </svg>\n      </span>\n              <span class="rrmc-button-text js-rrmc-button-text"></span>\n              <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </button>\n          </div>\n          <div class="js-rrmc-image-reveal-overlay-content rrmc-image-reveal-overlay-content">\n            <div class="js-rrmc-image-reveal-overlay-content-wrapper rrmc-image-reveal-overlay-content-wrapper">\n            </div>\n          </div>\n        </div>\n      </div>',"text/html").body.firstChild;document.body.appendChild(t);var n=t.querySelector(".js-rrmc-hover-cta-close"),i=new o.default(n);i.load();var s=this.hover_area.cloneNode(!0),l=t.querySelector(".js-rrmc-image-reveal-overlay-content"),c=t.querySelector(".js-rrmc-image-reveal-overlay-content-wrapper");c.appendChild(s);var u=window.innerHeight,d=this.is_desktop()?s.getAttribute("data-hover-image-reveal-desktop-aspect-ratio"):s.getAttribute("data-hover-image-reveal-mobile-aspect-ratio"),p=(u-82-64)/(parseFloat(d)/100);c.style.width="".concat(p,"px");var f={animate_in:function(){(0,a.disableBodyScroll)(t),(new r.Y_).to(t,.8,{y:"0%"}).add((function(){e.inst_hover_reveal=new h(s,!0,l),e.inst_hover_reveal.load()}))},animate_out:function(){(new r.Y_).to(t,.8,{y:"100%"}).add((function(){(0,a.clearAllBodyScrollLocks)(),i.destroy(),document.body.removeChild(t)}))}};return n.addEventListenerRR("click",(function(){f.animate_out()})),f}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e}},{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"set_aspect_ratio",value:function(){var e=this.is_desktop()?this.f_original_image_aspect_ratio_desktop:this.f_original_image_aspect_ratio_mobile;this.hover_area.style.paddingBottom="".concat(e,"%")}},{key:"load",value:function(){this.get_container_pos(),this.set_aspect_ratio(),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.on_scroll),(0,i.Il)(this.image_original),(0,i.Il)(this.image_in_page),this.is_desktop()&&(this.inst_hover_reveal=new h(this.hover_area,!1),this.inst_hover_reveal.load()),this.cta_display_cta=new o.default(this.elm_display),this.cta_display_cta.load(),this.elm_display.addEventListenerRR("click",this.on_display)}},{key:"destroy",value:function(){window.removeEventListenerRR("resize",this.on_resize),window.removeEventListenerRR("scroll",this.on_scroll),this.cta_display_cta&&this.cta_display_cta.destroy(),this.cta_display_cta&&this.cta_display_cta.removeEventListenerRR("click",this.on_display),this.inst_hover_reveal&&this.inst_hover_reveal.destroy()}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const v=m;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-image-reveal-container");[].slice.call(e).forEach((function(e){var t=new m(e);e.data={imageRevealInstance:t},t.load()}))}))},8502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(2862),i=n(7482),o=n(4755);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}const c=function(){return e=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.is_overlay=n,this.hover_area=this.container,this.reveal_window=this.container.querySelector(".js-rrmc-image-scratch-peek"),this.reveal_canvas=this.container.querySelector(".js-rrmc-image-scratch-canvas"),this.reveal_canvas_context=this.reveal_canvas.getContext("2d"),this.scratch_dimension=100,this.reveal_canvas.width=this.scratch_dimension,this.reveal_canvas.height=this.scratch_dimension,this.scratch_image_desktop_url=this.container.getAttribute("data-scratch-image-reveal-desktop-url"),this.scratch_image_desktop_width=parseInt(this.container.getAttribute("data-scratch-image-reveal-desktop-width")),this.scratch_image_desktop_height=parseInt(this.container.getAttribute("data-scratch-image-reveal-desktop-height")),this.scratch_image_mobile_url=this.container.getAttribute("data-scratch-image-reveal-mobile-url"),this.scratch_image_mobile_width=parseInt(this.container.getAttribute("data-scratch-image-reveal-mobile-width")),this.scratch_image_mobile_height=parseInt(this.container.getAttribute("data-scratch-image-reveal-mobile-height")),this.reveal_prev_pageX=0,this.reveal_prev_pageY=0,this.reveal_window_pos_x=0,this.reveal_window_pos_y=0,this.brush_size=.04,this.on_mouse_move=function(e){var t=e.pageX,n=e.pageY;void 0===t&&(t=e.touches[0].pageX,n=e.touches[0].pageY),r.udpate_reveal_coord(t,n),r.move_reveal_window(),r.reveal_prev_window_pos_x=t,r.reveal_prev_window_pos_y=n},this.on_scroll=function(){r.store_image(),r.get_container_pos(),r.restore_image()},this.on_resize=function(){r.store_image(),r.get_container_pos(),r.restore_image()}},(t=[{key:"create_buffer",value:function(){this.bufferCanvas=document.createElement("canvas"),this.bufferCanvas.width=this.reveal_canvas.width,this.bufferCanvas.height=this.reveal_canvas.height,this.bufferCanvasCtx=this.bufferCanvas.getContext("2d")}},{key:"store_image",value:function(){this.bufferCanvasCtx&&(this.bufferCanvasCtx.clearRect(0,0,this.bufferCanvas.width,this.bufferCanvas.height),this.bufferCanvasCtx.drawImage(this.reveal_canvas,0,0,this.reveal_canvas.width,this.reveal_canvas.height,0,0,this.bufferCanvas.width,this.bufferCanvas.height))}},{key:"restore_image",value:function(){this.bufferCanvas&&this.reveal_canvas_context.drawImage(this.bufferCanvas,0,0,this.bufferCanvas.width,this.bufferCanvas.height,0,0,this.reveal_canvas.width,this.reveal_canvas.height)}},{key:"udpate_reveal_coord",value:function(e,t){var n=window.pageXOffset,r=window.pageYOffset,i=e-n-this.hover_area_dimensions.left,o=t-r-this.hover_area_dimensions.top,a=i/this.hover_area_dimensions.width,s=o/this.hover_area_dimensions.height;this.reveal_window_pos_x=i,this.reveal_window_pos_y=o,this.reveal_window_pos_x_scaled=a,this.reveal_window_pos_y_scaled=s}},{key:"move_reveal_window",value:function(){this.reveal_window_pos_x_scaled<0||this.reveal_window_pos_y_scaled<0||this.draw_reveal_image(this.reveal_window_pos_x_scaled,this.reveal_window_pos_y_scaled)}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e,this.reveal_canvas.width=this.scratch_image_width,this.reveal_canvas.height=this.scratch_image_height}},{key:"draw_reveal_image",value:function(e,t){var n=e*this.scratch_image_width,r=t*this.scratch_image_height,i=e*this.scratch_image_width,o=t*this.scratch_image_height,a=this.scratch_dimension,s=a,l=this.scratch_dimension,c=l;this.offscreenCanvasCtx.clearRect(0,0,l,c),this.offscreenCanvasCtx.drawImage(this.scratch_image,n-.5*a,r-.5*s,a,s,0,0,l,c),this.reveal_canvas_context.save(),this.reveal_canvas_context.drawImage(this.offscreenCanvas,0,0,Math.floor(l),Math.floor(c),i-.5*l,o-.5*c,l,c),this.reveal_canvas_context.restore()}},{key:"create_prerender_canvas",value:function(){var e=this.scratch_dimension,t=e;this.offscreenCanvas=document.createElement("canvas"),this.offscreenCanvas.width=e,this.offscreenCanvas.height=t,this.offscreenCanvasCtx=this.offscreenCanvas.getContext("2d"),this.smoothing_gradient=this.offscreenCanvasCtx.createRadialGradient(e/2,t/2,0,e/2,t/2,e/2),this.smoothing_gradient.addColorStop(0,"rgba(255, 0, 0, 255)"),this.smoothing_gradient.addColorStop(1,"rgba(255, 0, 0, 0)")}},{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"supports_touch",value:function(){return"ontouchstart"in window}},{key:"load",value:function(){var e=this;this.scratch_image=new Image,this.scratch_image.onload=function(){e.get_container_pos(),e.create_prerender_canvas(),e.create_buffer(),e.supports_touch()?e.hover_area.addEventListenerRR("touchmove",e.on_mouse_move):e.hover_area.addEventListenerRR("mousemove",e.on_mouse_move)},this.scratch_image.src=this.is_desktop()?this.scratch_image_desktop_url:this.scratch_image_mobile_url,this.scratch_image_width=this.is_desktop()?this.scratch_image_desktop_width:this.scratch_image_mobile_width,this.scratch_image_height=this.is_desktop()?this.scratch_image_desktop_height:this.scratch_image_mobile_height}},{key:"destroy",value:function(){this.hover_area.removeEventListenerRR("mousemove",this.on_mouse_move)}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var u=n(8607);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var f=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.image_original=this.container.querySelector(".js-rrmc-image-scratch-original-img"),this.image_in_page=this.container.querySelector(".js-rrmc-image-scratch-in-page-img"),this.hover_area=this.container.querySelector(".js-rrmc-image-scratch-hover-area"),this.elm_display=this.container.querySelector(".js-rrmc-image-scratch-display"),this.f_original_image_aspect_ratio_desktop=this.hover_area.getAttribute("data-scratch-image-original-desktop-aspect-ratio"),this.f_original_image_aspect_ratio_mobile=this.hover_area.getAttribute("data-scratch-image-original-mobile-aspect-ratio"),this.on_resize=function(){n.get_container_pos(),n.set_aspect_ratio(),n.inst_scratch_reveal&&n.inst_scratch_reveal.on_resize()},this.on_scroll=function(){n.get_container_pos(),n.inst_scratch_reveal&&n.inst_scratch_reveal.on_scroll()};var r=this;this.on_display=function(){r.make_overlay().animate_in()}},(t=[{key:"is_desktop",value:function(){return window.innerWidth>1024}},{key:"get_container_pos",value:function(){var e=this.hover_area.getBoundingClientRect();this.hover_area_dimensions=e}},{key:"make_overlay",value:function(){var e=this,t=(new DOMParser).parseFromString('<div class="rrmc-image-scratch-overlay">\n        <div class="rrmc-image-scratch-overlay-position">\n          <div class="rrmc-overlay-nav-bar rrmc-overlay-nav-bar-dark">\n            <button data-overlay-action="overlayClose" type="button" data-theme="dark"\n             class="js-rrmc-hover-cta-close rrmc-cta-component rrmc-button--regular-icon-stroked rrmc-button--dark rrmc-button--close">\n              <span class="rrmc-cta-i" data-icon="close" style="transform: matrix(1, 0, 0, 1, 0, -23);">\n                <span class="rrmc-cta-icon-placeholder"><svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M13.3139,2.0003 L14.7279,3.4143 L11.8989,6.2433 L10.4849,4.8293 L13.3139,2.0003 Z M3.4139,2.0003 L14.7279,13.3143 L13.3139,14.7283 L8.3639,9.7783 L3.4139,14.7283 L1.9999,13.3143 L6.9499,8.3643 L1.9999,3.4143 L3.4139,2.0003 Z" id="close"></path></defs><g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="icon/close"><mask id="mask-2" fill="white"><use xlink:href="#close"></use></mask><use id="Combined-Shape" fill="currentColor" xlink:href="#close"></use></g></g></svg></span>\n          <svg class="rrmc-button-svg-anim" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n            <g transform="rotate(90 23 23)">\n            \n            <path class="rrmc-initial-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke="#6D30A7" stroke-opacity="1" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n            <path class="rrmc-button-svg-anim-path" d="\n                     M 0.5 23\n                     A 22.5 22.5 0 0 1 23 0.5\n                     L 23 0.5\n                     A 22.5 22.5 0 0 1 45.5 23\n                     A 22.5 22.5 0 0 1 23 45.5\n                     L 23 45.5\n                     A 22.5 22.5 0 0 1 0.5 23\n                     " stroke-dasharray="143.3716694115407 143.3716694115407" stroke-dashoffset="-143.3716694115407" stroke="#57208c" stroke-width="1" stroke-linecap="square" stroke-linejoin="round" fill="transparent"></path>\n   \n           </g>\n          </svg>\n      </span>\n              <span class="rrmc-button-text js-rrmc-button-text"></span>\n              <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n            </button>\n          </div>\n          <div class="js-rrmc-image-scratch-overlay-content rrmc-image-scratch-overlay-content">\n            <div class="js-rrmc-image-scratch-overlay-content-wrapper rrmc-image-scratch-overlay-content-wrapper">\n            </div>\n          </div>\n        </div>\n      </div>',"text/html").body.firstChild;document.body.appendChild(t);var n=t.querySelector(".js-rrmc-hover-cta-close"),r=new i.default(n);r.load();var a=this.hover_area.cloneNode(!0),s=t.querySelector(".js-rrmc-image-scratch-overlay-content-wrapper");s.appendChild(a);var l=window.innerHeight,h=this.is_desktop()?a.getAttribute("data-scratch-image-original-desktop-aspect-ratio"):a.getAttribute("data-scratch-image-original-mobile-aspect-ratio"),d=(l-82-64)/(parseFloat(h)/100);s.style.width="".concat(d,"px");var p={animate_in:function(){(0,o.disableBodyScroll)(t),(new u.Y_).to(t,.8,{y:"0%"}).add((function(){e.inst_scratch_reveal=new c(a,!0),e.inst_scratch_reveal.load()}))},animate_out:function(){(new u.Y_).to(t,.8,{y:"100%"}).add((function(){(0,o.clearAllBodyScrollLocks)(),r.destroy(),document.body.removeChild(t)}))}};return n.addEventListenerRR("click",(function(){p.animate_out()})),p}},{key:"set_aspect_ratio",value:function(){var e=this.is_desktop()?this.f_original_image_aspect_ratio_desktop:this.f_original_image_aspect_ratio_mobile;this.hover_area.style.paddingBottom="".concat(e,"%")}},{key:"load",value:function(){this.get_container_pos(),this.set_aspect_ratio(),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.on_scroll),(0,r.Il)(this.image_original),(0,r.Il)(this.image_in_page),this.is_desktop()&&(this.inst_scratch_reveal=new c(this.hover_area,!1),this.inst_scratch_reveal.load()),this.cta_display_cta=new i.default(this.elm_display),this.cta_display_cta.load(),this.elm_display.addEventListenerRR("click",this.on_display)}},{key:"destroy",value:function(){window.removeEventListenerRR("resize",this.on_resize),window.removeEventListenerRR("scroll",this.on_scroll),this.inst_scratch_reveal&&this.inst_scratch_reveal.destroy()}}])&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const m=f;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-image-scratch-container");[].slice.call(e).forEach((function(e){var t=new f(e);e.data={imageScratchInstance:t},t.load()}))}))},7285:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d}),n(5127);var r=n(5076),i=n(2862),o=n(915),a=n.n(o),s=n(8607);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.transitionMarker=this.container.querySelector(".rrmc-image-switch-transition-marker"),this.originalImage=this.container.querySelector(".js-rrmc-image-switch-original-img"),this.originalImage&&(this.originalImage_img=this.container.querySelector(".rrmc-image-switch-original-img")),this.swapImage=this.container.querySelector(".js-rrmc-image-switch-swap-img"),this.swapImage&&(this.swapImage_img=this.container.querySelector(".rrmc-image-switch-swap-img")),this.aspect_ratio=this.container.querySelector(".js-rrmc-image-switch-aspect"),this.transitionMarker=this.container.querySelector(".rrmc-image-switch-transition-marker"),this.swapImage&&(this.transitionTimeline=(new s.Y_).addLabel("start").fromTo(this.swapImage,1,{opacity:0},{opacity:1},"start").fromTo(this.originalImage,1,{opacity:1},{opacity:0},"start+=1")),this.load_images=function(e){(0,i.Il)(n.originalImage,(function(){n.swapImage?(0,i.Il)(n.swapImage,(function(){"objectFit"in document.documentElement.style==0&&a()(n.swapImage_img),e()})):e()}))},this.set_aspect_ratio=function(){new Promise((function(e){n.load_images(e)})).then((function(){n.on_resize(),n.swapImage&&new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio>0||e.boundingClientRect.top<0?n.transitionTimeline.play():0===e.intersectionRatio&&e.boundingClientRect.top>0&&n.transitionTimeline.reverse()}))})).observe(n.transitionMarker)}))},this.load_asset=function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||n.is_edit_mode||window.pageYOffset+window.innerHeight+300>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_asset),n.set_aspect_ratio())},this.on_resize=function(){n.set_container_aspect_ratio_image()}},t=[{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_top=e.top+window.pageYOffset}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.get_container_top(),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.load_asset),this.load_asset(!!e.overlayName)}},{key:"destroy",value:function(){window.removeEventListenerRR("resize",this.on_resize),window.removeEventListenerRR("scroll",this.load_asset),this.swapImage&&s.uo.set([this.swapImage,this.originalImage],{clearProps:"all"})}},{key:"set_container_padding_bottom",value:function(e){this.aspect_ratio.style.paddingBottom="".concat(100*e,"%")}},{key:"set_container_aspect_ratio_image",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};(0,r.A)((function(){var t=e.originalImage_img,n=t.naturalWidth,r=t.naturalHeight;return n>10&&r>10}),(function(){var n=e.originalImage_img,r=n.naturalWidth,i=n.naturalHeight;e.image_aspect_ratio=i/r,e.set_container_padding_bottom(e.image_aspect_ratio),t()}),this)}}],t&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const d=h;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-image-switch-container");[].slice.call(e).forEach((function(e){var t=new h(e);e.data={imageSwitchInstance:t},t.load()}))}))},9905:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(2725);function o(e,t,n){return t=s(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,n||[],s(e).constructor):t.apply(e,n))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var m=function(){return p((function e(){h(this,e)}),[{key:"waitFor",value:function(e,t,n){var r=this;if(t())return n();setTimeout((function(){r.waitFor(1.1*e,t,n)}),e)}},{key:"start",value:function(){throw new Error("KryptosApp::start is undefined")}}])}(),v=function(e){function t(){return h(this,t),o(this,t,arguments)}return l(t,e),p(t,[{key:"startKryptos",value:function(){this.waitFor(1e3,(function(){return window.run_kryptos}),(function(){return window.run_kryptos()}))}},{key:"start",value:function(){this.startKryptos()}}])}(m),g=function(e){function t(){return h(this,t),o(this,t,arguments)}return l(t,e),p(t,[{key:"startPlaceholder",value:function(){var e=document.querySelectorAll(".rrmc-section");[].slice.call(e).forEach((function(e){r.uo.set(e,{opacity:0,display:"block"}),r.uo.to(e,3,{opacity:1,ease:r.WG.easeNone})}))}},{key:"start",value:function(){this.startPlaceholder()}}])}(m),y=function(){return p((function e(t){var n=this;h(this,e),this.user_agent=t,this.is_mobile=function(){var e=n.user_agent;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}}),[{key:"createApp",value:function(){return this.is_mobile()?new v:new g}}])}(),_=function(){return p((function e(t){h(this,e),this.user_agent=navigator.userAgent||navigator.vendor||window.opera,this.container=t}),[{key:"onDeviceInfoLoaded",value:function(){for(var e={},t=0,n=["devicePreviousVisit","deviceName","deviceVersion","deviceOs","deviceOsVersion","deviceBrowser","deviceBrowserVersion","deviceBrowserLanguage","deviceReferringUrl","deviceCarModelPagesVisited"];t<n.length;t++){var r=n[t];if(this.epaas.isUsageAllowed(r)){var i=this.epaas.getPersistence(r),o="Not available";""!=i&&(o=i),e[r]=o}}return e}},{key:"load",value:function(){var e=this,t=new y(this.user_agent).createApp();i.A.sub_epaas.subscribe({next:function(n){e.epaas=n.epaas,window.rrmc_kryptos_form_meta_data=e.onDeviceInfoLoaded(),t.start()}})}}])}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-kryptos-quiz-container");[].slice.call(e).forEach((function(e){new _(e).load()}))}))},4772:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>v});var r=n(2725);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c={en_GB:"en",en_US:"us",ja_JP:"ja",ru_RU:"ru",ko_KR:"ko"},u=function(){return s((function e(){o(this,e),this.preference={}}),[{key:"set_language",value:function(e){this.preference.language=e}},{key:"get_language",value:function(){return this.preference.language}},{key:"set_from_string",value:function(e){null!==e&&this.set_language(e)}},{key:"to_string",value:function(){return this.get_language()}}])}(),h=new(function(){return s((function e(){var t=this;o(this,e),r.A.sub_epaas.subscribe({next:function(e){var n=e.epaas;t.epaas=n,t.initialise_language_service()}})}),[{key:"check_use_allowed",value:function(){this.use_allowed=this.epaas.isUsageAllowed("rrmc-language")}},{key:"is_use_allowed",value:function(){return this.use_allowed}},{key:"is_use_not_allowed",value:function(){return!this.is_use_allowed()}},{key:"read_persistence",value:function(){return this.epaas.getPersistence("rrmc-language")}},{key:"set_persistence",value:function(e){return this.epaas.setPersistence("rrmc-language",e)}},{key:"set_preference",value:function(e){this.preference=e}},{key:"get_preference",value:function(){return this.preference}},{key:"read_language_preference",value:function(){var e=new u;e.set_from_string(this.read_persistence()),this.set_preference(e)}},{key:"store_language_preference",value:function(){this.set_persistence(this.preference.to_string())}},{key:"initialise_language_service",value:function(){this.check_use_allowed(),this.is_use_not_allowed()||(this.read_language_preference(),r.A.sub_preferred_language.next(this.get_preference()))}},{key:"select_language",value:function(e){this.set_preference(e),this.store_language_preference()}},{key:"subscribe",value:function(e){return r.A.sub_preferred_language.subscribe({next:e})}}])}()),d=n(259);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}const v=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elms_links=[].slice.call(this.container.querySelectorAll(".js-rrmc-language-selector-cta")),this.on_click=function(e){e.preventDefault();var t=e.currentTarget,r=t.getAttribute("data-locale");if(n.highlight_selected(t),r){var i=new u;i.set_language(function(e){return c[e]}(r)),h.select_language(i)}var o="language: ".concat(t.textContent.trim().toLowerCase());n.track_click((function(){window.location.href=t.getAttribute("href")}),o)}},(t=[{key:"highlight_selected",value:function(e){this.elms_links.forEach(this.remove_selected_class),this.add_selected_class(e)}},{key:"remove_selected_class",value:function(e){e.classList.remove("is-current")}},{key:"add_selected_class",value:function(e){e.classList.add("is-current")}},{key:"track_click",value:function(e,t){(0,d.Gx)({event:"languageConfirm",eventCategory:"languageOverlay",eventAction:"languageSelect",eventLabel:t,eventCallback:e,eventTimeout:2e3})}},{key:"dispose_listener",value:function(e){e.removeEventListenerRR("click",this.on_click)}},{key:"has_locale",value:function(e){return!!e.getAttribute("data-locale")}},{key:"init_listener",value:function(e){this.has_locale(e)&&e.addEventListenerRR("click",this.on_click)}},{key:"load",value:function(){var e=this;this.elms_links.forEach((function(t){return e.init_listener(t)}))}},{key:"destroy",value:function(){var e=this;this.elms_links.forEach((function(t){return e.dispose_listener(t)}))}}])&&f(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},9128:(e,t,n)=>{"use strict";n.r(t);var r=n(259),i=n(2862),o=n(1500),a=n(8607),s=n(915),l=n.n(s);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var d=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkBanner=t,this.loaded=!1,this.linkBanner&&(this.title=this.linkBanner.querySelector(".js-rrmc-link-banner-title"),this.description=this.linkBanner.querySelector(".js-rrmc-link-banner-description"),this.link=this.linkBanner.querySelector(".js-rrmc-link-banner-link"),this.image=this.linkBanner.querySelector(".js-rrmc-link-banner-image")),this.on_click=function(){r.Gx({event:"linkBannerClick",eventCategory:"tbd",eventAction:"tbd",eventLabel:"tbd",eventCallback:function(e){this.link&&"_blank"!==e.target.getAttribute("target")&&(window.location=this.link)}})}},(t=[{key:"load",value:function(){var e=this;this.image&&(0,i.Ss)(this.image,(function(){"objectFit"in document.documentElement.style||l()(e.image.querySelector("img")),e.animateIn()})),this.link.addEventListenerRR("click",this.on_click)}},{key:"animateIn",value:function(){this.tlForward=o.os.timeline(),this.tlForward.add("start"),this.tlForward.to(this.linkBanner,.5,{y:-48,ease:a.WG.easeNone},"start"),this.tlForward.to(this.linkBanner,.5,{opacity:1,ease:a.WG.easeNone},"start=+0.25"),this.tlForward.set(this.linkBanner,{pointerEvents:"auto"})}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-link-banner");[].slice.call(e).forEach((function(e){new d(e).load()}))}))},2503:(e,t,n)=>{"use strict";n.r(t);var r=n(2725),i=n(5116);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.parallax_on=this.container.hasAttribute("data-parallax-on"),this.col_a_wrapper=t.querySelector(".js-long-copy-title-wrapper"),this.col_a=t.querySelector(".js-long-copy-title-fixed-wrapper"),this.margin_top_const=200,this.on_scroll=function(){if((0,i.h)())return n.col_a.classList.remove(n.old_pos_classname),n.old_pos_classname=null,n.col_a.style.marginTop=null,void(n.col_a.style.marginBottom=null);var e,t=window.pageYOffset,r=t-n.container_top,o=n.container_top+n.container_height-n.margin_top_const-n.content_height;(e=r>=-n.margin_top_const&&t<o?"fixed":r>=-n.margin_top_const&&t>o?"static-bottom":"static")!=n.old_pos_classname&&(n.col_a.classList.add(e),n.col_a.classList.remove(n.old_pos_classname),"static-bottom"==e?n.set_margin_to_bottom():"fixed"==e?n.set_margin():n.set_margin_static(),n.old_pos_classname=e)},this.on_resize=function(){n.init_container(),"static-bottom"==n.old_pos_classname?n.set_margin_to_bottom():"fixed"==n.old_pos_classname?n.set_margin():n.set_margin_static(),n.on_scroll()}},(t=[{key:"load",value:function(){this.init_container(),this.parallax_on&&(window.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize),r.A.sub_height_resize.subscribe({next:this.on_resize}),this.on_scroll())}},{key:"set_margin_to_bottom",value:function(){(0,i.h)()?this.col_a.style.marginTop=null:this.col_a.style.marginTop="".concat(this.container_height-this.content_height,"px")}},{key:"set_margin",value:function(){(0,i.h)()?this.col_a.style.marginTop=null:this.col_a.style.marginTop="".concat(this.margin_top_const,"px")}},{key:"set_margin_static",value:function(){(0,i.h)(),this.col_a.style.marginTop=null}},{key:"init_container",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset;var t=this.col_a.getBoundingClientRect();this.content_height=t.height}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-long-copy");[].slice.call(e).forEach((function(e){new l(e).load()}))}))},2360:(e,t,n)=>{"use strict";n.r(t),n(5127);var r=n(1500);function i(e){if("false"!==e.getAttribute("data-row-to-animate")){var t=e.getBoundingClientRect().top+window.pageYOffset;window.pageYOffset+window.innerHeight>t&&(e.setAttribute("data-row-to-animate","false"),function(e){var t=e.querySelectorAll(".rrmc-meet-the-team-tile");r.os.timeline().staggerFromTo(t,1,{opacity:0,y:"100px"},{opacity:1,y:"0"},.15)}(e))}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=e.querySelectorAll('[data-row-to-animate="true"]');0===n.length&&t(),[].slice.call(n).forEach((function(e){i(e)}))}var a=n(915),s=n.n(a);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t,n){return t=h(t),function(e,t){if(t&&("object"==f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],h(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function g(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var _=function(){return g((function e(t){m(this,e),this.cards=t.cardsArray,this.splitEvery=t.splitEvery,this.index=-1,this.length=this.cards.length}),[{key:"isValidIndex",value:function(){return this.index<this.length}},{key:"hasMore",value:function(){return this.index+1<this.length}},{key:"advanceIndex",value:function(){this.index+=1}},{key:"getCurrent",value:function(){return this.isValidIndex()?this.cards[this.index]:null}},{key:"isFirstInSegment",value:function(){return this.index%this.splitEvery==0}},{key:"getNext",value:function(){return this.advanceIndex(),this.isValidIndex()?this.getCurrent():null}}])}(),b=function(){return g((function e(t){m(this,e),this.config=t}),[{key:"cardsPerRow",value:function(){return 3}},{key:"createDocumentFragment",value:function(){this.activeFragment=document.createDocumentFragment()}},{key:"getActiveFragment",value:function(){return this.activeFragment}},{key:"addClassWithNumberOfActiveRowItems",value:function(){var e=this.getNumberOfCardsInActiveRow();this.activeRow.classList.add("".concat(this.config.classPrefix,"-").concat(e))}},{key:"appendActiveRowToActiveFragment",value:function(){this.activeRow&&(this.addClassWithNumberOfActiveRowItems(),this.activeFragment.appendChild(this.activeRow))}},{key:"cloneRowFromConfig",value:function(){return this.config.rowTemplate.cloneNode(!1)}},{key:"resetCardsInActiveRowCounter",value:function(){this.cardsInRow=0}},{key:"incrementCardsInActiveRowCounter",value:function(){this.cardsInRow+=1}},{key:"getNumberOfCardsInActiveRow",value:function(){return this.cardsInRow}},{key:"createRow",value:function(){this.activeRow=this.cloneRowFromConfig(),this.resetCardsInActiveRowCounter()}},{key:"appendCardToActiveRow",value:function(e){this.activeRow.appendChild(e),this.incrementCardsInActiveRowCounter()}},{key:"assignCardRows",value:function(){for(var e=this.createCardsIterator();e.hasMore();){var t=e.getNext();e.isFirstInSegment()&&(this.appendActiveRowToActiveFragment(),this.createRow()),this.appendCardToActiveRow(t)}this.appendActiveRowToActiveFragment()}},{key:"createCardsIterator",value:function(){return new _({cardsArray:this.config.cardsArray,splitEvery:this.cardsPerRow()})}},{key:"arrangeCards",value:function(){return this.createDocumentFragment(),this.assignCardRows(),this.getActiveFragment()}},{key:"getClassName",value:function(){return this.constructor.getClassName()}}])}(),w=function(e){function t(){return m(this,t),c(this,t,arguments)}return d(t,e),g(t,[{key:"cardsPerRow",value:function(){return 2}}],[{key:"appliesTo",value:function(e){return e<=1024}},{key:"getClassName",value:function(){return"CardMarkupTablet"}}])}(b),x=function(e){function t(){return m(this,t),c(this,t,arguments)}return d(t,e),g(t,[{key:"cardsPerRow",value:function(){return 3}}],[{key:"appliesTo",value:function(){return!0}},{key:"getClassName",value:function(){return"CardMarkupDesktop"}}])}(b),S={rowTemplate:document.createElement("div"),cardsArray:[],classPrefix:"rrmc-row-"},E=function(){return g((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;m(this,e),this.config=t}),[{key:"getClassList",value:function(){return[w,x]}},{key:"getSuitableClass",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.getClassList());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.appliesTo(e))return r}}catch(e){n.e(e)}finally{n.f()}return x}},{key:"isTheSameLayout",value:function(e){return!!this.layout&&this.layout.getClassName()===e.getClassName()}},{key:"rememberLayout",value:function(){this.layout&&(this.prevLayoutName=this.layout.getClassName())}},{key:"hasLayoutChanged",value:function(){return this.prevLayoutName!==this.layout.getClassName()}},{key:"updateLayout",value:function(e){var t=this.getSuitableClass(e);this.isTheSameLayout(t)||(this.layout=new t(this.config))}},{key:"arrangeCards",value:function(){return this.layout.arrangeCards(this)}}])}(),k=n(8607),T=n(7482),A=n(259);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function M(){M=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==C(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(C(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function L(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){L(o,r,i,a,s,"next",e)}function s(e){L(o,r,i,a,s,"throw",e)}a(void 0)}))}}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}var D,O=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.grid=this.container.querySelector(".js-rrmc-meet-the-team-grid"),this.rows=this.container.querySelectorAll(".rrmc-meet-the-team-row-container"),this.inactive=this.container.querySelector(".rrmc-meet-the-team-grid-inactive"),this.active=this.container.querySelector(".rrmc-meet-the-team-grid-active"),this.elm_storage=this.container.querySelector(".js-rrmc-meet-the-team-card-storage"),this.row_template=this.container.querySelector(".rrmc-row-template"),this.elm_load_more=this.container.querySelector(".js-load-more"),this.elm_load_more_container=this.container.querySelector(".js-rrmc-meet-the-team-load-more-container"),this.is_expanded=!1,this.parent_el=this.container.parentElement,this.setRevealCardsListener=function(){n.unsubScroll(),document.addEventListenerRR("scroll",n.scrollListenerCardReveal)},this.unsubScroll=function(){document.removeEventListenerRR("scroll",n.scrollListenerCardReveal)},this.scrollListenerCardReveal=R(M().mark((function e(){var t;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.is_expanded){e.next=6;break}return i(t=n.getRowsInGrid()[0]),n.getRowCtas(t).forEach((function(e){n.isCtaElmInit(e)||(new T.default(e).load(),n.markCtaElmInit(e))})),n.getRowContacts(t).forEach(n.assign_contact_listener),e.abrupt("return");case 6:o(n.grid,n.unsubScroll),n.getRowsInGrid().forEach((function(e){n.getRowCtas(e).forEach((function(e){n.isCtaElmInit(e)||(n.markCtaElmInit(e),new T.default(e).load())})),n.getRowContacts(e).forEach(n.assign_contact_listener)}));case 8:case"end":return e.stop()}}),e)}))),this.assign_contact_listener=function(e){var t=e.getAttribute("data-contact-name");n.getRowContactLinks(e).forEach((function(e){n.isCtaElmInit(e)||(n.markCtaElmInit(e),e.addEventListenerRR("click",n.generate_contact_click_listener(t)))}))},this.generate_contact_click_listener=function(e){return function(t){var n=t.currentTarget.getAttribute("href").split(":"),r="tel"===n[0]?"call":"mailto",i=n[1];(0,A.fg)(),(0,A.Gx)({event:"CallDealerTeam",eventCategory:"dealers-team",eventAction:r,eventLabel:"".concat(e,"-").concat(i)})}},this.on_resize=function(){n.cardMarkup.rememberLayout(),n.cardMarkup.updateLayout(window.innerWidth),n.cardMarkup.hasLayoutChanged()&&(n.grid.innerHTML="",n.grid.appendChild(n.cardMarkup.arrangeCards()),n.hideRows(),n.setRevealCardsListener(),n.hideLoadMoreIfOneRowOnly())},this.on_load_more=function(e){(0,A.fg)(),e.currentTarget.blur(),(new k.Y_).to(n.elm_load_more_container,.4,{opacity:0,ease:k.WG.easeNone}).add(n.revealAllRows(),"+=.2").set(n.elm_load_more_container,{display:"none"},"+=.1").add(n.scrollListenerCardReveal)}},(t=[{key:"markCtaElmInit",value:function(e){e.data={ctaInitialised:!0}}},{key:"isCtaElmInit",value:function(e){return e.data&&e.data.ctaInitialised}},{key:"getRowCtas",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-meet-the-team-tile-cta"))}},{key:"getRowContacts",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-meet-the-team-tile"))}},{key:"getRowContactLinks",value:function(e){return[].slice.call(e.querySelectorAll(".js-rrmc-meet-the-team-tile-contact-link"))}},{key:"getRowsInGrid",value:function(){return[].slice.call(this.grid.querySelectorAll(".js-rrmc-row-template"))}},{key:"revealAllRows",value:function(){var e=this,t=this.getRowsInGrid(),n=this.grid.getBoundingClientRect(),r=n.height,i=t.length*r,o=window.pageYOffset+n.top+r-100;return(new k.Y_).to(window,.8,{scrollTo:{y:o}}).fromTo(this.grid,.8,{height:r},{height:i,ease:k.WG.easeNone}).add((function(){return t.forEach((function(t){return e.setRowDisplayVisible(t)}))})).set(this.grid,{clearProps:"height"}).add((function(){e.is_expanded=!0}))}},{key:"setRowDisplayNone",value:function(e){e.setAttribute("data-disabled","")}},{key:"setRowDisplayVisible",value:function(e){e.removeAttribute("data-disabled")}},{key:"hideRows",value:function(){var e=this;this.getRowsInGrid().forEach((function(t,n){(function(e){e.setAttribute("data-row-to-animate","true"),function(e){var t=e.querySelectorAll(".rrmc-meet-the-team-tile");r.os.timeline().set(t,{opacity:0,y:"100px"})}(e)})(t),!e.is_expanded&&n>0&&e.setRowDisplayNone(t)}))}},{key:"hideLoadMoreIfOneRowOnly",value:function(){this.is_expanded||(1===this.getRowsInGrid().length?k.uo.set(this.elm_load_more_container,{display:"none"}):k.uo.set(this.elm_load_more_container,{display:"block"}))}},{key:"polyfill_tile_images",value:function(){"objectFit"in document.documentElement.style==0&&s()(this.grid.querySelectorAll(".rrmc-meet-the-team-tile-img-wrapper-img"))}},{key:"load",value:function(){this.polyfill_tile_images(),this.inst_load_more=new T.default(this.elm_load_more),this.inst_load_more.load(),this.elm_load_more.addEventListener("click",this.on_load_more);var e=[].slice.call(this.elm_storage.querySelectorAll(".js-rrmc-meet-the-team-tile"));this.cardMarkup=new E({rowTemplate:this.container.querySelector(".js-rrmc-row-template"),cardsArray:e,classPrefix:"rrmc-meet-the-team-row-"}),this.setRevealCardsListener(),window.addEventListenerRR("resize",this.on_resize),this.on_resize()}}])&&P(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();D=document.querySelectorAll(".js-rrmc-meet-team"),document.addEventListener("DOMContentLoaded",(function(){[].slice.call(D).forEach((function(e){var t=new O(e);e.data={meetTeamInstance:t},t.load()}))}))},9515:(e,t,n)=>{"use strict";n.r(t);var r=n(3336),i=n(9173),o=n(4958),a=n(6180),s=n(1872),l=n(2314),c=n(412),u=n(353),h=n(2430),d=n(6270),p=n(6829),f=n(9719),m=n(719),v=n(8686),g=n(502),y=n(2130),_=n(2725),b=n(7455),w=n(7293);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var k=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.carousel=this.container.querySelector(".js-rrmc-multi-carousel"),this.nodes=this.container.querySelectorAll(".js-rrmc-multi-item-node"),this.currentSize=window.innerWidth>1023?"desktop":"mobile",this.slides=this.container.querySelectorAll(".rrmc-multi-carousel-slide"),this.bibs=this.container.querySelectorAll(".rrmc-cc-carousel-bullets"),this.bibsContainer=this.container.querySelector(".rrmc-cc-carousel-bullets-container"),this.multiOverlay=document.querySelector(".js-rrmc-multi-image-carousel-overlay"),this.dynamicOverlay=this.container.querySelector(".rrmc-dynamic-overlay"),this.dynamicOverlayParsys=this.container.querySelector(".rrmc-dynamic-overlay-parsys"),this.checkGlideInstance=function(){var e=n.currentSize;n.currentSize=window.innerWidth>=1023?"desktop":"mobile",e!=n.currentSize&&("desktop"==n.currentSize?n.init():(n.glideInstance.destroy(),n.bibsContainer.parentNode.removeChild(n.bibsContainer)))}},(t=[{key:"init",value:function(){this.glideInstance=new r.A(this.carousel,{type:"carousel",perView:1,focusAt:"center",gap:0,peek:0,bibsContainer:this.bibs}),this.glideInstance.mount({Html:o.A,Translate:a.A,Transition:s.A,Direction:l.A,Peek:c.A,Sizes:u.A,Gaps:h.A,Move:d.A,Clones:p.A,Resize:f.A,Build:m.A,Run:v.A,Swipe:i.A,Autoplay:g.A,Bibs:y.A})}},{key:"populateNodeList",value:function(){var e=this;this.mobileGalleryWrap=this.container.querySelector(".rrmc-multi-image-node-content-wrap"),[].slice.call(this.nodes).forEach((function(t,n){t.setAttribute("data-multi-image-node-index",n),t.addEventListenerRR("click",(function(){return e.getNodeIndex(t)})),0==n&&(e.mobileGalleryWrap.setAttribute("data-multi-image-node-index",n),e.mobileGalleryWrap.addEventListenerRR("click",(function(){return e.getNodeIndex(t)})))}))}},{key:"getNodeIndex",value:function(e){var t=e.dataset.multiImageNodeIndex,n=this.dynamicOverlay.dataset.overlayName;_.A.sub_overlay_manager_bus.next({action:b.xb,data:{overlayName:n,activeIndex:t}})}},{key:"populateOverlayCarousel",value:function(){var e=(0,w.g)("local").overlay_container_wrapper;(0,w.K)(e).appendChild(this.dynamicOverlayParsys)}},{key:"load",value:function(){"desktop"==this.currentSize&&this.init(),this.populateNodeList(),this.populateOverlayCarousel(),window.addEventListenerRR("resize",this.checkGlideInstance)}}])&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".multi-image-carousel-wrapper");[].slice.call(e).forEach((function(e){new k(e).load()}))}))},380:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>_});var r=n(7482),i=n(2725),o=n(7455),a=n(8607),s=n(7293),l=n(259),c=n(7709),u=n(8521),h=n(637),d=n(4853);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var y=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.items=this.container.querySelector(".rrmc-my-list-items"),this.items_container=this.container.querySelector(".rrmc-my-list-items-container"),this.items_container_height_controller=this.container.querySelector(".rrmc-my-list-items-container-height-controller"),this.elms_btn_submit=this.container.querySelectorAll(".js-rrmc-submit-my-list"),this.elm_btn_submit_row=this.container.querySelector(".js-rrmc-my-list-submit-bottom-row"),this.elm_picture_frames=this.container.querySelectorAll(".rrmc-my-list-item-picture-frame"),this.const_class_divider="js-list-item-divider",this.const_class_container="js-list-item-container",this.const_class_undo="rrmc-my-list-item-undo",this.const_class_undo_cta="rrmc-my-list-item-undo-cta",this.const_class_picture="rrmc-my-list-item-picture",this.const_class_description="rrmc-my-list-item-description",this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.map_reduce_items=function(e){return[].slice.call(n.container.querySelectorAll(".".concat(e))).map((function(e){return{elm:e,id:e.getAttribute("data-id")}})).reduce((function(e,t){return e[t.id]=t.elm,e}),{})},this.collect_list=function(){n.elms_divider=n.map_reduce_items(n.const_class_divider),n.elms_container=n.map_reduce_items(n.const_class_container),n.elms_container_undo=n.map_reduce_items(n.const_class_undo),n.elms_container_undo_cta=n.map_reduce_items(n.const_class_undo_cta),n.elms_container_picture=n.map_reduce_items(n.const_class_picture),n.elms_container_description=n.map_reduce_items(n.const_class_description),n.raw_container_height={},n.timeout_undo=null,n.timeout_to_remove=[]},this.set_list=function(e){var t=e.map((function(e){var t=e.allVariants.reduce((function(e,t){return t.selected?t:e}),{}),n=t.id,r=[];return t.bespokeFields&&(r=t.bespokeFields.map((function(e){return void 0!==e.value?{label:e.label,value:e.value}:{label:e.label,value:e.values.reduce((function(e,t){return t.selected?t.name:e}),"")}}))),{parent:e.contentPath,id:n,bespokeFields:r}}));i.A.sub_my_list_manager_bus.next({action:"set",data:t})},this.submit_my_list=function(){var e=n.get_product_and_variant();return(0,l.Gx)({event:"ee-checkout",ecommerce:{checkout:{actionField:{step:1},products:e}}}),n.is_dealer_selected()?n.open_request_accessories():n.open_find_dealer()},this.open_find_dealer=function(){var e=n.get_product_and_variant();i.A.sub_overlay_manager_bus.next({action:o.xb,data:{overlayName:"g-dealer-locator",overlayPurpose:"accessoriesRequest",wishListProducts:e}})},this.open_request_accessories=function(){var e=n.get_product_and_variant();i.A.sub_overlay_manager_bus.next({action:o.xb,data:{overlayName:"g-request-accessories",overlayPurpose:"accessoriesRequest",wishListProducts:e,dealership_title:n.get_selected_dealer_trading_name(),dealership_number:n.get_selected_dealer_number()}})},this.on_undo=function(e){var t=e.currentTarget.getAttribute("data-id");n.do_undo_item(t);var r=n.get_product_and_variant(t);(0,l.Gx)({event:"ee-undoRemove",ecommerce:{add:{products:r}}})},this.on_resize=function(){n.update_grid()},this.on_change=function(e){var t=e.currentTarget.getAttribute("data-id");n.change_item(t)},this.on_remove=function(e){var t=e.currentTarget,r=t.getAttribute("data-id"),i=t.getAttribute("data-variant-id"),o=n.get_product_and_variant(r);n.do_remove_item(r);var a=window.rrmc_accessories.find((function(e){return e.list_id==r}));if(a){var s=a.allVariants.find((function(e){return e.id==i})),c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,d.e)(a.filters,a.allVariants),1)[0],u=(0,l.aS)({variant:s,store:c,accessory:a});l.Gr.conListRemove({options:u})}(0,l.Gx)({event:"ee-removeFromCart",ecommerce:{remove:{products:o}}})},this.on_response=function(e){window.rrmc_accessories=e.accessories,n.timeout_to_remove=[],n.timeout_undo=null,n.dispose_change_remove(),n.populate_list(),n.setup_change_remove()},this.update_my_list=function(e){var t=e.data,r=e.type;try{0===t.length&&n.redirect_to_empty(),n.my_list_items=t,n.my_list_update_type=r,n.load_items()}catch(e){console.log(e),n.redirect_to_empty()}}},t=[{key:"redirect_to_empty",value:function(){if(!this.is_edit_mode){var e=document.querySelector(".js-rrmc-secondary-nav-models-link--empty");if(e){var t=e.getAttribute("href");window.location.href="".concat(t)}}}},{key:"enable_undo",value:function(e){a.uo.set(this.elms_container_picture[e],{display:"none"}),a.uo.set(this.elms_container_description[e],{display:"none"}),a.uo.set(this.elms_container_undo[e],{display:"block"}),this.elms_container_undo_cta[e].addEventListenerRR("click",this.on_undo)}},{key:"disable_undo",value:function(e){a.uo.set(this.elms_container_picture[e],{display:"block"}),a.uo.set(this.elms_container_description[e],{display:"block"}),a.uo.set(this.elms_container_undo[e],{display:"none"}),this.elms_container_undo_cta[e].removeEventListenerRR("click",this.on_undo)}},{key:"do_undo_item",value:function(e){var t=this;this.timeout_to_remove=this.timeout_to_remove.filter((function(t){return t!==e})),clearTimeout(this.timeout_undo),this.start_removal_countdown();var n=this.raw_container_height[e];(new a.Y_).to(this.elms_container[e],.2,{opacity:0}).add((function(){t.disable_undo(e)})).to(this.elms_container[e],.6,{height:n}).to(this.elms_container[e],.2,{opacity:1})}},{key:"do_remove_item_final",value:function(e){return(new a.Y_).addLabel("start").to(this.elms_divider[e],.4,{opacity:0,height:0,"margin-bottom":0},"start").to(this.elms_container[e],.4,{opacity:0,height:0,"margin-bottom":0},"start")}},{key:"do_remove_item",value:function(e){var t=this,n=this.elms_container[e].getBoundingClientRect().height;this.raw_container_height[e]=n,this.timeout_to_remove.push(e),(new a.Y_).set(this.elms_container[e],{height:n}).to(this.elms_container[e],.2,{opacity:0}).add((function(){t.enable_undo(e)})).to(this.elms_container[e],.6,{height:10}).to(this.elms_container[e],.2,{opacity:1}),clearTimeout(this.timeout_undo),this.start_removal_countdown()}},{key:"start_removal_countdown",value:function(){var e=this;0!==this.timeout_to_remove.length&&(this.timeout_undo=setTimeout((function(){var t=e.timeout_to_remove.map((function(t){return e.do_remove_item_final(t)}));(new a.Y_).addLabel("all").add(t,"all").add((function(){i.A.sub_my_list_manager_bus.next({action:"remove",data:e.timeout_to_remove.map((function(t){return e.get_ordinal(t)}))})}))}),2e3))}},{key:"change_item",value:function(e){this.dispose_overlay&&this.dispose_overlay();var t=window.rrmc_accessories.reduce((function(t,n){return n.list_id===e?n:t}),{});this.dispose_overlay=this.init_change_overlay(t),window.rrmc_accessory=t,i.A.sub_overlay_manager_bus.next({action:o.xb,data:{overlayName:"l-accessory-change",accessoryId:e,accessoryType:t.accessoryType,variant:this.my_list_items[this.get_ordinal(e)]}})}},{key:"init_change_overlay",value:function(e){var t=function(e){return'<div class="overlay parsys aem-GridColumn aem-GridColumn--default--12 rrmc-dynamic-overlay-parsys">\n              <div class="rrmc-dynamic-overlay rrmc-overlay-component"  data-overlay-name="l-accessory-change">\n                <div class="rrmc-overlay-nav-bar rrmc-overlay-nav-bar-light">\n      <button data-overlay-action="overlayBack" type="button" data-theme="light"\n          class="rrmc-overlay-back-button rrmc-cta-component rrmc-button--regular-label-stroked">\n        <span class="rrmc-button-background js-rrmc-button-background" data-color="#151515"></span>\n        <span class="rrmc-cta-i" data-icon="arrow-left">\n                <span class="rrmc-cta-icon-placeholder"></span>\n             </span>\n        <span class="rrmc-button-text js-rrmc-button-text">'.concat((0,u.K)("Back"),'</span>\n      </button>\n      <button data-overlay-action="overlayClose" type="button" class="rrmc-cta-component rrmc-button--regular-icon-stroked">\n        <span class="rrmc-button-background js-rrmc-button-background" data-color="#151515"></span>\n        <span class="rrmc-cta-i" data-icon="close">\n                <span class="rrmc-cta-icon-placeholder"></span>\n             </span>\n        <span class="rrmc-button-text js-rrmc-button-text"></span>\n      </button>\n                </div>\n                <div class="default-overlay js-overlay rrmc-overlay-body-light">\n                  <div class="js-rrmc-multi-image-carousel-overlay rrmc-multi-image-carousel-overlay">\n                  ').concat(function(e){var t=e.disclaimer?'\n        <div class="rrmc-accessory-disclaimer">\n            <span class="rrmc-accessory-disclaimer-icon"></span>\n            <span class="rrmc-accessory-disclaimer-text">'.concat((0,u.K)(e.disclaimer),"</span>\n        </div>\n  "):"";return'<div class="rrmc-accessory js-rrmc-lazy-load" data-lazy-load-class="accessory-handler-lazy-load">\n      <div class="rrmc-accessory-wrapper rrmc-component-grid-container">\n      <section class="rrmc-accessory-col-a">\n        <h5 class="rrmc-accessory-subtitle">'.concat((0,u.K)(e.category),'</h5>\n        <h4 class="rrmc-accessory-title">').concat((0,u.K)(e.title),'</h4>\n        <h5 class="rrmc-accessory-price">').concat((0,u.K)("Price on Request"),'</h5>\n        <div class="rrmc-accessory-description"></div>\n            <div class="rrmc-accessory-mobile-image-container">\n                <picture class="rrmc-accessory-picture">\n                    <source data-srcset="').concat(e.heroImage.renditions,'" \n                    data-webp-srcset="').concat(e.heroImage.webpRenditions,'" sizes="100vw" media="(min-width: 160px)">\n                    \x3c!--/* Mobile */--\x3e\n                    <img class="rrmc-accessory-image"\n                         src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="\n                         data-src="').concat(e.heroImage.original,'"\n                         alt="').concat(e.summary||e.title,'">\n                </picture>\n                <div class="rrmc-accessory-hero--treadplate-container">\n                </div>\n            </div>\n        <div class="rrmc-accessory-mobile-image-container"></div>\n        <div class="rrmc-dropdown-container">\n        </div>\n        ').concat((0,u.K)(t),'\n        <div class="rrmc-accessory-customise-button-container">\n          <button data-action="open-luggage-overlay"\n                  data-theme="light"\n                  data-lazy-load-class="cta-lazy-load"\n                  class="rrmc-cta-component rrmc-button--secondary js-rrmc-lazy-load js-rrmc-button">\n              <span class="rrmc-button-background js-rrmc-button-background"></span>\n              <span class="rrmc-button-text js-rrmc-button-text">').concat((0,u.K)("Customise Yours"),'</span>\n              <span class="rrmc-button-arrow js-rrmc-button-arrow" data-icon="customize"></span>\n          </button>\n        </div>\n        <div class="rrmc-accessory-select-button-container">\n          <button data-action="save-to-my-list"\n                  data-action-text="').concat((0,u.K)("Changed"),'"\n                  data-lazy-load-class="cta-lazy-load"\n                  class="rrmc-cta-component rrmc-button--primary js-rrmc-lazy-load">\n            <span class="rrmc-button-background js-rrmc-button-background"></span>\n            <span class="rrmc-button-text js-rrmc-button-text">').concat((0,u.K)("Change"),'</span>\n            <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n          </button>\n        </div>\n      </section>\n      <div class="rrmc-accessory-col-b">\n            <div class="rrmc-accessory-hero-img-container">\n                <picture class="rrmc-accessory-picture">\n                    <source data-srcset="').concat(e.heroImage.renditions,'"\n                     data-webp-srcset="').concat(e.heroImage.webpRenditions,'" sizes="100vw" media="(min-width: 160px)">\n                    <img class="rrmc-accessory-image"\n                         src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="\n                         data-src="').concat(e.heroImage.original,'"\n                         alt="').concat(e.summary||e.title,'">\n                </picture>\n                <div class="rrmc-accessory-hero--treadplate-container">\n                </div>\n            </div>\n      </div>\n  </div>\n  <div class="rrmc-accessory-learn-more-wrapper-overlay">\n        <div class="rrmc-accessory-learn-more-wrapper" id="learn-more">\n            <div>\n                <div class="rrmc-component-grid-container rrmc-long-copy">\n                    <div class="rrmc-long-copy-title-wrapper">\n                        <div class="rrmc-long-copy-title-fixed-wrapper rrmc-component-grid-container">\n                            <div class="rrmc-long-copy-title-cell">\n                                <h2 class="rrmc-long-copy-heading">').concat((0,u.K)("Item description"),'</h2>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="rrmc-long-copy-description-wrapper">\n                        <div class="rrmc-long-copy-description">\n                            ').concat((0,u.K)(e.description),"\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n  </div>\n    ")}(e),"\n                  </div>\n                </div>\n              </div>\n    </div>")}(e),n=(0,s.g)("local").overlay_container_wrapper,r=(0,s.K)(n),i=document.createElement("div");i.innerHTML=t;var o=i.firstChild;return r.appendChild(o),function(){r.removeChild(o)}}},{key:"update_grid",value:function(){this.update_picture_heights()}},{key:"update_picture_heights",value:function(){[].slice.call(this.elm_picture_frames).forEach((function(e){var t=e.getBoundingClientRect().width;e.style.height="".concat(t,"px")}))}},{key:"endpoint_get_accessories",value:function(){return"/bin/public/cart"}},{key:"make_id",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"get_ordinal",value:function(e){return e.split("-").shift()}},{key:"populate_list",value:function(){var e=this;if("update_my_list_total"===this.my_list_update_type){var t=this.items_container_height_controller.getBoundingClientRect().height;a.uo.set(this.items_container_height_controller,{height:t})}else a.uo.set(this.items_container_height_controller,{clearProps:"height"});this.items_container.innerHTML="";var n=this.my_list_items,r=Date.now();if(this.item_list=n.map((function(t,n){var i=window.rrmc_accessories[n].allVariants.reduce((function(e,n){return n.id===t.id?n:e}),{}),o=window.rrmc_accessories[n],a=e.make_id(n,r);window.rrmc_accessories[n].list_id=a;var s=e.fragment_list_entry(a,o,i),l=document.createElement("div");return l.classList.add("rrmc-my-list-item"),l.innerHTML=s,l})),this.item_list.forEach((function(t){e.items_container.appendChild(t)})),this.collect_list(),this.elm_picture_frames=this.items_container.querySelectorAll(".rrmc-my-list-item-picture-frame"),this.on_resize(),"update_my_list_total"===this.my_list_update_type){var i=this.items_container.getBoundingClientRect().height;(new a.Y_).to(this.items_container_height_controller,1,{height:i,delay:.5}).set(this.items_container_height_controller,{clearProps:"height"}).staggerFromTo(this.items_container.querySelectorAll(".rrmc-my-list-item"),.6,{opacity:0,y:100},{opacity:1,y:0},.1).to(this.elm_btn_submit_row,.4,{opacity:1})}}},{key:"fragment_list_entry",value:function(e,t,n){var r=n.variantImage.original||t.heroImage.original,i=n.variantImage.renditions||t.heroImage.renditions;return'<div class="'.concat(this.const_class_divider,' rrmc-my-list-divider-grid rrmc-component-grid-container" data-id="').concat(e,'">\n        <div class="rrmc-my-list-divider"></div>\n      </div>\n      <div class="').concat(this.const_class_container,' rrmc-my-list-item-grid rrmc-component-grid-container" data-id="').concat(e,'">\n        <div class="').concat(this.const_class_undo,'" data-id="').concat(e,'"><button data-id="').concat(e,'" class="rrmc-my-list-item-description-button ').concat(this.const_class_undo_cta,'" type="button">').concat((0,u.K)("Undo"),'</button></div>\n        <div class="').concat(this.const_class_picture,'" data-id="').concat(e,'">\n          <div class="rrmc-my-list-item-picture-frame">\n            <img class="rrmc-my-list-item-picture-frame-tag"\n            src="').concat(r,'"\n            srcset="').concat(i,'" alt="').concat(t.title,'"\n            sizes="(min-width: 768px) 33vw, 100vw">\n          </div>\n        </div>\n        <div class="').concat(this.const_class_description,'" data-id="').concat(e,'">\n          <div class="rrmc-my-list-item-description--title-row">\n            <h2><a class="rrmc-my-list-item-description-title" href="').concat(t.path,'">').concat((0,u.K)(t.title),'</a></h2>\n            <div class="rrmc-my-list-item-description-remove">\n              <button class="rrmc-my-list-item-description-button rrmc-my-list-item-description-button-remove"\n                      data-variant-id="').concat(n.id,'"\n                      data-id="').concat(e,'"\n                      type="button">').concat((0,u.K)("Remove"),'</button>\n            </div>\n          </div>\n          <div class="rrmc-my-list-item-description--price-row">\n            <span class="rrmc-my-list-item-description--price">').concat((0,u.K)("Price on request"),'</span>\n          </div>\n          <div class="rrmc-my-list-item-description--controls-row">\n            <button class="rrmc-my-list-item-description-button rrmc-my-list-item-description-button-remove"\n                    data-variant-id="').concat(n.id,'"\n                    data-id="').concat(e,'"\n                    type="button">').concat((0,u.K)("Remove"),'</button>\n            <button class="rrmc-my-list-item-description-button rrmc-my-list-item-description-button-change"\n                    data-id="').concat(e,'"\n                    type="button">').concat((0,u.K)("Change"),'</button>\n          </div>\n          <div class="rrmc-my-list-item-description--divider-row"></div>\n          <div class="rrmc-my-list-item-description--options-row">\n            <div class="rrmc-my-list-item-description--options">\n              <div class="rrmc-my-list-item-description--options-list">\n                ').concat(this.fragment_item_options(e,t,n),'\n              </div>\n            </div>\n            <div class="rrmc-my-list-item-description--change">\n              <button class="rrmc-my-list-item-description-button rrmc-my-list-item-description-button-change"\n                      data-id="').concat(e,'"\n                      type="button">').concat((0,u.K)("Change"),"</button>\n            </div>\n          </div>\n        </div>\n      </div>")}},{key:"fragment_item_options",value:function(e,t,n){for(var r="",i="",o="",a=n.bespoke,s=!1,l=0,c=[{label:"Model",field:"modelLabel"}].concat(function(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t.filters));l<c.length;l++){var h=c[l],d=h.label,p=n[h.field],v=!1,g=void 0;p.code&&(v=!!p.code.includes("rgb"),g='style="background: '.concat(p.code,'"')),r+='<div class="rrmc-my-list-item-description--options-item">\n          <span class="rrmc-my-list-item-description--options-item-label">'.concat((0,u.K)(d),':</span>\n          <span class="rrmc-my-list-item-description--options-item-value">\n          ').concat(v?"<span class='rrmc-my-list-item-description--options-item-value--disk' ".concat(g,"></span>"):(0,u.K)(p),"\n          </span>\n      </div>")}if(a){var y=!1;if([].slice.call(n.bespokeFields).forEach((function(e){if((0,u.K)(e.label)===(0,u.K)("Font"))for(var t=0;e.values.length>t;t++)!0===e.values[t].selected&&(y=e.values[t].name);if(void 0===e.value){var n=[].slice.call(e.values).findIndex((function(e){return!0===e.selected})),r=!!e.values[n].code.includes("rgb"),a='style="background: '.concat(e.values[n].code,'"');r?(s=!0,o+="<span class='rrmc-my-list-item-description--options-item-value--disk rrmc-my-list-item-description--options-item-value--multi-disk' ".concat(a,"></span>")):i+='<div class="rrmc-my-list-item-description--options-item">\n              <span class="rrmc-my-list-item-description--options-item-label">'.concat((0,u.K)(e.label),':</span>\n              <span class="rrmc-my-list-item-description--options-item-value">\n              ').concat(e.values[n].name,"\n              </span>\n              </div>\n            ")}else i+='<div class="rrmc-my-list-item-description--options-item">\n              <span class="rrmc-my-list-item-description--options-item-label">\n                '.concat("Default"!==e.value&&e.value!==(0,u.K)("Default")?(0,u.K)("Bespoke"):"","\n                ").concat((0,u.K)(e.label),':</span>\n              <span class="rrmc-my-list-item-description--options-item-value" ').concat(y.length>0?'style="font-family:'.concat(y,'"'):"","> \n              ").concat(e.value,"\n              </span>\n              </div>\n              ")})),s){var _=(0,u.K)("Bespoke Colours");t.id.includes("viewing-suite")&&(_=(0,u.K)("Carpet Colour"));var b=function(e,t){return'<div class="rrmc-my-list-item-description--options-item">\n    <span class="rrmc-my-list-item-description--options-item-label">'.concat((0,u.K)(t),':</span>\n    <span class="rrmc-my-list-item-description--options-item-value">\n      ').concat(e,"\n      </span>\n  </div>")}(o,_);i+=b}}return r+i}},{key:"load_items",value:function(){var e=this;return new Promise((function(t,n){$.ajax({type:"POST",url:e.endpoint_get_accessories(),data:JSON.stringify(e.my_list_items),contentType:"application/json",processData:!1,success:function(e){return t(e)},error:function(e){return n(e)}})})).then(this.on_response.bind(this)).catch((function(e){console.log(e)}))}},{key:"setup_change_remove",value:function(){var e=this;this.elms_btn_change=this.container.querySelectorAll(".rrmc-my-list-item-description-button-change"),this.elms_btn_remove=this.container.querySelectorAll(".rrmc-my-list-item-description-button-remove"),[].slice.call(this.elms_btn_change).forEach((function(t){t.addEventListenerRR("click",e.on_change)})),[].slice.call(this.elms_btn_remove).forEach((function(t){t.addEventListenerRR("click",e.on_remove)}))}},{key:"dispose_change_remove",value:function(){var e=this;this.elms_btn_change&&[].slice.call(this.elms_btn_change).forEach((function(t){t.removeEventListenerRR("click",e.on_change)})),this.elms_btn_remove&&[].slice.call(this.elms_btn_remove).forEach((function(t){t.removeEventListenerRR("click",e.on_remove)}))}},{key:"load",value:function(){var e=this;new Promise((function(t){var n=c.parse(location.search),r=!1;n.id&&(r=n.id),r?$.ajax({type:"GET",url:"/bin/public/cart?id=".concat(r),success:function(n){e.set_list(n),t()},error:function(e){console.log(e),t()}}):t()})).then((function(){i.A.sub_my_list_updated.subscribe({next:e.update_my_list})})).catch((function(e){console.error(e)})),[].slice.call(this.elms_btn_submit).forEach((function(t){new r.default(e.elm_btn_submit).load(),t.addEventListenerRR("click",e.submit_my_list)})),window.addEventListenerRR("resize",this.on_resize),this.on_resize(),h.n.subscribe((function(t){e.update_dealer_preference(t)}))}},{key:"update_dealer_preference",value:function(e){this.dealer_preference=e}},{key:"is_dealer_selected",value:function(){var e=this.dealer_preference;return!!e&&!!e.get_name()}},{key:"get_selected_dealer_trading_name",value:function(){return this.dealer_preference.get_trading_name()}},{key:"get_selected_dealer_number",value:function(){return this.dealer_preference.get_number()}},{key:"destroy",value:function(){}},{key:"get_product_and_variant",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=this.my_list_items.map((function(e){return e.id})),r=t?window.rrmc_accessories.filter((function(e){return e.list_id==t})):window.rrmc_accessories,i=[];return Array.isArray(r)&&r.forEach((function(t){var r=t.allVariants.filter((function(e){return n.includes(e.id)})).shift();e.colour=r.bespoke?"Bespoke":r.color!={}?r.color.name:void 0;var o={id:t.id,name:t.title,category:t.category,brand:r.modelLabel,variant:r.id,price:"0.00",quantity:1,dimension17:r.marketingTitle,dimension18:e.colour};i.push(o)})),i}}],t&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const _=y;document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-my-list");[].slice.call(e).forEach((function(e){new y(e).load()}))}))},2398:(e,t,n)=>{"use strict";n.r(t),n.d(t,{NoLocaleBanner:()=>l});var r=n(8607),i=n(7709);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=document.querySelector(".js-rrmc-no-locale-banner"),this.container&&(this.parse_query_string(),this.btn_close=this.container.querySelector(".js-rrmc-no-locale-banner-accept"),this.elm_paragraph=this.container.querySelector(".js-rrmc-no-locale-banner-description"),this.on_close=function(){t.detach_callbacks(),t.conceal_banner()})},(t=[{key:"parse_query_string",value:function(){this.qs=i.parse(location.search)}},{key:"get_locale_from_query_string",value:function(){return this.qs.locale}},{key:"is_redirected_from_different_locale",value:function(){return!!this.get_locale_from_query_string()}},{key:"update_copy",value:function(){window.rrmc_no_locale_copy&&(this.elm_paragraph.textContent=window.rrmc_no_locale_copy[this.get_locale_from_query_string()])}},{key:"clear_copy",value:function(){this.elm_paragraph.textContent=""}},{key:"load",value:function(){if(this.container){if(!this.is_redirected_from_different_locale())return this.clear_copy();this.update_copy(),this.reveal_banner()}}},{key:"destroy",value:function(){}},{key:"attach_callbacks",value:function(){this.btn_close.addEventListenerRR("click",this.on_close)}},{key:"detach_callbacks",value:function(){this.btn_close.removeEventListenerRR("click",this.on_close)}},{key:"reveal_banner",value:function(){var e=this;r.uo.set(this.container,{display:"block"}),r.uo.to(this.container,.75,{y:0,ease:r.ys.easeInOut,onComplete:function(){e.attach_callbacks()}})}},{key:"conceal_banner",value:function(){var e=this;r.uo.to(this.container,.75,{y:"100%",ease:r.ys.easeInOut,onComplete:function(){e.container.style.display="none"}})}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){(new l).load()}))},4756:(e,t,n)=>{"use strict";n.r(t);var r=n(3336),i=n(9173),o=n(2130),a=n(4958),s=n(6180),l=n(1872),c=n(2314),u=n(412),h=n(2430),d=n(6270),p=n(6829),f=n(9719),m=n(719),v=n(8686),g=n(502),y=n(353),_=n(2725),b=n(7455),w=n(915),x=n.n(w),S=n(259),E=n(8607),k=n(1500),T=n(2862);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function C(){C=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==A(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(A(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function M(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==A(t)?t:t+""}var P=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.carousel=this.container.querySelector(".js-rrmc-og-carousel"),this.settingPipsStyle=this.carousel.getAttribute("data-pips-style"),this.settingPipsMobileStyle=this.carousel.getAttribute("data-pips-mobile-style"),this.flagPipsVisible=this.carousel.hasAttribute("data-pips-visible"),this.settingAutoplayDelay=parseFloat(this.carousel.getAttribute("data-autoplay-delay")),this.flagZoomEnabled=this.carousel.hasAttribute("data-zoom-enabled"),this.flagEditMode=this.carousel.hasAttribute("data-edit-mode"),this.slides=this.carousel.querySelectorAll(".rrmc-og-carousel-slide"),this.caption_container=this.container.querySelector(".js-rrmc-og-captions"),this.captions=this.caption_container.querySelectorAll(".rrmc-og-carousel-caption"),this.peek_container=this.container.querySelector(".js-rrmc-og-peek-container"),this.peek_items=this.peek_container.querySelectorAll(".rrmc-og-carousel-peek-item"),this.peek_aligner=this.peek_container.querySelector(".rrmc-og-carousel-peek-aligner"),this.bibs_container=this.container.querySelector(".rrmc-og-carousel-bullets-container"),this.carousel_cta=this.container.querySelectorAll(".rrmc-og-carousel-caption-cta a"),this.carousel_metadata=this.carousel.getAttribute("data-metadata"),this.caption_current=0,this.peek_current=1,this.init=function(){if(!n.flagEditMode){n.glideCarousel=new r.A(n.carousel,{type:"carousel",perView:1,focusAt:"center",startAt:0,peek:0,gap:0,animationDuration:1e3,autoplay:parseInt(n.settingAutoplayDelay)>0&&1e3*n.settingAutoplayDelay,hoverpause:!1,bibsContainer:n.container.querySelectorAll(".rrmc-og-carousel-bullets"),bibsColour:"light"===n.settingPipsStyle?"ffffff":"000000"}),n.glideCarousel.on("run.before",(function(e){var t=e.direction;if(">"==t){var r=n.caption_current+1>=n.slides.length?0:n.caption_current+1;n.caption_next=r}else if("<"==t){var i=n.caption_current-1<0?n.slides.length-1:n.caption_current-1;n.caption_next=i}else if("="==t){var o=e.steps;n.caption_next=o}n.peek_next=n.caption_next>=n.slides.length-1?0:parseInt(n.caption_next)+1,"="==t&&n.caption_next!==n.caption_current?n.transition_direction=n.caption_next-n.caption_current>0?">":"<":"="==t&&n.caption_next===n.caption_current?n.transition_direction="=":n.transition_direction=t,n.transition_caption(),n.transition_peek(),n.stop_video(n.get_active_slide())})),n.glideCarousel.on("run.after",(function(){n.caption_current=parseInt(n.caption_next),n.peek_current=n.peek_next,n.init_video(n.get_active_slide())})),n.glideCarousel.on("mount.after",(function(){n.polyfill_slide_images()})),n.glideCarousel.on("swipe.start",(function(){n.swipe_start=!0})),n.glideCarousel.on("swipe.move",(function(){n.swipe_move=!0,S.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Swipe",eventLabel:"off grid carousel"})})),n.glideCarousel.on("swipe.end",(function(){n.swipe_end=!0})),n.glideCarousel.on("resize",(function(){n.polyfill_slide_images()}));var e={Html:a.A,Translate:s.A,Transition:l.A,Direction:c.A,Peek:u.A,Gaps:h.A,Sizes:y.A,Move:d.A,Clones:p.A,Resize:f.A,Build:m.A,Run:v.A,Swipe:i.A,Autoplay:g.A};n.flagPipsVisible&&(e.Bibs=o.A),n.glideCarousel.mount(e),n.init_captions(),n.init_peek(),n.init_video(n.get_active_slide())}},this.on_resize=function(){n.size_captions(),n.size_peek()},this.on_mouseover=function(){_.A.sub_cursor.next(["scale","enter","arrow-right"])},this.on_mouseleave=function(){_.A.sub_cursor.next(["scale","leave"])},this.on_click=function(){n.lock_peek||(n.glideCarousel.go(">"),S.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Peek Right Click",eventLabel:"off grid carousel"}))},this.bibsClickHandler=function(e){"path"!==e.target.tagName&&"svg"!==e.target.tagName||S.Gx({event:"carouselPan",eventCategory:"Carousel",eventAction:"Bib Click ".concat(parseInt(n.caption_next)+1),eventLabel:"off grid carousel"})}},t=[{key:"get_active_slide",value:function(){return this.container.querySelector(".rrmc-og-carousel-slide.glide__slide--active")}},{key:"stop_video",value:function(e){var t=e.querySelector("video-js");if(t){var n=videojs.getPlayer(t),r=n.player_.el_.querySelector("video");E.uo.to(r,.33,{opacity:0}),n.autoplay()?n.pause():(n.trigger("dispose"),n.dispose())}}},{key:"init_video",value:function(e){var t=e.querySelector(".video-js");if(t){var n=e.querySelector("video-js");if(n){var r=videojs.getPlayer(n),i=r.player_.el_.querySelector("video"),o=r.getChild("errorDisplay");return o.off(r,"error",o.open),o.dispose(),r.autoplay()?(E.uo.to(i,.33,{opacity:1}),void r.play()):void 0}for(var a=document.createElement("video-js"),s=0;s<t.attributes.length;++s)a.setAttribute(t.attributes.item(s).name,t.attributes.item(s).value);t.parentNode.appendChild(a),E.uo.to(a,.33,{opacity:1});var l=bc(a),c=l.player_.el_,u=c.querySelector("video");if(l.reloadSourceOnError({errorInterval:5}),c.getAttribute("autoplay")&&E.uo.to(u,.33,{opacity:1}),l.controls()){var h=!1;a.addEventListenerRR("mouseenter",(function(){h=!0,l.paused()?_.A.sub_cursor.next(["scale","enter","play"]):_.A.sub_cursor.next(["scale","enter","pause"])})),a.addEventListenerRR("mouseleave",(function(){h=!1,_.A.sub_cursor.next(["scale","leave"])})),l.on("play",(function(){h&&(E.uo.to(u,.33,{opacity:1}),_.A.sub_cursor.next(["scale","enter","pause"]))})),l.on("pause",(function(){h&&(E.uo.to(u,.33,{opacity:0}),_.A.sub_cursor.next(["scale","enter","play"]))})),l.on("dispose",(function(){h&&_.A.sub_cursor.next(["scale","leave"])}))}}}},{key:"on_video_cursor_enter",value:function(){}},{key:"transition_caption",value:function(){if("="!==this.transition_direction){var e=">"==this.transition_direction?["-20px","50px"]:["20px","-50px"],t=this.captions.item(this.caption_current),n=this.captions.item(this.caption_next);E.uo.killTweensOf(t),E.uo.killTweensOf(n),(new E.Y_).addLabel("start").fromTo(t,.4,{opacity:1,x:0,zIndex:10,pointerEvents:"none"},{opacity:0,x:e[0],ease:E.WG.easeNone}).fromTo(n,.4,{opacity:0,x:e[1],zIndex:20,pointerEvents:"auto"},{opacity:1,x:"0px",ease:E.WG.easeNone},"start+=.6")}}},{key:"transition_peek",value:function(){var e=this;if("="!==this.transition_direction){this.lock_peek=!0;var t=">"==this.transition_direction?[-50,-100,50,-50]:[-50,0,-150,-50];k.os.registerEase("bezierEase","0.165, 0.84, 0.44, 1");var n=this.peek_items.item(this.peek_current),r=this.peek_items.item(this.peek_next);E.uo.killTweensOf(n),E.uo.killTweensOf(r),(new E.Y_).addLabel("start").set(r.querySelector(".rrmc-image-aspect-img"),{opacity:1}).fromTo(n,{xPercent:t[0],zIndex:10,opacity:1},{xPercent:t[1],ease:"bezierEase",duration:1.4}).set(n,{opacity:0}).fromTo(n.querySelector(".rrmc-image-aspect-img"),1,{opacity:1},{opacity:.5,ease:"bezierEase"},"start").fromTo(r,1,{xPercent:t[2],zIndex:20,opacity:1},{xPercent:t[3],ease:"bezierEase"},"start+=.1").add((function(){e.lock_peek=!1}))}}},{key:"init_captions",value:function(){E.uo.set(this.captions.item(this.caption_current),{opacity:1})}},{key:"size_captions",value:function(){var e=[].slice.call(this.captions).map((function(e){return e.offsetHeight})).reduce((function(e,t){return t>e?t:e}),0);this.caption_container.style.height="".concat(e,"px")}},{key:"size_peek",value:function(){this.peek_width=this.peek_aligner.getBoundingClientRect().width}},{key:"init_peek",value:function(){E.uo.set(this.peek_items.item(this.peek_current),{opacity:1}),"objectFit"in document.documentElement.style==0&&x()(this.peek_container.querySelectorAll(".rrmc-image-aspect-img"))}},{key:"polyfill_slide_images",value:function(){"objectFit"in document.documentElement.style==0&&x()(this.carousel.querySelectorAll(".rrmc-image-aspect-img"))}},{key:"loadImgs",value:function(){var e=this;return new Promise((function(t){var n=e.container.querySelectorAll(".rrmc-image-aspect-img"),r=n[n.length-1];[].slice.call(n).forEach((function(e,i){(0,T.Kj)(e,(function(){n[i]===r&&t(!0)}))}))}))}},{key:"load",value:(n=C().mark((function e(){var t=this;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadImgs();case 2:if(e.sent){if(this.init(),window.addEventListenerRR("resize",this.on_resize),this.peek_container.addEventListenerRR("mouseover",this.on_mouseover),this.peek_container.addEventListenerRR("mouseleave",this.on_mouseleave),this.peek_container.addEventListenerRR("click",this.on_click),this.bibs_container.addEventListenerRR("click",this.bibsClickHandler),this.on_resize(),_.A.sub_overlay_manager_bus.subscribe({next:function(e){var n=e.action;n!==b.xb&&n!==b.Jm&&n!==b.iI||setTimeout((function(){t.glideCarousel.update()}),100)}}),this.carousel_metadata){try{this.carousel_metadata_parsed=JSON.parse(this.carousel_metadata),this.carousel_list=Array.isArray(this.carousel_metadata_parsed)?this.carousel_metadata_parsed[0].list:this.carousel_metadata_parsed.list}catch(e){this.carousel_list="Off Grid Carousel"}this.carousel_cta.forEach((function(e){var n=e.getAttribute("href")+"?productList="+encodeURIComponent(t.carousel_list);e.setAttribute("href",n)}))}S.TY(this.carousel_metadata)}case 4:case"end":return e.stop()}}),e,this)})),w=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){M(o,r,i,a,s,"next",e)}function s(e){M(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return w.apply(this,arguments)})}],t&&L(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,w}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-off-grid-carousel");[].slice.call(e).forEach((function(e){new P(e).load()}))}))},3607:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>G});var r=n(2725),i=n(7455),o=n(2423),a=n(2870),s=n(7406),l=n(7482),c=n(7649),u=n(7285),h=n(376),d=n(9853),p=n(6574),f=n(8927),m=n(8607),v=n(4254),g=n(1500),y=n(6988),_=n(6189),b=n(8521),w=n(4861);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function E(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}const k=function(){return e=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.plaqueDropdown=t,this.optionsGrid=n,this.plaqueDropdownContainer=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--container"),this.customSelector=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--custom-select"),this.previewWrapper=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--preview"),this.plaqueDropdownListWrapper=this.customSelector.querySelector(".rrmc-accessory-plaque-dropdown--custom-select-list"),this.plaqueDropdownEntries=this.plaqueDropdownListWrapper.querySelectorAll(".rrmc-accessory-plaque-option"),this.plaqueDropdownStatus=this.plaqueDropdown.dataset.plaqueDropdownStatus,this.htmlSelector=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--select"),this.visibleSelector=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--value"),this.plaqueDropdownLabel=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-dropdown--label"),this.plaqueInput=this.plaqueDropdown.querySelector(".rrmc-accessory-plaque-editor--input"),this.plaqueCounter=this.plaqueDropdown.querySelector(".rrmc-plaque-editor--counter"),this.subs={},this.subs.open=new y.B7,this.subs.close=new y.B7,this.subs.select=new y.B7,this.subs.update=new y.B7,this.unsubs={},this.returnFieldValue=function(){return{type:r.visibleSelector.innerText,value:(0,w.A)(r.plaqueInput)}},this.clearPlaqueDropdown=function(){r.plaqueInput.value="",r.plaqueCounter.innerHTML=r.plaqueInput.getAttribute("maxlength"),r.subs.update.next()},this.updatePlaqueInput=function(){var e=r.plaqueInput.getAttribute("maxlength");r.plaqueCounter.innerHTML=e-r.plaqueInput.value.length},this.updatePlaqueDropdown=function(e){var t=e.currentTarget.querySelector(".rrmc-accessory-plaque-checkbox-value").innerText;t!==r.visibleSelector.innerText?(r.htmlSelector.value=t,r.visibleSelector.innerText=t,"small"!==r.plaqueDropdownLabel.getAttribute("data-label-pos")&&(0,_.U)("small",r.plaqueDropdownLabel,"dropdown",r.visibleSelector),r.setCheckboxValue(r.plaqueDropdownEntries),t===(0,b.K)("Bespoke")?r.openSecondLevelPlaque():(r.closePlaqueDropdown(),t===(0,b.K)("Default")&&r.clearPlaqueDropdown()),r.currentValue=t,r.subs.select.next(t)):r.closePlaqueDropdown()},this.handlePlaqueDropdown=function(){"closed"===r.plaqueDropdownStatus?(r.subs.open.next(),r.openPlaqueDropdown()):(r.subs.close.next(),r.closePlaqueDropdown())},this.triggerClosePlaqueDropdown=function(e){r.plaqueDropdown.contains(e.target)||(r.closePlaqueDropdown(),document.removeEventListenerRR("click",r.triggerClosePlaqueDropdown))}},t=[{key:"preselect",value:function(e,t){e!==(0,b.K)("Default")?(this.previousText=e,e=(0,b.K)("Bespoke"),this.plaqueInput.value=this.previousText,this.updatePlaqueInput(),this.plaqueDropdownEntries[1].querySelector(".rrmc-accessory-plaque-checkbox").classList.add("rrmc-accessory-plaque-checkbox--active")):this.plaqueDropdownEntries[0].querySelector(".rrmc-accessory-plaque-checkbox").classList.add("rrmc-accessory-plaque-checkbox--active"),this.htmlSelector.value=e,this.visibleSelector.innerText=e,this.currentValue=e,(0,_.U)("small",this.plaqueDropdownLabel,"dropdown",this.visibleSelector),this.subs.select.next(e),t&&(this.plaqueDropdownContainer.classList.add("rrmc-plaque-dropdown--disabled"),this.plaqueDropdownContainer.removeEventListener("click",this.handlePlaqueDropdown))}},{key:"addEventListener",value:function(e,t){this.unsubs[e]||(this.unsubs[e]={}),this.unsubs[e][t]=this.subs[e].subscribe({next:t})}},{key:"removeEventListener",value:function(e,t){this.unsubs[e]&&this.unsubs[e][t]&&this.unsubs[e][t].unsubscribe()}},{key:"updatePlaqueDropdownStatus",value:function(e){this.plaqueDropdown.setAttribute("data-plaque-dropdown-status",e),this.plaqueDropdownStatus=this.plaqueDropdown.getAttribute("data-plaque-dropdown-status")}},{key:"returnPlaqueDropdownStatus",value:function(){return this.plaqueDropdownStatus}},{key:"setCheckboxValue",value:function(){var e=this.visibleSelector.innerText;[].slice.call(this.plaqueDropdownEntries).forEach((function(t){var n=t.querySelector(".rrmc-accessory-plaque-checkbox-value").innerHTML;e===n?t.querySelector(".rrmc-accessory-plaque-checkbox").classList.add("rrmc-accessory-plaque-checkbox--active"):t.querySelector(".rrmc-accessory-plaque-checkbox").classList.contains("rrmc-accessory-plaque-checkbox--active")&&t.querySelector(".rrmc-accessory-plaque-checkbox").classList.remove("rrmc-accessory-plaque-checkbox--active")}))}},{key:"openPlaqueDropdown",value:function(){var e=this;document.addEventListenerRR("click",this.triggerClosePlaqueDropdown);var t=this.optionsGrid.clientHeight-(this.plaqueDropdown.clientHeight+100),n=this.optionsGrid.querySelectorAll([".rrmc-accessory-dropdown",".rrmc-accessory-done-button-container"]),r=this.plaqueDropdownContainer.querySelector(".rrmc-accessory-dropdown--icon-plaque");this.updatePlaqueDropdownStatus("open"),this.revealPlaqueDropdownItems(this.plaqueDropdownEntries),g.os.timeline().addLabel("start").set(this.customSelector,{visibility:"visible"}).to(n,.5,{opacity:0},"start").to([this.plaqueDropdownContainer,this.customSelector],1,{y:"-".concat(t,"px")},"start+=0.6").to(this.customSelector,1,{height:"130px"},"start+=1.6").add((function(){r.classList.add("rrmc-plaque-dropdown-arrow"),e.currentValue===(0,b.K)("Bespoke")&&e.openSecondLevelPlaque()}))}},{key:"closePlaqueDropdown",value:function(){var e=this;this.subs.update.next(),document.removeEventListener("click",this.triggerClosePlaqueDropdown),this.reversePlaqueDropdownItems(this.plaqueDropdownEntries);var t=this.optionsGrid.querySelectorAll([".rrmc-accessory-dropdown",".rrmc-accessory-done-button-container"]),n=this.plaqueDropdownContainer.querySelector(".rrmc-accessory-dropdown--icon-plaque");g.os.timeline().addLabel("start").to([this.plaqueDropdownContainer,this.customSelector],1,{y:"0"},"start+=1").add((function(){n.classList.remove("rrmc-plaque-dropdown-arrow")})).to(this.customSelector,1,{height:"0"},"start+=1").to(t,1,{opacity:1},"start+=1"),g.os.timeline().addLabel("start").to(this.previewWrapper,1,{opacity:0,height:"0"},"start").eventCallback("onComplete",(function(){e.updatePlaqueDropdownStatus("closed"),e.customSelector.style.visibility="hidden",e.customSelector.scrollTop=0,e.resetPlaqueDropdownAnim(e.plaqueDropdownEntries)}))}},{key:"openSecondLevelPlaque",value:function(){g.os.timeline().addLabel("start").to(this.customSelector,1,{height:"425px"},"start").to(this.previewWrapper,1,{opacity:1,height:"300px"},"start")}},{key:"closeSecondLevelPlaque",value:function(){var e=this;g.os.timeline().addLabel("start").to(this.customSelector,1,{height:"130px"},"start").to(this.previewWrapper,1,{opacity:0,height:"0"},"start").eventCallback("onComplete",(function(){e.closePlaqueDropdown()}))}},{key:"initListeners",value:function(){var e=this;this.plaqueDropdownContainer.addEventListener("click",this.handlePlaqueDropdown),[].slice.call(this.plaqueDropdownEntries).forEach((function(t){t.addEventListener("click",e.updatePlaqueDropdown)})),this.plaqueInput.addEventListener("input",this.updatePlaqueInput)}},{key:"destroy",value:function(){for(var e=this,t=0,n=Object.keys(this.subs);t<n.length;t++){var r=n[t];this.subs[r].complete()}this.plaqueDropdownContainer.removeEventListener("click",this.handlePlaqueDropdown),[].slice.call(this.plaqueDropdownEntries).forEach((function(t){t.removeEventListener("click",e.updatePlaqueDropdown)}))}},{key:"load",value:function(){this.initListeners()}},{key:"revealPlaqueDropdownItems",value:function(e){this.forwardTl=g.os.timeline(),this.forwardTl.add("start").staggerTo(e,.25,{opacity:1,y:0,delay:.5},.2,"start")}},{key:"reversePlaqueDropdownItems",value:function(e){this.reverseTl=g.os.timeline(),this.reverseTl.add("start").staggerTo(e,.25,{opacity:0,y:-10,delay:.25},.2,"start")}},{key:"resetPlaqueDropdownAnim",value:function(e){g.K3.set(e,{clearProps:"opacity,transform"})}}],t&&S(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var T=n(2862),A=n(6722);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function L(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==C(t)?t:t+""}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=I(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function I(e,t){if(e){if("string"==typeof e)return D(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const O=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.A.sub_luggage_overlay.subscribe({next:function(e){n.selectedLuggage=e.selectedLuggage,n.accessoryId=e.accessoryId,n.previousLuggage=e.previousLuggage}}),this.luggageConfigurator=t,this.bespokeOptions=this.selectedLuggage.bespokeFields,this.luggageType=this.selectedLuggage.marketingTitle;var i=this.luggageType.replace(/\s+/g,"-").toLowerCase();this.images_path="/content/dam/rrmc/marketUK/rollsroycemotorcars_com/boutique/".concat(this.accessoryId,"/configurator/subassets/").concat(i),this.input_arr=[],this.currentImg="",this.luggageTitle=this.luggageConfigurator.querySelector(".rrmc-selected-luggage-title"),this.optionsContainer=this.luggageConfigurator.querySelector(".rrmc-luggage-configurator-options-container"),this.previewWrapper=this.luggageConfigurator.querySelector(".rrmc-luggage-configurator-img"),this.hasPlaque=!1,this.selected_options={primary:{value:"",label:""},secondary:{value:"",label:""},tertiary:{value:"",label:""},plaqueType:{value:"Default",label:"Plaque"},plaqueText:{value:"",label:""}},this.dropdown_cb_open=function(e,t){[].slice.call(n.input_arr).forEach((function(e){void 0!==e.instance&&e.instance!==t&&"Dropdown"===e.instance.constructor.name&&e.instance.closeDropdown()}))},this.plaque_cb_update=function(e){var t=e.returnFieldValue();t.type===(0,b.K)("Bespoke")?n.selected_options.plaqueText=t.value:t.type===(0,b.K)("Default")&&(n.selected_options.plaqueText="")},this.dropdown_cb_select=function(e,t){var r=t.returnFieldValue(),i=t.dropdown.getAttribute("data-color-pos"),o=["primary","secondary","tertiary"];i?(n.selected_options[o[i]].label=r.label,n.selected_options[o[i]].value=r.value):n.selected_options.push(r),""!==n.selected_options.primary.value&&""!==n.selected_options.secondary.value&&n.retrieveLuggageImage()}},t=[{key:"collect_selected_luggage",value:function(){var e,t=[],n={label:this.selected_options.primary.label,value:this.selected_options.primary.value},r={label:this.selected_options.secondary.label,value:this.selected_options.secondary.value},i={label:this.selected_options.tertiary.label,value:this.selected_options.tertiary.value};return t.push(n,r,i),this.hasPlaque&&(e={label:this.selected_options.plaqueType.label,value:this.selected_options.plaqueText.length>0?this.selected_options.plaqueText:this.selected_options.plaqueType.label},t.push(e)),t}},{key:"destroy",value:function(){[].slice.call(this.input_arr).forEach((function(e){e.instance.destroy()}))}},{key:"retrieveLuggageImage",value:function(){var e=this,t="".concat(this.images_path,"/base-").concat(this.selected_options.primary.value.replace(/\s+/g,""),"-").concat(this.selected_options.secondary.value.replace(/\s+/g,""),".jpg");if(this.currentImg!==t){var n=this.previewWrapper;n.setAttribute("data-src",t),m.uo.to(n,.5,{opacity:0,onComplete:function(){(0,T.Yf)(n,(function(){m.uo.to(n,.5,{opacity:1}),e.currentImg=t}))}})}}},{key:"createPlaqueEditor",value:function(e){var t=this,n=document.createElement("div"),r={label:e.label,length:e.maxLength,placeholder:e.placeholder,image:e.image};n.classList.add("rrmc-dropdown-wrapper","rrmc-plaque-dropdown-wrapper"),n.innerHTML=function(e){var t='\n    <option value="Default">'.concat((0,b.K)("Default"),'</option>\n    <option value="Bespoke">').concat((0,b.K)("Bespoke"),"</option>"),n="padding-top: ".concat(e.image.height/e.image.width*100,"%"),r='<div data-label="Bespoke" class="rrmc-plaque-editor--wrapper">\n      <div class="rrmc-accessory-plaque-editor--scaler" style="'.concat(n,'">\n        <div class="rrmc-accessory-plaque-editor--aligner">\n          <img class="rrmc-accessory-plaque-editor--image" src="').concat(e.image.original,'" alt="Plaque Preview">\n          <div class="rrmc-accessory-plaque-editor--input-container">\n            <input type="text" maxlength="').concat(e.length,'" placeholder="').concat((0,b.K)("Type here"),'" class="rrmc-accessory-plaque-editor--input">\n          </div>\n        </div>\n      </div>\n    </div>');return'<div class="rrmc-accessory-plaque-dropdown" data-is-bespoke="true" data-plaque-dropdown-status="closed">\n                <select class="rrmc-accessory-plaque-dropdown--select select-hidden">\n                    '.concat(t,'\n                </select>\n                <div class="rrmc-accessory-plaque-dropdown--container">\n                    <span class="rrmc-accessory-plaque-dropdown--label" data-original-label="').concat(e.label,'">').concat((0,b.K)(e.label),'</span>\n                    <span class="rrmc-accessory-plaque-dropdown--value"></span>\n                    <span class="rrmc-accessory-dropdown--icon rrmc-accessory-dropdown--icon-plaque"></span>\n                </div>\n                <div class="rrmc-accessory-plaque-dropdown--custom-select">\n                    <div class="rrmc-accessory-plaque-dropdown--custom-select-list">\n                      <button data-selection="default" class="rrmc-accessory-plaque-option">\n                        <span class="rrmc-accessory-plaque-checkbox"></span>\n                        <span class="rrmc-accessory-plaque-checkbox-value">').concat((0,b.K)("Default"),'</span>\n                      </button>\n                        <button data-selection="bespoke" class="rrmc-accessory-plaque-option">\n                          <span class="rrmc-accessory-plaque-checkbox"></span>\n                          <span class="rrmc-accessory-plaque-checkbox-value">').concat((0,b.K)("Bespoke"),'</span>\n                      </button>\n                    </div>\n                    <div class="rrmc-accessory-plaque-dropdown--preview">\n                      ').concat(r,'\n                      <p class="rrmc-plaque-editor--text-input-charcount"><span class="rrmc-plaque-editor--counter">').concat(e.length,"</span> ").concat((0,b.K)("characters left"),"</p>\n                    </div>\n                </div>\n            </div>")}(r);var i=new k(n.querySelector(".rrmc-accessory-plaque-dropdown"),this.optionsContainer);i.load(),this.previousLuggage&&[].slice.call(this.previousLuggage).forEach((function(e){e.label===(0,b.K)("Plaque")&&(i.preselect(e.value,!1),e.value!==(0,b.K)("Default")&&(t.selected_options.plaqueType.value="Bespoke",t.selected_options.plaqueText=e.value))})),""===i.returnFieldValue().value&&i.preselect((0,b.K)("Default"),!1),this.input_arr.push({wrapper:n,instance:i}),i.addEventListener("update",(function(){t.plaque_cb_update(i)})),i.addEventListener("close",(function(){t.plaque_cb_update(i)}))}},{key:"createColorDropdown",value:function(e,t,n){var r=this;t=t.sort((0,A.AL)("name"));var i=document.createElement("div");i.classList.add("rrmc-dropdown-wrapper"),i.innerHTML=function(e,t){var n,r="",i="",o=P(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;i+='<option data-dropdown-value="'.concat(a.name,'" value="').concat(a.name,'">').concat((0,b.K)(a.name),"</option>")}}catch(e){o.e(e)}finally{o.f()}var s,l=P(t.entries());try{for(l.s();!(s=l.n()).done;){var c=R(s.value,2)[1];r+='<li class="rrmc-accessory-dropdown--select-option rrmc-accessory-dropdown--color" data-dropdown-value="'.concat(c.name,'">').concat((0,b.K)(c.name),'</li>\n                  <span style="background-color: ').concat(c.code,';" class="rrmc-accessory-dropdown--color-disk"></span>')}}catch(e){l.e(e)}finally{l.f()}return'<div class="rrmc-accessory-dropdown" data-is-bespoke="true" data-dropdown-status="closed" data-dropdown-type="color">\n                <select class="rrmc-accessory-dropdown--select select-hidden">\n                    '.concat(i,'\n                </select>\n                <div class="rrmc-accessory-dropdown--container">\n                    <span class="rrmc-accessory-dropdown--label" data-key-label="').concat(e,'">').concat((0,b.K)(e),'</span>\n                    <span class="rrmc-accessory-dropdown--value"></span>\n                    <span class="rrmc-accessory-dropdown--icon rrmc-accessory-dropdown--icon-color"></span>\n                </div>\n                <div class="rrmc-accessory-dropdown--custom-select">\n                    <ul class="rrmc-accessory-dropdown--custom-select-list">\n                      ').concat(r,"\n                    </ul>\n                </div>\n            </div>")}(e,t);var o=new v.A(i.querySelector(".rrmc-accessory-dropdown"));o.load(),o.dropdown.setAttribute("data-color-pos",n),this.input_arr.push({wrapper:i,instance:o}),o.addEventListener("select",(function(){r.dropdown_cb_select(e,o)})),o.addEventListener("open",(function(){r.dropdown_cb_open(e,o)})),this.previousLuggage&&[].slice.call(this.previousLuggage).forEach((function(e){if(o.dropdownLabel.innerText===e.label){var n=t.findIndex((function(t){return t.name===e.value}));o.preselect(t[n].name,!1,t[n].code)}})),""===o.returnFieldValue().value?o.preselect(t[0].name,!1,t[0].code):o.preselect(o.returnFieldValue().value,!1,t[0].code)}},{key:"appendDoneCta",value:function(){var e=this,t=document.createElement("div");t.innerHTML='<div class="rrmc-accessory-done-button-container">\n      <button data-action="close-luggage-overlay"\n              data-lazy-load-class="cta-lazy-load"\n              class="rrmc-cta-component rrmc-button--primary js-rrmc-lazy-load js-rrmc-button">\n          <span class="rrmc-button-background js-rrmc-button-background"></span>\n          <span class="rrmc-button-text js-rrmc-button-text">'.concat((0,b.K)("Done"),'</span>\n          <span class="rrmc-button-arrow js-rrmc-button-arrow" data-icon="my-list"></span>\n      </button>\n    </div>'),this.optionsContainer.appendChild(t),this.doneCta=t.querySelector(".js-rrmc-button"),this.doneCtaInstance=new l.default(this.doneCta),this.doneCtaInstance.load(),this.doneCta.addEventListener("click",(function(){var t=e.collect_selected_luggage();e.finished_done(t)})),m.uo.to(this.doneCta,.5,{opacity:1,pointerEvents:"all"})}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.luggageTitle.innerHTML=(0,b.K)(this.luggageType),[].slice.call(this.bespokeOptions).forEach((function(t,n){"color"===t.type?e.createColorDropdown(t.label,t.values,n):(e.hasPlaque=!0,e.createPlaqueEditor(t,n))})),[].slice.call(this.input_arr).forEach((function(t){e.optionsContainer.appendChild(t.wrapper)})),this.retrieveLuggageImage(),this.appendDoneCta(),this.finished_done=t.done}}],t&&M(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var F=n(4772),N=n(7964),j=n(259);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,z(r.key),r)}}function z(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}const G=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sandbox=t,this.backCta=this.sandbox.querySelector('[data-overlay-action="'.concat(i.Go,'"]')),this.closeCta=this.sandbox.querySelector('[data-overlay-action="'.concat(i.Jm,'"]')),this.components_lazy_load=this.sandbox.querySelectorAll(".js-rrmc-lazy-load"),this.elm_container_components=this.sandbox.querySelector(".js-overlay"),this.flag_self_managed_height=this.elm_container_components.hasAttribute("data-self-managed-height"),this.closeOverlay=function(){(0,j.fg)(),r.A.sub_overlay_manager_bus.next({action:i.Jm,data:{}}),n.on_close_after()},this.backOverlay=function(){(0,j.fg)(),r.A.sub_overlay_manager_bus.next({action:i.Go,data:{}}),n.on_back_after()}},(t=[{key:"setHeight",value:function(){this.flag_self_managed_height||this.elm_container_components.getBoundingClientRect().height>window.innerHeight-100?this.elm_container_components.style.justifyContent="flex-start":this.elm_container_components.classList.add("is-full-height")}},{key:"destroy",value:function(){this.closeCta.removeEventListenerRR("click",this.closeOverlay),this.backCta.removeEventListenerRR("click",this.backOverlay),this.init_components.forEach((function(e){return e.destroy()})),this.comp_closeCta.destroy(),this.comp_backCta.destroy()}},{key:"load",value:function(e,t){this.on_close_after=e.on_close_after||function(){},this.on_back_after=e.on_back_after||function(){},this.elm_container_components.classList.remove("is-full-height"),this.closeCta.addEventListenerRR("click",this.closeOverlay),this.backCta.addEventListenerRR("click",this.backOverlay);var n={"form-lazy-load":a.default,"brochure-list-lazy-load":s.default,"classic-carousel-lazy-load":o.default,"rich-text-lazy-load":c.default,"image-switch-lazy-load":u.default,"cta-lazy-load":l.default,"video-player-lazy-load":h.default,"accordion-lazy-load":d.default,"dealer-locator-lazy-load":p.default,"accessory-handler-lazy-load":f.default,"luggage-configurator-lazy-load":O,"language-selector-lazy-load":F.default,"enquire-lazy-load":N.default};this.init_components=[].slice.call(this.components_lazy_load).map((function(e){return new n[e.dataset.lazyLoadClass](e)})),this.init_components.forEach((function(n){return n.load(e,t)})),this.comp_closeCta=new l.default(this.closeCta),this.comp_closeCta.load(),this.comp_backCta=new l.default(this.backCta),this.comp_backCta.load(),this.setHeight()}}])&&U(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},9060:(e,t,n)=>{"use strict";n.r(t);const r=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))},i=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,n){if(n&&("object"==typeof n||"function"==typeof n)){var a=n.then;if("function"==typeof a)return void a.call(n,(function(t){o(e,t)}),(function(n){r[e]={status:"rejected",reason:n},0==--i&&t(r)}))}r[e]={status:"fulfilled",value:n},0==--i&&t(r)}for(var a=0;a<r.length;a++)o(a,r[a])}))};function o(e,t){this.name="AggregateError",this.errors=e,this.message=t||""}o.prototype=Error.prototype;const a=function(e){var t=this;return new t((function(n,r){if(!e||void 0===e.length)return r(new TypeError("Promise.any accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return r();for(var a=[],s=0;s<i.length;s++)try{t.resolve(i[s]).then(n).catch((function(e){a.push(e),a.length===i.length&&r(new o(a,"All promises were rejected"))}))}catch(e){r(e)}}))};var s=setTimeout;function l(e){return Boolean(e&&void 0!==e.length)}function c(){}function u(e){if(!(this instanceof u))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],v(e,this)}function h(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,u._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void p(t.promise,e)}d(t.promise,r)}else(1===e._state?d:p)(t.promise,e._value)}))):e._deferreds.push(t)}function d(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof u)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void v((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){p(e,t)}var r,i}function p(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&u._immediateFn((function(){e._handled||u._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)h(e,e._deferreds[t]);e._deferreds=null}function m(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function v(e,t){var n=!1;try{e((function(e){n||(n=!0,d(t,e))}),(function(e){n||(n=!0,p(t,e))}))}catch(e){if(n)return;n=!0,p(t,e)}}u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){var n=new this.constructor(c);return h(this,new m(e,t,n)),n},u.prototype.finally=r,u.all=function(e){return new u((function(t,n){if(!l(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var i=r.length;function o(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){o(e,t)}),n)}r[e]=a,0==--i&&t(r)}catch(e){n(e)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},u.any=a,u.allSettled=i,u.resolve=function(e){return e&&"object"==typeof e&&e.constructor===u?e:new u((function(t){t(e)}))},u.reject=function(e){return new u((function(t,n){n(e)}))},u.race=function(e){return new u((function(t,n){if(!l(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)u.resolve(e[r]).then(t,n)}))},u._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){s(e,0)},u._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};const g=u;var y=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")}();"function"!=typeof y.Promise?y.Promise=g:(y.Promise.prototype.finally||(y.Promise.prototype.finally=r),y.Promise.allSettled||(y.Promise.allSettled=i),y.Promise.any||(y.Promise.any=a));var _=n(1500),b=n(1716),w=n(2725),x=n(9608),S=n(8607);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function T(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==E(t)?t:t+""}var A=".disable-cursor";const C=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.make_structure(),this.on_scroll=function(){var e=window.pageYOffset;t.set_vertical_offset(e)},this.mousemove_triggered=!1,this.on_mousemove=function(e){t.mousemove_triggered||(t.mousemove_triggered=!0,t.fade_in_inner()),t.c.style.transform="translate3d(".concat(e.clientX,"px, ").concat(e.clientY,"px, 0)")},this.on_document_over=function(){t.fade_in_inner()},this.on_document_leave=function(){t.fade_out_inner()},this.anim=new x.A(this)},(t=[{key:"set_vertical_offset",value:function(e){this.c.style.top="".concat(e,"px")}},{key:"fade_in_inner",value:function(){S.uo.to(this.c_inner,.2,{opacity:1})}},{key:"fade_out_inner",value:function(){S.uo.to(this.c_inner,.2,{opacity:0})}},{key:"make_structure",value:function(){var e=(new DOMParser).parseFromString('<div class="rrmc-cursor">\n        <div class="rrmc-cursor-inner" style="opacity: 0">\n          <div class="rrmc-cursor-border"></div>\n          <div class="rrmc-cursor-icon"></div>\n        </div>\n      </div>',"text/html");this.c=e.body.firstChild,this.c_border=this.c.querySelector(".rrmc-cursor-border"),this.c_icon=this.c.querySelector(".rrmc-cursor-icon"),this.c_inner=this.c.querySelector(".rrmc-cursor-inner"),document.body.appendChild(this.c)}},{key:"load",value:function(){var e=this;this.queue_subscription=w.A.sub_cursor.subscribe({next:function(t){if(Array.isArray(t))e.anim.queue(t);else if("fullscreen_enter"===t.action){var n=t.elm;e.set_vertical_offset(0),n.appendChild(e.c)}else"fullscreen_leave"===t.action&&(document.body.appendChild(e.c),e.on_scroll())}}),w.A.sub_touch_update.subscribe({next:function(t){t&&e.queue_subscription&&(e.queue_subscription.unsubscribe(),document.removeEventListenerRR("scroll",e.on_scroll),document.removeEventListenerRR("mousemove",e.on_mousemove))}}),document.addEventListenerRR("scroll",this.on_scroll),this.on_scroll(),document.addEventListenerRR("mousemove",this.on_mousemove),document.addEventListenerRR("mouseenter",this.on_document_over),document.addEventListenerRR("mouseleave",this.on_document_leave),[].slice.call(document.querySelectorAll(A)).forEach((function(t){t.addEventListenerRR("mouseenter",e.on_document_leave),t.addEventListenerRR("mouseleave",e.on_document_over)}));var t=w.A.sub_touch_update.subscribe({next:function(n){n&&(document.removeEventListenerRR("mouseenter",e.on_document_over),document.removeEventListenerRR("mouseleave",e.on_document_leave),[].slice.call(document.querySelectorAll(A)).forEach((function(t){t.removeEventListenerRR("mouseenter",e.on_document_leave),t.removeEventListenerRR("mouseleave",e.on_document_over)})),S.uo.set(e.c_inner,{display:"none"}),t.unsubscribe())}})}}])&&k(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var M=n(997),L=n(7455),R=n(7293),P=n(3607),I=n(4755),D=n(4692),O=n.n(D);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function B(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}const U=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=(0,R.g)("local"),n=(0,R.g)("shared");this.localOverlayContainer=t.overlay_container,this.sharedOverlayContainer=n.overlay_container,this.is_overlay_open=!1,this.history_clear()},t=[{key:"get_overlay_type",value:function(e,t){var n=(0,R.g)(e),r=[];if(n&&n.overlay_container_wrapper){var i=(0,R.K)(n.overlay_container_wrapper);i&&i.children&&(r=[].slice.call(i.children).filter((function(e){return e&&e.children.item(0)&&e.children.item(0).getAttribute("data-overlay-name")===t})))}if(r.length>0){var o=r.shift(),a=o?o.querySelector(".rrmc-overlay-component"):null;return{elm_overlay_container:n.overlay_container,elm_overlay:a}}return{elm_overlay_container:null,elm_overlay:null}}},{key:"get_overlay",value:function(e){var t=this.get_overlay_type("shared",e);if(t.elm_overlay_container)return{elm_overlay_container:t.elm_overlay_container,elm_overlay:t.elm_overlay};var n=this.get_overlay_type("local",e);return n.elm_overlay_container?{elm_overlay_container:n.elm_overlay_container,elm_overlay:n.elm_overlay}:{elm_overlay_container:null,elm_overlay:null}}},{key:"history_push",value:function(e){this.history_overlay.push(e),this.history_overlay.length>1&&this.layout_back_btn_reveal()}},{key:"history_pop",value:function(){this.history_overlay.pop();var e=this.history_overlay.length;return e<=1&&this.layout_back_btn_hide(),this.history_overlay[e-1]}},{key:"history_clear",value:function(){this.history_overlay=[],this.layout_back_btn_hide()}},{key:"layout_back_btn_reveal",value:function(){this.localOverlayContainer&&this.localOverlayContainer.classList.add("rrmc-back-button-enable"),this.sharedOverlayContainer&&this.sharedOverlayContainer.classList.add("rrmc-back-button-enable")}},{key:"layout_back_btn_hide",value:function(){this.localOverlayContainer.classList.remove("rrmc-back-button-enable"),this.sharedOverlayContainer&&this.sharedOverlayContainer.classList.remove("rrmc-back-button-enable")}},{key:"openOverlay",value:function(e){var t=this,n=e.data,r=n?n.overlayName:null,i=this.get_overlay(r),o=i.elm_overlay_container,a=i.elm_overlay;this.overlayContainer=o,null!=this.overlayContainer&&(this.overlayElement=a,(0,I.disableBodyScroll)(this.overlayElement),O().scrollify.isDisabled()||O().scrollify.disable(),this.is_overlay_open=!0,(new S.Y_).set(this.overlayContainer,{display:"block",y:"100%",ease:S.ys.easeInOut}).set(this.overlayElement,{display:"block"}).add((function(){t.overlayComponent=new P.default(t.overlayElement),t.overlayComponent.load(n)})).to(this.overlayContainer,1,{y:"0%",ease:S.ys.easeInOut}))}},{key:"swapOverlay",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.data,i=r?r.overlayName:null,o=this.get_overlay(i),a=o.elm_overlay_container,s=o.elm_overlay;this.nextOverlayContainer=a,this.nextOverlayElement=s,(0,I.disableBodyScroll)(this.nextOverlayElement),(new S.Y_).set(this.nextOverlayElement.parentElement,{position:"absolute",top:0,left:0,width:"100%",opacity:0}).set(this.nextOverlayElement,{display:"block"}).add((function(){t.nextOverlayComponent=new P.default(t.nextOverlayElement),t.nextOverlayComponent.load(r,n.data)})).addLabel("fadeOut").to(this.nextOverlayElement.parentElement,.5,{opacity:1},"fadeOut").to(this.overlayElement.parentElement,.5,{opacity:0},"fadeOut").add((function(){t.overlayComponent.destroy()})).to(this.overlayElement.parentElement,.5,{clearProps:"all"}).set(this.overlayElement,{display:"none"}).set(this.nextOverlayElement.parentElement,{clearProps:"all"}).add((function(){t.overlayComponent=t.nextOverlayComponent,t.overlayContainer=t.nextOverlayContainer,t.overlayElement=t.nextOverlayElement}))}},{key:"closeOverlay",value:function(){var e=this;(0,I.clearAllBodyScrollLocks)(),O().scrollify.isDisabled()&&O().scrollify.enable(),(new S.Y_).to(this.overlayContainer,1,{y:"100%"}).set(this.localOverlayContainer,{display:"none"}).set(this.sharedOverlayContainer,{display:"none"}).add((function(){e.overlayComponent.on_close_after(),e.overlayComponent.destroy(),e.is_overlay_open=!1})).set(this.overlayElement,{display:"none"})}},{key:"handleEvent",value:function(e){if(e.action===L.xb||e.action===L.iI)this.history_push(e),this.is_overlay_open?this.swapOverlay(e):this.openOverlay(e);else if(e.action===L.Jm)this.history_clear(),this.closeOverlay(e);else if(e.action===L.Go){var t=this.history_pop();this.swapOverlay(t,e)}}},{key:"modifyEvent",value:function(e){try{if(window.rrmc_overlay_event_modifiers){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(window.rrmc_overlay_event_modifiers);try{for(n.s();!(t=n.n()).done;)(0,t.value)(e)}catch(e){n.e(e)}finally{n.f()}}}catch(e){console.log(e)}}},{key:"load",value:function(){var e=this;w.A.sub_overlay_manager_bus.subscribe({next:function(t){e.modifyEvent(t),e.handleEvent(t)}})}}],t&&j(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();n(5699);var z=n(7709),G=n(7467),H=n.n(G),q=function(e,t,n){if(e.isUsageAllowed(t)){var r=e.getPersistence(t);if("devicePreviousVisit"===t)r||function(e){var t="deviceCurrentVisit",n="devicePreviousVisit",r=e.getPersistence(t),i=e.getPersistence(n),o=Math.floor((new Date).getTime());null!==r&&new Date(r)!==o?(e.setPersistence(n,r),e.setPersistence(n,r)):null!==i&&e.setPersistence(n,i),(null===r||null!==r&&new Date(r)!==o)&&e.setPersistence(t,o)}(e);else if("deviceCarModelPagesVisited"===t)!function(e,t){var n,r,i,o=(n=window.location.href.toLowerCase(),r=!1,i=!1,["ghost-extended","phantom-extended","black-badge-ghost","black-badge-cullinan","ghost","phantom","cullinan"].forEach((function(e){!i&&n.indexOf(e)>-1&&(i=!0,r=e)})),r),a=JSON.parse(e.getPersistence(t))||[];o&&-1===a.indexOf(o)&&(a.push(o),e.setPersistence(t,JSON.stringify(a)))}(e,t);else if(!r||null!==r&&n){var i;switch(t){case"deviceBrowser":i=H().browser.name;break;case"deviceBrowserVersion":i="".concat(H().browser.version," (").concat(H().browser.fullVersion,")");break;case"deviceName":i=H().device.name;break;case"deviceVersion":i=parseInt(H().device.version,10)>-1?H().device.version:"not available";break;case"deviceBrowserLanguage":i=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;break;case"deviceOs":i=H().os.name;break;case"deviceOsVersion":i="".concat(H().os.version," (").concat(H().os.fullVersion,")");break;case"deviceReferringUrl":i=window.location.href.substring(0,250)}e.setPersistence(t,i)}}};function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function X(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}w.A.sub_epaas.subscribe({next:function(e){!function(e){var t=e.epaas;$(document).ready((function(){q(t,"devicePreviousVisit"),q(t,"deviceName"),q(t,"deviceVersion"),q(t,"deviceOs"),q(t,"deviceOsVersion"),q(t,"deviceBrowser"),q(t,"deviceBrowserVersion"),q(t,"deviceBrowserLanguage"),q(t,"deviceReferringUrl",!0),q(t,"deviceCarModelPagesVisited")}))}(e)}});const K=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"load",value:function(e){var t=e.epaas;this.epaas=t,this.my_list=this.retrieve_my_list(),this.list_length=this.my_list?JSON.parse(this.my_list).length:0,this.init_listeners(),this.update_my_list_total()}},{key:"init_listeners",value:function(){var e=this;w.A.sub_my_list_manager_bus.subscribe({next:function(t){return e.manage_my_list(t)}})}},{key:"manage_my_list",value:function(e){"add"===e.action?this.add_to_my_list(e.data):"change"===e.action?this.change_my_list(e.data):"remove"===e.action?this.remove_from_my_list(e.data):"set"===e.action&&this.set_list(e.data,e.options)}},{key:"set_list",value:function(e,t){var n=e,r=JSON.stringify(n);this.epaas.setPersistence("wishlistLongterm",JSON.stringify(n))||this.epaas.setPersistence("wishlistSession",JSON.stringify(n)),this.my_list=r,t&&!1===t.broadcast||w.A.sub_my_list_updated.next({data:n,type:"set_list"})}},{key:"update_my_list_total",value:function(){var e=JSON.parse(this.my_list);w.A.sub_my_list_updated.next({data:e,type:"update_my_list_total"})}},{key:"add_to_my_list",value:function(e){var t=JSON.parse(this.retrieve_my_list());t.push(e);var n=JSON.stringify(t);this.epaas.setPersistence("wishlistLongterm",n)||this.epaas.setPersistence("wishlistSession",n),this.my_list=n,w.A.sub_my_list_updated.next({data:t,type:"add_to_my_list"})}},{key:"change_my_list",value:function(e){var t=JSON.parse(this.retrieve_my_list()),n=e.accessoryId;delete e.accessoryId;var r=n.split("-").shift();t.splice(r,1,e);var i=JSON.stringify(t);this.epaas.setPersistence("wishlistLongterm",i)||this.epaas.setPersistence("wishlistSession",i),this.my_list=i,w.A.sub_my_list_updated.next({data:t,type:"change_my_list"})}},{key:"remove_from_my_list",value:function(e){var t,n=JSON.parse(this.retrieve_my_list()),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.splice(i,1,"remove")}}catch(e){r.e(e)}finally{r.f()}n=n.filter((function(e){return"remove"!==e}));var o=JSON.stringify(n);this.epaas.setPersistence("wishlistLongterm",o)||this.epaas.setPersistence("wishlistSession",o),this.my_list=o,w.A.sub_my_list_updated.next({data:n,type:"remove_from_my_list"})}},{key:"retrieve_my_list",value:function(){return this.epaas.getPersistence("wishlistLongterm")||this.epaas.getPersistence("wishlistSession")||this.epaas.setPersistence("wishlistLongterm","[]")||this.epaas.setPersistence("wishlistSession","[]"),this.epaas.getPersistence("wishlistLongterm")||this.epaas.getPersistence("wishlistSession")}}],t&&Y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var J=n(259);function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ee(e){window.dataLayer&&window.dataLayer.push(e)}window.consent_cache={};var te,ne=[{title:"GoogleAdvertising",dataLayerTitle:"googleAdvertising"},{title:"LinkedInAds",dataLayerTitle:"linkedInInsightTag"},{title:"fbPagePixel",dataLayerTitle:"facebookPixel"},{title:"GoogleAnalytics",dataLayerTitle:"googleAnalytics"},{title:"RRMCFeatureComponents",dataLayerTitle:"RRMCFeatureComponents"}],re=function(e){var t,n={},r=Z(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.dataLayerTitle]=window.epaas.api.isUsageAllowed(i.title)}}catch(e){r.e(e)}finally{r.f()}return n};function ie(){return re(ne)}function oe(){ee({event:"consent_status",processingConsent:ie()}),function(e){window.consent_cache=ie();var t,n=function(){(function(e,t){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}return!0})(window.consent_cache,ie())||(window.consent_cache=ie(),e())},r=Z(ne);try{for(r.s();!(t=r.n()).done;){var i=t.value;window.epaas.api.registerOnUserConsentChange(i.title,n)}}catch(e){r.e(e)}finally{r.f()}}((function(){var e;ee({event:"consent_update",processingConsent:ie()}),e=ie(),w.A.sub_epaas_consent_change.next(e)})),(0,J.kC)()}function ae(e){e.detail?(function(){if(window.epaas.api.isUsageAllowed("EvergageProcessing")){var e=document,t=e.createElement("script"),n=e.getElementsByTagName("script")[0];t.type="text/javascript",t.async=!0,t.defer=!0,t.src=window.rrmc_everage_src,n.parentNode.insertBefore(t,n)}else window.rrmc_experiences&&window.rrmc_experiences.push({campaign:"none",experience:"none"}),window.localStorage.removeItem("evergage"),window.localStorage.removeItem("evergage_update")}(),w.A.sub_epaas.next({epaas:window.epaas.api}),oe()):console.log("ERROR: epaas api initialization failed")}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ce(r.key),r)}}function ce(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==se(t)?t:t+""}_.os.registerPlugin(b.ScrollToPlugin),te=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elm_canvas=document.querySelector(".rrmc-page-canvas"),this.overlay_manager=new U,this.wishlist_manager=new K,this.mobileCheck=window.matchMedia("(max-width: 767px)"),this.callback_resize=function(){t.resize_spacer()},this.enable_touch=function(){document.body.classList.add("touch-detected"),document.body.classList.remove("no-touch"),document.removeEventListenerRR("touchstart",t.enable_touch)},this.enable_highlight=function(e){9===e.keyCode&&(document.body.classList.remove("no-highlight"),document.addEventListenerRR("mousemove",t.disable_highlight),document.removeEventListenerRR("keydown",t.enable_highlight))},this.disable_highlight=function(){document.body.classList.add("no-highlight"),document.removeEventListenerRR("mousemove",t.disable_highlight),document.addEventListenerRR("keydown",t.enable_highlight)},this.set_dealer=function(e){var t=e.epaas;window.location.href.indexOf("isDealer")>-1&&t.setPersistence("isDealer","true")},(0,M.A)(this,"var_footer_height",w.A.sub_footer_height,this.resize_spacer)},t=[{key:"resize_spacer",value:function(){this.elm_canvas.style.marginBottom="".concat(this.var_footer_height.value(),"px")}},{key:"store_utms",value:function(e){var t=e.epaas,n=location.search;if(0!==n.length){var r=z.parse(n);t.isUsageAllowed("utm_source")&&r.utm_source&&t.setPersistence("utm_source",r.utm_source),t.isUsageAllowed("utm_medium")&&r.utm_medium&&t.setPersistence("utm_medium",r.utm_medium),t.isUsageAllowed("utm_campaign")&&r.utm_campaign&&t.setPersistence("utm_campaign",r.utm_campaign),t.isUsageAllowed("campaign_id")&&r.campaign_id&&t.setPersistence("campaign_id",r.campaign_id)}}},{key:"scrollToFocusedElement",value:function(e){var t="false"===z.parse(location.scroll)?0:2,n=this.mobileCheck.matches?60:0,r={y:"#".concat(e),offsetY:n};_.os.timeline().delay(1).to(window,{duration:t,scrollTo:r,ease:"none",onComplete:w.A.sub_broadcast.next({action:"focus"})}).to(window,{duration:t,scrollTo:r,autoKill:!0})}},{key:"load",value:function(){var e=this;J.mj(),this.resize_spacer(),window.addEventListenerRR("resize",this.callback_resize),document.addEventListenerRR("touchstart",this.enable_touch),document.addEventListenerRR("keydown",this.enable_highlight),this.overlay_manager.load(),w.A.sub_epaas.subscribe({next:function(t){e.store_utms(t),e.wishlist_manager.load(t),e.set_dealer(t),e.epaas=t}}),w.A.sub_epaas_consent_change.subscribe({next:function(){e.store_utms(e.epaas)}});var t=z.parse(location.search);if(t.focus&&window.addEventListenerRR("load",(function(){w.A.sub_broadcast.next({action:"load"}),_.os.delayedCall(1,(function(){return e.scrollToFocusedElement(t.focus)}))})),t.overlay){var n=t.overlay;window.addEventListenerRR("load",(function(){return w.A.sub_overlay_manager_bus.next({action:"open-default-form",data:{overlayName:n}})}))}document.querySelector(".js-rrmc-height-change-listener").contentWindow.addEventListener("resize",(function(){var e=document.body.offsetHeight;w.A.sub_height_resize.next({event:"resize",data:e})})),w.A.sub_cursor.next(["default","enter"]);var r=document.querySelectorAll("a, button");[].slice.call(r).forEach((function(e){e.addEventListenerRR("mouseover",(function(){w.A.sub_cursor.next(["scale_cta","enter"])})),e.addEventListenerRR("mouseleave",(function(){w.A.sub_cursor.next(["scale","leave"])}))})),[].slice.call(document.querySelectorAll("div.aem-Grid>div")).filter((function(e){return e.querySelectorAll(".js-rrmc-button").length>0})).forEach((function(e,t){var n=e.querySelectorAll(".js-rrmc-button");[].slice.call(n).forEach((function(e,n){e.setAttribute("data-cta-index","".concat(t,".").concat(n))}))})),navigator.userAgent.match("Android")?document.body.classList.add("backdrop-filter-off"):window.CSS&&window.CSS.supports&&(CSS.supports("backdrop-filter: blur(20px)")||CSS.supports("-webkit-backdrop-filter: blur(20px)")||document.body.classList.add("backdrop-filter-off"));var i=document.querySelector('[data-overlay-name="g-dealer-locator"]');if(i&&i.classList.contains("rrmc-overlay-light")){i.classList.remove("rrmc-overlay-light"),i.classList.add("rrmc-overlay-dark");var o=i.querySelector(".rrmc-overlay-body-light");o.classList.remove("rrmc-overlay-body-light"),o.classList.add("rrmc-overlay-body-dark")}(window.epaas&&window.epaas.api||window).addEventListener("consentcontroller.api.initialized",ae)}}],t&&le(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()),document.addEventListenerRR("DOMContentLoaded",(function(){te.load(),(new C).load()}))},7836:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(5116),o=n(5076),a=n(2725),s=n(2862);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var p=function(){return h((function e(t){var n=this;c(this,e),this.container=t,this.parallax_on=this.container.hasAttribute("data-parallax-on"),this.video_on=this.container.hasAttribute("data-video-on"),this.align=this.container.getAttribute("data-align"),this.video=this.container.querySelector(".rrmc-two-col-video");var r=t.querySelector(".js-two-col-parallax-a"),i=t.querySelector(".js-two-col-parallax-b");this.image_container=i,this.body_height=0,"right"==this.align?(this.content_a=i,this.content_b=r):(this.content_a=r,this.content_b=i),this.on_scroll=function(){var e=document.body.clientHeight;e!=n.body_height&&(n.body_height=e,n.on_resize()),n.update_parallax()},this.on_resize=function(){n.tl_a&&n.tl_a.kill(),n.tl_b&&n.tl_b.kill(),n.clear_elm_props(),n.init_container(),n.init_parallax()},this.on_start_and_stop_video_on_scroll_after_loaded=function(){n.scroll_pos=window.pageYOffset,n.window_height=window.innerHeight,n.user_focus=n.scroll_pos+n.window_height/2;var e=n.container_top+n.container_height/2,t=e-n.window_height/2,r=e+n.window_height/2;n.user_focus>t&&n.user_focus<r?n.toggle_video_play_pause(!0):n.toggle_video_play_pause(!1)},this.toggle_video_play_pause=function(e){n.is_video_playing!==e&&(n.is_video_playing=e,e?n.player.play():n.player.pause())},this.load_video=function(){(n.force_load||window.pageYOffset+window.innerHeight+300>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_video),n.init_video(),window.addEventListenerRR("scroll",n.on_start_and_stop_video_on_scroll_after_loaded))},this.apply_aspect_ratio=function(e){var t=e.videoWidth(),r=e.videoHeight()/t;n.image_container.querySelector(".rrmc-image-aspect").style.paddingBottom="".concat(100*r,"%"),n.init_container(),n.init_parallax(),n.reveal()},this.loadImages=function(){var e=n.container.querySelectorAll(".rrmc-image-aspect-img"),t=e[e.length-1];[].slice.call(e).forEach((function(r,i){r.classList.contains("video-js")&&e[i]!==t||(r.classList.contains("video-js")&&e[i]===t?n.load():(0,s.Kj)(r,(function(){e[i]===t&&n.load()})))}))},this.loadImages()}),[{key:"init_video",value:function(){var e=this;this.player=videojs(this.video),this.player.reloadSourceOnError({errorInterval:5}),0!=this.player.videoWidth()?this.apply_aspect_ratio(this.player):this.player.on("loadedmetadata",(function(){(0,o.A)((function(){return 0!=e.player.videoWidth()}),(function(){e.apply_aspect_ratio(e.player)}),e)}));var t=this.player.getChild("errorDisplay");t.off(this.player,"error",t.open),t.dispose(),this.player.play()}},{key:"clear_elm_props",value:function(){r.uo.set([this.content_a,this.content_b],{clearProps:"all"})}},{key:"load",value:function(){var e=this;this.init_container(),this.init_parallax(),this.parallax_on?(window.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize),this.video_on?(window.addEventListenerRR("scroll",this.load_video),this.load_video(),this.subscription_broadcast=a.A.sub_broadcast.subscribe({next:function(t){"load"===t.action&&(e.force_load=!0,e.load_video(),setTimeout((function(){e.subscription_broadcast.unsubscribe()})))}})):this.reveal()):(this.video_on&&this.init_video(),this.reveal())}},{key:"init_container",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset}},{key:"init_parallax",value:function(){!(0,i.S)()&&this.parallax_on&&(this.get_a_bearings(),this.get_b_bearings(),this.update_parallax(),this.reveal())}},{key:"reveal",value:function(){var e=this;(new r.Y_).to([this.content_a,this.content_b],1,{opacity:1}).add((function(){e.content_a.classList.remove("is-init"),e.content_b.classList.remove("is-init"),a.A.sub_loaded_component.next(e.container)}))}},{key:"get_bearings",value:function(e,t){var n=e.getBoundingClientRect().height,i=-(window.innerHeight+n)/(2*(t+1)),o=-i*t,a=o,s=-o,l=-i,c=1/(l-i);return{bearings:{travel_factor:t,offset_start:a,offset_end:s,distance_start:i,distance_end:l,slope:c,intercept:0-c*i,progress_fn:function(e){var t=this.slope*e+this.intercept;return t>1?t=1:t<0&&(t=0),t}},tl:new r.Y_({paused:!0}).fromTo(e,2,{y:"".concat(a,"px")},{y:"".concat(s,"px"),ease:r.WG.easeNone})}}},{key:"get_a_bearings",value:function(){var e=this.get_bearings(this.content_a,.2),t=e.bearings,n=e.tl;this.bearings_a=t,this.tl_a=n}},{key:"get_b_bearings",value:function(){var e=this.get_bearings(this.content_b,.4),t=e.bearings,n=e.tl;this.bearings_b=t,this.tl_b=n}},{key:"update_parallax_b",value:function(e){var t=this.bearings_b.progress_fn(e);this.tl_b.progress(t)}},{key:"update_parallax_a",value:function(e){var t=this.bearings_a.progress_fn(e);this.tl_a.progress(t)}},{key:"get_viewport_centre_offset",value:function(){var e=window.pageYOffset+window.innerHeight/2;return-(this.container_top+this.container_height/2)+e}},{key:"update_parallax",value:function(){if(!(0,i.S)()){var e=this.get_viewport_centre_offset();this.update_parallax_a(e),this.update_parallax_b(e)}}}])}(),f=function(){return h((function e(){c(this,e),this.containers=document.querySelectorAll(".js-two-col-parallax")}),[{key:"load",value:function(){[].slice.call(this.containers).forEach((function(e){return new p(e)}))}}])}();window.addEventListenerRR("load",(function(){(new f).load()}))},5594:(e,t,n)=>{"use strict";n.r(t);var r=n(6575),i=n(1500),o=n(2862);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}i.os.registerPlugin(r.u),i.os.registerPlugin(r.u),i.os.registerPlugin(r.u),i.os.registerPlugin(r.u),i.os.registerPlugin(r.u);var h=function(){return c((function e(t){var n=this;s(this,e),this.container=t,this.template=this.container.getAttribute("data-template"),this.parallax_on=this.container.hasAttribute("data-parallax-on"),this.block_layers=this.container.querySelectorAll(".rrmc-parallax-images-block-layer"),this.body_height=0,this.loadImages=function(){var e=n.container.querySelectorAll(".rrmc-parallax-images-block-layer"),t=e[e.length-1];[].slice.call(e).forEach((function(r,i){(0,o.Il)(r,(function(){e[i]===t&&n.load()}))}))},this.loadImages()}),[{key:"clear_elm_props",value:function(){}},{key:"load",value:function(){this.init_container(),this.parallax_on&&this.reveal()}},{key:"init_container",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset}},{key:"reveal",value:function(){switch(this.template){case"template-a":e=this.container,t=e.querySelector(".rrmc-parallax-images-block-layer-a"),n=t.querySelector("img"),r=e.querySelector(".rrmc-parallax-images-block-layer-b"),o=r.querySelector("img"),a=e.querySelector(".rrmc-parallax-images-block-layer-c"),s=[],t&&s.push(t),r&&s.push(r),a&&s.push(a),i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top top",ease:"power4.out",end:"+=100"}}),s.forEach((function(e){var t=e.querySelector("img"),n=e.classList.contains("rrmc-parallax-images-block-layer-a")?"a":e.classList.contains("rrmc-parallax-images-block-layer-b")?"b":"c";i.os.set(t,{rotateZ:.01}),i.os.to(t,{opacity:1,yPercent:"c"===n||"b"===n?0:-7,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:t,ease:"power4.out",start:{a:"top 85%",b:"top 50%",c:"top 85%"}[n],scrub:!1}})})),function(){i.os.set(s,{rotateZ:.01});var e=i.os.matchMedia();e.add("(max-width: 1023px)",(function(){r&&i.os.to(r,{yPercent:-35,rotateZ:.01,ease:"linear",scrollTrigger:{trigger:o,start:"top 100%",scrub:!0,invalidateOnRefresh:!0}}),a&&i.os.to(a,{yPercent:-14,rotateZ:.01,ease:"linear",scrollTrigger:{trigger:o,start:"top 100%",scrub:!0,invalidateOnRefresh:!0}})})),e.add("(min-width: 1024px)",(function(){t&&i.os.to(t,{yPercent:-40,ease:"linear",scrollTrigger:{trigger:n,start:"top 100%",scrub:!0,end:"+=8000",invalidateOnRefresh:!0}}),r&&i.os.to(r,{yPercent:15,ease:"power1.out",scrollTrigger:{trigger:n,start:"top 40%",scrub:!0,end:"+=6400",invalidateOnRefresh:!0}}),a&&i.os.to(a,{yPercent:-300,ease:"linear",scrollTrigger:{trigger:n,start:"top 90%",scrub:!0,end:"+=8000",invalidateOnRefresh:!0}})}))}();break;case"template-b":!function(e){var t,n=e.querySelector(".rrmc-parallax-images-block-layer-a"),r=e.querySelector(".rrmc-parallax-images-block-layer-b"),o=r.querySelector("img"),a=[n,r],s=r.querySelector("img");a.forEach((function(t){var n=t.querySelector("img"),r=i.os.matchMedia();r.add("(max-width: 1439px)",(function(){i.os.to(n,{opacity:1,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:e,ease:"power4.out",start:"top 85%",scrub:!1}})})),r.add("(min-width: 1440px)",(function(){i.os.to(n,{opacity:1,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:n,ease:"power4.out",start:"top 85%",scrub:!1}})}))})),t=i.os.matchMedia(),i.os.set([n,r],{rotateZ:.01}),t.add("(max-width: 1023px)",(function(){i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top 20%",ease:"power4.out",end:"+=900"}}),i.os.to(n,{yPercent:-160,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top bottom",scrub:!0,end:"+=2500"}}),i.os.to(r,{yPercent:20,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top bottom",scrub:!0,end:"+=2500"}}),i.os.to(o,{scale:1,ease:"easeOut",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 40%",scrub:!0,end:"+=800"}})})),t.add("(min-width: 1024px) and (max-width: 1439px)",(function(){i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top 20%",ease:"power4.out",end:"+=1800"}}),i.os.to(n,{yPercent:-42.5,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 10%",scrub:!0,end:"+=1800"}}),i.os.to(r,{yPercent:30,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top -15%",scrub:!0,end:"+=1200"}}),i.os.to(o,{scale:1,ease:"easeOut",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 60%",scrub:!0,end:"300"}})})),t.add("(min-width: 1440px)",(function(){i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top 20%",ease:"power4.out",end:"+=2450"}}),i.os.to(n,{yPercent:-42.5,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 40%",scrub:!0,end:"+=2450"}}),i.os.to(r,{yPercent:30,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top -15%",scrub:!0,end:"+=1750"}}),i.os.to(o,{scale:1,ease:"easeOut",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 60%",scrub:!0,end:"+=1750"}})}))}(this.container);break;case"template-c":!function(e){var t,n=e.querySelector(".rrmc-parallax-images-block-layer-a"),r=e.querySelector(".rrmc-parallax-images-block-layer-b"),o=e.querySelector(".rrmc-parallax-images-block-layer-c"),a=[n,r,o],s=n.querySelector("img"),l=r.querySelector("img");i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top top",ease:"power4.out",end:"+=100"}}),a.forEach((function(e){var t=e.querySelector("img"),n=e.classList.contains("rrmc-parallax-images-block-layer-a")?"a":e.classList.contains("rrmc-parallax-images-block-layer-b")?"b":"c",r={a:"top 80%",b:"top 85%",c:"top 65%"},o=i.os.matchMedia();i.os.set([t],{rotateZ:.01}),o.add("(max-width: 1023px)",(function(){i.os.to(t,{opacity:1,yPercent:"b"===n?0:-7,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:s,ease:"power4.out",start:r[n],scrub:!1}})})),o.add("(min-width: 1024px)",(function(){i.os.to(t,{opacity:1,yPercent:"b"===n?0:-7,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:t,ease:"power4.out",start:r[n],scrub:!1}})}))})),t=i.os.matchMedia(),i.os.set([n,r,o],{rotateZ:.01}),t.add("(max-width: 1023px)",(function(){i.os.to(n,{yPercent:15,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}}),i.os.to(r,{yPercent:0,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}}),i.os.to(o,{yPercent:-120,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=5000"}})})),t.add("(min-width: 1024px)",(function(){i.os.to(n,{yPercent:-90,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}}),i.os.to(r,{yPercent:15,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:l,start:"top 40%",scrub:!0,end:"+=8000"}}),i.os.to(o,{yPercent:-40,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 90%",scrub:!0,end:"+=9000"}})}))}(this.container);break;case"template-d":!function(e){var t,n=e.querySelector(".rrmc-parallax-images-block-layer-a"),r=e.querySelector(".rrmc-parallax-images-block-layer-b"),o=e.querySelector(".rrmc-parallax-images-block-layer-c"),a=[n,r,o],s=n.querySelector("img"),l=r.querySelector("img");i.os.timeline({scrollTrigger:{trigger:e,scrub:0,start:"top top",ease:"power4.out",end:"+=100"}}),a.forEach((function(e){var t=e.querySelector("img"),n=e.classList.contains("rrmc-parallax-images-block-layer-a")?"a":e.classList.contains("rrmc-parallax-images-block-layer-b")?"b":"c",r={a:"top 80%",b:"top 85%",c:"top 65%"},o=i.os.matchMedia();i.os.set([t],{rotateZ:.01}),o.add("(max-width: 1023px)",(function(){i.os.to(t,{opacity:1,yPercent:"b"===n?0:-7,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:s,ease:"power4.out",start:r[n],scrub:!1}})})),o.add("(min-width: 1024px)",(function(){i.os.to(t,{opacity:1,yPercent:"b"===n?0:-7,duration:1,scrollTrigger:{toggleActions:"play none none none",trigger:t,ease:"power4.out",start:r[n],scrub:!1}})}))})),t=i.os.matchMedia(),i.os.set([n,r,o],{rotateZ:.01}),t.add("(max-width: 1023px)",(function(){i.os.to(n,{yPercent:15,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=5000"}}),i.os.to(r,{yPercent:0,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}}),i.os.to(o,{yPercent:-120,ease:"linear",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}})})),t.add("(min-width: 1024px)",(function(){i.os.to(n,{yPercent:-40,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 90%",scrub:!0,end:"+=9000"}}),i.os.to(r,{yPercent:15,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:l,start:"top 40%",scrub:!0,end:"+=8000"}}),i.os.to(o,{yPercent:-90,ease:"power1.out",scrollTrigger:{invalidateOnRefresh:!0,trigger:s,start:"top 100%",scrub:!0,end:"+=8000"}})}))}(this.container)}var e,t,n,r,o,a,s}}])}(),d=function(){return c((function e(){s(this,e),this.containers=document.querySelectorAll(".js-parallax-images-block")}),[{key:"load",value:function(){[].slice.call(this.containers).forEach((function(e){return new h(e)}))}}])}();window.addEventListenerRR("load",(function(){(new d).load()}))},6963:(e,t,n)=>{"use strict";n.r(t);var r=n(8607);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=a((function e(t,n,r){l(this,e),this.x=t,this.y=n,this.img=r})),u=a((function e(t,n){l(this,e),this.w=this.width=t,this.h=this.height=n})),h=function(){return a((function e(t){l(this,e),this.enabled=!1,this.elements=[],this.scrollOffsetAmount=200,this.listenersEnabled=!1,this.container=t,this.parallaxWrap=t.querySelector(".parallax-wrap"),this.isDesktop=window.innerWidth>768,this.itemResolution=this.isDesktop?new u(1920,1080):new u(1080,1920),this.initialiseItemData(),this.addElements()}),[{key:"on_resize",value:function(){this.setHeight(),this.reInitialiseElements()}},{key:"load",value:function(){this.setHeight(),this.configureBackgroundMotion(),this.addPageListeners(),this.enabled=this.isElementInViewport(this.parallaxWrap)}},{key:"setHeight",value:function(){console.log("ParallaxInteractive setHeight()"),this.pageH=window.innerHeight-200}},{key:"initialiseItemData",value:function(){var e=this,t=this.container.getAttribute("data-items-model");(t=JSON.parse(t)).map((function(t){var n=e.isDesktop?t.desktopImage:t.mobileImage,r=e.isDesktop?t.posXDesktop:t.posXMobile,i=e.isDesktop?t.posYDesktop:t.posYMobile;e.elements.push(new c(r,i,n))})),console.log({itemData:t})}},{key:"addElements",value:function(){for(var e=this.elements.length,t=0;t<e;t++){var n=this.elements[t],r=document.createElement("span");r.id="item-".concat(t),r.className="hide-parallax-item js-effect",this.initialiseElement(r,t,e);var i=document.createElement("img");i.setAttribute("src",n.img),r.appendChild(i),this.parallaxWrap.appendChild(r)}this.applyFadeInFX()}},{key:"reInitialiseElements",value:function(){for(var e=this.elements.length,t=0;t<e;t++){var n="#item-".concat(t),r=this.parallaxWrap.querySelector(n);this.initialiseElement(r,t)}}},{key:"initialiseElement",value:function(e,t){var n=t%this.elements.length,r=this.elements[n],i=new u(this.parallaxWrap.offsetWidth,this.parallaxWrap.offsetHeight),o=i.w/this.itemResolution.w*r.x-i.w/2,a=i.h/this.itemResolution.h*r.y-i.h/2,s=this.itemResolution.w/2,l=Math.abs(r.x-s),c=Math.abs(8/s*(l-200)),h=.5+1/s*l;e.style.setProperty("--item-blur",c),e.style.setProperty("--item-x",o+"px"),e.style.setProperty("--item-y",a-this.scrollOffsetAmount/2+"px"),e.style.setProperty("--item-scale",h),e.style.setProperty("--item-z",2*h),e.style.setProperty("--item-loop-amount",.2+.8*(1-2*Math.random()))}},{key:"configureBackgroundMotion",value:function(){var e=this;this.motionRange=50,this.pingPongData={x:0,y:0},this.pingPongTween=r.uo.fromTo(this.pingPongData,30,{x:-this.motionRange,y:-this.motionRange},{x:this.motionRange,y:this.motionRange,ease:"power1.inOut",repeat:-1,yoyo:!0,onUpdate:function(){e.container.style.setProperty("--item-motion-x",e.pingPongData.x),e.container.style.setProperty("--item-motion-y",e.pingPongData.y)}})}},{key:"applyScrollFX",value:function(){var e=this.parallaxWrap.getBoundingClientRect();this.parallaxWrap.style.setProperty("--item-scroll-y",-this.scrollOffsetAmount/this.pageH*e.top)}},{key:"applyFadeInFX",value:function(){this.parallaxWrap.style.getPropertyValue("--activated")||(this.parallaxWrap.style.setProperty("--activated",!0),this.parallaxWrap.querySelectorAll("span").forEach((function(e){e.className="fade-in-parallax-item js-effect"})))}},{key:"updateParallaxWrap",value:function(e){var t=e.clientX,n=e.clientY;if(this.enabled){var i=new u(this.parallaxWrap.offsetWidth,this.parallaxWrap.offsetHeight),o=50/(i.w/2)*-(i.w/2-t),a=50/i.h*n;r.uo.to(this.parallaxWrap,{"--item-drag-x":o,"--item-drag-y":a,duration:3,ease:"power1.out",overwrite:"true"}),this.applyScrollFX()}}},{key:"onScroll",value:function(){this.isElementInViewport(this.parallaxWrap)?(this.applyScrollFX(),this.enabled=!0,this.pingPongTween.play()):(this.enabled=!1,this.pingPongTween.pause())}},{key:"addPageListeners",value:function(){var e=this;window.addEventListenerRR("resize",(function(){return e.on_resize()})),document.addEventListenerRR("mousemove",(function(t){return e.updateParallaxWrap(t)})),document.addEventListenerRR("scroll",(function(){return e.onScroll()}))}},{key:"removePageListeners",value:function(){var e=this;document.removeEventListenerRR("scroll",(function(){return e.onScroll()})),document.removeEventListenerRR("mousemove",(function(t){return e.updateParallaxWrap(t)}))}},{key:"isElementInViewport",value:function(e){var t=e.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;return t.bottom>=0&&t.top<=n}}])}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".rrmc-parallax-interactive");[].slice.call(e).forEach((function(e){new h(e).load()}))}))},3651:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var r=n(8607),i=n(2862),o=n(259);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var c=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_video_bg=this.container.querySelector(".js-rrmc-password-reveal-bg"),this.elm_input=this.container.querySelector(".rrmc-password-reveal-input"),this.elm_input_field=this.container.querySelector(".rrmc-password-reveal-input-field"),this.video_url_desktop=this.container.getAttribute("data-video-desktop-url"),this.video_url_mobile=this.container.getAttribute("data-video-mobile-url"),this.video_aspect_ratio_desktop=16/9,this.video_aspect_ratio_mobile=9/16,this.elm_aligner=this.container.querySelector(".js-rrmc-password-reveal-aligner"),this.elm_padlock=this.container.querySelector(".js-rrmc-password-reveal-padlock"),this.elm_title=this.container.querySelector(".js-rrmc-password-reveal-title"),this.elm_image_bg=this.container.querySelector(".js-rrmc-bg-image-wrapper"),this.elm_password_img_wrapper=this.container.querySelector(".js-rrmc-bg-image-wrapper"),this.elm_password_img=this.container.querySelector(".js-rrmc-password-reveal-bg-img"),this.str_pass=this.container.getAttribute("data-w"),this.on_resize=function(){n.adjust_height()},this.on_scroll=function(){},this.on_focus=function(){n.elm_input.classList.add("rrmc-password-reveal-input-focus")},this.on_blur=function(){n.elm_input_field.value.length>0||n.elm_input.classList.remove("rrmc-password-reveal-input-focus")},this.on_keydown=function(e){13===e.which&&n.process_input()},this.on_change=function(){n.input_pass=n.elm_input_field.value}},(t=[{key:"process_input",value:function(){this.input_pass===this.str_pass?(this.elm_input_field.removeEventListenerRR("input",this.on_change),this.unlocked=!0,this.shift_padlock(),this.activate_padlock(),o.Gx({event:"encryptedArea",eventCategory:"kryptosQuiz",eventAction:"submitCode",eventLabel:"successful"})):(this.pulse_padlock(),o.Gx({event:"encryptedArea",eventCategory:"kryptosQuiz",eventAction:"submitCode",eventLabel:"unsuccessful"}))}},{key:"shift_padlock",value:function(){var e=this.elm_aligner.getBoundingClientRect(),t=this.elm_padlock.getBoundingClientRect(),n=(e.height-2*(t.top-e.top)-t.height)/2;(new r.Y_).addLabel("start").to(this.elm_padlock,1,{y:"".concat(n,"px")},"start+=.4").to(this.elm_title,.4,{opacity:0},"start").to(this.elm_input,.4,{opacity:0},"start")}},{key:"activate_padlock",value:function(){var e=this.container.querySelector("#svg-padlock-arc-1"),t=this.container.querySelector("#svg-padlock-arc-2");(new r.Y_).to([e,t],2,{strokeDashoffset:"-".concat(552),ease:r.ys.easeInOut})}},{key:"pulse_padlock",value:function(){var e=this.container.querySelector("#svg-pulse-group");(new r.Y_).to(e,.7,{opacity:1,ease:r.ys.easeInOut}).to(e,.7,{opacity:0,ease:r.ys.easeInOut})}},{key:"hide_aligner_and_video",value:function(){var e=this;(new r.Y_).addLabel("start").to(this.elm_aligner,.4,{opacity:0},"start").to(this.elm_video_wrapper,1,{opacity:0},"start+=.2").to(this.elm_password_img_wrapper,1,{opacity:1},"start+=.2").add((function(){e.elm_video.pause()}))}},{key:"adjust_height",value:function(){var e=window.innerWidth>1024?this.video_aspect_ratio_desktop:this.video_aspect_ratio_mobile,t=this.container.getBoundingClientRect().width;this.container.style.height="".concat(t/e,"px")}},{key:"set_bg_video",value:function(){var e=this,t=window.innerWidth>1024?this.video_url_desktop:this.video_url_mobile;this.elm_video_wrapper=document.createElement("div"),this.elm_video_wrapper.classList.add("rrmc-video-wrapper"),this.elm_video_wrapper.innerHTML='<video class="rrmc-bg-video" src="'.concat(t,'" playsinline muted autoplay loop>'),this.elm_video_bg.appendChild(this.elm_video_wrapper),this.elm_video=this.elm_video_wrapper.querySelector(".rrmc-bg-video"),setInterval((function(){!e.unlocked&&e.elm_video.currentTime>=9.9&&(e.elm_video.currentTime=0),e.unlocked&&e.elm_video.currentTime>=23&&e.hide_aligner_and_video()}),1e3/60/2)}},{key:"load",value:function(){this.set_bg_video(),this.adjust_height(),(0,i.Il)(this.elm_password_img),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.on_scroll),this.elm_input_field.addEventListenerRR("focus",this.on_focus),this.elm_input_field.addEventListenerRR("blur",this.on_blur),this.elm_input_field.addEventListenerRR("input",this.on_change),this.elm_input_field.addEventListenerRR("keypress",this.on_keydown)}},{key:"destroy",value:function(){}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const u=c;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-password-reveal-container");[].slice.call(e).forEach((function(e){new c(e).load()}))}))},5097:(e,t,n)=>{"use strict";n.r(t);var r=n(4254),i=n(1500),o=n(8607),a=n(259);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pdf=t,this.dropDownSelector=this.pdf.querySelector(".rrmc-accessory-dropdown"),this.input_arr=[],this.elm_customise_button_container=this.pdf.querySelector(".rrmc-accessory-customise-button-container"),this.elm_customise_button=this.elm_customise_button_container.querySelector(".js-rrmc-button"),this.tl_hide_bespoke_ctas={},this.unorderedListParent=this.pdf.querySelector(".rrmc-accessory-dropdown--custom-select-list"),this.select=this.pdf.querySelector(".rrmc-accessory-dropdown--select"),this.dropdownContainer=this.pdf.querySelector(".rrmc-accessory-dropdown--container"),this.date=new Date,this.isOpen=!1,this.dropdown_cb_open=function(e){[].slice.call(n.input_arr).forEach((function(t){t.instance!==e&&"Dropdown"===t.instance.constructor.name&&t.instance.closeDropdown()}))}},t=[{key:"load",value:function(){this.createDropdownPDF()}},{key:"createDropdownPDF",value:function(){var e=this,t=new r.A(this.dropDownSelector);t.load(),t.addEventListener("open",(function(){e.isOpen=!0,e.dropdown_cb_open(t);var n="dropdown¦1¦instruction manual¦dropdown expand¦dropdown select ¦list¦¦¦ dropdown ".concat("open");e.unorderedListParent.setAttribute("data-tracking-linkid",n)})),t.addEventListener("close",(function(){e.isOpen=!1;var t="dropdown¦1¦instruction manual¦dropdown expand¦dropdown select ¦list¦¦¦ dropdown ".concat("closed");e.unorderedListParent.setAttribute("data-tracking-linkid",t)})),this.unorderedListParent.addEventListenerRR("click",(function(t){var n=e.isOpen?"closed":"open";e.reveal_cta(e.elm_customise_button_container);var r=e.select.value,i="dropdown¦1¦instruction manual¦dropdown expand¦dropdown select ¦list¦¦¦ dropdown ".concat(n);e.unorderedListParent.setAttribute("data-tracking-linkid",i),e.elm_customise_button.setAttribute("href",r);var o=t.target.innerText;a.fg(),a.Gx({event:"accessoriesVariant",eventCategory:"boutique pdf",eventAction:"variant select",eventLabel:"manual language - ".concat(o)})})),this.elm_customise_button.addEventListenerRR("click",(function(){var t=e.select.value;a.fg(),window.open(t,"_blank").focus()})),this.dropdownContainer.addEventListenerRR("click",(function(){a.fg(),a.Gx({event:"accessoriesVariant",eventCategory:"boutique pdf",eventAction:"variant expand",eventLabel:"manual language"})}))}},{key:"reveal_cta",value:function(e){this.cancel_hide_cta(e),i.os.timeline().addLabel("start").set(e,{visibility:"visible",height:"auto",clearProps:"padding"},"start").to(e,1,{opacity:1},"start+=0.5")}},{key:"cancel_hide_cta",value:function(e){var t=e.className;this.tl_hide_bespoke_ctas[t]&&this.tl_hide_bespoke_ctas[t].kill(),o.uo.set(e,{clearProps:"all"})}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".parent-dropdown");[].slice.call(e).forEach((function(e){new u(e).load()}))}))},573:(e,t,n)=>{"use strict";n.r(t);var r=n(1500),i=n(2725);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.podcastTrailer=t,this.playerEls=this.podcastTrailer.querySelectorAll(".rrmc-audio-trailer-content"),this.controlWrapper=this.podcastTrailer.querySelector(".js-rrmc-trailer-play-toggle"),this.playPause=this.podcastTrailer.querySelector(".rrmc-audio-play-button"),this.player=this.podcastTrailer.querySelector(".vjs-tech"),this.vjsPlayer=videojs.getPlayer(this.player),this.progress=0;var r=this.vjsPlayer.getChild("errorDisplay");r.off(this.vjsPlayer,"error",r.open),r.dispose(),this.toggleAudioPlay=function(){n.isPlaying?n.pausePlayer():n.playPlayer()},this.pausePlayer=function(){n.pause(),n.playPause.classList.remove("rrmc-audio-pause-button"),n.podcastTrailer.classList.remove("rrmc-audio-episode-playing"),n.playPause.setAttribute("aria-label","play"),n.isPlaying=!1},this.playPlayer=function(){n.play(),n.playPause.classList.add("rrmc-audio-pause-button"),n.podcastTrailer.classList.add("rrmc-audio-episode-playing"),n.playPause.setAttribute("aria-label","pause"),n.isPlaying=!0;var e=videojs.getPlayer(n.player);i.A.sub_audio_manager_bus.next({thisPlayer:e})}},(t=[{key:"play",value:function(){videojs(this.player).play();var e=document.querySelector(".rrmc-audio-episode-playing");if(e){var t=e.querySelector(".video-js"),n=e.querySelector(".rrmc-audio-play-button"),i=e.querySelector(".rrmc-audio-player-wrapper");n.classList.remove("rrmc-audio-pause-button"),videojs(t).pause(),r.os.timeline().add("start").to(i,.4,{height:0},"start")}}},{key:"pause",value:function(){videojs(this.player).pause()}},{key:"initListeners",value:function(){var e=this;this.controlWrapper.addEventListenerRR("click",this.toggleAudioPlay),i.A.sub_audio_manager_bus.subscribe({next:function(t){e.vjsPlayer.id()!==t.thisPlayer.id()&&e.pausePlayer()}}),this.vjsPlayer.on("ended",(function(){window.Evergage&&window.Evergage.sendEvent({action:"Podcast - Complete"}),e.progress=100})),this.vjsPlayer.on("play",(function(){window.Evergage&&window.Evergage.sendEvent({action:"Podcast - Start"}),e.progress=0})),this.vjsPlayer.on("timeupdate",(function(){var t=e.vjsPlayer.currentTime()/e.vjsPlayer.duration();t>=.8&&e.progress<80?(window.Evergage&&window.Evergage.sendEvent({action:"Podcast - 80%"}),e.progress=80):t>=.6&&e.progress<60?(window.Evergage&&window.Evergage.sendEvent({action:"Podcast - 60%"}),e.progress=60):t>=.4&&e.progress<40?(window.Evergage&&window.Evergage.sendEvent({action:"Podcast - 40%"}),e.progress=40):t>=.2&&e.progress<20&&(window.Evergage&&window.Evergage.sendEvent({action:"Podcast - 20%"}),e.progress=20)}))}},{key:"load",value:function(){this.initListeners()}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".podcast-trailer");[].slice.call(e).forEach((function(e){new l(e).load()}))}))},1572:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(1500),o=n(2725),a=n(5116),s=n(4755),l=n(9491),c=n(2692),u=n.n(c),h=n(6801),d=n(9018),p=n(997),f=n(915),m=n.n(f),v=n(4692),g=n.n(v),y=n(259),_=n(637),b=n(2862);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}var E=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elm_menu_cta=document.querySelector(".js-global-menu-cta"),this.elm_menu=document.querySelector(".js-menu"),this.elm_left=this.elm_menu.querySelector(".js-menu-pane-left"),this.elm_right=this.elm_menu.querySelector(".js-menu-pane-right-fade"),this.elm_right_content=null,this.elm_right_content_list=null,this.active_section=null,this.is_feature=!1,this.model_images_loaded=!1,this.elm_primary_container=this.elm_menu.querySelector(".rrmc-menu-links-container"),this.elm_scrollable_links=this.elm_menu.querySelector(".rrmc-menu-links"),this.elm_links=this.elm_primary_container.querySelectorAll(".js-menu-link"),this.elm_section_links=this.elm_primary_container.querySelectorAll(".js-menu-section-link[data-section]"),this.elm_direct_links=this.elm_primary_container.querySelectorAll(".js-menu-section-link:not([data-section])"),this.elm_shroud=this.elm_menu.querySelector(".js-menu-pane-shroud"),this.elm_secondary_container=null,this.elm_links_secondary=null,this.elm_close_secondary=null,this.elm_video_wrapper=this.elm_menu.querySelector(".js-menu-video-container"),this.elm_video_list=this.elm_video_wrapper.querySelectorAll(".rrmc-menu-video"),this.elm_image_list=document.querySelectorAll(".rrmc-menu-bg-right-picture-img"),this.elm_video=null,this.content_id="0",this.elm_dealer_link=this.elm_primary_container.querySelector(".js-menu-link-dealers"),this.active_link_container=null,this.active_content_container=null,this.is_animating=!1,this.hover_anim_in_progress=!1,this.menu_stack_open=!1,this.is_mobile=window.innerWidth<1024,this.primary_links_stagger_to=.9,this.contentContainer=document.querySelector(".rrmc-page-canvas"),this.setObjectFitFallback=function(){[].slice.call(t.elm_video_list).forEach((function(e){e.querySelector("video").classList.add("video-obj-fit")})),[].slice.call(t.elm_image_list).forEach((function(e){m()(e)}))},[].slice.call(this.elm_direct_links).forEach((function(e){e.addEventListenerRR("click",(function(e){var t;t=e.target.getAttribute("href")?e.target.getAttribute("href"):e.target.parentNode.getAttribute("href");var n=e.target.innerText.toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ");e.stopPropagation(),e.preventDefault(),y.Gx({event:"sideNavClick",eventCategory:"Side Nav",eventAction:"Side Nav Click",eventLabel:n,eventCallback:function(){"_blank"!==e.target.getAttribute("target")&&(window.location=t)}})}))})),this.hover_anim_finished=function(){t.hover_anim_in_progress=!1},this.on_icon_over=function(){t.hover_anim_in_progress||t.menu_stack_open||(t.hover_anim_in_progress=!0,t.lottie_menu_stack.playSegments([0,30],!0),t.lottie_menu_stack.addEventListener("complete",t.hover_anim_finished))},this.init_vjs=function(){window.innerWidth>=1024?([].slice.call(t.elm_video_list).forEach((function(e){var t=videojs(e),n=t.getChild("errorDisplay");n.off(t,"error",n.open),n.dispose()})),t.elm_video_list=t.elm_video_wrapper.querySelectorAll(".rrmc-menu-video")):t.is_mobile=!0},this.update_sticky_ie11=function(){var e=t.elm_secondary_container.clientWidth;t.elm_link_back_container.style.width="".concat(e,"px")},this.handle_play=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=t.elm_video_list[e],r=n.querySelector("video");t.elm_video=n,videojs(n).play(),i.os.timeline().add(t.reveal_layer_video(n),"start").add(t.reveal_layer_video(r),"start"),[].slice.call(t.elm_video_list).forEach((function(e){return e!==n?videojs(e).pause():""}))},this.revert_content=function(){var e=t.active_link_container.querySelector('[data-content="0"]'),n=t.active_link_container.querySelector(".is-selected"),i=t.active_content_container.querySelector('[data-content="0"]');t.active_content_container.querySelector(".is-selected").classList.remove("is-selected"),i.classList.add("is-selected"),n.classList.remove("is-selected"),e.classList.add("is-selected"),[].slice.call(t.active_content_container.querySelectorAll("[data-content]")).forEach((function(e){return r.uo.set(e,{clearProps:"opacity"})}))},this.transition_content=function(e,n,r,o){r.querySelector(".is-selected").classList.remove("is-selected"),n.classList.add("is-selected");var a=[].slice.call(o).filter((function(e){return e.classList.contains("is-selected")?e:""})).shift(),s=[].slice.call(o).filter((function(t){return t.getAttribute("data-content")===e?t:""})).shift(),l=a.querySelector(".js-rrmc-button");l.style.pointerEvents="none";var c=t.elm_video,u=t.elm_video_list[e].querySelector("video");i.os.timeline().call((function(){t.handle_play(e),t.is_animating=!0})).add(t.reveal_layer_video(u),"start").add(t.reveal_layer(s),"start").add(t.hide_layer(a),"0.25").add(t.hide_layer(c),"0.5").call((function(){a.classList.remove("is-selected"),s.classList.add("is-selected"),t.is_animating=!1,l.style="pointer-events: all"}))},this.secondary_content_handler=function(e,n,r){var i=e.getAttribute("data-content");t.content_id===i||t.is_animating||(t.content_id=i,t.transition_content(i,e,n,r))},this.stop_all_video=function(){return[].slice.call(t.elm_video_list).forEach((function(e){videojs(e.id).pause(),i.os.timeline().add(t.hide_layer(e),"start").call((function(){r.uo.set(e,{clearProps:"opacity, z-index"})}))}))},this.open_secondary=function(e){y.fg(),[].slice.call(t.elm_section_links).forEach((function(e){return e.removeEventListenerRR("click",t.open_secondary)}));var n=e.currentTarget,o=n.getAttribute("data-section");t.active_section=o,t.is_feature=n.getAttribute("data-featured-section"),t.elm_secondary_container=t.elm_menu.querySelector('.rrmc-menu-links-container-secondary[data-section="'.concat(o,'"]')),t.elm_secondary_container_scrollable=t.elm_secondary_container.querySelector(".rrmc-scroll-links"),t.elm_secondary_container_scrollable||(t.elm_secondary_container_scrollable=t.elm_secondary_container.querySelector(".rrmc-scrollhide")),t.elm_right_content=t.elm_menu.querySelector('.js-menu-bg-right-content-wrapper[data-section-bg="'.concat(o,'"]')),t.elm_links_secondary=t.elm_secondary_container.querySelectorAll(".js-menu-link"),t.content_links_secondary=t.elm_secondary_container.querySelectorAll("[data-content]"),t.elm_close_secondary=t.elm_secondary_container.querySelector(".js-menu-close");var l=i.os.timeline().delay(.4);t.elm_links_back=t.elm_close_secondary.querySelector(".js-rrmc-menu-link-back-icon"),t.elm_view_all=t.elm_secondary_container.querySelector(".js-view-all-icon"),t.elm_link_back_container=t.elm_secondary_container.querySelector(".js-menu-link.rrmc-menu-link-anim.rrmc-menu-link-back"),t.flag_secondary_open=!0,t.adjust_back_offset(),t.elm_secondary_container.addEventListenerRR("click",t.secondary_click_handler),r.uo.set(t.elm_shroud,{"pointer-events":"auto"}),(0,s.disableBodyScroll)(t.elm_secondary_container_scrollable),l.add((function(){t.elm_menu_cta.removeEventListenerRR("click",t.hide_menu)})).addLabel("start").add(t.fade_primary_container_out_right(),"start").add(t.display_secondary_container(t.elm_secondary_container),"start").add((function(){(0,d.en)()&&(t.update_sticky_ie11(),window.addEventListenerRR("resize",t.update_sticky_ie11))}),"start+=.1").add((function(){(0,a.h)()&&(t.elm_secondary_container_scrollable.scrollTop=0)})).add(t.reveal_secondary_links(t.elm_links_secondary),"start").add(t.reveal_back_icon(t.elm_links_back),"start+=.4").add((function(){t.elm_close_secondary.addEventListenerRR("click",t.close_secondary),t.elm_menu_cta.addEventListenerRR("click",t.close_two_stages)})),t.is_feature&&(t.elm_right_content_list=t.elm_right_content.querySelectorAll(".js-menu-bg-right-content"),l.add(t.reveal_video_pane(),"start").add(t.reveal_forward_icon(t.elm_view_all),"start+=.4").call((function(){!t.is_mobile&&t.handle_play()})),t.is_mobile||l.add(t.reveal_right_pane_content(),"start+=.1").add(t.reveal_right_pane_content_layer(),"start+=.1"),l.add(t.display_right_pane_content(t.elm_right_content),"start+=.1").add((function(){t.is_mobile||[].slice.call(t.content_links_secondary).forEach((function(e){e.addEventListenerRR("click",t.clickListener(e))}))}))),y.Gx({event:"sideNavClick",eventCategory:"Side Nav",eventAction:"Side Nav Click",eventLabel:t.active_section.toLowerCase()})},this.clickListener=function(e){return function(){return t.secondary_content_handler(e,t.elm_secondary_container,t.elm_right_content_list)}},this.secondary_click_handler=function(e){var t=e.target.parentNode,n=e.target.innerText.toLowerCase(),r={event:"sideNavClick",eventCategory:"Side Nav",eventAction:"Side Nav Click",eventLabel:n};if(t.classList.contains("js-menu-close")&&(n+=" back"),"A"===t.tagName){var i=t.getAttribute("href");r.eventCallback=function(){window.location=i},r.eventTimeout=2e3}y.fg(),y.Gx(r)},this.close_secondary=function(){y.fg(),t.flag_secondary_open=!1,t.elm_video=t.elm_video_wrapper.querySelector(".vjs-tech"),t.elm_secondary_container.removeEventListenerRR("click",t.secondary_click_handler),(0,d.en)()&&window.removeEventListenerRR("resize",t.update_sticky_ie11),t.active_link_container=t.elm_menu.querySelector('.rrmc-menu-links-container-secondary[data-section="'.concat(t.active_section,'"]')),t.active_content_container=t.elm_menu.querySelector('.js-menu-bg-right-content-wrapper[data-section-bg="'.concat(t.active_section,'"]'));var e=i.os.timeline();e.addLabel("start").add((function(){t.elm_menu_cta.removeEventListenerRR("click",t.close_two_stages),r.uo.set(t.elm_shroud,{"pointer-events":"none"})})).add(t.reveal_primary_container(),"start").add(t.animate_in_primary_container(),"start+=0.3").add(t.hide_secondary_container(t.elm_secondary_container),"start").add(t.reset_back_icon(t.elm_links_back),"start").add((function(){t.clear_secondary_layers(t.elm_secondary_container,t.elm_links_secondary),t.elm_menu_cta.addEventListenerRR("click",t.hide_menu),[].slice.call(t.elm_section_links).forEach((function(e){return e.addEventListenerRR("click",t.open_secondary)}))})),t.is_feature&&e.add(t.hide_right_pane_content(),"start").add(t.hide_video_pane(),"start").add(t.reset_view_all(t.elm_view_all),"start").call((function(){t.stop_all_video(),t.revert_content()})).add((function(){[].slice.call(t.elm_section_links).forEach((function(e){return e.addEventListenerRR("click",t.open_secondary)}))}))},this.load_model_images=function(){var e=document.querySelectorAll(".rrmc-menu-bg-right-picture");[].slice.call(e).forEach((function(e){(0,b.Il)(e,(function(){}))})),t.model_images_loaded=!0},this.reveal_menu=function(){t.menu_cta_linkid_set_to_open(),y.fg(),t.model_images_loaded||t.load_model_images(),t.elm_menu.classList.add("is-enabled"),(0,s.disableBodyScroll)(t.elm_primary_container),g().scrollify.disable(),document.querySelector(".rrmc-homepage-carousel-section")&&document.body.classList.add("pause-hpc");var e=i.os.timeline();t.lottie_play_forward(),e.add((function(){t.elm_menu_cta.removeEventListenerRR("click",t.reveal_menu)})).add(t.reveal_primary_container(),"start").addLabel("start").add(t.reveal_left_pane(),"start").add(t.reveal_right_pane(),"start").add(t.reveal_primary_links(),"start+=.075").add((function(){[].slice.call(t.elm_section_links).forEach((function(e){return e.addEventListenerRR("click",t.open_secondary)})),t.elm_menu_cta.addEventListenerRR("click",t.hide_menu),t.elm_right.addEventListenerRR("click",t.hide_menu)})),y.Gx({event:"menuClick",eventCategory:"Side Nav",eventAction:"Side Nav Open"}),t.menu_cta_linkid_set_to_close()},this.hide_menu=function(){y.fg(),(0,s.clearAllBodyScrollLocks)(),g().scrollify.enable(),document.querySelector(".rrmc-homepage-carousel-section")&&document.body.classList.remove("pause-hpc"),i.os.timeline().addLabel("start").add((function(){t.elm_menu_cta.removeEventListenerRR("click",t.hide_menu),t.elm_right.removeEventListenerRR("click",t.hide_menu)})).add(t.hide_primary_links()).add(t.hide_video_pane(),"start+=.4").add(t.hide_left_pane(),"start+=.65").add(t.hide_right_pane(),"start+=.4").add(t.hide_primary_container()).add((function(){t.elm_menu.classList.remove("is-enabled"),[].slice.call(t.elm_section_links).forEach((function(e){return e.removeEventListenerRR("click",t.open_secondary)})),t.elm_menu_cta.addEventListenerRR("click",t.reveal_menu),t.lottie_play_backward()})),y.Gx({event:"sideNavClose",eventCategory:"Side Nav",eventAction:"Side Nav Close",eventLabel:"close"}),o.A.sub_mobile_menu.next(),t.menu_cta_linkid_set_to_open()},this.close_two_stages=function(){t.flag_secondary_open=!1,(0,s.clearAllBodyScrollLocks)(),g().scrollify.enable(),document.querySelector(".rrmc-homepage-carousel-section")&&document.body.classList.remove("pause-hpc");var e=window.innerWidth,n=t.elm_left.clientWidth,o="-".concat(e,"px"),a="-".concat(n,"px");t.active_link_container=t.elm_menu.querySelector('.rrmc-menu-links-container-secondary[data-section="'.concat(t.active_section,'"]')),t.active_content_container=t.elm_menu.querySelector('.js-menu-bg-right-content-wrapper[data-section-bg="'.concat(t.active_section,'"]'));var l=i.os.timeline();l.add((function(){t.elm_close_secondary.removeEventListenerRR("click",t.close_secondary),t.elm_menu_cta.removeEventListenerRR("click",t.close_two_stages),t.elm_right.removeEventListenerRR("click",t.hide_menu),(0,d.en)()&&window.removeEventListenerRR("resize",t.update_sticky_ie11)})).timeScale(1.2).addLabel("start"),t.is_feature&&l.set(t.elm_shroud,{overflow:"visible"}),l.add(t.hide_secondary_links(t.elm_links_secondary,{ease:r.FL.easeInOut,x:a},2.357,0),"start").add(t.hide_left_pane({ease:r.FL.easeInOut,x:a},2.0625),"start").add(t.hide_right_pane(),"start+=.1").add((function(){return t.lottie_play_backward()}),"start+=1.2").add((function(){t.elm_menu.classList.remove("is-enabled"),t.clear_primary_layers(),t.reset_back_icon(t.elm_links_back),t.clear_secondary_layers(t.elm_secondary_container,t.elm_links_secondary),[].slice.call(t.elm_section_links).forEach((function(e){return e.removeEventListenerRR("click",t.open_secondary)})),t.elm_menu_cta.addEventListenerRR("click",t.reveal_menu)})),t.is_feature&&l.add(t.hide_right_pane_content({ease:r.FL.easeInOut,x:o},1.35),"start").add(t.hide_video_pane(),"start+=.1").add(t.hide_right_pane(),"start+=.1").add((function(){return t.reset_view_all(t.elm_view_all)})).call((function(){t.stop_all_video(),t.hide_video_pane(),t.revert_content()})).set(t.elm_shroud,{clearProps:"all"}),t.menu_cta_linkid_set_to_open()}},t=[{key:"menu_cta_linkid_set_to_open",value:function(){var e=this.elm_menu_cta.getAttribute("data-tracking-linkid").replace("menu close","menu open").replace("close content","open content");this.elm_menu_cta.setAttribute("data-tracking-linkid",e)}},{key:"menu_cta_linkid_set_to_close",value:function(){var e=this.elm_menu_cta.getAttribute("data-tracking-linkid").replace("menu open","menu close").replace("open content","close content");this.elm_menu_cta.setAttribute("data-tracking-linkid",e)}},{key:"load",value:function(){var e=this;this.elm_menu_cta.addEventListenerRR("mouseenter",this.on_icon_over),this.elm_menu_cta.addEventListenerRR("click",this.reveal_menu),this.init_lottie(),this.init_vjs(),("objectFit"in document.documentElement.style==0||/Edge/.test(navigator.userAgent))&&(this.setObjectFitFallback(),this.elm_left.classList.add("ie11-overflow-hidden")),window.addEventListenerRR("resize",(function(){e.is_mobile=window.innerWidth<1024})),(0,p.A)(this,"var_menu_top",o.A.sub_menu_top,this.adjust_back_offset),_.n.subscribe((function(t){var n=t.get_name();if(n){var r=t.get_href();e.elm_primary_container.querySelector(".js-menu-link-dealers").classList.remove("rrmc-menu-link-hidden");var i=e.elm_dealer_link.querySelector("a"),o=i.getAttribute("data-tracking-linkid");i.setAttribute("href",r),i.setAttribute("data-tracking-linkid",o.replace("%dealer_location%",(n||"").toLowerCase())),i.setAttribute("aria-hidden","false"),i.setAttribute("aria-label",n),i.addEventListenerRR("click",(function(){y.fg()})),e.elm_dealer_link.querySelector("span").innerText=n,e.primary_links_stagger_to=.7}else e.elm_primary_container.querySelector(".js-menu-link-dealers").classList.add("rrmc-menu-link-hidden")}))}},{key:"adjust_back_offset",value:function(){if(this.flag_secondary_open&&(0,a.h)()){var e=this.var_menu_top.value();this.elm_link_back_container.style.paddingTop="".concat(e,"px")}}},{key:"init_lottie",value:function(){var e=this;this.menu_stack=document.querySelector(".rrmc-primary-nav--menu-wrapper .js-rrmc-primary-nav-icon"),this.menu_copy_open=document.querySelector(".rrmc-primary-nav--menu-wrapper .js-primary-nav-open"),this.menu_copy_close=document.querySelector(".rrmc-primary-nav--menu-wrapper .js-primary-nav-close");var t=h.Pl;this.gradient_type=this.menu_stack.getAttribute("data-style"),this.invert_lottie_color=function(){e.lottie_menu_stack.destroy(),r.uo.set(e.menu_stack,{opacity:0});var t=h.Pl;t.layers[0].shapes[0].it[4].c.k=[1,1,1,1],t.layers[1].shapes[0].it[1].c.k=[1,1,1,1],t.layers[2].shapes[0].it[1].c.k=[1,1,1,1],t.layers[3].shapes[0].it[4].c.k=[1,1,1,1],t.layers[4].shapes[0].it[1].c.k=[1,1,1,1],t.layers[5].shapes[0].it[1].c.k=[1,1,1,1],e.lottie_menu_stack=u().loadAnimation({container:e.menu_stack,renderer:"svg",loop:!1,autoplay:!1,animationData:t}),e.lottie_menu_stack.playSegments([50,60],!0),r.uo.to(e.menu_stack,.25,{opacity:1})},this.reset_lottie_color=function(){r.uo.set(e.menu_stack,{opacity:0}),e.lottie_menu_stack.destroy();var t=h.Pl;t.layers[0].shapes[0].it[4].c.k=[0,0,0,0],t.layers[1].shapes[0].it[1].c.k=[0,0,0,0],t.layers[2].shapes[0].it[1].c.k=[0,0,0,0],t.layers[3].shapes[0].it[4].c.k=[0,0,0,0],t.layers[4].shapes[0].it[1].c.k=[0,0,0,0],t.layers[5].shapes[0].it[1].c.k=[0,0,0,0],e.lottie_menu_stack=u().loadAnimation({container:e.menu_stack,renderer:"svg",loop:!1,autoplay:!1,animationData:t}),e.lottie_menu_stack.playSegments([40,30],!0),r.uo.to(e.menu_stack,.25,{opacity:1})},"gradient-black"!==this.gradient_type&&"solid-black"!==this.gradient_type||(t.layers[0].shapes[0].it[4].c.k=[1,1,1,1],t.layers[1].shapes[0].it[1].c.k=[1,1,1,1],t.layers[2].shapes[0].it[1].c.k=[1,1,1,1],t.layers[3].shapes[0].it[4].c.k=[1,1,1,1],t.layers[4].shapes[0].it[1].c.k=[1,1,1,1],t.layers[5].shapes[0].it[1].c.k=[1,1,1,1]),this.lottie_menu_stack=u().loadAnimation({container:this.menu_stack,renderer:"svg",loop:!1,autoplay:!1,animationData:t})}},{key:"lottie_play_forward",value:function(){var e=this;this.menu_stack_open=!0;var t="gradient-white"===this.gradient_type||"solid-white"===this.gradient_type?[30,50]:[30,60];this.lottie_menu_stack.playSegments(t,!0),i.os.timeline().fromTo(this.menu_copy_open,.25,{opacity:1},{opacity:0,ease:r.ys.easeInOut}).fromTo(this.menu_copy_close,.25,{opacity:0},{opacity:1,ease:r.ys.easeInOut},"-=.2"),"gradient-white"!==this.gradient_type&&"solid-white"!==this.gradient_type||this.lottie_menu_stack.addEventListener("complete",(function(){e.lottie_menu_stack.removeEventListener("complete"),e.invert_lottie_color()}))}},{key:"lottie_play_backward",value:function(){var e=this;this.menu_stack_open=!1;var t="gradient-white"===this.gradient_type||"solid-white"===this.gradient_type?[60,40]:[60,30];this.lottie_menu_stack.playSegments(t,!0),"gradient-white"!==this.gradient_type&&"solid-white"!==this.gradient_type||this.lottie_menu_stack.addEventListener("complete",(function(){e.lottie_menu_stack.removeEventListener("complete"),e.reset_lottie_color()})),i.os.timeline().fromTo(this.menu_copy_close,.25,{opacity:1},{opacity:0,ease:r.ys.easeInOut}).fromTo(this.menu_copy_open,.25,{opacity:0},{x:"0%",opacity:1,ease:r.ys.easeInOut},"-=.2")}},{key:"reveal_primary_container",value:function(){return r.uo.set(this.elm_primary_container,{overflow:"visible",display:"flex"})}},{key:"animate_in_primary_container",value:function(){return i.os.timeline().set(this.elm_primary_container,{x:"0%",opacity:1}).set(this.elm_links,{x:"20%",opacity:0}).staggerTo(this.elm_links,.9,{x:"0%",opacity:1,ease:r.FL.easeOut},-.1)}},{key:"hide_primary_container",value:function(){return r.uo.set(this.elm_primary_container,{overflow:"hidden",display:"none"})}},{key:"fade_primary_container_out_right",value:function(){var e=this;return r.uo.to(this.elm_primary_container,.5,{x:"20%",opacity:0,ease:r.FL.easeOut,onComplete:function(){r.uo.set(e.elm_primary_container,{display:"none"})}})}},{key:"reveal_left_pane",value:function(){return r.uo.to(this.elm_left,.8,{x:"0%",ease:r.FL.easeOut})}},{key:"reveal_video_pane",value:function(){return r.uo.to(this.elm_video_wrapper,1.2,{opacity:1,ease:r.WG.easeNone})}},{key:"reveal_layer",value:function(e){return r.uo.to(e,1,{opacity:1,ease:r.WG.easeNone})}},{key:"reveal_layer_video",value:function(e){return r.uo.to(e,1,{opacity:1,ease:r.WG.easeNone})}},{key:"reveal_right_pane",value:function(){return r.uo.to(this.elm_right,.4,{opacity:.8,ease:r.WG.easeNone})}},{key:"display_right_pane_content",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.elm_right_content;return r.uo.set(e,{opacity:1,zIndex:1})}},{key:"reveal_right_pane_content",value:function(){return r.uo.to(this.elm_right_content,1.1,{x:"0%",ease:r.FL.easeOut})}},{key:"hide_right_pane_content",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={x:"-100%",ease:r.FL.easeOut,onComplete:function(){return r.uo.set(e.elm_right_content,{opacity:0})}};return(0,l.assign)(i,t),r.uo.to(this.elm_right_content,1.1*n,i)}},{key:"reveal_right_pane_content_layer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.elm_right_content_list[0];return r.uo.to(e,1.1,{opacity:"1",ease:r.FL.easeOut})}},{key:"reveal_primary_links",value:function(){return i.K3.staggerTo(this.elm_links,this.primary_links_stagger_to,{x:"0%",opacity:1,ease:r.FL.easeOut},-.1)}},{key:"reveal_secondary_links",value:function(e){if((0,a.h)()){this.elm_secondary_container_scrollable.scrollTop=0;var t=i.os.timeline();return t.set(e,{x:0,xPercent:-50}),t.to(e,{xPercent:0,opacity:1,ease:r.FL.easeInOut,stagger:-.1,duration:2.2}),t}var n=i.os.timeline();return n.set(e,{x:0,xPercent:-50}),n.to(e,{xPercent:0,opacity:1,ease:r.FL.easeInOut,duration:1.2,stagger:-.1}),n}},{key:"hide_secondary_links",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a={x:"-50%",opacity:0,ease:r.FL.easeOut};return(0,l.assign)(a,t),i.K3.staggerTo(e,.7*n,a,.04*o)}},{key:"hide_primary_links",value:function(){return i.K3.staggerTo(this.elm_links,this.primary_links_stagger_to,{x:"-100%",opacity:0,ease:r.FL.easeIn},.1)}},{key:"hide_left_pane",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i={x:"-100%",ease:r.FL.easeIn,onComplete:function(){r.uo.set(e.elm_left,{clearProps:"all"})}};return(0,l.assign)(i,t),r.uo.to(this.elm_left,.8*n,i)}},{key:"hide_video_pane",value:function(){var e=this;return r.uo.to(this.elm_video_wrapper,.2,{opacity:0,ease:r.WG.easeNone,onComplete:function(){r.uo.set(e.elm_video_wrapper,{clearProps:"all"}),[].slice.call(e.elm_video_list).forEach((function(e){var t=e.querySelectorAll("video");r.uo.set(t,{clearProps:"opacity, z-index"})}))}})}},{key:"hide_layer",value:function(e){return r.uo.to(e,1,{opacity:0,ease:r.WG.easeNone})}},{key:"hide_right_pane",value:function(){var e=this;return r.uo.to(this.elm_right,.2,{opacity:0,ease:r.WG.easeNone,onComplete:function(){r.uo.set(e.elm_right,{clearProps:"all"})}})}},{key:"display_secondary_container",value:function(e){return r.uo.set(e,{display:"flex",opacity:1})}},{key:"hide_secondary_container",value:function(e){return r.uo.to(e,1,{x:"-20%",opacity:0,ease:r.FL.easeOut,onComplete:function(){r.uo.set(e,{display:"none"})}})}},{key:"clear_secondary_layers",value:function(e,t){r.uo.set(e,{clearProps:"all"}),r.uo.set(t,{clearProps:"all"})}},{key:"clear_primary_layers",value:function(){r.uo.set(this.elm_primary_container,{clearProps:"all"}),r.uo.set(this.elm_links,{clearProps:"all"})}},{key:"reveal_back_icon",value:function(e){return r.uo.to(e,1,{opacity:1,x:"-32px",ease:r.FL.easeInOut})}},{key:"reveal_forward_icon",value:function(e){return r.uo.to(e,1,{opacity:1,x:"32px",ease:r.FL.easeInOut})}},{key:"reset_back_icon",value:function(e){return r.uo.set(e,{clearProps:"all"})}},{key:"reset_view_all",value:function(e){return r.uo.set(e,{clearProps:"all"})}}],t&&x(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){document.querySelector(".js-menu")&&(new E).load()}));var k=n(7455);function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==T(t)?t:t+""}var M=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.menuCtaWrapper=document.querySelector(".rrmc-primary-nav--menu-wrapper"),this.compWrapper=document.querySelector(".primary-navigation"),this.primaryNav=document.querySelector(".js-rrmc-primary-nav"),this.primaryNavColor=this.primaryNav.className.split(" ").some((function(e){return/black/.test(e)}))?"dark":"light",this.proxyTween=r.uo.to({},1,{paused:!0}),this.isMobile=window.innerWidth<768,this.navBackground=document.querySelector(".nav-background-container"),this.windowHeight=window.innerHeight,this.secondaryNav=document.querySelector(".rrmc-secondary-nav--menu-wrapper"),this.hasSecondary=!!this.secondaryNav,this.scrollPos=window.pageYOffset,this.collapsedNavHeight=this.hasSecondary?58:60,this.targetHeight=window.innerHeight-this.collapsedNavHeight,this.targetHeightReverse=this.hasSecondary?window.innerHeight-120:window.innerHeight-60,this.navArray=this.hasSecondary?[this.primaryNav,this.secondaryNav]:this.primaryNav,this.scrollDirection=!(window.pageYOffset>this.scrollPos),this.prevOffset=this.scrollPos,this.lastBreakpoint=0,this.navTint=this.primaryNav.getAttribute("data-menu-tint"),this.navBgShade="",this.secondaryKeyline=this.compWrapper.querySelector(".rrmc-secondary-keyline"),this.defaultBlur="true"===this.primaryNav.getAttribute("data-blur"),this.navEnquire=document.querySelector("#rrmc-nav-enquire-text"),this.url=window.location.href,this.isDealerPage="true"==this.primaryNav.getAttribute("data-is-dealer-page"),this.dealerNumber=window.rrmc_dealer_info.dealerNumber,this.dealerName=window.rrmc_dealer_info.dealerName,this.dealerEnName=window.rrmc_dealer_info.dealerEnName,this.dealerTradingName=window.rrmc_dealer_info.dealerTradingName,this.dealerWebsite=window.rrmc_dealer_info.dealerWebsite,this.setNavShade=function(){var e="light"===t.primaryNavColor?"rgba(255,255,255,0.3)":"rgba(21, 21, 21, 0.3)";return t.navTint?t.navTint:e},!0===this.defaultBlur&&(this.compWrapper.classList.add(this.secondaryNav?"secondary-default-blur":"primary-default-blur"),this.navBgShade=this.setNavShade(),r.uo.set(this.navBackground,{"background-color":"".concat(this.navBgShade)}),this.navArray=this.hasSecondary?[this.primaryNav,this.navBackground,this.secondaryNav]:[this.primaryNav,this.navBackground]),this.navTimeline=i.os.timeline({paused:!0,ease:r.WG.easeNone}),this.onScroll=function(){var e=window.pageYOffset;if(!(e<0))if(t.setCtaWrapperPos(),t.scrollDirection=!(e>t.scrollPos),t.scrollPos=e,t.primaryNav.style.cssText.indexOf("-60")>-1?t.primaryNav.classList.add("collapsed-menu"):t.primaryNav.classList.remove("collapsed-menu"),window.pageYOffset<t.prevOffset&&t.distLastBreakpoint<=0&&(t.lastBreakpoint=t.prevOffset),window.pageYOffset<t.targetHeightReverse){if(!1===t.defaultBlur&&(t.setNavBgScale(),r.uo.to(t.navBackground,.25,{opacity:0})),t.reverseProgress<e/800)return;t.navTimeline.progress(e/800)}else{if(window.pageYOffset>=t.prevOffset&&t.distLastBreakpoint<=0||!t.hasSecondary)t.navTimeline.progress(e/800),!1===t.defaultBlur&&(t.setNavBgScale(),r.uo.to(t.navBackground,.25,{backdropFilter:"blur(20px)",opacity:1,"background-color":t.navBgShade})),t.hasSecondary&&r.uo.to(t.secondaryKeyline,.5,{opacity:0});else if(t.hasSecondary){t.distLastBreakpoint=t.lastBreakpoint-window.pageYOffset;var n=t.distLastBreakpoint/58*-.17+1;t.reverseProgress=n,t.hasSecondary&&t.scrollDirection?r.uo.to(t.secondaryKeyline,.5,{opacity:.5}):t.hasSecondary&&!t.scrollDirection&&r.uo.to(t.secondaryKeyline,.5,{opacity:0}),t.navTimeline.progress(n),t.distLastBreakpoint>58&&(t.distLastBreakpoint=58,t.lastBreakpoint=window.pageYOffset+58),!1===t.defaultBlur&&t.setReverseMotion()}t.prevOffset=window.pageYOffset}},this.menuPosEvent=function(){o.A.sub_menu_top.next(t.menuCta.getBoundingClientRect().top)},this.navAnimation=function(){var e=t.isMobile?-50:-60,n=(t.isMobile,-48),i=t.isMobile?-19:-30,o=t.isMobile?-23:-26,a=t.isMobile?-40:-60,s=t.isMobile?-95:-120,l=t.rrmcMonogram.classList.contains("js-rrmc-mono-kryptos")?.73:.63;t.navTimeline.addLabel("start").to(t.rrmcLogo,.5,{opacity:0,ease:r.WG.easeNone},"start").to(t.rrmcMonogram,.5,{opacity:1,ease:r.WG.easeNone},"start").to(t.rrmcMonogram,.5,{scale:l,ease:r.WG.easeNone},"start+=0.25").to(t.keyline,.5,{opacity:0,y:24,ease:r.WG.easeNone},"start+=0.25").to([t.enquireCta,t.rrmcLogoWrapper],.5,{y:30,ease:r.WG.easeNone},"start+=0.25").to([t.menuCtaWrapper,t.menuCtaSpan],.5,{y:i,ease:r.WG.easeNone,onUpdate:t.menuPosEvent},"start+=0.25"),t.hasSecondary?(r.uo.set(t.keyline,{opacity:0}),t.navTimeline.to([t.enquireCta,t.rrmcLogoWrapper],.5,{y:25,ease:r.WG.easeNone},"start+=0.25").to([t.menuCtaWrapper,t.menuCtaSpan],.5,{y:o,ease:r.WG.easeNone,onUpdate:t.menuPosEvent},"start+=0.25").to(t.navArray,.5,{y:n,ease:r.WG.easeNone},"start+=0.25").to(t.navArray,.5,{y:s,ease:r.WG.easeNone,onUpdate:t.menuPosEvent},"start+=2.5").to([t.menuCtaWrapper,t.menuCtaSpan],.5,{y:-95,ease:r.WG.easeNone,onUpdate:t.menuPosEvent},"start+=2.5")):!0===t.defaultBlur?(r.uo.set(t.keyline,{opacity:0}),t.navTimeline.to({},.5,{},"start+=2.5").to(t.navArray,.5,{y:e,ease:r.WG.easeNone},"start+=0.25").to(t.navBackground,.5,{y:a,ease:r.WG.easeNone},"start+=0.25").to(t.keyline,.5,{opacity:0,y:0,ease:r.WG.easeNone},"start+=0.25")):t.navTimeline.to({},.5,{},"start+=2.5").to(t.navArray,.5,{y:e,ease:r.WG.easeNone},"start+=0.25").to(t.keyline,.5,{opacity:0,y:24,ease:r.WG.easeNone},"start+=0.25")}},t=[{key:"setup",value:function(){this.menuCtaSpan=this.primaryNav.querySelector(".js-global-menu-cta.button-placeholder"),this.menuCta=this.compWrapper.querySelector(".js-global-menu-cta"),this.enquireCta=this.primaryNav.querySelector(".js-global-enquire-button"),this.dealer_locator_label_elm=this.enquireCta.querySelector(".js-rrmc-nav-dealer-locator"),this.keyline=this.primaryNav.querySelector(".rrmc-keyline"),this.rrmcLogoWrapper=this.primaryNav.querySelector(".rrmc-logo"),this.rrmcLogoLink=this.primaryNav.querySelector(".rrmc-logo-link"),this.rrmcLogo=this.primaryNav.querySelector(".rrmc-logo-full"),this.rrmcMonogram=this.primaryNav.querySelector(".rrmc-logo-monogram"),this.navBgShade=this.setNavShade(),this.dealer_enquire_icon=this.enquireCta.querySelector(".js-rrmc-nav-dealer-locator-icon")}},{key:"initReverseMotion",value:function(){this.slopeReverse=(this.expandedScale-this.staticScale)/58,this.interceptReverse=this.staticScale}},{key:"setReverseMotion",value:function(){var e=this.slopeReverse*this.distLastBreakpoint+this.interceptReverse;if(e<this.expandedScale)return e="-".concat(100*this.expandedScale,"%"),void r.uo.set(this.navBackground,{y:e});e="-".concat(100*e,"%"),r.uo.set(this.navBackground,{y:e})}},{key:"initNavBgScale",value:function(){var e=this.isMobile?102:130;this.endScale=0/window.innerHeight,this.staticScale=(window.innerHeight-this.collapsedNavHeight)/window.innerHeight,this.expandedScale=(window.innerHeight-e)/window.innerHeight,this.slopeScale=(1-this.endScale)/window.innerHeight,this.intercept=0}},{key:"setNavBgScale",value:function(){var e=this.slopeScale*this.scrollPos+this.intercept;if(this.scrollPos>this.targetHeight)return e="-".concat(100*this.staticScale,"%"),void r.uo.set(this.navBackground,{y:e});e="-".concat(100*e,"%"),r.uo.set(this.navBackground,{y:e})}},{key:"getNavTextLabelMainSite",value:function(){return this.has_dealer_selected()?this.get_dealer_preference_name():this.choose_enquire_label_main_site()}},{key:"getNavTextLabel",value:function(){return this.isDealerPage?this.choose_enquire_label_dealers_site():this.getNavTextLabelMainSite()}},{key:"setNavText",value:function(){this.set_right_button_copy(this.getNavTextLabel())}},{key:"set_right_button_copy",value:function(e){this.navEnquire.querySelector(".rrmc-nav-dealer-locator-copy").textContent=e}},{key:"get_right_button_copy",value:function(){return this.navEnquire.querySelector(".rrmc-nav-dealer-locator-copy").textContent}},{key:"setCtaWrapperPos",value:function(){var e=this.menuCtaSpan.getBoundingClientRect();this.menuCtaWrapper.style.left="".concat(e.left,"px"),this.init_cta_wrapper||(r.uo.to([this.menuCtaWrapper,this.navArray],1,{opacity:1}),this.init_cta_wrapper=!0)}},{key:"triggerDealer",value:function(e){var t=this.get_right_button_copy();if(y.Gx({event:"headerClick",eventCategory:"header",eventAction:"Click",eventLabel:t}),this.is_main_site_page_and_dealer_selected())return this.enquireCta.querySelector("a").setAttribute("href",this.get_dealer_preference_href());e.preventDefault(),y.fg(),y.Gx({event:"fadOpen",eventCategory:"form",eventAction:"Find A Dealer",eventLabel:"Open"}),o.A.sub_overlay_manager_bus.next({action:k.xb,data:{overlayName:"g-dealer-locator"}})}},{key:"is_main_site_page_and_dealer_selected",value:function(){return this.has_dealer_selected()&&!this.isDealerPage}},{key:"load",value:function(){var e=this;this.setup(),o.A.sub_menu_top.next(this.menuCta.getBoundingClientRect().top),this.setCtaWrapperPos(),this.navAnimation(),this.setNavText(),!1===this.defaultBlur&&(this.initNavBgScale(),this.initReverseMotion()),this.enquireCta.querySelector("a").addEventListenerRR("click",(function(t){e.triggerDealer(t)})),window.addEventListenerRR("scroll",this.onScroll),this.onScroll(),window.addEventListenerRR("resize",(function(){e.isMobile=window.innerWidth<768,e.windowHeight=window.innerHeight,e.targetHeight=window.innerHeight-e.collapsedNavHeight,e.setCtaWrapperPos(),e.initNavBgScale(),e.initReverseMotion(),e.setNavText()})),this.rrmcLogoLink.addEventListenerRR("click",(function(e){e.preventDefault();var t=e.currentTarget.getAttribute("href");y.Gx({event:"logoClick",eventCategory:"Primary Nav",eventAction:"Logo Click",eventLabel:"rolls-royce logo",eventCallback:function(){window.location=t},eventTimeout:2e3})})),this.store_dealer_from_nav(),this.init_dealer_lottie(),_.n.subscribe((function(t){return e.update_label_and_action(t)}))}},{key:"init_dealer_lottie",value:function(){var e=this;this.on_search_hover_anim_finished=function(){e.search_hover_anim_in_progress=!1},this.on_search_icon_over=function(){e.search_hover_anim_in_progress||e.lottie_search&&(e.search_hover_anim_in_progress=!0,e.lottie_search.playSegments([0,30],!0),e.lottie_search.addEventListener("complete",e.on_search_hover_anim_finished))},this.gradient_type=this.enquireCta.getAttribute("data-style"),"gradient-black"!==this.gradient_type&&"solid-black"!==this.gradient_type||(h.Fo.layers[0].shapes[0].it[1].c.k=[1,1,1,1],h.Fo.layers[1].shapes[0].it[1].c.k=[1,1,1,1]),this.lottie_search=u().loadAnimation({container:this.dealer_enquire_icon,renderer:"svg",loop:!1,autoplay:!1,animationData:h.Fo}),this.enquireCta.querySelector("a").addEventListenerRR("mouseenter",this.on_search_icon_over)}},{key:"store_dealer_from_nav",value:function(){if(this.isDealerPage){var e=new _.z;e.set_name(this.dealerName),e.set_trading_name(this.dealerTradingName),e.set_english_name(this.dealerEnName),e.set_href(this.dealerWebsite),e.set_number(this.dealerNumber),_.n.select_dealer(e),_.n.publish_preference()}}},{key:"set_dealer_preference",value:function(e){this.dealer_preference=e}},{key:"is_dealer_preference_set",value:function(){return!!this.dealer_preference}},{key:"get_dealer_preference_name",value:function(){return this.dealer_preference.get_name()}},{key:"get_dealer_preference_href",value:function(){return this.dealer_preference.get_href()}},{key:"update_label_and_action",value:function(e){this.set_dealer_preference(e),this.apply_next_label_from_preference(),this.update_linkid_with_dealer_name()}},{key:"has_dealer_selected",value:function(){return!!this.is_dealer_preference_set()&&!!this.get_dealer_preference_name()}},{key:"replace_search_with_pin",value:function(){this.dealer_enquire_icon.classList.remove("rrmc-nav-dealer-locator-icon-search"),this.dealer_enquire_icon.classList.add("rrmc-nav-dealer-locator-icon-pin"),this.lottie_search.destroy(),this.lottie_search=null}},{key:"choose_enquire_label_main_site",value:function(){return(0,a.S)()?this.dealer_locator_label_elm.getAttribute("data-enquire-main-mobile"):this.dealer_locator_label_elm.getAttribute("data-enquire-main-desktop")}},{key:"choose_enquire_label_dealers_site",value:function(){return(0,a.S)()?this.dealer_locator_label_elm.getAttribute("data-enquire-dealers-mobile"):this.dealer_locator_label_elm.getAttribute("data-enquire-dealers-desktop")}},{key:"apply_next_label_from_preference",value:function(){this.setNavText(),this.is_main_site_page_and_dealer_selected()&&this.replace_search_with_pin()}},{key:"update_linkid_with_dealer_name",value:function(){var e=this.dealer_preference.get_name(),t=this.enquireCta.querySelector("a");t&&this.is_main_site_page_and_dealer_selected()&&t.setAttribute("data-tracking-linkid","icon-text¦3¦dealer|".concat((e||"").toLowerCase(),"¦internal link"))}}],t&&A(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){document.querySelector(".js-rrmc-primary-nav")&&(new M).load()}))},976:(e,t,n)=>{"use strict";n.r(t);var r=n(7482),i=n(8521);function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=e.label,n=e.href,r=e.carId,o=void 0===r?void 0:r,a=e.carCatgeory,s=void 0===a?void 0:a,l=e.linkid,c=void 0===l?void 0:l;return'<div class="rrmc-provenance--view-details"\n        href="'.concat(n,'">\n      <a\n        ').concat(void 0!==c?"data-tracking-linkid='".concat(c,"'"):"",'\n        data-lazy-load-class="cta-lazy-load" style="color: #281432;"\n        aria-label="').concat(t,'"\n        href="').concat(n,'"\n        target="_blank"\n        ').concat(void 0!==o?"data-tracking-id='".concat(o,"'"):"","\n        ").concat(void 0!==s?"data-car-category='".concat(s,"'"):"",'\n        class="rrmc-cta-component rrmc-button--secondary dealer-provenance-cta js-provenance-cta">\n          <span class="rrmc-button-background js-rrmc-button-background" data-color="#6d30a7"></span>\n          <span class="rrmc-button-text js-rrmc-button-text">').concat((0,i.K)(t),'</span>\n          <span class="rrmc-button-arrow js-rrmc-button-arrow" style="color: #6d30a7;"></span>\n        </a>\n      </div>\n      ')}var l=n(915),c=n.n(l),u=n(259);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(){d=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=p(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==h(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(h(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function p(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}function y(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){t.markup="<div>";var n=[];[].slice.call([{car:/Phantom/i,found:!1},{car:/Ghost/i,found:!1},{car:/Cullinan/i,found:!1},{car:/Wraith/i,found:!1},{car:/Dawn/i,found:!1}]).forEach((function(e){var r,i=y(t.data.vehicles);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.modelGroup.match(e.car))return e.found=!0,void n.push(o)}}catch(e){i.e(e)}finally{i.f()}}));var r,a,l,c=function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e=[].concat(o(e),o(t))})),e.reduce((function(e,t){return e.includes(t)?e:[].concat(o(e),[t])}),[])}(n,t.data.vehicles),u=c.slice(0,3),h=y(u.entries());try{for(h.s();!(r=h.n()).done;){var d=(a=r.value,l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(a,l)||_(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=d[0],f=d[1];window.renderedCars.push(f),t.markup+="".concat(t.generate_entry(p,f,e))}}catch(e){h.e(e)}finally{h.f()}return"provenance"===e&&(t.markup+='<div class="rrmc-provenance--view-all-wrapper">'.concat(s({label:(0,i.K)("View All"),href:t.data.dealerInventoryUrl,linkid:"button¦".concat(u.length+1,"¦view all¦outbound link")}),"</div>")),t.markup+="</div>",t.markup}var x,S=function(){return v((function e(t){f(this,e),this.data=t,this.impressions=[],w("provenance",this)}),[{key:"generate_entry",value:function(e,t,n){var r=t.vehicleDisplayUrl.substring(0,t.vehicleDisplayUrl.length-1).split("/").pop();return'\n    <div class="rrmc-component-grid-container rrmc-provenance-new-entry-container">\n      <div class="rrmc-provenance-new-entry-left-section">\n       <div class="rrmc-provenance-details-aligner">\n          <div class="rrmc-provenance-specs-container">\n            <div class="rrmc-provenance-specs-header">\n              <h3 class="rrmc-provenance-specs-header-title">'.concat(t.modelGroup,'</h3>\n              <div class="rrmc-provenance-specs-header-year">').concat(t.registrationYear,"\n              ").concat(t.modelVariant.indexOf("black badge")>-1?'<span class="rrmc-provenance-specs-header-year-bb">\n                  BLACK BADGE\n                  </span>':"",'\n              </div>\n            </div>\n            <div class="rrmc-provenance-divider"></div>\n            <div class="rrmc-provenance-specs-features">\n              <div class="rrmc-provenance-specs-table">\n                ').concat(void 0!==t.exterior&&null!==t.exterior?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Exterior"),'</div>\n                  <div class="cell-text">').concat(t.exterior,"</div>\n                </div>\n                "):"","\n                ").concat(void 0!==t.interior&&null!==t.interior?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Interior"),'</div>\n                  <div class="cell-text">').concat(t.interior,"</div>\n                </div>\n                "):"","\n                ").concat(void 0!==t.veneer&&null!==t.veneer?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Veneer"),'</div>\n                  <div class="cell-text">').concat(t.veneer,"</div>\n                </div>\n                "):"","\n              \n                ").concat(void 0!==t.bespokeFeatures[0]&&null!==t.bespokeFeatures[0]?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Features"),'</div>\n                  <div class="cell-text">\n                    <ul>\n                      ').concat(void 0!==t.bespokeFeatures[0]?"<li>".concat(t.bespokeFeatures[0],"</li>"):"","\n                      ").concat(void 0!==t.bespokeFeatures[1]?"<li>".concat(t.bespokeFeatures[1],"</li>"):"","\n                      ").concat(void 0!==t.bespokeFeatures[2]?"<li>".concat(t.bespokeFeatures[2],"</li>"):"","\n                    </ul>\n                  </div>\n                </div>"):"","\n                \n              </div>\n              ").concat(s({label:(0,i.K)("View Details"),href:t.vehicleDisplayUrl,carId:r,carCatgeory:n,linkid:"button¦".concat(e+1,"¦").concat((t.modelGroup||"").toLowerCase()," ").concat((t.registrationYear||"").toLowerCase(),"¦outbound link")}),'\n            </div>\n          </div>\n       </div>\n      </div>\n      <div class="rrmc-provenance-new-entry-right-section">\n        <img class="rrmc-provenance-entry-image" src="').concat(t.image,'" alt="').concat(t.description,'">\n      </div>\n      <div class="rrmc-provenance-card-divider"></div>\n    </div>')}},{key:"generate",value:function(){return this.markup}}])}(),E=function(){return v((function e(t){f(this,e),this.data=t,this.markup=w("new",this)}),[{key:"generate_entry",value:function(e,t,n){var r=t.vehicleDisplayUrl.substring(0,t.vehicleDisplayUrl.length-1).split("/").pop();return'\n    <div class="rrmc-component-grid-container rrmc-provenance-new-entry-container">\n      <div class="rrmc-provenance-new-entry-left-section">\n       <div class="rrmc-provenance-details-aligner">\n          <div class="rrmc-provenance-specs-container">\n            <div class="rrmc-provenance-specs-header">\n              <h3 class="rrmc-provenance-specs-header-title">'.concat(t.modelGroup,'</h3>\n              <div class="rrmc-provenance-specs-header-year">').concat(t.registrationYear,"\n                ").concat(t.modelVariant.indexOf("black badge")>-1?'<span class="rrmc-provenance-specs-header-year-bb">BLACK BADGE</span>':"",'\n              </div>\n            </div>\n            <div class="rrmc-provenance-divider"></div>\n            <div class="rrmc-provenance-specs-features">\n              <div class="rrmc-provenance-specs-table">\n                ').concat(void 0!==t.exterior&&null!==t.exterior?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Exterior"),'</div>\n                  <div class="cell-text">').concat(t.exterior,"</div>\n                </div>\n                "):"","\n                ").concat(void 0!==t.interior&&null!==t.interior?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Interior"),'</div>\n                  <div class="cell-text">').concat(t.interior,"</div>\n                </div>\n                "):"","\n                ").concat(void 0!==t.veneer&&null!==t.veneer?'\n                <div class="rrmc-provenance-specs-row">\n                  <div class="cell-label">'.concat((0,i.K)("Veneer"),'</div>\n                  <div class="cell-text">').concat(t.veneer,"</div>\n                </div>\n                "):"","\n              \n                ").concat(void 0!==t.bespokeFeatures[0]&&null!==t.bespokeFeatures[0]?'\n                  <div class="rrmc-provenance-specs-row">\n                    <div class="cell-label">'.concat((0,i.K)("Features"),'</div>\n                    <div class="cell-text">\n                      <ul>\n                        ').concat(void 0!==t.bespokeFeatures[0]?"<li>".concat(t.bespokeFeatures[0],"</li>"):"","\n                        ").concat(void 0!==t.bespokeFeatures[1]?"<li>".concat(t.bespokeFeatures[1],"</li>"):"","\n                        ").concat(void 0!==t.bespokeFeatures[2]?"<li>".concat(t.bespokeFeatures[2],"</li>"):"","\n                      </ul>\n                    </div>\n                  </div>"):"","\n              </div>\n              ").concat(s({label:(0,i.K)("View Details"),href:t.vehicleDisplayUrl,carId:r,carCatgeory:n,linkid:"button¦".concat(e+1,"¦").concat((t.modelGroup||"").toLowerCase()," ").concat((t.registrationYear||"").toLowerCase(),"¦outbound link")}),'\n            </div>\n          </div>\n       </div>\n      </div>\n      <div class="rrmc-provenance-new-entry-right-section">\n        <img class="rrmc-provenance-entry-image" src="').concat(t.image,'" alt="').concat(t.description,'">\n      </div>\n    </div>\n      ')}},{key:"generate",value:function(){return this.markup}}])}(),k=function(){return v((function e(t){var n=this;f(this,e),this.container=t,window.renderedCars=window.renderedCars||[],window.provenanceCounter=window.provenanceCounter||0,window.provenanceMin=2,this.dealer_number=this.container.getAttribute("data-dealer-number"),this.locale=this.container.getAttribute("data-locale"),this.type=this.container.getAttribute("data-type"),this.api_endpoint=this.container.getAttribute("data-api-endpoint"),this.intro_container=this.container.querySelector(".rrmc-provenance-intro--container"),this.MarkupGenerator="new"===this.type?E:S,this.elm_models=this.container.querySelector(".js-rrmc-provenance-models"),this.store_response=function(e){n.car_data=e}}),[{key:"get_request_url",value:function(){var e=this,t="new"===this.type?"new":"retail",n=this.api_endpoint;return location.hostname.includes("localhost")&&(n="http://127.0.0.1:5000"),"".concat(n,"/api/vehicles/make/rolls-royce/dealer/").concat(this.dealer_number,"/vehiclestatus/").concat(t,"/language/").concat(function(){switch(e.locale){case"en_GB":case"zh_TW":case"zh_HK":case"ru_RU":case"tr_TR":case"az_AZ":case"uk_UA":case"pl_PL":case"cs_CZ":return"en_gb";case"en_US":return"en_us";case"de_DE":return"de_de";case"zh_CN":return"zh_cn";case"ja_JP":return"ja_jp";case"ko_KR":return"ko_kr"}}())}},{key:"send_request",value:function(){var e=this;return new Promise((function(t,n){$.ajax({type:"GET",url:e.get_request_url(),success:function(e){return t(e)},error:function(e){window.provenanceMin=1,n(e)}}).then(e.store_response)}))}},{key:"apply_html",value:function(e){this.elm_models.innerHTML=e;var t=this.elm_models.querySelectorAll(".rrmc-provenance-entry-container"),n=t[t.length-1];n&&n.classList.add("rrmc-provenance-entry--last")}},{key:"init_ctas",value:function(){var e,t=y([].slice.call(this.elm_models.querySelectorAll(".js-provenance-cta")));try{for(t.s();!(e=t.n()).done;){var n=e.value;new r.default(n).load()}}catch(e){t.e(e)}finally{t.f()}}},{key:"apply_analytics",value:function(){if(!(window.provenanceCounter<window.provenanceMin)){var e=[],t=document.querySelectorAll(".rrmc-provenance--view-details a");[].slice.call(t).forEach((function(t,n){if(t.hasAttribute("data-tracking-id")){t.setAttribute("data-index","".concat(n+1));var r=window.renderedCars[n],i=r.modelVariant.indexOf("black badge")>-1?"".concat(r.modelGroup," Black Badge"):r.modelGroup,o=void 0!==r.exterior&&null!==r.exterior?"".concat(r.exterior.replace(/ /g,"_")):"",a={id:t.getAttribute("data-tracking-id"),name:i.replace(/ /g,"_"),category:t.getAttribute("data-car-category"),list:"dealer: ".concat(window.rrmc_dealer_info.dealerName),variant:o,position:n+1};e.push(a)}})),u.Gx({event:"ee-productImpression",ecommerce:{impressions:e}})}}},{key:"update_html",value:function(){if(this.car_data.vehicles.length>0){var e=new this.MarkupGenerator(this.car_data);this.apply_html(e.generate()),this.init_ctas(),this.polyfill_car_images(),this.intro_container.classList.add("provenance-is-loaded")}else this.container.remove();window.provenanceCounter=window.provenanceCounter+1,this.apply_analytics()}},{key:"load",value:(e=d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send_request();case 2:this.update_html();case 3:case"end":return e.stop()}}),e,this)})),t=function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return t.apply(this,arguments)})},{key:"polyfill_car_images",value:function(){"objectFit"in document.documentElement.style==0&&c()(this.container.querySelectorAll(".rrmc-provenance-entry-image"))}}]);var e,t}();x=document.querySelectorAll(".js-rrmc-provenance"),document.addEventListenerRR("DOMContentLoaded",(function(){[].slice.call(x).forEach((function(e){new k(e).load()}))}))},7649:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>h});var r=n(8607),i=n(2725),o=n(4540),a=n(1203);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.elm_rich_text=this.container.querySelector(".rrmc-rich-text-wrapper"),this.elm_rich_text_subheading=this.container.querySelector(".rrmc-rich-text-subheading"),this.elm_rich_text_subheading&&(0,o.Xq)(this.elm_rich_text_subheading,a.o),this.elm_cta_detached=this.container.querySelector(".js-rrmc-rich-text-cta-container-detached"),this.on_scroll=function(){(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||n.is_edit_mode||window.pageYOffset+window.innerHeight>n.container_top)&&(document.removeEventListenerRR("scroll",n.on_scroll),setTimeout((function(){n.reveal()}),500))}},t=[{key:"reveal",value:function(){var e=(new r.Y_).addLabel("start");this.elm_rich_text&&e.fromTo(this.elm_rich_text,1.25,{opacity:0,y:"100px"},{opacity:1,y:"0px",ease:r.ys.easeOut},"start"),this.elm_cta_detached&&e.fromTo(this.elm_cta_detached,1.25,{opacity:0,y:"100px"},{opacity:1,y:"0px",ease:r.ys.easeOut},"start")}},{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_top=e.top+window.pageYOffset}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.get_container_top(),document.addEventListenerRR("scroll",this.on_scroll),this.event_subscription=i.A.sub_loaded_component.subscribe({next:function(){return e.get_container_top()}}),this.on_scroll(!!t.overlayName)}},{key:"destroy",value:function(){this.elm_rich_text&&r.uo.set(this.elm_rich_text,{clearProps:"all"}),this.elm_cta_detached&&r.uo.set(this.elm_cta_detached,{clearProps:"all"}),this.event_subscription.unsubscribe(),document.removeEventListenerRR("scroll",this.on_scroll)}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const h=u;document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-rich-text");[].slice.call(e).forEach((function(e){new u(e).load()}))}))},2462:(e,t,n)=>{"use strict";n.r(t);var r=n(915),i=n.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var c=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.images=[].slice.call(this.container.querySelectorAll(".rrmc-rr25-overlay-switch-img-tag"))},(t=[{key:"load",value:function(){if("objectFit"in document.documentElement.style==0){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(this.images);try{for(t.s();!(e=t.n()).done;){var n=e.value;i()(n)}}catch(e){t.e(e)}finally{t.f()}}}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-rr25-overlay-switch");[].slice.call(e).forEach((function(e){var t=new c(e);e.data={RR25OverlaySwitch:t},t.load()}))}))},3e3:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(2725);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.background_image=this.ctx.querySelector(".rrmc-rr25-island--background-img")}return t=e,r=[{key:"untilLoaded",value:function(t){return new Promise((function(n){var r=new e(t);if(r.is_complete())return n();r.set_onload((function(){return n()}))}))}}],(n=[{key:"is_complete",value:function(){return this.background_image.complete}},{key:"set_onload",value:function(e){var t=this;this.background_image.onload=function(){t.background_image.onload=function(){},e()}}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var d=function(){return e=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.id=this.element.getAttribute("data-id"),this.chapterNo=this.element.getAttribute("data-chapter-no"),this.type=this.element.getAttribute("data-type"),this.fade=this.element.getAttribute("data-fade"),this.on_enter=function(e){n.onEnter({id:r.id,chapterNo:r.chapterNo,x:e.clientX,y:e.clientY,type:r.type,fade:r.fade})},this.on_leave=function(e){n.onLeave({id:r.id,chapterNo:r.chapterNo,x:e.clientX,y:e.clientY,type:r.type,fade:r.fade})},this.on_move=function(e){n.onMove({id:r.id,chapterNo:r.chapterNo,x:e.clientX,y:e.clientY,type:r.type,fade:r.fade})},this.on_click=function(e){n.onClick({id:r.id,chapterNo:r.chapterNo,x:e.clientX,y:e.clientY,type:r.type,fade:r.fade})}},(t=[{key:"load",value:function(){this.element.addEventListenerRR("mousemove",this.on_move),this.element.addEventListenerRR("mouseenter",this.on_enter),this.element.addEventListenerRR("mouseleave",this.on_leave),this.element.addEventListenerRR("click",this.on_click)}},{key:"destroy",value:function(){this.element.removeEventListenerRR("mousemove",this.on_move),this.element.removeEventListenerRR("mouseenter",this.on_enter),this.element.removeEventListenerRR("click",this.on_click)}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function p(e,t){return{x:e,y:t}}function f(e){return{x:e.x,y:e.y}}function m(e,t){return{x:e.x+t.x,y:e.y+t.y}}function v(e,t){return{x:e.x-t.x,y:e.y-t.y}}function g(e){return function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}(e,{x:0,y:0})}function y(e,t){return{x:e.x*t,y:e.y*t}}function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var x=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.step=function(){t.next_step(),t.is_spring_idle()||requestAnimationFrame(t.step)}}return t=e,r=[{key:"make",value:function(t,n){var r=new e;return r.rate_of_change=p(0,0),r.spring_idle=!0,r.user_callback=t,r.current_value=f(n),r.target_value=f(n),r}}],(n=[{key:"next_step",value:function(){this.rate_of_change=m(this.rate_of_change,m(y(this.rate_of_change,-.24),y(v(this.target_value,this.current_value),.02))),this.current_value=m(this.current_value,this.rate_of_change),g(this.rate_of_change)<.001&&g(v(this.target_value,this.current_value))<.001&&(this.rate_of_change=p(0,0),this.current_value=f(this.target_value),this.stop_spring()),this.user_callback(this.rate_of_change,this.current_value)}},{key:"add_to_target_value_by_fn",value:function(e){this.target_value=e(this.target_value),this.is_spring_idle()&&this.start_spring()}},{key:"add_to_target_and_current_value_by_fn",value:function(e){this.target_value=e(this.target_value),this.current_value=e(this.current_value)}},{key:"set_target_value",value:function(e){this.target_value=e,this.is_spring_idle()&&this.start_spring()}},{key:"is_spring_idle",value:function(){return this.spring_idle}},{key:"start_spring",value:function(){this.spring_idle=!1,this.step()}},{key:"stop_spring",value:function(){this.spring_idle=!0}},{key:"get_target_value",value:function(){return this.target_value}},{key:"detach_callback",value:function(){this.user_callback=function(){}}}])&&b(t.prototype,n),r&&b(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return k(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var C=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.elm_preview=t,this.elm_preview_content=this.elm_preview.querySelector(".rrmc-rr25-island--preview-content"),this.elm_video_container=this.elm_preview.querySelector(".rrmc-rr25-island--preview-content-video-container"),this.elm_close=this.elm_preview.querySelector(".rrmc-rr25-island--preview-content-close"),this.elm_open=this.elm_preview.querySelector(".rrmc-rr25-island--preview-content-open"),this.get_vertical_offset_bottom=function(e){return-(e.height+20)},this.get_vertical_offset_top=function(){return 20},this.preview_position=x.make((function(e,t){n.elm_preview.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)")}),p(window.innerWidth/2,window.innerHeight/2)),this.REVEAL_DURATION=.2,this.REVEAL_DELAY=.3,this.on_close_mobile_click=function(){n.hide_popup()},this.on_open_mobile_click=function(){n.on_mobile_play_callback(n.current_id,n.current_chapter_no)},this.elm_close.addEventListenerRR("click",this.on_close_mobile_click),this.elm_open.addEventListenerRR("click",this.on_open_mobile_click)},t=[{key:"is_type_top",value:function(e){return"top"===e}},{key:"show",value:function(e){var t=e.id,n=e.type,i=e.chapter_no;this.current_id=t,this.current_chapter_no=i,r.uo.killTweensOf(this.elm_preview_content),r.uo.to(this.elm_preview_content,this.REVEAL_DURATION,{opacity:1}),this.elm_video_container.classList.remove("is-top"),this.is_type_top(n)&&this.elm_video_container.classList.add("is-top");var o,a=[].slice.call(this.elm_preview_content.querySelectorAll(".rrmc-rr25-island--preview-content-video")),s=[].slice.call(this.elm_preview_content.querySelectorAll(".rrmc-rr25-island--preview-content-label")),l=E(a);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.getAttribute("data-id")===t?r.uo.to(c,this.REVEAL_DURATION,{opacity:1}):r.uo.to(c,this.REVEAL_DURATION,{opacity:0})}}catch(e){l.e(e)}finally{l.f()}var u,h=E(s);try{for(h.s();!(u=h.n()).done;){var d=u.value;d.getAttribute("data-id")===t?r.uo.to(d,this.REVEAL_DURATION,{opacity:1}):r.uo.to(d,this.REVEAL_DURATION,{opacity:0})}}catch(e){h.e(e)}finally{h.f()}}},{key:"apply_offset",value:function(e,t){var n=this.elm_preview.getBoundingClientRect();return this.is_type_top(t)?{x:e.x-n.width/2,y:e.y+this.get_vertical_offset_top()}:{x:e.x-n.width/2,y:e.y+this.get_vertical_offset_bottom(n)}}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};r.uo.killTweensOf(this.elm_preview_content),r.uo.to(this.elm_preview_content,this.REVEAL_DURATION,{opacity:0,delay:this.REVEAL_DELAY,onComplete:e})}},{key:"move",value:function(e){var t=e.x,n=e.y,r=e.type,i=p(t,n),o=this.apply_offset(i,r);this.preview_position.set_target_value(o)}},{key:"show_popup",value:function(e){r.uo.set(this.elm_preview,{zIndex:100}),this.show({id:e.id,type:"top",chapter_no:e.chapterNo})}},{key:"hide_popup",value:function(){var e=this;this.on_mobile_close_callback(),this.hide((function(){r.uo.set(e.elm_preview,{clearProps:"zIndex"})}))}},{key:"set_mobile",value:function(e){var t=e.onClose,n=e.onClick;this.on_mobile_close_callback=function(){return t()},this.on_mobile_play_callback=function(e,t){return n(e,t)},this.REVEAL_DELAY=0,this.preview_position.detach_callback(),r.uo.set(this.elm_preview,{clearProps:"transform"}),this.elm_preview.classList.add("is-mobile")}}],t&&T(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function R(e){var t=function(e,t){if("object"!=M(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==M(t)?t:t+""}var P=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.header=this.ctx.querySelector(".rrmc-rr25-island--header-wrapper"),this.tl=new r.Y_},(t=[{key:"is_fade_type",value:function(e){return"fade"===e}},{key:"fadeOut",value:function(e){var t=e.fade;this.is_fade_type(t)&&(this.tl.kill(),this.tl=new r.Y_,this.tl.to(this.header,.5,{opacity:.2}))}},{key:"fadeIn",value:function(){this.tl.kill(),this.tl=new r.Y_,this.tl.to(this.header,.5,{opacity:1})}}])&&L(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function D(){D=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new L(r||[]);return i(a,"_invoke",{value:T(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(R([])));x&&x!==n&&r.call(x,a)&&(b=x);var S=_.prototype=g.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==I(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function T(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=A(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function A(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,A(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(I(t)+" is not iterable")}return y.prototype=_,i(S,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(k.prototype),c(k.prototype,s,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=R,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:R(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function O(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=I(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}var j=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.elm_island=this.ctx.wrapper_elm.querySelector(".rrmc-rr25-island--wrapper"),this.elm_preview=this.ctx.wrapper_elm.querySelector(".rrmc-rr25-island--preview"),this.elm_pins=[].slice.call(this.elm_island.querySelectorAll(".rrmc-rr25-island--pin")),this.elm_veil=this.ctx.wrapper_elm.querySelector(".rrmc-rr25-island--veil"),this.elm_reveal=this.ctx.wrapper_elm.querySelector(".rrmc-rr25-island--background-reveal"),this.elm_header_components=[].slice.call(this.ctx.wrapper_elm.querySelectorAll(".rrmc-rr25-island--header-component")),this.elm_begin_cta=this.ctx.wrapper_elm.querySelector(".rrmc-rr25-island--header-cta"),this.setup_desktop_actions(),this.on_pin_enter=function(e){n.pin_enter_action(e)},this.on_pin_leave=function(){n.pin_leave_action()},this.on_pin_move=function(e){n.pin_move_action(e)},this.on_pin_click=function(e){n.pin_click_action(e)}},t=[{key:"setup_desktop_actions",value:function(){var e=this;this.pin_click_action=function(t){e.ctx.chapters.reveal_chapter(t.id,t.chapterNo)},this.pin_enter_action=function(t){e.preview.show(t),e.header.fadeOut(t)},this.pin_leave_action=function(){e.preview.hide(),e.header.fadeIn()},this.pin_move_action=function(t){e.preview.move(t)}}},{key:"enable_touch_interface",value:function(){var e=this;this.elm_veil.addEventListenerRR("click",(function(){e.preview.hide_popup()})),this.touch_close=function(){r.uo.to(e.elm_veil,.2,{opacity:0}),r.uo.set(e.elm_veil,{clearProps:"pointerEvents"})},this.preview.set_mobile({onClose:this.touch_close,onClick:function(t,n){return e.ctx.chapters.reveal_chapter(t,n)}}),this.pin_click_action=function(t){r.uo.to(e.elm_veil,.2,{opacity:1}),r.uo.set(e.elm_veil,{pointerEvents:"auto"}),e.preview.show_popup(t)},this.pin_enter_action=function(){},this.pin_leave_action=function(){},this.pin_move_action=function(){}}},{key:"global_reveal",value:function(){var e=this;return new Promise((function(t){var n=new r.Y_;n.to(e.elm_reveal,.8,{opacity:0}),n.staggerFromTo(e.elm_pins,.5,{opacity:0,scale:1.4},{opacity:1,scale:1,delay:.5},.12),n.staggerFromTo(e.elm_header_components,.5,{opacity:0,y:20},{opacity:1,y:0},.12),n.set(e.elm_reveal,{display:"none"}),n.call(t)}))}},{key:"load",value:(n=D().mark((function e(){var t=this;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.untilLoaded(this.ctx.wrapper_elm);case 2:return e.next=4,this.global_reveal();case 4:this.preview=new C(this.elm_preview),this.header=new P(this.ctx.wrapper_elm),this.pins=this.elm_pins.map((function(e){var n=new d(e,{onMove:t.on_pin_move,onEnter:t.on_pin_enter,onLeave:t.on_pin_leave,onClick:t.on_pin_click});return n.load(),n})),i.A.sub_touch_update.subscribe({next:function(e){e&&t.enable_touch_interface()}}),this.elm_begin_cta.addEventListenerRR("click",(function(){t.ctx.chapters.reveal_chapter("spirit-electrified")}));case 9:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){O(o,r,i,a,s,"next",e)}function s(e){O(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})}],t&&F(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o}(),B=n(259);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==U(t)?t:t+""}var H=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t},(t=[{key:"get_chapter_url",value:function(e){if(!window.rrmc_rr25_island)return"";var t=window.rrmc_rr25_island.filter((function(t){return t.locationId===e}));return t[0]?"".concat(t[0].path):"/"}},{key:"reveal_chapter",value:function(e,t){var n=e.replace(/-/g," ");n=n.charAt(0).toUpperCase()+n.slice(1),B.Gx({event:"islandClick",eventCategory:"engagement",eventAction:"rr25 island",eventLabel:"chapter ".concat(t," - ").concat(n)}),window.location="".concat(this.get_chapter_url(e))}},{key:"load",value:function(){}}])&&z(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,W(r.key),r)}}function W(e){var t=function(e,t){if("object"!=q(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=q(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==q(t)?t:t+""}var Y=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.component=t,this.img_elm=this.component.querySelector(".rrmc-rr25-img"),this.wrapper_elm=this.component.querySelector(".rrmc-rr25-wrapper")},(t=[{key:"init_image",value:function(){this.path="/etc.clientlibs/rrmc/clientlibs/clientlib-components/resources/rr25/canvas.jpeg",this.img_width=4032,this.img_height=3032}},{key:"load",value:function(){this.island=new j(this),this.island.load(),this.chapters=new H(this),this.chapters.load()}},{key:"swap_main_ctas",value:function(e){var t=new r.Y_,n=this.component.querySelector(".rrmc-rr25-chapters-ctas"),i=this.component.querySelector(".rrmc-rr25-island-ctas");r.uo.killTweensOf(n),r.uo.killTweensOf(i),"chapter"===e?t.to(i,.2,{opacity:0},0).to(i,0,{zIndex:1,pointerEvents:"none"},"+=0.2").to(n,0,{zIndex:2,pointerEvents:"auto"}).to(n,.2,{opacity:1}):t.to(n,.2,{opacity:0},0).to(n,0,{zIndex:1,pointerEvents:"none"},"+=0.2").to(i,0,{zIndex:2,pointerEvents:"auto"}).to(i,.2,{opacity:1})}}])&&V(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelector(".rrmc-rr25");e&&new Y(e).load()}))},9841:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(9018),o=n(5116);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,l)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,s,l){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,l,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function l(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.on_scroll=function(){return n.scroll()},this.on_resize=function(){return n.resize()},this.init_component()},t=[{key:"init_component",value:(r=c(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.update_next_breakpoint(),e.next=3,this.set_current_frame_list();case 3:this.init_canvas_context(),this.init_scroll_parameters(),this.init_scrubber_parameters(),this.update_current_scroll_progress(),this.update_current_overscroll_progress(),this.paste_frame(),this.update_last_breakpoint();case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"register_listener",value:function(){document.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize)}},{key:"init_scroll_parameters",value:function(){var e=window.pageYOffset,t=this.config.sticky_element.getBoundingClientRect(),n=this.config.container_element.getBoundingClientRect();this.start_scroll_position=e+n.top,this.end_scroll_position=e+n.bottom-t.height,this.start_overscroll_position=this.end_scroll_position,this.end_overscroll_position=this.end_scroll_position+window.innerHeight,this.current_scroll_position=e}},{key:"init_scrubber_parameters",value:function(){var e=this.config.progress_container_element.getBoundingClientRect(),t=this.config.progress_element.getBoundingClientRect();this.end_y_offset=e.height-t.height}},{key:"paste_frame",value:function(){if(this.canvas_context){this.canvas_context.clearRect(0,0,this.canvas_context.canvas.width,this.canvas_context.canvas.height);var e=this.frame_list.get_frame_by_progress(this.current_scroll_progress);this.canvas_context.drawImage(e,0,0,this.canvas_context.canvas.width,this.canvas_context.canvas.height)}}},{key:"apply_overscroll_old",value:function(){if(this.current_overscroll_progress<=0||this.current_overscroll_progress>=1)return this.config.canvas_element.style.transform="",void(this.config.scrubber_element.style.transform="translateY(-50%)");var e=window.innerHeight,t=this.current_overscroll_progress*e;this.config.canvas_element.style.transform="translate3d(0, ".concat(t,"px, 0)"),this.config.scrubber_element.style.transform="translateY(calc(-50% + ".concat(t,"px))")}},{key:"apply_overscroll",value:function(){return this.current_overscroll_progress<=0?(this.config.canvas_element.style.position="absolute",this.config.canvas_element.style.display="block",this.config.scrubber_element.style.position="absolute",void(this.config.scrubber_element.style.display="block")):this.current_overscroll_progress>=1?(this.config.canvas_element.style.position="absolute",this.config.canvas_element.style.display="none",this.config.scrubber_element.style.position="absolute",void(this.config.scrubber_element.style.display="none")):(this.config.canvas_element.style.position="fixed",this.config.canvas_element.style.display="block",this.config.scrubber_element.style.position="fixed",void(this.config.scrubber_element.style.display="block"))}},{key:"apply_scrubber",value:function(){var e=this.current_scroll_progress*this.end_y_offset;this.config.progress_element.style.transform="translate3d(0, ".concat(e,"px, 0)")}},{key:"update_current_scroll_progress",value:function(){this.current_scroll_progress=(this.current_scroll_position-this.start_scroll_position)/(this.end_scroll_position-this.start_scroll_position),this.current_scroll_progress<=0&&(this.current_scroll_progress=0),this.current_scroll_progress>=1&&(this.current_scroll_progress=1)}},{key:"update_current_overscroll_progress",value:function(){this.current_overscroll_progress=(this.current_scroll_position-this.start_overscroll_position)/(this.end_overscroll_position-this.start_overscroll_position),this.current_overscroll_progress<=0&&(this.current_overscroll_progress=0),this.current_overscroll_progress>=1&&(this.current_overscroll_progress=1)}},{key:"set_current_frame_list",value:(n=c(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.frame_list=(0,o.S)()?this.config.frame_list_mobile:this.config.frame_list_desktop,e.next=3,this.frame_list.preload();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"has_breakpoint_remained",value:function(){return this.last_breakpoint_is_mobile===this.next_breakpoint_is_mobile}},{key:"update_next_breakpoint",value:function(){this.next_breakpoint_is_mobile=(0,o.S)()}},{key:"update_last_breakpoint",value:function(){this.last_breakpoint_is_mobile=this.next_breakpoint_is_mobile}},{key:"init_canvas_context",value:function(){this.has_breakpoint_remained()||(this.canvas_context=this.config.canvas_element.getContext("2d"),this.canvas_context.canvas.width=this.frame_list.config.frame_width,this.canvas_context.canvas.height=this.frame_list.config.frame_height)}},{key:"scroll",value:function(){var e=this;this.current_scroll_position=window.pageYOffset,this.update_current_scroll_progress(),this.update_current_overscroll_progress(),requestAnimationFrame((function(){e.paste_frame(),e.apply_overscroll(),e.apply_scrubber()}))}},{key:"resize",value:function(){this.init_component()}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(){f=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==p(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=d;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(p(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function m(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var y=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={frame_width:t.width,frame_height:t.height,file_name_padding:6,start_frame:t.start_frame_index,end_frame:t.end_frame_index,folder_name:t.folder_path,file_name_prefix:"",file_name_extension:t.file_extension},this.config.frame_number=this.config.end_frame-this.config.start_frame+1},t=[{key:"preload",value:function(){if(!this.frames_ready)return this.preload_frames(),this.frames_ready}},{key:"iterate_over_frames",value:function(e){for(var t=this.config.start_frame,n=0;t<this.config.end_frame+1;++t,++n)e(n,t)}},{key:"get_frame_by_progress",value:function(e){var t=Math.round(e*(this.config.frame_number-1));return this.image_elements[t]}},{key:"get_frame_by_frame_number",value:function(e){return this.image_elements[e]}},{key:"get_first_frame",value:function(){return this.image_elements[0]}},{key:"get_last_frame",value:function(){return this.image_elements[this.config.frame_number-1]}},{key:"preload_frames",value:function(){var e=this;this.frames_ready=new Promise(function(){var t,n=(t=f().mark((function t(n){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.image_promises=[],e.image_elements=[],e.iterate_over_frames((function(){var t=new Image;e.image_elements.push(t);var n=new Promise((function(e){return t.addEventListener("load",(function(){return e()}))}));e.image_promises.push(n)})),Promise.all(e.image_promises).then((function(){return n()})),e.iterate_over_frames((function(t){var n=(""+t).padStart(e.config.file_name_padding,"0"),r="".concat(e.config.folder_name,"/").concat(e.config.file_name_prefix).concat(n,".").concat(e.config.file_name_extension);e.image_elements[t].src=r}));case 5:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){m(o,r,i,a,s,"next",e)}function s(e){m(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}())}}],t&&v(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=_(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==_(t)?t:t+""}var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,n=[{key:"build",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"mobile",r=new e,i=t.getAttribute("data-".concat(n,"-first-frame")),o=i.split("/"),a=o[o.length-1].split("."),s=a[a.length-1],l=parseInt(t.getAttribute("data-".concat(n,"-frame-number")));return r.folder_path=i.substring(0,i.lastIndexOf("/")),r.file_extension=s,r.width=parseInt(t.getAttribute("data-".concat(n,"-image-width"))),r.height=parseInt(t.getAttribute("data-".concat(n,"-image-height"))),r.start_frame_index=parseInt(t.getAttribute("data-".concat(n,"-start-frame-index"))),r.end_frame_index=l-1,r}}],null&&b(t.prototype,null),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",v={};function g(){}function y(){}function _(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(I([])));x&&x!==n&&r.call(x,a)&&(b=x);var k=_.prototype=g.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==S(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===v)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(S(t)+" is not iterable")}return y.prototype=_,i(k,"constructor",{value:_,configurable:!0}),i(_,"constructor",{value:y,configurable:!0}),y.displayName=c(_,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,_):(e.__proto__=_,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function k(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function T(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){k(o,r,i,a,s,"next",e)}function s(e){k(o,r,i,a,s,"throw",e)}a(void 0)}))}}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function C(e){var t=function(e,t){if("object"!=S(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var M=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_label_top=this.container.querySelector(".js-rrmc-scroll-animation-scrubber-label-top"),this.elm_label_bottom=this.container.querySelector(".js-rrmc-scroll-animation-scrubber-label-bottom"),this.attr_fallback_frame_number_first=parseInt(this.container.getAttribute("data-fallback-frame-number-first")),this.attr_fallback_frame_number_last=parseInt(this.container.getAttribute("data-fallback-frame-number-last")),this.on_go_up=function(){return n.go_up()},this.on_go_down=function(){return n.go_down()}},t=[{key:"fallback",value:(o=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.frame_list_desktop.preload();case 2:t=this.frame_list_desktop.get_frame_by_frame_number(this.attr_fallback_frame_number_first),n=this.frame_list_desktop.get_frame_by_frame_number(this.attr_fallback_frame_number_last),this.elm_top_fallback_image=this.container.querySelector(".js-rrmc-scroll-animation-fallback-image-1"),this.elm_bottom_fallback_image=this.container.querySelector(".js-rrmc-scroll-animation-fallback-image-2"),this.elm_top_fallback_image.src=t.src,this.elm_bottom_fallback_image.src=n.src;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"fallback_needed",value:function(){return(0,i.en)()}},{key:"load",value:(n=T(E().mark((function e(){var t,n;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.build(this.container,"mobile"),n=x.build(this.container,"desktop"),this.frame_list_mobile=new y(t),this.frame_list_desktop=new y(n),!this.fallback_needed()){e.next=6;break}return e.abrupt("return",this.fallback());case 6:this.frame_animation=new d({frame_list_mobile:this.frame_list_mobile,frame_list_desktop:this.frame_list_desktop,container_element:this.container,sticky_element:this.container.querySelector(".rrmc-scroll-animation-frame-block"),canvas_element:this.container.querySelector(".rrmc-scroll-animation-canvas"),scrubber_element:this.container.querySelector(".rrmc-scroll-animation-scrubber"),progress_container_element:this.container.querySelector(".rrmc-scroll-animation-scrubber--progress-container"),progress_element:this.container.querySelector(".rrmc-scroll-animation-scrubber--progress")}),this.frame_animation.register_listener(),this.register_listener();case 9:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"go_up",value:function(){r.uo.to(window,1.2,{scrollTo:this.frame_animation.start_scroll_position})}},{key:"go_down",value:function(){r.uo.to(window,1.2,{scrollTo:this.frame_animation.end_scroll_position})}},{key:"register_listener",value:function(){this.elm_label_top.addEventListener("click",this.on_go_up),this.elm_label_bottom.addEventListener("click",this.on_go_down)}}],t&&A(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-scroll-animation");[].slice.call(e).forEach((function(e){new M(e).load()}))}))},6579:(e,t,n)=>{"use strict";n.r(t);var r=n(1500),i=n(8607),o=n(6575),a=n(5116);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,l){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==s(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,a,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function c(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var p=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.on_scroll=function(){return n.scroll()},this.on_resize=function(){return n.resize()},this.init_component()},t=[{key:"init_component",value:(r=u(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.update_next_breakpoint(),this.init_scroll_parameters(),this.init_scrubber_parameters(),this.update_current_scroll_progress(),this.update_current_overscroll_progress(),this.update_last_breakpoint();case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"register_listener",value:function(){document.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize)}},{key:"init_scroll_parameters",value:function(){var e=window.pageYOffset,t=this.config.container_element.getBoundingClientRect();this.start_scroll_position=e+t.top+window.innerHeight/2,this.end_scroll_position=e+t.bottom-window.innerHeight/2,this.start_overscroll_position=this.end_scroll_position,this.end_overscroll_position=this.end_scroll_position+window.innerHeight,this.current_scroll_position=e}},{key:"init_scrubber_parameters",value:function(){var e=this.config.progress_container_element.getBoundingClientRect(),t=this.config.progress_element.getBoundingClientRect();this.end_y_offset=e.height-t.height}},{key:"apply_scrubber",value:function(){var e=this.current_scroll_progress*this.end_y_offset;this.config.progress_element.style.transform="translate3d(0, ".concat(e,"px, 0)")}},{key:"update_current_scroll_progress",value:function(){this.current_scroll_progress=(this.current_scroll_position-this.start_scroll_position)/(this.end_scroll_position-this.start_scroll_position),this.current_scroll_progress<=0&&(this.current_scroll_progress=0),this.current_scroll_progress>=1&&(this.current_scroll_progress=1)}},{key:"update_current_overscroll_progress",value:function(){this.current_overscroll_progress=(this.current_scroll_position-this.start_overscroll_position)/(this.end_overscroll_position-this.start_overscroll_position),this.current_overscroll_progress<=0&&(this.current_overscroll_progress=0),this.current_overscroll_progress>=1&&(this.current_overscroll_progress=1)}},{key:"set_current_frame_list",value:(n=u(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.frame_list=(0,a.S)()?this.config.frame_list_mobile:this.config.frame_list_desktop,e.next=3,this.frame_list.preload();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"has_breakpoint_remained",value:function(){return this.last_breakpoint_is_mobile===this.next_breakpoint_is_mobile}},{key:"update_next_breakpoint",value:function(){this.next_breakpoint_is_mobile=(0,a.S)()}},{key:"update_last_breakpoint",value:function(){this.last_breakpoint_is_mobile=this.next_breakpoint_is_mobile}},{key:"init_canvas_context",value:function(){this.has_breakpoint_remained()}},{key:"scroll",value:function(){var e=this;this.current_scroll_position=window.pageYOffset,this.update_current_scroll_progress(),this.update_current_overscroll_progress(),requestAnimationFrame((function(){e.apply_scrubber()}))}},{key:"resize",value:function(){this.init_component()}}],t&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r}(),f=n(299),m=n(9018);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){g=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",m="completed",y={};function _(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=h(e[i],e,o);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==v(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(u).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=d;return function(o,a){if(i===f)throw Error("Generator is already running");if(i===m){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===d)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=h(t,n,r);if("normal"===c.type){if(i=r.done?m:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(v(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function y(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==v(t)?t:t+""}r.os.registerPlugin(o.u);var w=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.config=this.container.dataset,this.video=this.container.querySelector(".video-scrub"),this.videoContainer=this.container.querySelector(".video-scroll-container"),this.textEl=this.container.querySelector(".js-rrmc-rich-text"),this.textEl&&(this.textWrapperEl=this.textEl.querySelector(".rrmc-rich-text-wrapper")),this.elm_label_top=this.container.querySelector(".js-rrmc-scroll-video-animation-scrubber-label-top"),this.elm_label_bottom=this.container.querySelector(".js-rrmc-scroll-video-animation-scrubber-label-bottom"),this.on_go_up=function(){return n.go_up()},this.on_go_down=function(){return n.go_down()},this.aspectRatio=f.A.getClosestAspectRatio(window.innerWidth,window.innerHeight),this.verticalPin=null,this.horizontalAlign=null,this.videoTimelineScrub=null,this.src=null,this.isFirefox=(0,m.Lo)()},t=[{key:"init",value:(n=g().mark((function e(){var t,n,i,o,a,s,l,c=this;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=function(e,t){var n;switch(t){case"4:3":n=e.aemVideo_4_3;break;case"16:9":default:n=e.aemVideo_16_9;break;case"3:4":n=e.aemVideo_3_4;break;case"9:16":n=e.aemVideo_9_16}return n||(n=e.aemVideo_16_9),n},t=function(e,t,n,r){var i=function r(){e.removeEventListenerRR(t,r),n.apply(this,arguments)};return e.addEventListenerRR(t,i,r),i},o=function(){var e=c.video.play();c.isFirefox||(void 0!==e?e.then((function(){c.video.pause()})).catch((function(e){console.log("VIDEO play/pause failed",e)})):c.video.pause())},a=function(){var e=i(c.config,c.aspectRatio);return e!==c.src&&(c.src=e,void 0!==c.config.loadingVideoAsBlob?fetch(c.src).then((function(e){return e.blob()})).then((function(e){var n=URL.createObjectURL(e);c.src=n;var r=c.video.currentTime;c.video.setAttribute("src",c.src),c.video.currentTime=r+.01,t(document.documentElement,"touchstart",o)})):(c.video.setAttribute("src",c.src),t(document.documentElement,"touchstart",o)),t(c.video,"loadedmetadata",(function(){c.videoTimelineScrub&&c.videoTimelineScrub.scrollTrigger.refresh()})),!0)},s=function(){var e=parseFloat(c.video.duration),t=Math.max(.75*window.innerHeight,600),n=e*t;void 0!==c.config.scrollHeightAdjust&&(n+=parseInt(c.config.scrollHeightAdjust)),c.verticalPin=null,c.horizontalAlign=null;var r=0;if(c.textEl){switch(c.aspectRatio){case"4:3":c.verticalPin=c.config.textVerticalPin_4_3,c.horizontalAlign=c.config.textAlignment_4_3;break;case"16:9":default:c.verticalPin=c.config.textVerticalPin_16_9,c.horizontalAlign=c.config.textAlignment_16_9;break;case"3:4":c.verticalPin=c.config.textVerticalPin_3_4,c.horizontalAlign=c.config.textAlignment_3_4;break;case"9:16":c.verticalPin=c.config.textVerticalPin_9_16,c.horizontalAlign=c.config.textAlignment_9_16}c.verticalPin||(c.verticalPin=c.config.textVerticalPin_16_9),c.horizontalAlign||(c.horizontalAlign=c.config.textAlignment_16_9),c.container.classList.remove("text-vertical-pin-top","text-vertical-pin-center","text-vertical-pin-bottom","text-vertical-pin-below"),c.container.classList.add("text-vertical-pin-".concat(c.verticalPin)),c.container.classList.remove("text-alignment-left","text-alignment-center","text-alignment-right"),c.container.classList.add("text-alignment-".concat(c.horizontalAlign)),"below"===c.verticalPin?r=c.textEl.offsetHeight:n+=t}var i=c.container.parentElement;return i.style.height=c.isFirefox?"100vh":"".concat(n+r,"px"),i.querySelector(".loading-icon").style.display="none",n},l=function(){c.config.isScrollBarEnabled&&new p({container_element:c.container,sticky_element:c.container.querySelector(".rrmc-scroll-video-animation-frame-block"),canvas_element:c.container.querySelector(".rrmc-scroll-video-animation-canvas"),scrubber_element:c.container.querySelector(".rrmc-scroll-video-animation-scrubber"),progress_container_element:c.container.querySelector(".rrmc-scroll-video-animation-scrubber--progress-container"),progress_element:c.container.querySelector(".rrmc-scroll-video-animation-scrubber--progress")}).register_listener()},(n=function(){var e;switch(c.aspectRatio=f.A.getClosestAspectRatio(window.innerWidth,window.innerHeight),c.aspectRatio){case"4:3":e="aspect-ratio_4_3";break;case"16:9":default:e="aspect-ratio_16_9";break;case"3:4":e="aspect-ratio_3_4";break;case"9:16":e="aspect-ratio_9_16"}c.container.classList.remove("aspect-ratio_4_3","aspect-ratio_16_9","aspect-ratio_3_4","aspect-ratio_9_16"),c.container.classList.add(e)})(),a(),l(),t(c.video,"loadedmetadata",(function(){var e=s();if(c.isFirefox||(c.videoTimelineScrub=r.os.timeline({scrollTrigger:{trigger:c.videoContainer,start:"top top",end:"+="+e+" bottom",markers:void 0!==c.config.showScrollMarkers,scrub:.33,invalidateOnRefresh:!0,pin:!0}}),c.videoTimelineScrub.fromTo(c.video,{currentTime:0},{duration:parseFloat(c.video.duration),currentTime:parseFloat(c.video.duration)||1},0)),c.textEl&&"below"!==c.verticalPin){c.videoTimelineScrub&&c.videoTimelineScrub.fromTo(c.textWrapperEl,{y:64,opacity:0,duration:2},{y:0,opacity:1},">0.2"),c.videoTimelineScrub&&c.videoTimelineScrub.to(c.textWrapperEl,{y:0,duration:.5},">0.5"),c.textWrapperEl.style.opacity="0 !important";var t=window.scrollY;new IntersectionObserver((function(e,n){var r=window.scrollY;e.forEach((function(e){e.isIntersecting&&r>t&&(n.disconnect(),c.textWrapperEl.style.opacity=0,setTimeout((function(){c.textWrapperEl.style.opacity=0}),600))})),t=r}),{threshold:0}).observe(c.textWrapperEl)}if(c.isFirefox){var n=0,i=!1,o=!0;c.textWrapperEl&&c.textWrapperEl.classList.add("fade-out"),window.addEventListener("scroll",(function(){var e=window.scrollY;i=e<n,o=e>n,n=e})),new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&o&&c.video.play()}))}),{threshold:.75}).observe(c.video),new IntersectionObserver((function(e){e.forEach((function(e){!e.isIntersecting&&i&&(c.video.currentTime=0,c.video.pause(),c.textWrapperEl&&(c.textWrapperEl.classList.remove("fade-in"),c.textWrapperEl.classList.add("fade-out")))}))}),{threshold:0}).observe(c.video)}})),c.isFirefox&&c.video.addEventListenerRR("ended",(function(){c.textWrapperEl&&(c.textWrapperEl.classList.remove("fade-out"),c.textWrapperEl.classList.add("fade-in")),c.video.pause()})),f.A.listenToBodyResize((function(){n(),!a()&&c.videoTimelineScrub&&c.videoTimelineScrub.scrollTrigger.refresh()}));case 9:case"end":return e.stop()}}),e)})),o=function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(e){y(o,r,i,a,s,"next",e)}function s(e){y(o,r,i,a,s,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"go_up",value:function(){i.uo.to(window,1.2,{scrollTo:this.frame_animation.start_scroll_position})}},{key:"go_down",value:function(){i.uo.to(window,1.2,{scrollTo:this.frame_animation.end_scroll_position})}},{key:"register_listener",value:function(){this.elm_label_top.addEventListener("click",this.on_go_up),this.elm_label_bottom.addEventListener("click",this.on_go_down)}}],t&&_(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,o}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-scroll-video-animation");[].slice.call(e).forEach((function(e){new w(e).init()}))}))},3860:(e,t,n)=>{"use strict";n.r(t);const r=[{label:"Phantom",path:"/showroom/phantom",sfValue:"Phantom",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Phantom Extended",path:"/showroom/phantom-extended",sfValue:"Phantom Extended",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Cullinan Series II",path:"/showroom/cullinan",sfValue:"Cullinan",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Ghost",path:"/showroom/ghost",sfValue:"New Ghost",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Ghost Extended",path:"/showroom/ghost-extended",sfValue:"New Ghost Extended",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Spectre",path:"/showroom/spectre",sfValue:"Spectre",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Black Badge",path:"/showroom/black-badge",sfValue:"",secondaryMenu:!0,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]},{label:"Black Badge New Ghost",path:"/showroom/black-badge-ghost",sfValue:"New Ghost Black Badge",secondaryMenu:!1,allowedLocales:["en_GB","en_US","ko_KR","ja_JP","ru_RU"]}];var i,o,a,s,l,c,u,h,d,p=n(2725),f=n(8607),m="transform",v=m+"Origin",g=function(e){var t=e.ownerDocument||e;!(m in e.style)&&"msTransform"in e.style&&(v=(m="msTransform")+"Origin");for(;t.parentNode&&(t=t.parentNode););if(o=window,u=new E,t){i=t,a=t.documentElement,s=t.body,(h=i.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var n=t.createElement("div"),r=t.createElement("div"),l=t&&(t.body||t.firstElementChild);l&&l.appendChild&&(l.appendChild(n),n.appendChild(r),n.setAttribute("style","position:static;transform:translate3d(0,0,1px)"),d=r.offsetParent!==n,l.removeChild(n))}return t},y=[],_=[],b=function(e){return e.ownerSVGElement||("svg"===(e.tagName+"").toLowerCase()?e:null)},w=function e(t){return"fixed"===o.getComputedStyle(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},x=function e(t,n){if(t.parentNode&&(i||g(t))){var r=b(t),o=r?r.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",a=r?n?"rect":"g":"div",s=2!==n?0:100,u=3===n?100:0,h="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",d=i.createElementNS?i.createElementNS(o.replace(/^https/,"http"),a):i.createElement(a);return n&&(r?(c||(c=e(t)),d.setAttribute("width",.01),d.setAttribute("height",.01),d.setAttribute("transform","translate("+s+","+u+")"),c.appendChild(d)):(l||((l=e(t)).style.cssText=h),d.style.cssText=h+"width:0.1px;height:0.1px;top:"+u+"px;left:"+s+"px",l.appendChild(d))),d}throw"Need document and parent."},S=function(e,t,n,r,i,o,a){return e.a=t,e.b=n,e.c=r,e.d=i,e.e=o,e.f=a,e},E=function(){function e(e,t,n,r,i,o){void 0===e&&(e=1),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),S(this,e,t,n,r,i,o)}var t=e.prototype;return t.inverse=function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=e*r-t*n||1e-10;return S(this,r/a,-t/a,-n/a,e/a,(n*o-r*i)/a,-(e*o-t*i)/a)},t.multiply=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f,s=e.a,l=e.c,c=e.b,u=e.d,h=e.e,d=e.f;return S(this,s*t+c*r,s*n+c*i,l*t+u*r,l*n+u*i,o+h*t+d*r,a+h*n+d*i)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},t.equals=function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=this.e,a=this.f;return t===e.a&&n===e.b&&r===e.c&&i===e.d&&o===e.e&&a===e.f},t.apply=function(e,t){void 0===t&&(t={});var n=e.x,r=e.y,i=this.a,o=this.b,a=this.c,s=this.d,l=this.e,c=this.f;return t.x=n*i+r*a+l||0,t.y=n*o+r*s+c||0,t},e}();function k(e,t,n,r){if(!e||!e.parentNode||(i||g(e)).documentElement===e)return new E;var p=function(e){for(var t,n;e&&e!==s;)(n=e._gsap)&&n.uncache&&n.get(e,"x"),n&&!n.scaleX&&!n.scaleY&&n.renderTransform&&(n.scaleX=n.scaleY=1e-4,n.renderTransform(1,n),t?t.push(n):t=[n]),e=e.parentNode;return t}(e),f=b(e)?y:_,S=function(e,t){var n,r,i,a,s,p,f=b(e),g=e===f,w=f?y:_,S=e.parentNode;if(e===o)return e;if(w.length||w.push(x(e,1),x(e,2),x(e,3)),n=f?c:l,f)g?(i=function(e){var t,n=e.getCTM();return n||(t=e.style[m],e.style[m]="none",e.appendChild(h),n=h.getCTM(),e.removeChild(h),t?e.style[m]=t:e.style.removeProperty(m.replace(/([A-Z])/g,"-$1").toLowerCase())),n||u.clone()}(e),a=-i.e/i.a,s=-i.f/i.d,r=u):e.getBBox?(i=e.getBBox(),a=(r=(r=e.transform?e.transform.baseVal:{}).numberOfItems?r.numberOfItems>1?function(e){for(var t=new E,n=0;n<e.numberOfItems;n++)t.multiply(e.getItem(n).matrix);return t}(r):r.getItem(0).matrix:u).a*i.x+r.c*i.y,s=r.b*i.x+r.d*i.y):(r=new E,a=s=0),t&&"g"===e.tagName.toLowerCase()&&(a=s=0),(g?f:S).appendChild(n),n.setAttribute("transform","matrix("+r.a+","+r.b+","+r.c+","+r.d+","+(r.e+a)+","+(r.f+s)+")");else{if(a=s=0,d)for(r=e.offsetParent,i=e;i&&(i=i.parentNode)&&i!==r&&i.parentNode;)(o.getComputedStyle(i)[m]+"").length>4&&(a=i.offsetLeft,s=i.offsetTop,i=0);if("absolute"!==(p=o.getComputedStyle(e)).position&&"fixed"!==p.position)for(r=e.offsetParent;S&&S!==r;)a+=S.scrollLeft||0,s+=S.scrollTop||0,S=S.parentNode;(i=n.style).top=e.offsetTop-s+"px",i.left=e.offsetLeft-a+"px",i[m]=p[m],i[v]=p[v],i.position="fixed"===p.position?"fixed":"absolute",e.parentNode.appendChild(n)}return n}(e,n),k=f[0].getBoundingClientRect(),T=f[1].getBoundingClientRect(),A=f[2].getBoundingClientRect(),C=S.parentNode,M=!r&&w(e),L=new E((T.left-k.left)/100,(T.top-k.top)/100,(A.left-k.left)/100,(A.top-k.top)/100,k.left+(M?0:o.pageXOffset||i.scrollLeft||a.scrollLeft||s.scrollLeft||0),k.top+(M?0:o.pageYOffset||i.scrollTop||a.scrollTop||s.scrollTop||0));if(C.removeChild(S),p)for(k=p.length;k--;)(T=p[k]).scaleX=T.scaleY=0,T.renderTransform(1,T);return t?L.inverse():L}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var A,C,M,L,R,P,I,D,O,F,N,j,B,U,z,G,H,q,V,W,Y,X,K=0,$=function(){return"undefined"!=typeof window},J=function(){return A||$()&&(A=window.gsap)&&A.registerPlugin&&A},Z=function(e){return"function"==typeof e},Q=function(e){return"object"==typeof e},ee=function(e){return void 0===e},te=function(){return!1},ne="transform",re="transformOrigin",ie=function(e){return Math.round(1e4*e)/1e4},oe=Array.isArray,ae=function(e,t){var n=M.createElementNS?M.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):M.createElement(e);return n.style?n:M.createElement(e)},se=180/Math.PI,le=1e20,ce=new E,ue=Date.now||function(){return(new Date).getTime()},he=[],de={},pe=0,fe=/^(?:a|input|textarea|button|select)$/i,me=0,ve={},ge={},ye=function(e,t){var n,r={};for(n in e)r[n]=t?e[n]*t:e[n];return r},_e=function e(t,n){for(var r,i=t.length;i--;)n?t[i].style.touchAction=n:t[i].style.removeProperty("touch-action"),(r=t[i].children)&&r.length&&e(r,n)},be=function(){return he.forEach((function(e){return e()}))},we=function(){return!he.length&&A.ticker.remove(be)},xe=function(e){for(var t=he.length;t--;)he[t]===e&&he.splice(t,1);A.to(we,{overwrite:!0,delay:15,duration:0,onComplete:we,data:"_draggable"})},Se=function(e,t,n,r){if(e.addEventListener){var i=B[t];r=r||(N?{passive:!1}:null),e.addEventListener(i||t,n,r),i&&t!==i&&e.addEventListener(t,n,r)}},Ee=function(e,t,n,r){if(e.removeEventListener){var i=B[t];e.removeEventListener(i||t,n,r),i&&t!==i&&e.removeEventListener(t,n,r)}},ke=function(e){e.preventDefault&&e.preventDefault(),e.preventManipulation&&e.preventManipulation()},Te=function e(t){U=t.touches&&K<t.touches.length,Ee(t.target,"touchend",e)},Ae=function(e){U=e.touches&&K<e.touches.length,Se(e.target,"touchend",Te)},Ce=function(e){return C.pageYOffset||e.scrollTop||e.documentElement.scrollTop||e.body.scrollTop||0},Me=function(e){return C.pageXOffset||e.scrollLeft||e.documentElement.scrollLeft||e.body.scrollLeft||0},Le=function e(t,n){Se(t,"scroll",n),Pe(t.parentNode)||e(t.parentNode,n)},Re=function e(t,n){Ee(t,"scroll",n),Pe(t.parentNode)||e(t.parentNode,n)},Pe=function(e){return!(e&&e!==L&&9!==e.nodeType&&e!==M.body&&e!==C&&e.nodeType&&e.parentNode)},Ie=function(e,t){var n="x"===t?"Width":"Height",r="scroll"+n,i="client"+n;return Math.max(0,Pe(e)?Math.max(L[r],R[r])-(C["inner"+n]||L[i]||R[i]):e[r]-e[i])},De=function e(t,n){var r=Ie(t,"x"),i=Ie(t,"y");Pe(t)?t=ge:e(t.parentNode,n),t._gsMaxScrollX=r,t._gsMaxScrollY=i,n||(t._gsScrollX=t.scrollLeft||0,t._gsScrollY=t.scrollTop||0)},Oe=function(e,t,n){var r=e.style;r&&(ee(r[t])&&(t=O(t,e)||t),null==n?r.removeProperty&&r.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):r[t]=n)},Fe=function(e){return C.getComputedStyle(e instanceof Element?e:e.host||(e.parentNode||{}).host||e)},Ne={},je=function(e){if(e===C)return Ne.left=Ne.top=0,Ne.width=Ne.right=L.clientWidth||e.innerWidth||R.clientWidth||0,Ne.height=Ne.bottom=(e.innerHeight||0)-20<L.clientHeight?L.clientHeight:e.innerHeight||R.clientHeight||0,Ne;var t=e.ownerDocument||M,n=ee(e.pageX)?e.nodeType||ee(e.left)||ee(e.top)?F(e)[0].getBoundingClientRect():e:{left:e.pageX-Me(t),top:e.pageY-Ce(t),right:e.pageX-Me(t)+1,bottom:e.pageY-Ce(t)+1};return ee(n.right)&&!ee(n.width)?(n.right=n.left+n.width,n.bottom=n.top+n.height):ee(n.width)&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n},Be=function(e,t,n){var r,i=e.vars,o=i[n],a=e._listeners[t];return Z(o)&&(r=o.apply(i.callbackScope||e,i[n+"Params"]||[e.pointerEvent])),a&&!1===e.dispatchEvent(t)&&(r=!1),r},Ue=function(e,t){var n,r,i,o=F(e)[0];return o.nodeType||o===C?Ge(o,t):ee(e.left)?{left:r=e.min||e.minX||e.minRotation||0,top:n=e.min||e.minY||0,width:(e.max||e.maxX||e.maxRotation||0)-r,height:(e.max||e.maxY||0)-n}:(i={x:0,y:0},{left:e.left-i.x,top:e.top-i.y,width:e.width,height:e.height})},ze={},Ge=function(e,t){t=F(t)[0];var n,r,i,o,a,s,l,c,u,h,d,p,f,m=e.getBBox&&e.ownerSVGElement,v=e.ownerDocument||M;if(e===C)i=Ce(v),r=(n=Me(v))+(v.documentElement.clientWidth||e.innerWidth||v.body.clientWidth||0),o=i+((e.innerHeight||0)-20<v.documentElement.clientHeight?v.documentElement.clientHeight:e.innerHeight||v.body.clientHeight||0);else{if(t===C||ee(t))return e.getBoundingClientRect();n=i=0,m?(d=(h=e.getBBox()).width,p=h.height):(e.viewBox&&(h=e.viewBox.baseVal)&&(n=h.x||0,i=h.y||0,d=h.width,p=h.height),d||(h="border-box"===(f=Fe(e)).boxSizing,d=(parseFloat(f.width)||e.clientWidth||0)+(h?0:parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)),p=(parseFloat(f.height)||e.clientHeight||0)+(h?0:parseFloat(f.borderTopWidth)+parseFloat(f.borderBottomWidth)))),r=d,o=p}return e===t?{left:n,top:i,width:r-n,height:o-i}:(s=(a=k(t,!0).multiply(k(e))).apply({x:n,y:i}),l=a.apply({x:r,y:i}),c=a.apply({x:r,y:o}),u=a.apply({x:n,y:o}),{left:n=Math.min(s.x,l.x,c.x,u.x),top:i=Math.min(s.y,l.y,c.y,u.y),width:Math.max(s.x,l.x,c.x,u.x)-n,height:Math.max(s.y,l.y,c.y,u.y)-i})},He=function(e,t,n,r,i,o){var a,s,l,c={};if(t)if(1!==i&&t instanceof Array){if(c.end=a=[],l=t.length,Q(t[0]))for(s=0;s<l;s++)a[s]=ye(t[s],i);else for(s=0;s<l;s++)a[s]=t[s]*i;n+=1.1,r-=1.1}else Z(t)?c.end=function(n){var r,o,a=t.call(e,n);if(1!==i)if(Q(a)){for(o in r={},a)r[o]=a[o]*i;a=r}else a*=i;return a}:c.end=t;return(n||0===n)&&(c.max=n),(r||0===r)&&(c.min=r),o&&(c.velocity=0),c},qe=function e(t){var n;return!(!t||!t.getAttribute||t===R)&&(!("true"!==(n=t.getAttribute("data-clickable"))&&("false"===n||!fe.test(t.nodeName+"")&&"true"!==t.getAttribute("contentEditable")))||e(t.parentNode))},Ve=function(e,t){for(var n,r=e.length;r--;)(n=e[r]).ondragstart=n.onselectstart=t?null:te,A.set(n,{lazy:!0,userSelect:t?"text":"none"})},We=function e(t){return"fixed"===Fe(t).position||((t=t.parentNode)&&1===t.nodeType?e(t):void 0)},Ye=function(e,t){e=A.utils.toArray(e)[0],t=t||{};var n,r,i,o,a,s,l=document.createElement("div"),c=l.style,u=e.firstChild,h=0,d=0,p=e.scrollTop,f=e.scrollLeft,m=e.scrollWidth,v=e.scrollHeight,g=0,y=0,_=0;Y&&!1!==t.force3D?(a="translate3d(",s="px,0px)"):ne&&(a="translate(",s="px)"),this.scrollTop=function(e,t){if(!arguments.length)return-this.top();this.top(-e,t)},this.scrollLeft=function(e,t){if(!arguments.length)return-this.left();this.left(-e,t)},this.left=function(n,r){if(!arguments.length)return-(e.scrollLeft+d);var i=e.scrollLeft-f,o=d;if((i>2||i<-2)&&!r)return f=e.scrollLeft,A.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-f),void(t.onKill&&t.onKill());(n=-n)<0?(d=n-.5|0,n=0):n>y?(d=n-y|0,n=y):d=0,(d||o)&&(this._skip||(c[ne]=a+-d+"px,"+-h+s),d+g>=0&&(c.paddingRight=d+g+"px")),e.scrollLeft=0|n,f=e.scrollLeft},this.top=function(n,r){if(!arguments.length)return-(e.scrollTop+h);var i=e.scrollTop-p,o=h;if((i>2||i<-2)&&!r)return p=e.scrollTop,A.killTweensOf(this,{top:1,scrollTop:1}),this.top(-p),void(t.onKill&&t.onKill());(n=-n)<0?(h=n-.5|0,n=0):n>_?(h=n-_|0,n=_):h=0,(h||o)&&(this._skip||(c[ne]=a+-d+"px,"+-h+s)),e.scrollTop=0|n,p=e.scrollTop},this.maxScrollTop=function(){return _},this.maxScrollLeft=function(){return y},this.disable=function(){for(u=l.firstChild;u;)o=u.nextSibling,e.appendChild(u),u=o;e===l.parentNode&&e.removeChild(l)},this.enable=function(){if((u=e.firstChild)!==l){for(;u;)o=u.nextSibling,l.appendChild(u),u=o;e.appendChild(l),this.calibrate()}},this.calibrate=function(t){var o,a,s,u=e.clientWidth===n;p=e.scrollTop,f=e.scrollLeft,u&&e.clientHeight===r&&l.offsetHeight===i&&m===e.scrollWidth&&v===e.scrollHeight&&!t||((h||d)&&(a=this.left(),s=this.top(),this.left(-e.scrollLeft),this.top(-e.scrollTop)),o=Fe(e),u&&!t||(c.display="block",c.width="auto",c.paddingRight="0px",(g=Math.max(0,e.scrollWidth-e.clientWidth))&&(g+=parseFloat(o.paddingLeft)+(X?parseFloat(o.paddingRight):0))),c.display="inline-block",c.position="relative",c.overflow="visible",c.verticalAlign="top",c.boxSizing="content-box",c.width="100%",c.paddingRight=g+"px",X&&(c.paddingBottom=o.paddingBottom),n=e.clientWidth,r=e.clientHeight,m=e.scrollWidth,v=e.scrollHeight,y=e.scrollWidth-n,_=e.scrollHeight-r,i=l.offsetHeight,c.display="block",(a||s)&&(this.left(a),this.top(s)))},this.content=l,this.element=e,this._skip=!1,this.enable()},Xe=function(e){if($()&&document.body){var t=window&&window.navigator;C=window,M=document,L=M.documentElement,R=M.body,P=ae("div"),q=!!window.PointerEvent,(I=ae("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",H="grab"===I.style.cursor?"grab":"move",z=t&&-1!==t.userAgent.toLowerCase().indexOf("android"),j="ontouchstart"in L&&"orientation"in C||t&&(t.MaxTouchPoints>0||t.msMaxTouchPoints>0),r=ae("div"),o=(i=ae("div")).style,a=R,o.display="inline-block",o.position="relative",r.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",r.appendChild(i),a.appendChild(r),n=i.offsetHeight+18>r.scrollHeight,a.removeChild(r),X=n,B=function(e){for(var t=e.split(","),n=(("onpointerdown"in P?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in P?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":e).split(",")),r={},i=4;--i>-1;)r[t[i]]=n[i],r[n[i]]=t[i];try{L.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){N=1}}))}catch(e){}return r}("touchstart,touchmove,touchend,touchcancel"),Se(M,"touchcancel",te),Se(C,"touchmove",te),R&&R.addEventListener("touchstart",te),Se(M,"contextmenu",(function(){for(var e in de)de[e].isPressed&&de[e].endDrag()})),A=D=J()}var n,r,i,o,a;A?(G=A.plugins.inertia,V=A.core.context||function(){},O=A.utils.checkPrefix,ne=O(ne),re=O(re),F=A.utils.toArray,W=A.core.getStyleSaver,Y=!!O("perspective")):e&&console.warn("Please gsap.registerPlugin(Draggable)")},Ke=function(e){var t,n;function r(t,n){var i;i=e.call(this)||this,D||Xe(1),t=F(t)[0],i.styles=W&&W(t,"transform,left,top"),G||(G=A.plugins.inertia),i.vars=n=ye(n||{}),i.target=t,i.x=i.y=i.rotation=0,i.dragResistance=parseFloat(n.dragResistance)||0,i.edgeResistance=isNaN(n.edgeResistance)?1:parseFloat(n.edgeResistance)||0,i.lockAxis=n.lockAxis,i.autoScroll=n.autoScroll||0,i.lockedAxis=null,i.allowEventDefault=!!n.allowEventDefault,A.getProperty(t,"x");var o,a,s,l,c,u,h,d,p,f,m,v,g,y,_,b,w,x,S,R,P,O,N,Y,X,$,J,te,ne,ae,fe,we,Te,Ie=(n.type||"x,y").toLowerCase(),Ne=~Ie.indexOf("x")||~Ie.indexOf("y"),Ge=-1!==Ie.indexOf("rotation"),Ke=Ge?"rotation":Ne?"x":"left",$e=Ne?"y":"top",Je=!(!~Ie.indexOf("x")&&!~Ie.indexOf("left")&&"scroll"!==Ie),Ze=!(!~Ie.indexOf("y")&&!~Ie.indexOf("top")&&"scroll"!==Ie),Qe=n.minimumMovement||2,et=T(i),tt=F(n.trigger||n.handle||t),nt={},rt=0,it=!1,ot=n.autoScrollMarginTop||40,at=n.autoScrollMarginRight||40,st=n.autoScrollMarginBottom||40,lt=n.autoScrollMarginLeft||40,ct=n.clickableTest||qe,ut=0,ht=t._gsap||A.core.getCache(t),dt=We(t),pt=function(e,n){return parseFloat(ht.get(t,e,n))},ft=t.ownerDocument||M,mt=function(e){return ke(e),e.stopImmediatePropagation&&e.stopImmediatePropagation(),!1},vt=function e(n){if(et.autoScroll&&et.isDragging&&(it||w)){var r,i,o,s,l,c,u,h,p=t,f=15*et.autoScroll;for(it=!1,ge.scrollTop=null!=C.pageYOffset?C.pageYOffset:null!=ft.documentElement.scrollTop?ft.documentElement.scrollTop:ft.body.scrollTop,ge.scrollLeft=null!=C.pageXOffset?C.pageXOffset:null!=ft.documentElement.scrollLeft?ft.documentElement.scrollLeft:ft.body.scrollLeft,s=et.pointerX-ge.scrollLeft,l=et.pointerY-ge.scrollTop;p&&!i;)r=(i=Pe(p.parentNode))?ge:p.parentNode,o=i?{bottom:Math.max(L.clientHeight,C.innerHeight||0),right:Math.max(L.clientWidth,C.innerWidth||0),left:0,top:0}:r.getBoundingClientRect(),c=u=0,Ze&&((h=r._gsMaxScrollY-r.scrollTop)<0?u=h:l>o.bottom-st&&h?(it=!0,u=Math.min(h,f*(1-Math.max(0,o.bottom-l)/st)|0)):l<o.top+ot&&r.scrollTop&&(it=!0,u=-Math.min(r.scrollTop,f*(1-Math.max(0,l-o.top)/ot)|0)),u&&(r.scrollTop+=u)),Je&&((h=r._gsMaxScrollX-r.scrollLeft)<0?c=h:s>o.right-at&&h?(it=!0,c=Math.min(h,f*(1-Math.max(0,o.right-s)/at)|0)):s<o.left+lt&&r.scrollLeft&&(it=!0,c=-Math.min(r.scrollLeft,f*(1-Math.max(0,s-o.left)/lt)|0)),c&&(r.scrollLeft+=c)),i&&(c||u)&&(C.scrollTo(r.scrollLeft,r.scrollTop),Mt(et.pointerX+c,et.pointerY+u)),p=r}if(w){var m=et.x,v=et.y;Ge?(et.deltaX=m-parseFloat(ht.rotation),et.rotation=m,ht.rotation=m+"deg",ht.renderTransform(1,ht)):a?(Ze&&(et.deltaY=v-a.top(),a.top(v)),Je&&(et.deltaX=m-a.left(),a.left(m))):Ne?(Ze&&(et.deltaY=v-parseFloat(ht.y),ht.y=v+"px"),Je&&(et.deltaX=m-parseFloat(ht.x),ht.x=m+"px"),ht.renderTransform(1,ht)):(Ze&&(et.deltaY=v-parseFloat(t.style.top||0),t.style.top=v+"px"),Je&&(et.deltaX=m-parseFloat(t.style.left||0),t.style.left=m+"px")),!d||n||te||(te=!0,!1===Be(et,"drag","onDrag")&&(Je&&(et.x-=et.deltaX),Ze&&(et.y-=et.deltaY),e(!0)),te=!1)}w=!1},gt=function(e,n){var r,i,o=et.x,s=et.y;t._gsap||(ht=A.core.getCache(t)),ht.uncache&&A.getProperty(t,"x"),Ne?(et.x=parseFloat(ht.x),et.y=parseFloat(ht.y)):Ge?et.x=et.rotation=parseFloat(ht.rotation):a?(et.y=a.top(),et.x=a.left()):(et.y=parseFloat(t.style.top||(i=Fe(t))&&i.top)||0,et.x=parseFloat(t.style.left||(i||{}).left)||0),(S||R||P)&&!n&&(et.isDragging||et.isThrowing)&&(P&&(ve.x=et.x,ve.y=et.y,(r=P(ve)).x!==et.x&&(et.x=r.x,w=!0),r.y!==et.y&&(et.y=r.y,w=!0)),S&&(r=S(et.x))!==et.x&&(et.x=r,Ge&&(et.rotation=r),w=!0),R&&((r=R(et.y))!==et.y&&(et.y=r),w=!0)),w&&vt(!0),e||(et.deltaX=et.x-o,et.deltaY=et.y-s,Be(et,"throwupdate","onThrowUpdate"))},yt=function(e,t,n,r){return null==t&&(t=-le),null==n&&(n=le),Z(e)?function(i){var o=et.isPressed?1-et.edgeResistance:1;return e.call(et,(i>n?n+(i-n)*o:i<t?t+(i-t)*o:i)*r)*r}:oe(e)?function(r){for(var i,o,a=e.length,s=0,l=le;--a>-1;)(o=(i=e[a])-r)<0&&(o=-o),o<l&&i>=t&&i<=n&&(s=a,l=o);return e[s]}:isNaN(e)?function(e){return e}:function(){return e*r}},_t=function(){var e,r,i,o;h=!1,a?(a.calibrate(),et.minX=m=-a.maxScrollLeft(),et.minY=g=-a.maxScrollTop(),et.maxX=f=et.maxY=v=0,h=!0):n.bounds&&(e=Ue(n.bounds,t.parentNode),Ge?(et.minX=m=e.left,et.maxX=f=e.left+e.width,et.minY=g=et.maxY=v=0):ee(n.bounds.maxX)&&ee(n.bounds.maxY)?(r=Ue(t,t.parentNode),et.minX=m=Math.round(pt(Ke,"px")+e.left-r.left),et.minY=g=Math.round(pt($e,"px")+e.top-r.top),et.maxX=f=Math.round(m+(e.width-r.width)),et.maxY=v=Math.round(g+(e.height-r.height))):(e=n.bounds,et.minX=m=e.minX,et.minY=g=e.minY,et.maxX=f=e.maxX,et.maxY=v=e.maxY),m>f&&(et.minX=f,et.maxX=f=m,m=et.minX),g>v&&(et.minY=v,et.maxY=v=g,g=et.minY),Ge&&(et.minRotation=m,et.maxRotation=f),h=!0),n.liveSnap&&(i=!0===n.liveSnap?n.snap||{}:n.liveSnap,o=oe(i)||Z(i),Ge?(S=yt(o?i:i.rotation,m,f,1),R=null):i.points?P=function(e,t,n,r,i,o,a){return o=o&&o<le?o*o:le,Z(e)?function(s){var l,c,u,h=et.isPressed?1-et.edgeResistance:1,d=s.x,p=s.y;return s.x=d=d>n?n+(d-n)*h:d<t?t+(d-t)*h:d,s.y=p=p>i?i+(p-i)*h:p<r?r+(p-r)*h:p,(l=e.call(et,s))!==s&&(s.x=l.x,s.y=l.y),1!==a&&(s.x*=a,s.y*=a),o<le&&(c=s.x-d)*c+(u=s.y-p)*u>o&&(s.x=d,s.y=p),s}:oe(e)?function(t){for(var n,r,i,a,s=e.length,l=0,c=le;--s>-1;)(a=(n=(i=e[s]).x-t.x)*n+(r=i.y-t.y)*r)<c&&(l=s,c=a);return c<=o?e[l]:t}:function(e){return e}}(o?i:i.points,m,f,g,v,i.radius,a?-1:1):(Je&&(S=yt(o?i:i.x||i.left||i.scrollLeft,m,f,a?-1:1)),Ze&&(R=yt(o?i:i.y||i.top||i.scrollTop,g,v,a?-1:1))))},bt=function(){et.isThrowing=!1,Be(et,"throwcomplete","onThrowComplete")},wt=function(){et.isThrowing=!1},xt=function(e,r){var i,o,s,l;e&&G?(!0===e&&(i=n.snap||n.liveSnap||{},o=oe(i)||Z(i),e={resistance:(n.throwResistance||n.resistance||1e3)/(Ge?10:1)},Ge?e.rotation=He(et,o?i:i.rotation,f,m,1,r):(Je&&(e[Ke]=He(et,o?i:i.points||i.x||i.left,f,m,a?-1:1,r||"x"===et.lockedAxis)),Ze&&(e[$e]=He(et,o?i:i.points||i.y||i.top,v,g,a?-1:1,r||"y"===et.lockedAxis)),(i.points||oe(i)&&Q(i[0]))&&(e.linkedProps=Ke+","+$e,e.radius=i.radius))),et.isThrowing=!0,l=isNaN(n.overshootTolerance)?1===n.edgeResistance?0:1-et.edgeResistance+.2:n.overshootTolerance,e.duration||(e.duration={max:Math.max(n.minDuration||0,"maxDuration"in n?n.maxDuration:2),min:isNaN(n.minDuration)?0===l||Q(e)&&e.resistance>1e3?0:.5:n.minDuration,overshoot:l}),et.tween=s=A.to(a||t,{inertia:e,data:"_draggable",inherit:!1,onComplete:bt,onInterrupt:wt,onUpdate:n.fastMode?Be:gt,onUpdateParams:n.fastMode?[et,"onthrowupdate","onThrowUpdate"]:i&&i.radius?[!1,!0]:[]}),n.fastMode||(a&&(a._skip=!0),s.render(1e9,!0,!0),gt(!0,!0),et.endX=et.x,et.endY=et.y,Ge&&(et.endRotation=et.x),s.play(0),gt(!0,!0),a&&(a._skip=!1))):h&&et.applyBounds()},St=function(e){var n,r=Y;Y=k(t.parentNode,!0),e&&et.isPressed&&!Y.equals(r||new E)&&(n=r.inverse().apply({x:s,y:l}),Y.apply(n,n),s=n.x,l=n.y),Y.equals(ce)&&(Y=null)},Et=function(){var e,n,r,i=1-et.edgeResistance,o=dt?Me(ft):0,d=dt?Ce(ft):0;Ne&&(ht.x=pt(Ke,"px")+"px",ht.y=pt($e,"px")+"px",ht.renderTransform()),St(!1),ze.x=et.pointerX-o,ze.y=et.pointerY-d,Y&&Y.apply(ze,ze),s=ze.x,l=ze.y,w&&(Mt(et.pointerX,et.pointerY),vt(!0)),we=k(t),a?(_t(),u=a.top(),c=a.left()):(kt()?(gt(!0,!0),_t()):et.applyBounds(),Ge?(e=t.ownerSVGElement?[ht.xOrigin-t.getBBox().x,ht.yOrigin-t.getBBox().y]:(Fe(t)[re]||"0 0").split(" "),b=et.rotationOrigin=k(t).apply({x:parseFloat(e[0])||0,y:parseFloat(e[1])||0}),gt(!0,!0),n=et.pointerX-b.x-o,r=b.y-et.pointerY+d,c=et.x,u=et.y=Math.atan2(r,n)*se):(u=pt($e,"px"),c=pt(Ke,"px"))),h&&i&&(c>f?c=f+(c-f)/i:c<m&&(c=m-(m-c)/i),Ge||(u>v?u=v+(u-v)/i:u<g&&(u=g-(g-u)/i))),et.startX=c=ie(c),et.startY=u=ie(u)},kt=function(){return et.tween&&et.tween.isActive()},Tt=function(){!I.parentNode||kt()||et.isDragging||I.parentNode.removeChild(I)},At=function(e,i){var c;if(!o||et.isPressed||!e||!("mousedown"!==e.type&&"pointerdown"!==e.type||i)&&ue()-ut<30&&B[et.pointerEvent.type])fe&&e&&o&&ke(e);else{if(X=kt(),Te=!1,et.pointerEvent=e,B[e.type]?(N=~e.type.indexOf("touch")?e.currentTarget||e.target:ft,Se(N,"touchend",Lt),Se(N,"touchmove",Ct),Se(N,"touchcancel",Lt),Se(ft,"touchstart",Ae)):(N=null,Se(ft,"mousemove",Ct)),J=null,q&&N||(Se(ft,"mouseup",Lt),e&&e.target&&Se(e.target,"mouseup",Lt)),O=ct.call(et,e.target)&&!1===n.dragClickables&&!i)return Se(e.target,"change",Lt),Be(et,"pressInit","onPressInit"),Be(et,"press","onPress"),Ve(tt,!0),void(fe=!1);var u;if($=!(!N||Je===Ze||!1===et.vars.allowNativeTouchScrolling||et.vars.allowContextMenu&&e&&(e.ctrlKey||e.which>2))&&(Je?"y":"x"),(fe=!$&&!et.allowEventDefault)&&(ke(e),Se(C,"touchforcechange",ke)),e.changedTouches?(e=y=e.changedTouches[0],_=e.identifier):e.pointerId?_=e.pointerId:y=_=null,K++,u=vt,he.push(u),1===he.length&&A.ticker.add(be),l=et.pointerY=e.pageY,s=et.pointerX=e.pageX,Be(et,"pressInit","onPressInit"),($||et.autoScroll)&&De(t.parentNode),!t.parentNode||!et.autoScroll||a||Ge||!t.parentNode._gsMaxScrollX||I.parentNode||t.getBBox||(I.style.width=t.parentNode.scrollWidth+"px",t.parentNode.appendChild(I)),Et(),et.tween&&et.tween.kill(),et.isThrowing=!1,A.killTweensOf(a||t,nt,!0),a&&A.killTweensOf(t,{scrollTo:1},!0),et.tween=et.lockedAxis=null,(n.zIndexBoost||!Ge&&!a&&!1!==n.zIndexBoost)&&(t.style.zIndex=r.zIndex++),et.isPressed=!0,d=!(!n.onDrag&&!et._listeners.drag),p=!(!n.onMove&&!et._listeners.move),!1!==n.cursor||n.activeCursor)for(c=tt.length;--c>-1;)A.set(tt[c],{cursor:n.activeCursor||n.cursor||("grab"===H?"grabbing":H)});Be(et,"press","onPress")}},Ct=function(e){var n,r,i,a,c,u,h=e;if(o&&!U&&et.isPressed&&e){if(et.pointerEvent=e,n=e.changedTouches){if((e=n[0])!==y&&e.identifier!==_){for(a=n.length;--a>-1&&(e=n[a]).identifier!==_&&e.target!==t;);if(a<0)return}}else if(e.pointerId&&_&&e.pointerId!==_)return;N&&$&&!J&&(ze.x=e.pageX-(dt?Me(ft):0),ze.y=e.pageY-(dt?Ce(ft):0),Y&&Y.apply(ze,ze),r=ze.x,i=ze.y,((c=Math.abs(r-s))!==(u=Math.abs(i-l))&&(c>Qe||u>Qe)||z&&$===J)&&(J=c>u&&Je?"x":"y",$&&J!==$&&Se(C,"touchforcechange",ke),!1!==et.vars.lockAxisOnTouchScroll&&Je&&Ze&&(et.lockedAxis="x"===J?"y":"x",Z(et.vars.onLockAxis)&&et.vars.onLockAxis.call(et,h)),z&&$===J))?Lt(h):(et.allowEventDefault||$&&(!J||$===J)||!1===h.cancelable?fe&&(fe=!1):(ke(h),fe=!0),et.autoScroll&&(it=!0),Mt(e.pageX,e.pageY,p))}else fe&&e&&o&&ke(e)},Mt=function(e,t,n){var r,i,o,a,d,p,y=1-et.dragResistance,_=1-et.edgeResistance,x=et.pointerX,E=et.pointerY,k=u,T=et.x,A=et.y,C=et.endX,M=et.endY,L=et.endRotation,I=w;et.pointerX=e,et.pointerY=t,dt&&(e-=Me(ft),t-=Ce(ft)),Ge?(a=Math.atan2(b.y-t,e-b.x)*se,(d=et.y-a)>180?(u-=360,et.y=a):d<-180&&(u+=360,et.y=a),et.x!==c||Math.abs(u-a)>Qe?(et.y=a,o=c+(u-a)*y):o=c):(Y&&(p=e*Y.a+t*Y.c+Y.e,t=e*Y.b+t*Y.d+Y.f,e=p),(i=t-l)<Qe&&i>-Qe&&(i=0),(r=e-s)<Qe&&r>-Qe&&(r=0),(et.lockAxis||et.lockedAxis)&&(r||i)&&((p=et.lockedAxis)||(et.lockedAxis=p=Je&&Math.abs(r)>Math.abs(i)?"y":Ze?"x":null,p&&Z(et.vars.onLockAxis)&&et.vars.onLockAxis.call(et,et.pointerEvent)),"y"===p?i=0:"x"===p&&(r=0)),o=ie(c+r*y),a=ie(u+i*y)),(S||R||P)&&(et.x!==o||et.y!==a&&!Ge)&&(P&&(ve.x=o,ve.y=a,p=P(ve),o=ie(p.x),a=ie(p.y)),S&&(o=ie(S(o))),R&&(a=ie(R(a)))),h&&(o>f?o=f+Math.round((o-f)*_):o<m&&(o=m+Math.round((o-m)*_)),Ge||(a>v?a=Math.round(v+(a-v)*_):a<g&&(a=Math.round(g+(a-g)*_)))),(et.x!==o||et.y!==a&&!Ge)&&(Ge?(et.endRotation=et.x=et.endX=o,w=!0):(Ze&&(et.y=et.endY=a,w=!0),Je&&(et.x=et.endX=o,w=!0)),n&&!1===Be(et,"move","onMove")?(et.pointerX=x,et.pointerY=E,u=k,et.x=T,et.y=A,et.endX=C,et.endY=M,et.endRotation=L,w=I):!et.isDragging&&et.isPressed&&(et.isDragging=Te=!0,Be(et,"dragstart","onDragStart")))},Lt=function e(r,i){if(o&&et.isPressed&&(!r||null==_||i||!(r.pointerId&&r.pointerId!==_&&r.target!==t||r.changedTouches&&!function(e,t){for(var n=e.length;n--;)if(e[n].identifier===t)return!0}(r.changedTouches,_)))){et.isPressed=!1;var a,s,l,c,u,h=r,d=et.isDragging,p=et.vars.allowContextMenu&&r&&(r.ctrlKey||r.which>2),f=A.delayedCall(.001,Tt);if(N?(Ee(N,"touchend",e),Ee(N,"touchmove",Ct),Ee(N,"touchcancel",e),Ee(ft,"touchstart",Ae)):Ee(ft,"mousemove",Ct),Ee(C,"touchforcechange",ke),q&&N||(Ee(ft,"mouseup",e),r&&r.target&&Ee(r.target,"mouseup",e)),w=!1,d&&(rt=me=ue(),et.isDragging=!1),xe(vt),O&&!p)return r&&(Ee(r.target,"change",e),et.pointerEvent=h),Ve(tt,!1),Be(et,"release","onRelease"),Be(et,"click","onClick"),void(O=!1);for(s=tt.length;--s>-1;)Oe(tt[s],"cursor",n.cursor||(!1!==n.cursor?H:null));if(K--,r){if((a=r.changedTouches)&&(r=a[0])!==y&&r.identifier!==_){for(s=a.length;--s>-1&&(r=a[s]).identifier!==_&&r.target!==t;);if(s<0&&!i)return}et.pointerEvent=h,et.pointerX=r.pageX,et.pointerY=r.pageY}return p&&h?(ke(h),fe=!0,Be(et,"release","onRelease")):h&&!d?(fe=!1,X&&(n.snap||n.bounds)&&xt(n.inertia||n.throwProps),Be(et,"release","onRelease"),z&&"touchmove"===h.type||-1!==h.type.indexOf("cancel")||(Be(et,"click","onClick"),ue()-ut<300&&Be(et,"doubleclick","onDoubleClick"),c=h.target||t,ut=ue(),u=function(){ut===ne||!et.enabled()||et.isPressed||h.defaultPrevented||(c.click?c.click():ft.createEvent&&((l=ft.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,C,1,et.pointerEvent.screenX,et.pointerEvent.screenY,et.pointerX,et.pointerY,!1,!1,!1,!1,0,null),c.dispatchEvent(l)))},z||h.defaultPrevented||A.delayedCall(.05,u))):(xt(n.inertia||n.throwProps),et.allowEventDefault||!h||!1===n.dragClickables&&ct.call(et,h.target)||!d||$&&(!J||$!==J)||!1===h.cancelable?fe=!1:(fe=!0,ke(h)),Be(et,"release","onRelease")),kt()&&f.duration(et.tween.duration()),d&&Be(et,"dragend","onDragEnd"),!0}fe&&r&&o&&ke(r)},Rt=function(e){if(e&&et.isDragging&&!a){var n=e.target||t.parentNode,r=n.scrollLeft-n._gsScrollX,i=n.scrollTop-n._gsScrollY;(r||i)&&(Y?(s-=r*Y.a+i*Y.c,l-=i*Y.d+r*Y.b):(s-=r,l-=i),n._gsScrollX+=r,n._gsScrollY+=i,Mt(et.pointerX,et.pointerY))}},Pt=function(e){var t=ue(),n=t-ut<100,r=t-rt<50,i=n&&ne===ut,o=et.pointerEvent&&et.pointerEvent.defaultPrevented,a=n&&ae===ut,s=e.isTrusted||null==e.isTrusted&&n&&i;if((i||r&&!1!==et.vars.suppressClickOnDrag)&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),n&&(!et.pointerEvent||!et.pointerEvent.defaultPrevented)&&(!i||s&&!a))return s&&i&&(ae=ut),void(ne=ut);(et.isPressed||r||n)&&(s&&e.detail&&n&&!o||ke(e)),n||r||Te||(e&&e.target&&(et.pointerEvent=e),Be(et,"click","onClick"))},It=function(e){return Y?{x:e.x*Y.a+e.y*Y.c+Y.e,y:e.x*Y.b+e.y*Y.d+Y.f}:{x:e.x,y:e.y}};return(x=r.get(t))&&x.kill(),i.startDrag=function(e,n){var r,i,o,a;At(e||et.pointerEvent,!0),n&&!et.hitTest(e||et.pointerEvent)&&(r=je(e||et.pointerEvent),i=je(t),o=It({x:r.left+r.width/2,y:r.top+r.height/2}),a=It({x:i.left+i.width/2,y:i.top+i.height/2}),s-=o.x-a.x,l-=o.y-a.y),et.isDragging||(et.isDragging=Te=!0,Be(et,"dragstart","onDragStart"))},i.drag=Ct,i.endDrag=function(e){return Lt(e||et.pointerEvent,!0)},i.timeSinceDrag=function(){return et.isDragging?0:(ue()-rt)/1e3},i.timeSinceClick=function(){return(ue()-ut)/1e3},i.hitTest=function(e,t){return r.hitTest(et.target,e,t)},i.getDirection=function(e,n){var r,i,o,a,s,l,h="velocity"===e&&G?e:Q(e)&&!Ge?"element":"start";return"element"===h&&(s=je(et.target),l=je(e)),r="start"===h?et.x-c:"velocity"===h?G.getVelocity(t,Ke):s.left+s.width/2-(l.left+l.width/2),Ge?r<0?"counter-clockwise":"clockwise":(n=n||2,i="start"===h?et.y-u:"velocity"===h?G.getVelocity(t,$e):s.top+s.height/2-(l.top+l.height/2),a=(o=Math.abs(r/i))<1/n?"":r<0?"left":"right",o<n&&(""!==a&&(a+="-"),a+=i<0?"up":"down"),a)},i.applyBounds=function(e,r){var i,o,a,s,l,c;if(e&&n.bounds!==e)return n.bounds=e,et.update(!0,r);if(gt(!0),_t(),h&&!kt()){if(i=et.x,o=et.y,i>f?i=f:i<m&&(i=m),o>v?o=v:o<g&&(o=g),(et.x!==i||et.y!==o)&&(a=!0,et.x=et.endX=i,Ge?et.endRotation=i:et.y=et.endY=o,w=!0,vt(!0),et.autoScroll&&!et.isDragging))for(De(t.parentNode),s=t,ge.scrollTop=null!=C.pageYOffset?C.pageYOffset:null!=ft.documentElement.scrollTop?ft.documentElement.scrollTop:ft.body.scrollTop,ge.scrollLeft=null!=C.pageXOffset?C.pageXOffset:null!=ft.documentElement.scrollLeft?ft.documentElement.scrollLeft:ft.body.scrollLeft;s&&!c;)l=(c=Pe(s.parentNode))?ge:s.parentNode,Ze&&l.scrollTop>l._gsMaxScrollY&&(l.scrollTop=l._gsMaxScrollY),Je&&l.scrollLeft>l._gsMaxScrollX&&(l.scrollLeft=l._gsMaxScrollX),s=l;et.isThrowing&&(a||et.endX>f||et.endX<m||et.endY>v||et.endY<g)&&xt(n.inertia||n.throwProps,a)}return et},i.update=function(e,n,r){if(n&&et.isPressed){var i=k(t),o=we.apply({x:et.x-c,y:et.y-u}),a=k(t.parentNode,!0);a.apply({x:i.e-o.x,y:i.f-o.y},o),et.x-=o.x-a.e,et.y-=o.y-a.f,vt(!0),Et()}var s=et.x,l=et.y;return St(!n),e?et.applyBounds():(w&&r&&vt(!0),gt(!0)),n&&(Mt(et.pointerX,et.pointerY),w&&vt(!0)),et.isPressed&&!n&&(Je&&Math.abs(s-et.x)>.01||Ze&&Math.abs(l-et.y)>.01&&!Ge)&&Et(),et.autoScroll&&(De(t.parentNode,et.isDragging),it=et.isDragging,vt(!0),Re(t,Rt),Le(t,Rt)),et},i.enable=function(e){var r,i,s,l={lazy:!0};if(!1!==n.cursor&&(l.cursor=n.cursor||H),A.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==e){for(_e(tt,Je===Ze?"none":n.allowNativeTouchScrolling&&t.scrollHeight===t.clientHeight==(t.scrollWidth===t.clientHeight)||n.allowEventDefault?"manipulation":Je?"pan-y":"pan-x"),i=tt.length;--i>-1;)s=tt[i],q||Se(s,"mousedown",At),Se(s,"touchstart",At),Se(s,"click",Pt,!0),A.set(s,l),s.getBBox&&s.ownerSVGElement&&Je!==Ze&&A.set(s.ownerSVGElement,{touchAction:n.allowNativeTouchScrolling||n.allowEventDefault?"manipulation":Je?"pan-y":"pan-x"}),n.allowContextMenu||Se(s,"contextmenu",mt);Ve(tt,!1)}return Le(t,Rt),o=!0,G&&"soft"!==e&&G.track(a||t,Ne?"x,y":Ge?"rotation":"top,left"),t._gsDragID=r="d"+pe++,de[r]=et,a&&(a.enable(),a.element._gsDragID=r),(n.bounds||Ge)&&Et(),n.bounds&&et.applyBounds(),et},i.disable=function(e){for(var n,r=et.isDragging,i=tt.length;--i>-1;)Oe(tt[i],"cursor",null);if("soft"!==e){for(_e(tt,null),i=tt.length;--i>-1;)n=tt[i],Oe(n,"touchCallout",null),Ee(n,"mousedown",At),Ee(n,"touchstart",At),Ee(n,"click",Pt,!0),Ee(n,"contextmenu",mt);Ve(tt,!0),N&&(Ee(N,"touchcancel",Lt),Ee(N,"touchend",Lt),Ee(N,"touchmove",Ct)),Ee(ft,"mouseup",Lt),Ee(ft,"mousemove",Ct)}return Re(t,Rt),o=!1,G&&"soft"!==e&&(G.untrack(a||t,Ne?"x,y":Ge?"rotation":"top,left"),et.tween&&et.tween.kill()),a&&a.disable(),xe(vt),et.isDragging=et.isPressed=O=!1,r&&Be(et,"dragend","onDragEnd"),et},i.enabled=function(e,t){return arguments.length?e?et.enable(t):et.disable(t):o},i.kill=function(){return et.isThrowing=!1,et.tween&&et.tween.kill(),et.disable(),A.set(tt,{clearProps:"userSelect"}),delete de[t._gsDragID],et},i.revert=function(){this.kill(),this.styles&&this.styles.revert()},~Ie.indexOf("scroll")&&(a=i.scrollProxy=new Ye(t,function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e}({onKill:function(){et.isPressed&&Lt(null)}},n)),t.style.overflowY=Ze&&!j?"auto":"hidden",t.style.overflowX=Je&&!j?"auto":"hidden",t=a.content),Ge?nt.rotation=1:(Je&&(nt[Ke]=1),Ze&&(nt[$e]=1)),ht.force3D=!("force3D"in n)||n.force3D,V(T(i)),i.enable(),i}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.register=function(e){A=e,Xe()},r.create=function(e,t){return D||Xe(!0),F(e).map((function(e){return new r(e,t)}))},r.get=function(e){return de[(F(e)[0]||{})._gsDragID]},r.timeSinceDrag=function(){return(ue()-me)/1e3},r.hitTest=function(e,t,n){if(e===t)return!1;var r,i,o,a=je(e),s=je(t),l=a.top,c=a.left,u=a.right,h=a.bottom,d=a.width,p=a.height,f=s.left>u||s.right<c||s.top>h||s.bottom<l;return f||!n?!f:(o=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,(r={left:Math.max(c,s.left),top:Math.max(l,s.top)}).width=Math.min(u,s.right)-r.left,r.height=Math.min(h,s.bottom)-r.top,!(r.width<0||r.height<0)&&(o?(n*=.01,(i=r.width*r.height)>=d*p*n||i>=s.width*s.height*n):r.width>n&&r.height>n))},r}(function(){function e(e){this._listeners={},this.target=e||this}var t=e.prototype;return t.addEventListener=function(e,t){var n=this._listeners[e]||(this._listeners[e]=[]);~n.indexOf(t)||n.push(t)},t.removeEventListener=function(e,t){var n=this._listeners[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},t.dispatchEvent=function(e){var t,n=this;return(this._listeners[e]||[]).forEach((function(r){return!1===r.call(n,{type:e,target:n.target})&&(t=!1)})),t},e}());!function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Ke.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Ke.zIndex=1e3,Ke.version="3.12.5",J()&&A.registerPlugin(Ke);var $e=n(4344),Je=n(7709),Ze=n(9018),Qe=n(259),et=n(4755);function tt(e){return tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tt(e)}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rt(r.key),r)}}function rt(e){var t=function(e,t){if("object"!=tt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=tt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==tt(t)?t:t+""}var it=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parent=t,this.height=0,this.obtain_height()},(t=[{key:"get_mobile_item_height",value:function(){return 55}},{key:"get_mobile_spacer_height",value:function(){return this.get_mobile_item_height()}},{key:"is_boutique",value:function(){return"boutique"===this.parent.navType}},{key:"is_dealer",value:function(){return"dealer"===this.parent.navType}},{key:"is_generic",value:function(){return"generic"===this.parent.navType}},{key:"is_dropdown",value:function(){return"dropdown"===this.parent.navType}},{key:"obtain_totallinks",value:function(){this.totallinks=parseInt(this.parent.mobDropdownBg.getAttribute("totallinks")),this.totallinks_languages=parseInt(this.parent.mobDropdownBg.getAttribute("totallinkslanguages"))}},{key:"adapt_links_to_boutique",value:function(){this.totallinks-=1}},{key:"adapt_links_to_generic",value:function(){this.totallinks+=1}},{key:"adapt_links_to_dropdown",value:function(){this.totallinks+=1}},{key:"adapt_links_to_type",value:function(){this.is_boutique()&&this.adapt_links_to_boutique(),this.is_generic()&&this.adapt_links_to_generic(),this.is_dropdown()&&this.adapt_links_to_dropdown()}},{key:"adapt_height_to_dealer",value:function(){this.totallinks_languages>1&&(this.height+=this.totallinks_languages*this.get_mobile_item_height()+this.get_mobile_spacer_height())}},{key:"adapt_height_to_type",value:function(){this.is_dealer()&&this.adapt_height_to_dealer()}},{key:"calculate_height",value:function(){this.height=this.totallinks*this.get_mobile_item_height()}},{key:"obtain_height",value:function(){this.obtain_totallinks(),this.adapt_links_to_type(),this.calculate_height(),this.adapt_height_to_type()}},{key:"get",value:function(){return this.height}}])&&nt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),ot=n(7455);function at(e,t,n){return t=lt(t),function(e,t){if(t&&("object"==ht(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,st()?Reflect.construct(t,n||[],lt(e).constructor):t.apply(e,n))}function st(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(st=function(){return!!e})()}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ct(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ut(e,t)}function ut(e,t){return ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ut(e,t)}function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,mt(r.key),r)}}function ft(e,t,n){return t&&pt(e.prototype,t),n&&pt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function mt(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ht(t)?t:t+""}var vt=function(){function e(){var t=this;dt(this,e),this.wrapper=document.querySelector(".rrmc-secondary-nav--menu-wrapper"),this.dropdown=document.querySelector(".rrmc-secondary-nav--models-dropdown"),this.dropdownBg=document.querySelector(".rrmc-secondary-nav--models-dropdown-bg"),this.linksWrapper=this.wrapper.querySelector(".rrmc-secondary-nav-models-links-container"),this.dropdownCta=document.querySelector(".rrmc-secondary-nav-dropdown-cta"),this.mobDropdownCta=document.querySelector(".rrmc-secondary-nav-dropdown-cta-mobile"),this.mobDropdownBg=document.querySelector(".rrmc-secondary-nav--menu-mobile"),this.scrollHint=this.wrapper.querySelector(".rrmc-secondary-nav-scroller-right"),this.desktopArrow=this.wrapper.querySelector(".rrmc-secondary-nav-arrow-desktop"),this.mobileArrow=this.wrapper.querySelector(".rrmc-secondary-nav-arrow-mobile"),this.mobileBackgroundBlur=document.querySelector(".mobile-nav-background-blur"),this.elm_empty_list=this.wrapper.querySelector(".js-rrmc-secondary-nav-models-link--empty"),this.elm_empty_list&&(this.path_empty_list=this.elm_empty_list.getAttribute("href")),this.elm_my_list=this.wrapper.querySelector(".js-rrmc-secondary-nav-models-link--list"),this.elm_my_list&&(this.path_my_list=this.elm_my_list.getAttribute("href")),this.mobVisible=!1,this.desktopVisible=!1,this.navType=this.wrapper.getAttribute("data-nav").trim(),this.draggableSetup=!1,this.isIE=(0,Ze.en)(),this.windowWidth=window.innerWidth,this.mobileHeight=new it(this),this.save_current_page_path(),this.currentPath=(window.location.pathname.match(/(.*)[a-z]{2}_[A-Z]{2}/g)||["en_GB"])[0],this.forceMobileDropdownClose=function(){t.mobVisible&&t.dropdownMobile(null,!0)},this.dropdownMobile=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.mobVisible?0:t.mobileHeight.get();f.uo.to(t.mobDropdownBg,.5,{height:r,autoRound:!1,ease:f.WG.easeNone}),f.uo.to(t.mobileArrow,.33,{rotation:180,ease:f.WG.easeNone}),t.mobVisible?((0,et.clearAllBodyScrollLocks)(),f.uo.to(t.mobileArrow,.33,{rotation:0,ease:f.WG.easeNone}),f.uo.to(t.mobileBackgroundBlur,.5,{opacity:0,onComplete:function(){f.uo.set([t.mobileBackgroundBlur,t.mobDropdownBg],{display:"none"})}})):(f.uo.set(t.mobileBackgroundBlur,{display:"block"}),t.isIE?f.uo.set(t.mobDropdownBg,{display:"-ms-grid"}):f.uo.set(t.mobDropdownBg,{display:"grid"}),f.uo.to(t.mobileBackgroundBlur,.5,{opacity:1}),(0,et.disableBodyScroll)(t.mobDropdownBg)),t.mobVisible=!t.mobVisible,n||(Qe.fg(),Qe.Gx({event:"secondaryNavClick",eventCategory:"Secondary Nav",eventAction:"Top Click",eventLabel:e.target.innerText.toLowerCase()}))},this.dropdownDesktop=function(e){var n=t.desktopVisible?0:60;f.uo.to(t.dropdownBg,.5,{height:n,autoRound:!1,ease:f.WG.easeNone}),f.uo.to(t.desktopArrow,.33,{rotation:180,ease:f.WG.easeNone}),t.desktopVisible&&(t.scrollReset(),f.uo.to(t.desktopArrow,.33,{rotation:0,ease:f.WG.easeNone})),t.desktopVisible=!t.desktopVisible,Qe.fg(),Qe.Gx({event:"secondaryNavClick",eventCategory:"Secondary Nav",eventAction:"Top Click",eventLabel:e.target.innerText.toLowerCase()})},this.topClickHandler=function(e){e.preventDefault();var n=e.target.getAttribute("href");if(e.target instanceof HTMLAnchorElement){var r=t.make_dropdown_label(e.target);Qe.Gx({event:"secondaryNavClick",eventCategory:"Secondary Nav",eventAction:"Top Click",eventLabel:r,eventCallback:function(){window.location=n},eventTimeout:2e3})}},this.make_dropdown_label=function(e){var t=e.getAttribute("data-type"),n=e.innerText.toLowerCase();return"language"===t?"language: ".concat(n):n},this.bottomClickHandler=function(e){e.preventDefault();var n=e.target.getAttribute("href");if(e.target instanceof HTMLAnchorElement){var r=t.make_dropdown_label(e.target);Qe.Gx({event:"secondaryNavSubClick",eventCategory:"Secondary Nav",eventAction:"Sub Click",eventLabel:r,eventCallback:function(){window.location=n},eventTimeout:2e3})}},this.hideHint=function(){f.uo.to(t.scrollHint,.5,{opacity:0})},this.scrollRight=function(){t.dropdown.scrollLeft=1e3,t.hideHint()},this.draggable=function(){"models"===t.navType?t.draggableObj=Ke.create(t.dropdown,{edgeResistance:.5,type:"scrollLeft",throwProps:!1,cursor:"none",onDragStart:t.hideHint}):(t.draggableObj=Ke.create(t.linksWrapper,{edgeResistance:.5,type:"scrollLeft",throwProps:!1,cursor:"none"}),t.linksWrapper.scrollLeft=1e3),f.uo.set([t.linksWrapper,t.dropdown],{overflow:"hidden",cursor:"none"})},this.closeAllDropdowns=function(){var e=[];t.mobDropdownBg&&e.push(t.mobDropdownBg),t.dropdownBg&&e.push(t.dropdownBg),f.uo.to(e,.5,{height:0,autoRound:!1,onComplete:function(){var e=[];t.mobileBackgroundBlur&&e.push(t.mobileBackgroundBlur),t.mobDropdownBg&&e.push(t.mobDropdownBg),f.uo.set(e,{display:"none"})}}),t.mobVisible=!1,t.desktopVisible=!1,t.scrollReset();var n=[];t.desktopArrow&&n.push(t.desktopArrow),t.mobileArrow&&n.push(t.mobileArrow),f.uo.to(n,.5,{rotation:0,ease:f.WG.easeNone})},this.scrollReset=function(){f.uo.set(t.dropdown,{clearProps:"transform"}),f.uo.to(t.scrollHint,.5,{opacity:1}),t.dropdown.scrollLeft=0},this.handleOverlay=function(e){e.preventDefault();var t=e.target,n=t.getAttribute("data-action"),r=t.getAttribute("data-overlay");p.A.sub_overlay_manager_bus.next({action:n,data:{overlayName:r}})},this.renderMyList=function(e){var n=e.data,r=n?n.length:0;r>0?t.elm_my_list.setAttribute("href",t.path_my_list):t.elm_my_list.setAttribute("href",t.path_empty_list);var i=t.wrapper.querySelector(".rrmc-secondary-nav-list");t.accTotal=t.wrapper.querySelectorAll(".rrmc-secondary-nav-list--total"),[].slice.call(t.accTotal).forEach((function(e){return e.innerHTML=r})),i.classList.contains("my-list-disabled")&&i.classList.remove("my-list-disabled")},this.checkForMyList=function(e){var n=e.epaas,r=n.getPersistence("wishlistLongterm")||n.getPersistence("wishlistSession")||[],i=JSON.parse(r);i>0?t.renderMyList(i):t.wrapper.querySelector(".rrmc-secondary-nav-list").classList.add("my-list-disabled")}}return ft(e,[{key:"get_locale_and_page",value:function(e){return e.split("/").slice(-2).join("/").split("?").pop()}},{key:"save_current_page_path",value:function(){this.currentPage=this.get_locale_and_page(window.location.pathname)}},{key:"load",value:function(){var e=this,t=this.wrapper.querySelectorAll(".rrmc-secondary-nav-models-link");if(this.hook_before_load(),p.A.sub_mobile_menu.subscribe({next:this.forceMobileDropdownClose}),[].slice.call(t).forEach((function(t){if(t.getAttribute("data-action"))return t.addEventListenerRR("click",e.topClickHandler),void t.addEventListenerRR("click",(function(t){return e.handleOverlay(t)}));e.hook_link_modifier(t),e.get_locale_and_page(t.href)===e.currentPage?(t.classList.add("active"),t.addEventListenerRR("click",(function(e){return e.preventDefault()}))):t.addEventListenerRR("click",e.topClickHandler)})),this.dropdown){this.hook_dropdown_setup();var n=this.dropdown.querySelectorAll("a");[].slice.call(n).forEach((function(e){e.addEventListenerRR("mouseover",(function(){p.A.sub_cursor.next(["scale_cta","enter"])})),e.addEventListenerRR("mouseleave",(function(){p.A.sub_cursor.next(["scale","leave"])}))})),this.mobDropdownCta.addEventListenerRR("click",this.dropdownMobile),window.addEventListenerRR("resize",(function(){var t=window.innerWidth;e.windowWidth!==t&&(e.closeAllDropdowns(),e.windowWidth=t),e.dropdown.addEventListenerRR("click",e.bottomClickHandler)}))}}},{key:"hook_link_modifier",value:function(){}},{key:"hook_dropdown_setup",value:function(){}},{key:"hook_before_load",value:function(){}}],[{key:"get_navigation_type",value:function(){return document.querySelector(".rrmc-secondary-nav--menu-wrapper").getAttribute("data-nav")}},{key:"is_navigation_type_dealer",value:function(){return"dealer"===e.get_navigation_type()}},{key:"is_navigation_type_models",value:function(){return"models"===e.get_navigation_type()}},{key:"is_navigation_type_models_enq",value:function(){return"modelsEnq"===e.get_navigation_type()}},{key:"is_navigation_type_inspiring_greatness",value:function(){return"inspiring-greatness"===e.get_navigation_type()}},{key:"is_navigation_type_boutique",value:function(){return"boutique"===e.get_navigation_type()||"boutique-custom"===e.get_navigation_type()}},{key:"is_navigation_type_ownership",value:function(){return"ownership"===e.get_navigation_type()}},{key:"is_navigation_type_muse",value:function(){return"muse"===e.get_navigation_type()}},{key:"is_navigation_type_generic",value:function(){return"generic"===e.get_navigation_type()}},{key:"is_navigation_type_dropdown",value:function(){return"dropdown"===e.get_navigation_type()}},{key:"make_secondary_nav",value:function(){return e.is_navigation_type_dealer()?new gt:e.is_navigation_type_models()||e.is_navigation_type_models_enq()?new Et:e.is_navigation_type_inspiring_greatness()?new _t:e.is_navigation_type_boutique()?new yt:e.is_navigation_type_ownership()?new wt:e.is_navigation_type_muse()?new bt:e.is_navigation_type_generic()?new xt:e.is_navigation_type_dropdown()?new St:void 0}}])}(),gt=function(e){function t(){var e;return dt(this,t),(e=at(this,t)).flag_container=e.wrapper.querySelector(".js-rrmc-secondary-nav-link--flag"),e}return ct(t,e),ft(t,[{key:"hook_before_load",value:function(){if(this.flag_container){var e=this.flag_container.getAttribute("data-locale");this.flag_container.classList.add("iti__flag"),this.flag_container.classList.add($e.Nv[e]),f.uo.to(this.flag_container,1,{opacity:1,delay:1})}}},{key:"hook_dropdown_setup",value:function(){this.dropdownCta.addEventListenerRR("click",this.dropdownDesktop),this.scrollHint.addEventListenerRR("click",this.scrollRight)}}])}(vt),yt=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t,[{key:"hook_link_modifier",value:function(e){if("all accessories"===e.textContent.toLowerCase()){var t=Je.parse(location.search);if(t.models||t.categories){var n=e.getAttribute("href"),r={};t.models&&(r.models=t.models),t.categories&&(r.categories=t.categories);var i=Je.stringify(r);n+="?".concat(i),e.setAttribute("href",n)}}}},{key:"hook_before_load",value:function(){var e=this;p.A.sub_epaas.subscribe({next:function(t){e.checkForMyList(t)}}),p.A.sub_my_list_updated.subscribe({next:this.renderMyList})}},{key:"hook_dropdown_setup",value:function(){this.dropdownCta.addEventListenerRR("click",(function(){Qe.fg()}))}}])}(vt),_t=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t)}(vt),bt=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t,[{key:"hook_dropdown_setup",value:function(){this.dropdownCta.addEventListenerRR("click",(function(){Qe.fg()}))}}])}(vt),wt=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t)}(vt),xt=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t)}(vt),St=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t,[{key:"hook_dropdown_setup",value:function(){this.dropdownCta.addEventListenerRR("click",this.dropdownDesktop),this.scrollHint.addEventListenerRR("click",this.scrollRight)}}])}(vt),Et=function(e){function t(){return dt(this,t),at(this,t)}return ct(t,e),ft(t,[{key:"hook_dropdown_setup",value:function(){var e=this,t=r.reduce((function(t,n,r){var i=e.get_locale_and_page(n.path);return i===e.currentPage&&(n.path="javascript:void(0)"),"black-badge"===i?t+='<div class="rrmc-secnav-divider">|</div><a class="js-rrmc-secnav-model-dropdown-entry" href="'.concat(e.currentPath).concat(n.path,'.html" data-tracking-linkid="text¦').concat(r+1,"¦").concat(n.label.toLowerCase(),'¦internal link">').concat(n.label,"</a>"):n.allowedLocales.forEach((function(i){window.location.href.indexOf(i)>0&&n.secondaryMenu&&(t+='<a class="js-rrmc-secnav-model-dropdown-entry" href="'.concat(e.currentPath).concat(n.path,'.html" data-tracking-linkid="text¦').concat(r+1,"¦").concat(n.label.toLowerCase(),'¦internal link">').concat(n.label,"</a>"))})),t}),"");this.dropdown.innerHTML=t;var n=this.wrapper.querySelectorAll('[data-enq-id="secnav-enq-cta"]');n&&[].slice.call(n).forEach((function(e){e.addEventListenerRR("click",(function(e){p.A,ot.xb,Qe.fg(),Qe.Gx({event:"formOpen",eventCategory:"form",eventAction:"enquire",eventLabel:"open"}),e.preventDefault(),p.A.sub_overlay_manager_bus.next({data:{overlayName:"enquire"}})}))})),this.dropdownCta.addEventListenerRR("click",this.dropdownDesktop),this.scrollHint.addEventListenerRR("click",this.scrollRight)}}])}(vt);document.addEventListenerRR("DOMContentLoaded",(function(){document.querySelector(".rrmc-secondary-nav--menu-wrapper")&&(new vt.make_secondary_nav).load()}))},4241:(e,t,n)=>{"use strict";n.r(t);var r=n(5116),i=n(2862),o=n(5076),a=n(2725),s=n(2453);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(){c=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==l(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(l(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,a,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function u(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,s,"next",e)}function s(e){u(o,r,i,a,s,"throw",e)}a(void 0)}))}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function f(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var v=function(){return f((function e(t){var n=this;d(this,e),this.container=t,this.vertical_alignment_desktop=parseFloat(this.container.getAttribute("data-vertical-alignment-desktop")),this.vertical_alignment_tablet=parseFloat(this.container.getAttribute("data-vertical-alignment-tablet")),this.content=this.container.querySelector(".rrmc-section-adaptive-content-wrapper"),this.flag_video=this.container.hasAttribute("data-asset-video-on"),this.flag_mobile_bg_behaviour_background="background"===this.container.getAttribute("data-mobile-bg-behaviour"),this.elm_image=this.container.querySelector(".js-rrmc-section-adaptive-bg-img"),this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.elm_image&&(this.elm_image_img=this.container.querySelector(".rrmc-section-adaptive-bg-img")),this.elm_video=this.container.querySelector(".rrmc-section-adaptive-bg-video"),this.video_id=this.container.getAttribute("data-video-id"),this.video_mobile_id=this.container.getAttribute("data-video-mobile-id"),this.flag_bg_off=this.container.hasAttribute("data-bg-asset-off"),this.prev_is_media_layout_mobile=(0,r.S)();var l=this.container.getAttribute("data-experience");this.target_experience=s.he.makeExperienceList(l),this.set_top_margin=function(){if((0,r.S)())n.content.style.marginTop=null;else{var e=n.content.getBoundingClientRect().height,t=n.container.getBoundingClientRect().height-e,i=n.vertical_alignment_desktop;(0,r.h)()&&(i=n.vertical_alignment_tablet);var o=t*i;n.content.style.marginTop="".concat(o,"px")}},this.set_aspect_ratio=function(){if(n.flag_bg_off)return Promise.resolve();new Promise((function(e){n.flag_video?n.set_aspect_ratio_video(e):n.set_aspect_ratio_image(e)})).then((function(){n.on_resize()}))},this.set_aspect_ratio_image=function(e){(0,i.Il)(n.elm_image,(function(){e()}))},this.set_aspect_ratio_video=function(e){n.player=videojs(n.elm_video),n.player.reloadSourceOnError({errorInterval:5});var t=n.get_current_video_id(),r=n.player.getChild("errorDisplay");r.off(n.player,"error",r.open),r.dispose(),n.player.catalog.getVideo(t,(function(t,r){t&&console.log(t),n.player.catalog.load(r),0!=n.player.videoWidth()?e():n.player.on("loadeddata",(function(){(0,o.A)((function(){return 0!=n.player.videoWidth()}),(function(){e()}),n)})),n.player.play()}))},this.on_start_and_stop_video_on_scroll_after_loaded=function(){n.scroll_pos=window.pageYOffset,n.window_height=window.innerHeight,n.user_focus=n.scroll_pos+n.window_height/2;var e=n.container_top+n.container_height/2,t=e-n.window_height/1.75,r=e+n.window_height/1.75;n.user_focus>t&&n.user_focus<r?n.toggle_video_play_pause(!0):n.toggle_video_play_pause(!1)},this.toggle_video_play_pause=function(e){n.is_video_playing!==e&&(n.is_video_playing=e,e?n.player.play():n.player.pause())},this.load_asset=function(){(n.force_load||n.is_edit_mode||window.pageYOffset+window.innerHeight+300>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_asset),a.A.sub_height_resize.subscribe({next:function(){return n.on_resize()}}),n.set_aspect_ratio(),n.flag_video&&window.addEventListenerRR("scroll",n.on_start_and_stop_video_on_scroll_after_loaded))},this.on_resize_event=function(){var e=(0,r.S)();e!==n.prev_is_media_layout_mobile?n.load_asset():n.on_resize(),n.prev_is_media_layout_mobile=e},this.on_resize=function(){n.get_container_top(),n.set_container_aspect_ratio().then(n.set_top_margin)}}),[{key:"get_current_video_id",value:function(){return this.video_id&&this.video_mobile_id?(0,r.S)()?this.video_mobile_id:this.video_id:this.video_mobile_id||this.video_id}},{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset}},{key:"set_container_aspect_ratio_image",value:function(e){var t=this;(0,o.A)((function(){return 0!==t.elm_image_img.naturalWidth}),(function(){var n=t.elm_image_img,r=n.naturalWidth,i=n.naturalHeight/r;t.set_container_padding_top(i),e()}),this)}},{key:"set_container_aspect_ratio_video",value:function(e){if(this.player){var t=this.player.videoWidth(),n=this.player.videoHeight()/t;if(this.set_container_padding_top(n),this.flag_mobile_bg_behaviour_background&&(0,r.S)()){var i=this.container.getBoundingClientRect();this.container_width=i.width,this.container_height=i.height;var o=this.player.videoWidth(),a=this.player.videoHeight()/o,s=this.container_width*a;this.container_height>s?(this.elm_video.style.height="".concat(this.container_height,"px"),this.elm_video.style.width="".concat(this.container_height/a,"px")):(this.elm_video.style.height="".concat(this.container_width*a,"px"),this.elm_video.style.width="".concat(this.container_width,"px")),this.elm_video.style.paddingTop=""}else this.elm_video.style.height=null,this.elm_video.style.width=null,this.elm_video.style.paddingTop="".concat(100*n,"%");e()}else e()}},{key:"set_container_padding_top",value:function(e){(0,r.S)()?this.container.style.paddingTop=null:this.container.style.paddingTop="".concat(100*e,"%")}},{key:"set_container_aspect_ratio",value:function(){var e=this;return this.flag_bg_off?Promise.resolve():new Promise((function(t){e.flag_video?e.set_container_aspect_ratio_video(t):e.set_container_aspect_ratio_image(t)}))}},{key:"is_default_experience",value:function(){return this.target_experience.isDefaultExperience()}},{key:"test_matching_experience",value:(n=h(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.E3.makeStrategy(this.target_experience),e.abrupt("return",t.doesLiveCampaignMatch());case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"has_matching_evergage_experience",value:(t=h(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_edit_mode){e.next=2;break}return e.abrupt("return",!0);case 2:if(!this.is_default_experience()){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.test_matching_experience();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:(e=h(c().mark((function e(){var t=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.has_matching_evergage_experience();case 2:if(e.sent){e.next=7;break}return this.container.style.display="none",e.abrupt("return");case 7:this.get_container_top(),window.addEventListenerRR("resize",this.on_resize_event),window.addEventListenerRR("scroll",this.load_asset),this.load_asset(),a.A.sub_height_resize.subscribe({next:function(){return t.get_container_top()}}),this.subscription_broadcast=a.A.sub_broadcast.subscribe({next:function(e){"load"===e.action&&(t.force_load=!0,t.load_asset(),setTimeout((function(){t.subscription_broadcast.unsubscribe()})))}});case 13:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t,n}(),g=function(){return f((function e(){d(this,e),this.sections=document.querySelectorAll(".rrmc-section-adaptive")}),[{key:"load",value:function(){[].slice.call(this.sections).forEach((function(e){new v(e).load()}))}}])}();window.addEventListenerRR("load",(function(){(new g).load()}))},3796:(e,t,n)=>{"use strict";n.r(t);var r=n(1500),i=n(8607),o=n(2131),a=n.n(o),s=n(7709),l=(n(5127),n(9018)),c=n(259),u=n(6019),h=n(2725);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}(0,u.ScrollMagicPluginGsap)(a(),r.os);var g=function(){return m((function e(t){var n=this;p(this,e),this.sandbox=t.sandbox,this.index=t.index,this.video=this.sandbox.querySelector(".vjs-tech"),this.player=videojs.getPlayer(this.video),this.trigger=this.sandbox.querySelector(".rrmc-sticky-section-trigger"),this.pinnedSection=this.sandbox.querySelector(".rrmc-sticky-section-pinned"),this.videoWrapperMask=this.sandbox.querySelector(".js-rrmc-sticky-section-video-wrapper"),this.shader=this.sandbox.querySelector(".rrmc-sticky-section-shader"),this.desktopId=this.video.getAttribute("data-video-id-desktop"),this.mobileId=this.video.getAttribute("data-video-id-mobile"),this.scrollController,this.sectionContent=this.sandbox.querySelector(".rrmc-sticky-section-content"),this.userScrollAnimationRef=r.os.timeline({paused:!0}),this.currentWidth=window.innerWidth,this.shortAnimationON=this.sandbox.hasAttribute("data-short-animation"),this.sectionStickyTracking={firstPlay:!1,scrollTrack:!1},this.catchScroll=function(){window.scroll(0,window.scrollY)};var i=videojs(this.video),o=i.getChild("errorDisplay");o.off(i,"error",o.open),o.dispose(),("objectFit"in document.documentElement.style==0||(0,l.nK)())&&this.video.classList.add("video-obj-fit"),this.scrollHandler=function(){var e=videojs(n.videoWrapperMask),t=n.sandbox,i=t.getBoundingClientRect();t.offsetTop-window.scrollY<=0&&i.bottom>=window.innerHeight&&(document.body.classList.add("rrmc-sticky-section-video-stop-scrolling"),window.addEventListenerRR("touchend",n.catchScroll,{passive:!1}),e.play(),setTimeout((function(){r.os.timeline().set(n.sectionContent,{transform:" matrix(1, 0, 0, 1, 0, 0)"})}),100),!1===n.sectionStickyTracking.firstPlay&&(n.sectionStickyTracking.firstPlay=!0,c.Gx({event:"pinned-section-component",eventCategory:"pinned-section",eventAction:"vid-start",eventLabel:"position-".concat(n.index)})))},this.scrollHandlerReverse=function(){var e=n.sandbox,t=videojs(n.videoWrapperMask);e.offsetTop-window.scrollY>=window.innerHeight&&(t.currentTime(0),n.sectionContent.style.opacity=0,window.removeEventListenerRR("scroll",n.scrollHandlerReverse),window.addEventListenerRR("scroll",n.scrollHandler))}}),[{key:"startHeroVideo",value:function(){var e=this,t=function t(){videojs(e.video).paused()?setTimeout((function(){t()}),200):e.video.classList.add("rrmc-sticky-section-video-visible")},n=window.innerWidth>768?this.desktopId:this.mobileId;videojs.getPlayer(this.video).ready((function(){var e=this;e.catalog.getVideo(n,(function(t,n){e.catalog.load(n)})),t()}))}},{key:"init",value:function(){window.addEventListenerRR("scroll",this.scrollHandler)}},{key:"lockPageAtFirst",value:function(){$(document).ready((function(){history.scrollRestoration?history.scrollRestoration="manual":window.onbeforeunload=function(){window.scrollTo(0,0)}}))}},{key:"onVideoEnd",value:function(){var e=this,t=videojs(this.videoWrapperMask);t.on("play",(function(){c.ao.videoStarted((0,c.o)(t))})),t.on("ended",(function(){e.userScrollAnimationRef.progress(0),window.removeEventListenerRR("scroll",e.scrollHandler),window.addEventListenerRR("scroll",e.scrollHandlerReverse),window.removeEventListenerRR("touchend",e.catchScroll,{passive:!1}),document.body.classList.remove("rrmc-sticky-section-video-stop-scrolling"),e.sectionContent.style.opacity=1,c.ao.videoEnded((0,c.o)(t)),c.Gx({event:"pinned-section-component",eventCategory:"pinned-section",eventAction:"vid-end",eventLabel:"position-".concat(e.index)})}))}},{key:"sectionInView",value:function(){new IntersectionObserver(function(e){var t=this;e.forEach((function(e){e.isIntersecting&&t.player.paused()?t.shader.style.opacity=.5:t.shader.style.opacity=0}))}.bind(this),{root:null,threshold:.1}).observe(this.sectionContent)}},{key:"userScrollAnimation",value:function(){var e=this;this.userScrollAnimationRef=r.os.timeline({paused:!0});var t=r.os.timeline();t.fromTo(this.sectionContent,11,{y:0},{y:this.shortAnimationON?-Math.abs(this.sectionContent.scrollHeight):-Math.abs(window.innerHeight+this.sectionContent.scrollHeight-61),ease:i.WG.noEase}),this.userScrollAnimationRef.add(t),this.scrollController=new(a().Controller),new(a().Scene)({triggerElement:this.trigger,triggerHook:0,duration:2500}).setPin(this.pinnedSection).setTween(this.userScrollAnimationRef).addTo(this.scrollController).on("end",(function(t){t.progress=0,!1===e.sectionStickyTracking.scrollTrack&&(e.sectionStickyTracking.scrollTrack=!0,c.Gx({event:"pinned-section-component",eventCategory:"pinned-section",eventAction:"scroll-end",eventLabel:"position-".concat(e.index)}))}))}},{key:"load",value:function(){this.startHeroVideo(),this.scrollHandler(),this.sectionInView(),this.lockPageAtFirst(),this.init(),this.userScrollAnimation(),this.onVideoEnd(),window.addEventListenerRR("resize",function(){this.currentWidth!==window.innerWidth&&(this.currentWidth=window.innerWidth,this.scrollController.destroy(!0),this.userScrollAnimation())}.bind(this))}}])}(),y=function(){return m((function e(){p(this,e),this.sections=document.querySelectorAll(".js-rrmc-sticky-section-video"),this.index=0}),[{key:"loadSectionStickyVideos",value:function(){var e=this;[].slice.call(this.sections).forEach((function(t){e.index++,new g({sandbox:t,index:e.index}).load()}))}},{key:"load",value:function(){var e=this;s.parse(location.search).focus?this.subscription_broadcast=h.A.sub_broadcast.subscribe({next:function(t){"focus"===t.action&&(e.loadSectionStickyVideos(),setTimeout((function(){e.subscription_broadcast.unsubscribe()})))}}):this.loadSectionStickyVideos()}}])}();window.addEventListenerRR("load",(function(){(new y).load()}))},9198:(e,t,n)=>{"use strict";n.r(t);var r=n(2725),i=n(2862),o=n(5116),a=n(5076),s=n(2453),l=n(915),c=n.n(l);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(){h=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};c(x,a,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,a)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,a,s){var l=p(e[i],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==u(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(u(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),c(A.prototype,s,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),c(k,l,"Generator"),c(k,a,(function(){return this})),c(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function p(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){d(o,r,i,a,s,"next",e)}function s(e){d(o,r,i,a,s,"throw",e)}a(void 0)}))}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function v(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var y=function(){return v((function e(t){var n=this;f(this,e),this.container=t,this.content=this.container.querySelector(".rrmc-section-content-wrapper"),this.flag_video=this.container.hasAttribute("data-asset-video-on"),this.flag_bg_off=this.container.hasAttribute("data-bg-asset-off"),this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.elm_image=this.container.querySelector(".js-rrmc-section-bg-img"),this.elm_image&&(this.elm_image_img=this.container.querySelector(".rrmc-section-bg-img")),this.elm_video=this.container.querySelector(".rrmc-section-bg-video"),this.body_height=0,this.video_id=this.container.getAttribute("data-video-id"),this.video_mobile_id=this.container.getAttribute("data-video-mobile-id"),this.prev_is_media_layout_mobile=(0,o.S)();var l=this.container.getAttribute("data-experience");this.target_experience=s.he.makeExperienceList(l),this.set_aspect_ratio=function(){return n.flag_bg_off?Promise.resolve():new Promise((function(e){n.flag_video?n.set_aspect_ratio_video(e):n.set_aspect_ratio_image(e)}))},this.set_aspect_ratio_image=function(e){(0,i.Il)(n.elm_image,(function(){"objectFit"in document.documentElement.style==0&&n.elm_image&&c()(n.elm_image_img),e()}))},this.set_aspect_ratio_video=function(e){n.player=videojs(n.elm_video);var t=n.player.getChild("errorDisplay");t.off(n.player,"error",t.open),t.dispose();var r=n.get_current_video_id();n.player.catalog.getVideo(r,(function(t,r){t&&console.log(t),n.player.catalog.load(r),0!=n.player.videoWidth()?e():n.player.on("loadeddata",(function(){(0,a.A)((function(){return 0!=n.player.videoWidth()}),(function(){e()}),n)})),n.player.play()}))},this.attemp_resize=function(){var e=document.body.clientHeight;e!=n.body_height&&(n.body_height=e,n.on_resize())},this.load_asset=function(){(n.force_load||n.is_edit_mode||window.pageYOffset+window.innerHeight+300>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_asset),r.A.sub_height_resize.subscribe({next:function(){return n.on_resize()}}),n.set_aspect_ratio().then(n.on_resize))},this.on_resize_event=function(){var e=(0,o.S)();e!==n.prev_is_media_layout_mobile?n.load_asset():n.on_resize(),n.prev_is_media_layout_mobile=e},this.on_resize=function(){if(n.flag_video&&n.player){var e=n.container.getBoundingClientRect();n.container_width=e.width,n.container_height=e.height;var t=n.player.videoWidth(),r=n.player.videoHeight()/t,i=n.container_width*r;n.container_height>i?(n.elm_video.style.height="".concat(n.container_height,"px"),n.elm_video.style.width="".concat(n.container_height/r,"px")):(n.elm_video.style.height="".concat(n.container_width*r,"px"),n.elm_video.style.width="".concat(n.container_width,"px"))}}}),[{key:"get_current_video_id",value:function(){return this.video_id&&this.video_mobile_id?(0,o.S)()?this.video_mobile_id:this.video_id:this.video_mobile_id||this.video_id}},{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_top=e.top+window.pageYOffset}},{key:"is_default_experience",value:function(){return this.target_experience.isDefaultExperience()}},{key:"test_matching_experience",value:(n=p(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.E3.makeStrategy(this.target_experience),e.abrupt("return",t.doesLiveCampaignMatch());case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"has_matching_evergage_experience",value:(t=p(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is_edit_mode){e.next=2;break}return e.abrupt("return",!0);case 2:if(!this.is_default_experience()){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.test_matching_experience();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"load",value:(e=p(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.has_matching_evergage_experience();case 2:if(e.sent){e.next=7;break}return this.container.style.display="none",e.abrupt("return");case 7:this.get_container_top(),window.addEventListenerRR("resize",this.on_resize_event),window.addEventListenerRR("scroll",this.load_asset),this.load_asset(),r.A.sub_height_resize.subscribe({next:function(){return t.get_container_top()}}),this.subscription_broadcast=r.A.sub_broadcast.subscribe({next:function(e){"load"===e.action&&(t.force_load=!0,t.load_asset(),setTimeout((function(){t.subscription_broadcast.unsubscribe()})))}});case 13:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e,t,n}(),_=function(){return v((function e(){f(this,e),this.sections=document.querySelectorAll(".rrmc-section")}),[{key:"load",value:function(){[].slice.call(this.sections).forEach((function(e){new y(e).load()}))}}])}();window.addEventListenerRR("load",(function(){(new _).load()}))},5161:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}var r=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.space=t,this.on_resize=function(){n.setHeight()}},(n=[{key:"setHeight",value:function(){window.innerWidth<768?this.space.style.height="".concat(this.space.getAttribute("data-mobile")+"px"):window.innerWidth<1024?this.space.style.height="".concat(this.space.getAttribute("data-tablet")+"px"):this.space.style.height="".concat(this.space.getAttribute("data-desktop")+"px")}},{key:"load",value:function(){this.setHeight(),window.addEventListenerRR("resize",this.on_resize)}}])&&t(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".rrmc-content-spacer");[].slice.call(e).forEach((function(e){new r(e).load()}))}))},5332:(e,t,n)=>{"use strict";n.r(t);var r,i=n(1500);r=document.querySelectorAll(".rrmc-content > *"),i.K3.staggerFromTo(r,1,{y:-100,opacity:0},{y:0,opacity:1},.1)},159:(e,t,n)=>{"use strict";n.r(t);var r=n(4692),i=n.n(r);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}var l=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._currentColumn=0,this.position=0,this._scrolling=!1,this.$table=i()(t).find("table"),this.$firstRow=this.$table.find("tr").eq(0),this.$titleCells=this.$firstRow.find("td"),this.$rows=i()(t).find("tr")},(t=[{key:"load",value:function(){var e=this;this.$titleCells.addClass("rr-table--title"),this.$rows.each((function(t){0!==t&&i()(this).find("td").each((function(t){var n=e.$titleCells[t].innerHTML;i()(this).attr("data-label",n)}))}))}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rr-table");[].slice.call(e).forEach((function(e){new l(e).load()}))}))},2629:(e,t,n)=>{"use strict";n.r(t);var r=n(8607);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.component=t,this.elm_cta=this.component.querySelector(".rrmc-tempus-cta"),this.elm_soe=this.elm_cta.querySelector(".rrmc-tempus-cta-soe > .icon"),this.elm_close=this.elm_cta.querySelector(".rrmc-tempus-cta-close > .icon"),this.on_enter=function(){return n.enter()},this.on_leave=function(){return n.leave()},this.duration=.3},(t=[{key:"enter",value:function(){document.documentElement.classList.contains("touchevents")||(this.tl&&this.tl.kill(),this.tl=new r.Y_,this.tl.addLabel("start"),this.tl.to(this.elm_soe,this.duration,{opacity:0,transform:"scale(.5)"},"start"),this.tl.fromTo(this.elm_close,this.duration,{opacity:0,transform:"scale(.5)"},{opacity:1,transform:"scale(1)"},"start"))}},{key:"leave",value:function(){document.documentElement.classList.contains("touchevents")||(this.tl&&this.tl.kill(),this.tl=new r.Y_,this.tl.addLabel("start"),this.tl.to(this.elm_close,this.duration,{opacity:0,transform:"scale(.5)"},"start"),this.tl.fromTo(this.elm_soe,this.duration,{opacity:0,transform:"scale(.5)"},{opacity:1,transform:"scale(1)"},"start"))}},{key:"load",value:function(){this.elm_cta.addEventListenerRR("mouseenter",this.on_enter),this.elm_cta.addEventListenerRR("mouseleave",this.on_leave)}}])&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-tempus");[].slice.call(e).forEach((function(e){new s(e).load()}))}))},5314:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(2725),o=n(997),a=n(7482),s=n(5699);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==l(t)?t:t+""}var h=function(){return e=function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.container_motion=this.container.querySelector(".rrmc-tertiary-nav-container"),this.breaks=[].slice.call(n),this.nav_list=this.container.querySelector(".rrmc-tertiary-nav-list"),this.prev_section=null,this.prev_colour_section=null,this.label_preview=null,this.on_scroll=function(){i.updateDistances({top:"breaks_top",current_section:"current_section",current_distance:"current_distance",section_distance:"section_distance"}),i.updateDistances({top:"breaks_colour_top",current_section:"current_colour_section",current_distance:"current_colour_distance",section_distance:"section_colour_distance"}),i.updateScrolls(),i.updateColours()},this.on_label_click=function(e){var t=e.currentTarget.getAttribute("data-number");i.goToSection(t)},this.on_enter=function(){(0,s.A)()||i.flag_hover||(i.flag_hover=!0,null!==i.label_preview&&(i.tmln_preview.kill(),i.label_preview=null),i.nav_sections.forEach((function(e){(new r.Y_).set(e.label_copy,{display:"block"}).to(e.label_copy,.4,{opacity:1})})))},this.on_leave=function(){(0,s.A)()||(i.nav_sections.forEach((function(e){(new r.Y_).to(e.label_copy,.4,{opacity:0}).set(e.label_copy,{display:"none"})})),setTimeout((function(){i.flag_hover=!1}),400))}},(t=[{key:"goToSection",value:function(e){r.uo.to(window,1,{scrollTo:this.breaks_top[e-1]})}},{key:"updateColours",value:function(){this.prev_colour_section!==this.current_colour_section&&(this.prev_colour_section=this.current_colour_section,this.changeColour(this.current_colour_section))}},{key:"updateScrolls",value:function(){if(window.innerHeight>window.pageYOffset){var e=window.innerHeight-window.pageYOffset;r.uo.set(this.container_motion,{y:e})}else if(this.last_section_pos<window.pageYOffset+window.innerHeight){var t=window.pageYOffset+window.innerHeight-this.last_section_pos;r.uo.set(this.container_motion,{y:-t}),r.uo.to(this.container_motion,.6,{opacity:0})}else r.uo.set(this.container_motion,{clearProps:"all"});if(this.prev_section!==this.current_section&&(null!==this.prev_section&&r.uo.to(this.nav_sections[this.prev_section].scrollable,.6,{height:0}),null!==this.current_section&&r.uo.to(this.nav_sections[this.current_section].scrollable,.6,{height:150}),this.prev_section=this.current_section,this.highlightCopy(this.current_section)),this.current_section==this.breaks.length-1&&(this.current_distance/this.section_distance>.75?this.container.classList.add("-hidden"):this.container.classList.remove("-hidden")),null!==this.current_section){var n=this.current_distance/this.section_distance;r.uo.set(this.nav_sections[this.current_section].scroller,{y:135*n})}}},{key:"changeColour",value:function(e){if(null!==e){var t=this.nav_colour_sections[e].colour;this.nav_sections.concat(this.nav_ctas).forEach((function(e){if(r.uo.set([e.label_number,e.label_copy],{color:t}),r.uo.set([e.scroller,e.scrollable_background],{"background-color":t}),e.icon){var n=e.icon_init.replace("placeholder",t.slice(1));e.icon.style.backgroundImage=n}}))}}},{key:"highlightCopy",value:function(e){var t=this;this.flag_hover||(null!==this.label_preview&&(this.tmln_preview.kill(),(new r.Y_).to(this.nav_sections[this.label_preview].label_copy,.5,{opacity:0}).set(this.nav_sections[this.label_preview].label_copy,{display:"none"}),this.label_preview=null),null!==e&&(this.label_preview=e,this.tmln_preview=new r.Y_,this.tmln_preview.set(this.nav_sections[e].label_copy,{display:"block"}).to(this.nav_sections[e].label_copy,.5,{opacity:1}).to(this.nav_sections[e].label_copy,.5,{opacity:0},"+=1").set(this.nav_sections[e].label_copy,{display:"none"}).add((function(){t.label_preview=null}))))}},{key:"updateSectionBreaks",value:function(){this.breaks_top=this.breaks.filter((function(e){return e.hasAttribute("data-label")&&!e.hasAttribute("data-cta")})).map((function(e){return e.getBoundingClientRect().top+window.pageYOffset}))}},{key:"updateColourBreaks",value:function(){this.breaks_colour_top=this.breaks.filter((function(e){return!e.hasAttribute("data-cta")})).map((function(e){return e.getBoundingClientRect().top+window.pageYOffset}))}},{key:"updateDistances",value:function(e){for(var t=window.pageYOffset+window.innerHeight/2,n=null,r=this[e.top].length;r>=0;--r)if(t>this[e.top][r]){n=r;break}this[e.current_section]=n,null===this[e.current_section]?(this[e.current_distance]=0,this[e.section_distance]=0):(this[e.current_distance]=t-this[e.top][this[e.current_section]],this[e.current_section]+1<this[e.top].length?this[e.section_distance]=this[e.top][this[e.current_section]+1]-this[e.top][this[e.current_section]]:this[e.section_distance]=document.body.getBoundingClientRect().height-this[e.top][this[e.current_section]])}},{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_top=e.top+window.pageYOffset;var t=document.querySelector(".js-rrmc-section-break[data-final-break]");this.last_section_pos=t?t.getBoundingClientRect().top+window.pageYOffset:document.body.getBoundingClientRect().height-this.footer_height-window.innerHeight/2}},{key:"load",value:function(){var e=this;(0,o.A)(this,"var_footer_height",i.A.sub_footer_height,this.set_footer_offset),this.generateNav(),this.get_container_top(),this.updateSectionBreaks(),this.updateColourBreaks(),document.addEventListenerRR("scroll",this.on_scroll),this.container.addEventListenerRR("mouseenter",this.on_enter),this.container.addEventListenerRR("mouseleave",this.on_leave),this.on_scroll(),this.nav_sections.forEach((function(t){t.label.addEventListenerRR("click",e.on_label_click)})),i.A.sub_height_resize.subscribe({next:function(){e.get_container_top(),e.updateSectionBreaks(),e.updateColourBreaks(),e.on_scroll()}})}},{key:"set_footer_offset",value:function(){this.footer_height=this.var_footer_height.value(),this.get_container_top(),this.updateSectionBreaks(),this.updateColourBreaks()}},{key:"generateNav",value:function(){var e=this.breaks.filter((function(e){return e.hasAttribute("data-label")})).map((function(e,t){return e.hasAttribute("data-cta")?'<div class="rrmc-tertiary-nav-item" data-colour="'.concat(e.getAttribute("data-colour"),'" data-nav-cta>\n            <button type="button"\n                    aria-label="').concat(e.getAttribute("data-label"),'"\n                    data-number="').concat(t+1,'"\n                    data-action="').concat(e.getAttribute("data-cta-action"),'"\n                    data-overlay="').concat(e.getAttribute("data-cta-overlay-name"),'"\n                    class="rrmc-tertiary-nav-label" data-cta>\n              <span class="rrmc-tertiary-nav-number rrmc-tertiary-nav-cta-icon rrmc-button-placeholder--').concat(e.getAttribute("data-cta-icon"),'">\n                <span class="rrmc-cta-i js-icon-container" data-icon="document">\n                    <span class="rrmc-cta-icon-placeholder"></span>\n                 </span>\n              </span>\n              <div class="rrmc-tertiary-nav-copy rrmc-button-text">').concat(e.getAttribute("data-label"),'</div>\n            </button>\n            <div class="rrmc-tertiary-nav-scrollable">\n              <div class="rrmc-tertiary-nav-scroller"></div>\n              <div class="rrmc-tertiary-nav-scrollable-background"></div>\n            </div>\n          </div>'):'<div class="rrmc-tertiary-nav-item" data-colour="'.concat(e.getAttribute("data-colour"),'">\n            <button aria-label="').concat(e.getAttribute("data-label"),'" \n                    type="button" data-number="').concat(t+1,'" \n                    class="rrmc-tertiary-nav-label">\n              <div class="rrmc-tertiary-nav-number">').concat(t+1,'</div>\n              <div class="rrmc-tertiary-nav-copy">').concat(e.getAttribute("data-label"),'</div>\n            </button>\n            <div class="rrmc-tertiary-nav-scrollable">\n              <div class="rrmc-tertiary-nav-scroller"></div>\n              <div class="rrmc-tertiary-nav-scrollable-background"></div>\n            </div>\n          </div>')})).reduce((function(e,t){return e+t}),"");this.nav_list.innerHTML=e;var t=[].slice.call(this.nav_list.querySelectorAll(".rrmc-tertiary-nav-item")).filter((function(e){return!e.hasAttribute("data-cta")}));this.nav_sections=t.map((function(e){var t=e.querySelector(".js-icon-container"),n="";return t&&(n=window.getComputedStyle(t).backgroundImage),{colour:e.getAttribute("data-colour"),container:e,label:e.querySelector(".rrmc-tertiary-nav-label"),label_number:e.querySelector(".rrmc-tertiary-nav-number"),label_copy:e.querySelector(".rrmc-tertiary-nav-copy"),icon:t,icon_init:n,scrollable:e.querySelector(".rrmc-tertiary-nav-scrollable"),scroller:e.querySelector(".rrmc-tertiary-nav-scroller"),scrollable_background:e.querySelector(".rrmc-tertiary-nav-scrollable-background")}})),this.nav_ctas=[].slice.call(this.nav_list.querySelectorAll(".rrmc-tertiary-nav-item")).filter((function(e){return e.hasAttribute("data-nav-cta")})).map((function(e){var t=e.querySelector(".js-icon-container"),n="";t&&(n=window.getComputedStyle(t).backgroundImage);var r=e.querySelector("button[data-cta]");return new a.default(r).load(),{container:e,label:e.querySelector(".rrmc-tertiary-nav-label"),label_number:e.querySelector(".rrmc-tertiary-nav-number"),label_copy:e.querySelector(".rrmc-tertiary-nav-copy"),icon:t,icon_init:n,scrollable:e.querySelector(".rrmc-tertiary-nav-scrollable"),scroller:e.querySelector(".rrmc-tertiary-nav-scroller"),scrollable_background:e.querySelector(".rrmc-tertiary-nav-scrollable-background")}})),this.nav_colour_sections=this.breaks.filter((function(e){return!e.hasAttribute("data-cta")})).map((function(e){return{colour:e.getAttribute("data-colour")}}))}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelector(".js-rrmc-tertiary-nav");if(e){var t=document.querySelectorAll(".js-rrmc-section-break");new h(e,t).load()}}))},9996:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(6988);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}const s=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_columns=this.container.querySelector(".rrmc-toggle-columns"),this.theme=this.container.getAttribute("data-theme"),this.flag_checked=this.container.hasAttribute("data-checked"),this.is_checked=this.flag_checked,this.subs={},this.subs.click=new r.B7,this.unsubs={},this.on_click=function(){n.is_checked?n.switch_off():n.switch_on(),n.subs.click.next(n.is_checked)}},t=[{key:"addEventListener",value:function(e,t){var n=this;this.unsubs[e]||(this.unsubs[e]={}),this.unsubs[e][t]=this.subs[e].subscribe({next:function(e){return t(e,n.container)}})}},{key:"removeEventListener",value:function(e,t){this.unsubs[e]&&this.unsubs[e][t]&&this.unsubs[e][t].unsubscribe()}},{key:"switch_on",value:function(){this.is_checked=!0,this.container.classList.add("rrmc-toggle-checked")}},{key:"switch_off",value:function(){this.is_checked=!1,this.container.classList.remove("rrmc-toggle-checked")}},{key:"switch_toggle",value:function(){this.is_checked?this.switch_off():this.switch_on()}},{key:"is_on",value:function(){return this.is_checked}},{key:"select",value:function(e,t){this.is_checked!==e&&(e?this.switch_on():this.switch_off()),t&&this.subs.click.next(this.is_checked)}},{key:"load",value:function(){this.elm_columns.addEventListenerRR("click",this.on_click)}},{key:"destroy",value:function(){for(var e=0,t=Object.keys(this.subs);e<t.length;e++){var n=t[e];this.subs[n].complete()}this.elm_columns.removeEventListenerRR("click",this.on_click)}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},7209:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r=n(2692),i=n.n(r),o=n(6801),a=n(9996);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}function u(e,t,n){return t=d(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],d(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}var f=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=u(this,t,[e])).elm_anim_container=n.container.querySelector(".rrmc-toggle-anim"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),n=t,(r=[{key:"switch_on",value:function(){a.A.prototype.switch_on.call(this),this.lottie_toggle.setDirection(1),this.lottie_toggle.play()}},{key:"switch_off",value:function(){a.A.prototype.switch_off.call(this),this.lottie_toggle.setDirection(-1),this.lottie_toggle.play()}},{key:"load",value:function(){var e=this;a.A.prototype.load.call(this),this.lottie_toggle=i().loadAnimation({container:this.elm_anim_container,renderer:"svg",loop:!1,autoplay:!1,animationData:"light"===this.theme?o.MS:o.wS}),this.is_checked&&this.lottie_toggle.addEventListener("DOMLoaded",(function(){e.lottie_toggle.goToAndStop(8,!0)}))}}])&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a.A);document.addEventListenerRR("DOMContentLoaded",(function(){var e=document.querySelectorAll(".js-rrmc-toggle");[].slice.call(e).forEach((function(e){new f(e).load()}))}));const m=f},6937:(e,t,n)=>{"use strict";n.r(t);var r=n(8607),i=n(5076),o=n(2725);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}var h=function(){return c((function e(t){var n=this;s(this,e),this.container=t,this.video_on=this.container.hasAttribute("data-video-on"),this.align=this.container.getAttribute("data-align"),this.video=this.container.querySelector(".rrmc-tout-col-video");var r=t.querySelector(".js-tout-a"),i=t.querySelector(".js-tout-b");this.image_container=i,this.body_height=0,"right"==this.align?(this.content_a=i,this.content_b=r):(this.content_a=r,this.content_b=i),this.on_scroll=function(){var e=document.body.clientHeight;e!=n.body_height&&(n.body_height=e,n.on_resize())},this.on_resize=function(){n.tl_a&&n.tl_a.kill(),n.tl_b&&n.tl_b.kill(),n.clear_elm_props(),n.init_container()},this.on_start_and_stop_video_on_scroll_after_loaded=function(){n.scroll_pos=window.pageYOffset,n.window_height=window.innerHeight,n.user_focus=n.scroll_pos+n.window_height/2;var e=n.container_top+n.container_height/2,t=e-n.window_height/2,r=e+n.window_height/2;n.user_focus>t&&n.user_focus<r?n.toggle_video_play_pause(!0):n.toggle_video_play_pause(!1)},this.toggle_video_play_pause=function(e){n.is_video_playing!==e&&(n.is_video_playing=e,e?n.player.play():n.player.pause())},this.load_video=function(){(n.force_load||window.pageYOffset+window.innerHeight+300>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_video),n.init_video(),window.addEventListenerRR("scroll",n.on_start_and_stop_video_on_scroll_after_loaded))},this.apply_aspect_ratio=function(){n.init_container(),n.reveal()},this.load()}),[{key:"init_video",value:function(){var e=this;this.player=videojs(this.video),this.player.reloadSourceOnError({errorInterval:5}),0!=this.player.videoWidth()?this.apply_aspect_ratio(this.player):this.player.on("loadedmetadata",(function(){(0,i.A)((function(){return 0!=e.player.videoWidth()}),(function(){e.apply_aspect_ratio(e.player)}),e)})),this.player.play()}},{key:"clear_elm_props",value:function(){r.uo.set([this.content_a,this.content_b],{clearProps:"all"})}},{key:"load",value:function(){var e=this;this.init_container(),window.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize),this.video_on?(window.addEventListenerRR("scroll",this.load_video),this.load_video(),this.subscription_broadcast=o.A.sub_broadcast.subscribe({next:function(t){"load"===t.action&&(e.force_load=!0,e.load_video(),setTimeout((function(){e.subscription_broadcast.unsubscribe()})))}})):this.reveal()}},{key:"init_container",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset}},{key:"reveal",value:function(){var e=this;(new r.Y_).to([this.content_a,this.content_b],1,{opacity:1}).add((function(){e.content_a.classList.remove("is-init"),e.content_b.classList.remove("is-init"),o.A.sub_loaded_component.next(e.container)}))}}])}(),d=function(){return c((function e(){s(this,e),this.containers=document.querySelectorAll(".js-rrmc-tout")}),[{key:"load",value:function(){[].slice.call(this.containers).forEach((function(e){return new h(e)}))}}])}();window.addEventListenerRR("load",(function(){(new d).load()}))},5931:(e,t,n)=>{"use strict";n.r(t),n(8624);var r=n(8607),i=n(9853),o=n(6692),a=n(259);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var h=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.elm_submit_btn=this.container.querySelector(".js-rrmc-recall-submit"),this.elm_request_cont=this.container.querySelector(".js-rrmc-vehicle-recall-request-container"),this.elm_response_cont=this.container.querySelector(".js-rrmc-vehicle-recall-response-container"),this.elm_response_accordion=this.elm_response_cont.querySelector(".js-rrmc-vehicle-recall-response-container-accordion"),this.elm_back_btn=this.elm_response_cont.querySelector(".js-rrmc-recall-back"),this.input_recall=this.container.querySelector("input[name=recall]"),this.input_label=this.elm_request_cont.querySelector(".rrmc-form-label"),this.input_error=this.elm_request_cont.querySelector(".rrmc-form-label-error"),this.on_submit=function(e){e&&e.preventDefault(),o.A.validateTextInput(n.input_recall)&&n.validateVinInput(n.input_recall)?((new r.Y_).set(n.elm_request_cont,{display:"none"}).set(n.elm_response_cont,{display:"block"}),fetch(n.endpoint_recall(n.input_recall.value)).then((function(e){if(e.ok)return e.json();throw e.text()})).then(n.on_response).catch((function(e){e.then((function(e){return console.log(e)}))}))):a.Gx({event:"recallSubmit",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:"submit error: invalid ".concat(n.input_recall.name)})},this.on_back=function(){(new r.Y_).set(n.elm_request_cont,{display:"block"}).set(n.elm_response_cont,{display:"none"}),n.resp_accordion&&n.resp_accordion.destroy(),n.input_recall.value=null,n.input_label.classList.remove("-hidden"),n.on_input_blur()},this.on_response=function(e){var t=e.hasRecall,r=e.recalls,o=e.vin,s="False";if(t){var c,u='<div class="rrmc-accordion js-rrmc-lazy-load">',h=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(r);try{for(h.s();!(c=h.n()).done;){var d=c.value,p=d.description,f=d.pdf,m=d.startDate;u+=n.templateAccordionRow(p,f,m)}}catch(e){h.e(e)}finally{h.f()}u+="</div>",n.elm_response_accordion.innerHTML=u,n.resp_accordion=new i.default(n.elm_response_cont.querySelector(".rrmc-accordion")),n.resp_accordion.load(),s="True"}else n.elm_response_accordion.innerHTML="There are no open recalls for your vehicle.";a.Gx({event:"recallSubmit",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:"Submit - ".concat(s),vin:o})},this.on_input_focus=function(e){n.input_label.classList.add("input-focus"),r.uo.set(n.input_recall,{"border-bottom":"2px solid #ddd"}),a.Gx({event:"formClick",eventCategory:"form",eventAction:n.elm_request_cont.id,eventLabel:e.target.name})},this.on_input_blur=function(){r.uo.set(n.input_recall,{"border-bottom":"2px solid #696969"}),0!==n.input_recall.value.length?r.uo.set(n.input_recall,{"border-bottom":"2px solid #ddd"}):n.input_label.classList.remove("input-focus")},this.form_submit=function(e){e.preventDefault(),n.on_submit()}},(t=[{key:"validateVinInput",value:function(){return 17!=this.input_recall.value.trim().length?(r.uo.set(this.input_recall,{"border-bottom":"2px solid #f94564"}),this.input_error.classList.remove("-hidden"),this.input_error.textContent="VIN must be 17 characters.",!1):(this.input_label.classList.add("-hidden"),!0)}},{key:"templateAccordionRow",value:function(e,t,n){return'\n                <div class="rrmc-accordion-item" style="color: white">\n                                <div class="rrmc-accordion-tab rrmc-body1-bold">\n                          '.concat(e," ").concat(n,'\n                        <span class="rrmc-icon-expand">\n                              <svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                  <g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                                      <g id="icon/add" fill="white">\n                                          <path d="M9.00045405,8.9999041 L8.9999041,16.0002612 L6.99949902,15.9995541 L7.0005989,8.9999041 L-0.000151011402,8.9999041 L-0.000151011402,7.00020612 L15.9995541,6.99949902 L16.0002612,8.9999041 L9.00045405,8.9999041 Z M7.00020612,-0.000151011402 L8.9999041,-0.000151011402 L9.00061121,3.99980104 L7.00020612,3.99909393 L7.00020612,-0.000151011402 Z" id="Shape">\n                                          </path>\n                                      </g>\n                                  </g>\n                              </svg>\n                          </span>\n                          <span class="rrmc-icon-collapse">\n                              <svg width="16" height="16" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                                  <defs>\n                                      <polygon id="path-1" points="0 9 16 9 16 7 0 7"></polygon>\n                                  </defs>\n                                  <g id="Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n                                      <g id="icon/minus">\n                                          <mask id="mask-2" fill="white">\n                                              <use xlink:href="#path-1"></use>\n                                          </mask>\n                                          <use id="Fill-1" fill="white" xlink:href="#path-1"></use>\n                                      </g>\n                                  </g>\n                              </svg>\n                          </span>\n                      </div>\n                      <div class="rrmc-accordion-body">\n                          <div class="rrmc-accordion-copy">\n                          <p class="rrmc-recall-description">\n                              There is currently a recall for your vehicle. Please, refer to this document for more information:\n                          </p>\n                             <div>\n                            <span class="rrmc-hero-cta-wrapper js-rrmc-hero-cta-wrapper">\n         <a href="').concat(t,'" data-theme="dark" target="_blank" class="js-rrmc-recall-submit rrmc-cta-component rrmc-button--primary rrmc-button--dark rrmc-button--close">\n           <span class="rrmc-cta-i"></span>\n           <span class="rrmc-button-text js-rrmc-button-text">Documentation</span>\n           <span class="rrmc-button-arrow js-rrmc-button-arrow"></span>\n         </a>\n                            </span>\n                             </div>\n                      </div>\n                  </div>\n              </div>\n\n    ')}},{key:"endpoint_recall",value:function(e){return"/bin/public/recall?vin=".concat(e)}},{key:"load",value:function(){this.elm_submit_btn.addEventListenerRR("click",this.on_submit),this.elm_back_btn.addEventListenerRR("click",this.on_back),this.input_recall.addEventListenerRR("focus",this.on_input_focus),this.input_recall.addEventListenerRR("blur",this.on_input_blur),this.elm_request_cont.addEventListenerRR("submit",this.form_submit)}},{key:"destroy",value:function(){this.elm_submit_btn.removeEventListenerRR("click",this.on_submit),this.elm_back_btn.removeEventListenerRR("click",this.on_back),this.input_recall.removeEventListenerRR("focus",this.on_input_focus),this.input_recall.removeEventListenerRR("blur",this.on_input_blur),this.elm_request_cont.removeEventListenerRR("submit",this.form_submit)}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-vehicle-recall-container");[].slice.call(e).forEach((function(e){new h(e).load()}))}))},9591:(e,t,n)=>{"use strict";n.r(t);var r=n(5116),i=n(2725),o=n(7455),a=n(7293),s=n(915),l=n.n(s),c=n(2862);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==u(t)?t:t+""}var m=function(){return p((function e(t){var n=this;h(this,e),this.container=t,this.parallax_on=this.container.hasAttribute("data-parallax-on"),this.col_a_wrapper=t.querySelector(".js-vscroll-col-a-wrapper"),this.col_a=t.querySelector(".js-vscroll-col-a"),this.col_b=t.querySelector(".js-vscroll-col-b"),this.dynamicOverlayParsys=this.container.querySelector(".rrmc-dynamic-overlay-parsys"),this.dynamicOverlay=this.container.querySelector(".rrmc-dynamic-overlay"),this.dynamic_cta=this.container.querySelector(".rrmc-vscroll-cta-container .js-rrmc-button[data-action=open-overlay-local]"),this.on_open_overlay=function(){var e=n.dynamicOverlay.dataset.overlayName;i.A.sub_overlay_manager_bus.next({action:o.xb,data:{overlayName:e,activeIndex:0}})},this.on_scroll=function(){if((0,r.h)())return n.col_a.style.marginTop=null,void(n.col_a.style.marginBottom=null);var e,t=window.pageYOffset,i=window.innerHeight,o=t-n.container_top,a=n.container_top+n.container_height-i;(e=o>=0&&t<a?"fixed":o>=0&&t>a?"static-bottom":"static")!=n.old_pos_classname&&(n.col_a.classList.add(e),n.col_a.classList.remove(n.old_pos_classname),"static-bottom"==e?n.set_margin_to_bottom():n.set_margin(),n.old_pos_classname=e)},this.on_resize=function(){n.init_container(),"static-bottom"==n.old_pos_classname?n.set_margin_to_bottom():n.set_margin(),n.on_scroll(),"objectFit"in document.documentElement.style==0&&l()(n.col_b.querySelectorAll("img"))},this.loadImages=function(){var e=n.container.querySelectorAll(".rrmc-image-aspect-img"),t=e[e.length-1];[].slice.call(e).forEach((function(r,i){(0,c.Kj)(r,(function(){e[i]===t&&n.load()}))}))},this.loadImages()}),[{key:"populateOverlayCarousel",value:function(){if(this.parallax_on){var e=(0,a.g)("local").overlay_container_wrapper;(0,a.K)(e).appendChild(this.dynamicOverlayParsys)}}},{key:"load",value:function(){this.populateOverlayCarousel(),this.init_container(),this.parallax_on&&(window.addEventListenerRR("scroll",this.on_scroll),window.addEventListenerRR("resize",this.on_resize),i.A.sub_height_resize.subscribe({next:this.on_resize}),this.on_resize()),this.dynamic_cta&&this.dynamic_cta.addEventListenerRR("click",this.on_open_overlay)}},{key:"set_margin_to_bottom",value:function(){(0,r.h)()?this.col_a.style.marginTop=null:this.container_height<window.innerHeight?this.set_margin():this.col_a.style.marginTop="".concat((window.innerHeight-this.content_height)/2+this.container_height-window.innerHeight,"px")}},{key:"set_margin",value:function(){if((0,r.h)())this.col_a.style.marginTop=null;else{var e=window.innerHeight,t=(e-this.content_height)/2;if(this.col_a.style.marginTop="".concat(t,"px"),this.col_a.style.marginBottom="".concat(t,"px"),this.container_height<e){var n=(this.container_height-this.content_height)/2;this.col_a.style.marginTop="".concat(n,"px"),this.col_a.style.marginBottom="".concat(n,"px")}}}},{key:"init_container",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset;var t=this.col_a.getBoundingClientRect();this.content_height=t.height}}])}(),v=function(){return p((function e(){h(this,e),this.containers=document.querySelectorAll(".js-vscroll")}),[{key:"load",value:function(){[].slice.call(this.containers).forEach((function(e){return new m(e)}))}}])}();window.addEventListenerRR("load",(function(){(new v).load()}))},376:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>p});var r=n(5076),i=n(8607),o=n(2725),a=n(9608),s=n(5699),l=n(259);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var d=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.flag_video=this.container.hasAttribute("data-asset-video-on"),this.is_edit_mode=this.container.hasAttribute("data-is-edit-mode"),this.elm_video=this.container.querySelector(".rrmc-video-player-video"),this.elm_aspect=this.container.querySelector(".rrmc-video-player-aspect"),this.elm_wrapper=this.container.querySelector(".rrmc-video-player-wrapper"),this.elm_snippet=this.container.querySelector(".rrmc-video-player-snippet"),this.elm_snippet_wrapper=this.container.querySelector(".rrmc-video-player-snippet-wrapper"),this.full_video_hover=null,this.is_fullscreen=!1,this.loop_count=0,this.video_progress=0,this.elm_video_play_icon=this.container.querySelector(".rrmc-video-play-button"),this.icon_animator=new a.A({c:this.elm_video_play_icon,c_border:this.elm_video_play_icon.querySelector(".rrmc-cursor-border"),c_icon:this.elm_video_play_icon.querySelector(".rrmc-cursor-icon")},{change_document:!1}),this.flag_autoplay=this.container.hasAttribute("data-autoplay"),this.flag_loop_off=this.container.getAttribute("data-loop-off"),this.flag_controls=this.container.hasAttribute("data-controls"),this.flag_autoplay||(this.flag_controls=!0),this.set_aspect_ratio=function(){return new Promise((function(e){n.set_aspect_ratio_video(e)})).then((function(){return n.on_resize()}))},this.set_aspect_ratio_video=function(e){n.flag_autoplay?(n.player=videojs.getPlayer(n.elm_video),n.player.reloadSourceOnError({errorInterval:5}),0!=n.player.videoWidth()?e():(0,r.A)((function(){return 0!=n.player.videoWidth()}),(function(){e()}),n)):(n.player=n.elm_snippet,0!=n.player.videoWidth?e():(0,r.A)((function(){return 0!=n.player.videoWidth}),(function(){e()}),n))},this.on_start_and_stop_video_on_scroll_after_loaded=function(){n.scroll_pos=window.pageYOffset,n.window_height=window.innerHeight,n.user_focus=n.scroll_pos+n.window_height/2;var e=n.container_top+n.container_height/2,t=e-n.window_height/1.25,r=e+n.window_height/1.25;n.user_focus>t&&n.user_focus<r?n.toggle_video_play_pause(!0):n.toggle_video_play_pause(!1)},this.toggle_video_play_pause=function(e){n.is_video_playing!==e&&(n.is_video_playing=e,n.triggered_by_scroll=!0,e?n.real_player.play():n.real_player.pause())},this.load_asset=function(e){(e||n.force_load||n.is_edit_mode||window.pageYOffset+window.innerHeight>n.container_top)&&(window.removeEventListenerRR("scroll",n.load_asset),n.sub_height=o.A.sub_height_resize.subscribe({next:n.on_resize}),n.set_aspect_ratio().then((function(){n.flag_autoplay?(n.first_play_transition=!1,n.full_video_hover="pause",n.on_click_snippet(),window.addEventListenerRR("scroll",n.on_start_and_stop_video_on_scroll_after_loaded)):n.player&&(n.player.currentTime=0)})))},this.on_resize=function(){return n.get_container_top(),n.set_container_aspect_ratio()},this.on_mouseover=function(){(0,s.A)()||n.flag_loop_off&&n.flag_autoplay||(o.A.sub_cursor.next(["scale","enter","play"]),n.player.play(),n.icon_animator.animate(["scale_strong","leave"]))},this.on_mouseleave=function(){(0,s.A)()||n.flag_loop_off&&n.flag_autoplay||(o.A.sub_cursor.next(["scale","leave"]),n.player.pause(),n.icon_animator.animate(["scale","enter","play"]))},this.on_click_no_controls=function(){n.real_player.paused()?n.real_player.play():n.real_player.pause()},this.on_click_snippet=function(){n.elm_snippet_wrapper.removeEventListenerRR("click",n.on_click_snippet),!n.flag_autoplay&&n.flag_controls&&(n.elm_aspect.removeEventListenerRR("mouseover",n.on_mouseover),n.elm_aspect.removeEventListenerRR("mouseleave",n.on_mouseleave)),(new i.Y_).to(n.elm_snippet_wrapper,.5,{opacity:0}).set(n.elm_snippet_wrapper,{display:"none"}).add((function(){n.elm_snippet.pause()})),n.real_player=videojs.getPlayer(n.elm_video);var e=n.real_player.getChild("errorDisplay");e.off(n.real_player,"error",e.open),e.dispose(),"false"===n.flag_loop_off?n.real_player.play():"true"===n.flag_loop_off&&n.loop_count>0&&n.real_player.pause(),n.loop_count=n.loop_count++,n.real_player.reloadSourceOnError({errorInterval:5}),n.real_player.on("limitexceeded",(function(){o.A.sub_cursor.next(["scale","leave"])})),n.elm_full_video_player=n.elm_aspect.querySelector("video.vjs-tech"),n.elm_full_video_controls=n.elm_aspect.querySelector(".vjs-control-bar"),n.flag_controls&&(n.elm_full_video_player.addEventListenerRR("mouseover",n.on_full_mouseover),n.elm_full_video_player.addEventListenerRR("mouseleave",n.on_full_mouseleave),n.elm_full_video_controls.addEventListenerRR("mouseover",n.on_controls_mouseover),n.elm_full_video_controls.addEventListenerRR("mouseleave",n.on_controls_mouseleave)),n.real_player.on("useractive",(function(){n.is_fullscreen&&n.on_full_mouseover()})),n.real_player.on("userinactive",(function(){n.is_fullscreen&&(o.A.sub_cursor.next(["scale","leave"]),n.on_full_mouseleave())})),n.real_player.on("ended",(function(){l.ao.videoEnded((0,l.o)(n.real_player)),window.Evergage&&window.Evergage.sendEvent({action:"Video - Complete"}),n.video_progress=100,n.destroy(),n.load()})),n.real_player.on("fullscreenchange",(function(){n.real_player.isFullscreen()?(n.is_fullscreen=!0,o.A.sub_cursor.next({action:"fullscreen_enter",elm:n.elm_video})):(n.is_fullscreen=!1,o.A.sub_cursor.next({action:"fullscreen_leave",elm:n.elm_video}))})),n.real_player.on("play",(function(){n.triggered_by_scroll?n.triggered_by_scroll=!1:(l.ao.videoStarted((0,l.o)(n.real_player)),window.Evergage&&window.Evergage.sendEvent({action:"Video - Start"}),n.video_progress=0,n.over_controls?n.full_video_hover="pause":"pause"!==n.full_video_hover&&(o.A.sub_cursor.next(["scale","enter","pause"]),n.full_video_hover="pause"))})),n.real_player.on("timeupdate",(function(){(0,l.vp)(n,n.real_player);var e=n.real_player.currentTime()/n.real_player.duration();e>=.8&&n.video_progress<80?(window.Evergage&&window.Evergage.sendEvent({action:"Video - 80%"}),n.video_progress=80):e>=.6&&n.video_progress<60?(window.Evergage&&window.Evergage.sendEvent({action:"Video - 60%"}),n.video_progress=60):e>=.4&&n.video_progress<40?(window.Evergage&&window.Evergage.sendEvent({action:"Video - 40%"}),n.video_progress=40):e>=.2&&n.video_progress<20&&(window.Evergage&&window.Evergage.sendEvent({action:"Video - 20%"}),n.video_progress=20)})),n.real_player.on("pause",(function(){if(n.triggered_by_scroll)n.triggered_by_scroll=!1;else if(l.ao.videoStopped((0,l.o)(n.real_player)),n.over_controls)n.full_video_hover="play";else if("play"!==n.full_video_hover){if(n.flag_loop_off&&n.flag_autoplay)return;o.A.sub_cursor.next(["scale","enter","play"]),n.full_video_hover="play"}}))},this.first_play_transition=!0,this.over_controls=!1,this.on_full_mouseover=function(){n.first_play_transition?n.first_play_transition=!1:o.A.sub_cursor.next(["scale","enter",n.full_video_hover])},this.on_full_mouseleave=function(){o.A.sub_cursor.next(["scale","leave"])},this.on_controls_mouseover=function(){n.over_controls=!0},this.on_controls_mouseleave=function(){n.over_controls=!1}},t=[{key:"get_container_top",value:function(){var e=this.container.getBoundingClientRect();this.container_height=e.height,this.container_top=e.top+window.pageYOffset}},{key:"set_container_aspect_ratio_video",value:function(e){if(this.player){var t=this.flag_autoplay?this.player.videoWidth():this.player.videoWidth,n=(this.flag_autoplay?this.player.videoHeight():this.player.videoHeight)/t;this.set_container_padding_top(n);var r=this.elm_wrapper.getBoundingClientRect();this.container_width=r.width,this.container_height=r.height;var i=this.container_width*n;this.container_height>i?(this.elm_video.style.height="".concat(this.container_height,"px"),this.elm_video.style.width="".concat(this.container_height/n,"px"),this.elm_snippet.style.height="".concat(this.container_height,"px"),this.elm_snippet.style.width="".concat(this.container_height/n,"px")):(this.elm_video.style.height="".concat(this.container_width*n,"px"),this.elm_video.style.width="".concat(this.container_width,"px"),this.elm_snippet.style.height="".concat(this.container_width*n,"px"),this.elm_snippet.style.width="".concat(this.container_width,"px")),e()}else e()}},{key:"set_container_padding_top",value:function(e){this.elm_aspect.style.paddingTop="".concat(100*e,"%")}},{key:"set_container_aspect_ratio",value:function(){var e=this;return new Promise((function(t){e.set_container_aspect_ratio_video(t)}))}},{key:"load",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.get_container_top(),window.addEventListenerRR("resize",this.on_resize),window.addEventListenerRR("scroll",this.load_asset),!this.flag_autoplay&&this.flag_controls&&(this.elm_aspect.addEventListenerRR("mouseover",this.on_mouseover),this.elm_aspect.addEventListenerRR("mouseleave",this.on_mouseleave)),this.elm_snippet_wrapper.addEventListenerRR("click",this.on_click_snippet),this.load_asset(!!t.overlayName),(0,l.OV)(this),this.subscription_broadcast=o.A.sub_broadcast.subscribe({next:function(t){"load"===t.action&&(e.force_load=!0,e.load_asset(),setTimeout((function(){e.subscription_broadcast.unsubscribe()})))}}),this.unsub_touch_update=o.A.sub_touch_update.subscribe({next:function(t){t&&!e.flag_autoplay&&(e.container.classList.add("rrmc-video-touch-interface"),e.elm_aspect.removeEventListenerRR("mouseover",e.on_mouseover),e.elm_aspect.removeEventListenerRR("mouseleave",e.on_mouseleave))}})}},{key:"destroy",value:function(){this.sub_height&&this.sub_height.unsubscribe(),this.real_player&&(this.real_player.pause(),this.real_player.currentTime(0)),this.icon_animator.animate(["scale","enter","play"]),window.removeEventListenerRR("resize",this.on_resize),window.removeEventListenerRR("scroll",this.load_asset),this.elm_aspect.removeEventListenerRR("mouseover",this.on_mouseover),this.elm_aspect.removeEventListenerRR("mouseleave",this.on_mouseleave),this.elm_snippet_wrapper.removeEventListenerRR("click",this.on_click_snippet),window.removeEventListenerRR("scroll",this.on_start_and_stop_video_on_scroll_after_loaded),this.elm_full_video_player&&(this.elm_full_video_player.removeEventListenerRR("mouseover",this.on_full_mouseover),this.elm_full_video_player.removeEventListenerRR("mouseleave",this.on_full_mouseleave)),this.elm_full_video_controls&&(this.elm_full_video_controls.removeEventListenerRR("mouseover",this.on_controls_mouseover),this.elm_full_video_controls.removeEventListenerRR("mouseleave",this.on_controls_mouseleave)),this.unsub_touch_update.unsubscribe(),this.subscription_broadcast.unsubscribe(),i.uo.set([this.elm_snippet_wrapper],{clearProps:"all"})}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const p=d;window.addEventListenerRR("load",(function(){var e=document.querySelectorAll(".js-rrmc-video-player");[].slice.call(e).forEach((function(e){new d(e).load()}))}))},3169:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});var r=n(1203);function i(e,t){e&&(t.indexOf('id="a"')&&(t=(0,r.I)(t,"a")),t.indexOf('id="b"')&&(t=(0,r.I)(t,"b")),t.indexOf('id="c"')&&(t=(0,r.I)(t,"c")),t.indexOf('id="d"')&&(t=(0,r.I)(t,"d")),e.innerHTML=t)}},259:(e,t,n)=>{"use strict";n.d(t,{_r:()=>E,Mh:()=>k,BW:()=>P,Gx:()=>D,kC:()=>O,fg:()=>I,o:()=>c,YY:()=>T,aS:()=>C,mj:()=>B,TY:()=>j,u$:()=>N,Gr:()=>M,l:()=>_,x_:()=>R,ao:()=>s,vp:()=>h,OV:()=>u});var r=n(4692),i=n.n(r),o=n(637),a="AKQA",s={videoStarted:function(e){window.tronVideo.videoStarted(Object.assign({componentDEVagency:a},e))},videoStopped:function(e){window.tronVideo.videoStopped(Object.assign({componentDEVagency:a},e))},videoEnded:function(e){window.tronVideo.videoEnded(Object.assign({componentDEVagency:a},e))},videoMilestoneReached25:function(e){window.tronVideo.videoMilestoneReached25(Object.assign({componentDEVagency:a},e))},videoMilestoneReached50:function(e){window.tronVideo.videoMilestoneReached50(Object.assign({componentDEVagency:a},e))},videoMilestoneReached75:function(e){window.tronVideo.videoMilestoneReached75(Object.assign({componentDEVagency:a},e))}},l={reset_playback_progress:function(e){e.playback_progress=0},reach25:function(e){e.playback_progress=25},reach50:function(e){e.playback_progress=50},reach75:function(e){e.playback_progress=75},hasReached25:function(e){return e.playback_progress>=25},hasReached50:function(e){return e.playback_progress>=50},hasReached75:function(e){return e.playback_progress>=75}};function c(e){return{videoCurrentTime:e.currentTime(),videoName:e.id(),videoTotalLength:e.duration()}}function u(e){l.reset_playback_progress(e)}function h(e,t){if(!(t.duration()<10)){var n=t.currentTime()/t.duration(),r=c(t);n>=.75&&!l.hasReached75(e)?(l.reach75(e),s.videoMilestoneReached75(r)):n>=.5&&!l.hasReached50(e)?(l.reach50(e),s.videoMilestoneReached50(r)):n>=.25&&!l.hasReached25(e)&&(l.reach25(e),s.videoMilestoneReached25(r))}}var d="custom local form",p={"keep-me-informed":"rfi","request-information":"rfi","contact-an-advisor":"rfc","request-callback":"rfc","request-viewing":"rfd","join-event":"evt","request-brochure":"rfi","request-accessories":"rfa","contact-dealer":"rfc","join-waiting-list":"rfo","keep-me-informed-rr25":"rfi",whispers:"registration","purchase-enquiry":"rfo","general-enquiry":"rfi"};function f(e){var t=e||{};return{formType:p[t.formType]||"rfo",formID:t.formType}}function m(){return{componentType:"native in-page",formLeadType:"lead",formOrigin:d,formVariant:"dedicated form",componentPlatform:"non-aem > local"}}var v=[[/firstname/gi,"first_na_me"],[/lastname/gi,"last_na_me"],[/vin/gi,"v_i_n"],[/name/gi,"na_me"],[/loginid/gi,"log_inid"],[/password/gi,"pass_word"],[/registrationpassword/gi,"registration_pass_word"],[/confirmationpassword/gi,"confirmation_pass_word"],[/confirmregistrationpassword/gi,"confirmregistration_pass_word"],[/registrationid/gi,"registration_id"],[/passwordconfirmation/gi,"pass_wordconfirmation"],[/usernameenname/gi,"user_na_meenna_me"],[/token/gi,"to_ken"],[/telephone/gi,"tele_phone"],[/email/gi,"e_mail"]];function g(e){for(var t=e,n=0,r=v;n<r.length;n++){var i=r[n];t=t.replace(i[0],i[1])}return t}var y="tronFormEvents_fresh",_={formStarted:function(e,t){var n=t||{};e[y]=!0,window.tronForm.formStarted(Object.assign(m(),f(n),{formName:g(n.formName)||""}))},formFinishIntention:function(e){var t=e||{};window.tronForm.formFinishIntention(Object.assign(m(),f(t),{formName:g(t.formName)||""}))},formFinished:function(e){var t=e||{};window.tronForm.formFinished(Object.assign(m(),f(t),{formName:g(t.formName)||""}))},formInteraction:function(e,t){var n=t||{};e[y]&&(e[y]=!1,window.tronForm.formFirstInteraction(Object.assign(m(),f(n),{formName:g(n.formName)||""}))),window.tronForm.formInteraction(Object.assign(m(),f(n),{eventEffect:g(n.eventEffect)||"",formName:g(n.formName)||""}))},formValidationError:function(e,t){var n=t||{};window.tronForm.error(Object.assign(m(),f(n),{errorType:"frontend component",errorAction:"form fill",errorOrigin:d,errorCode:n.errorCode||"",errorCause:g(n.errorCause)||"",errorMessage:n.errorMessage||"",formName:g(n.formName)||""}))}},b=n(3320);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}var x={componentName:"boutique",componentSubCat1:"accessory configurator"},S={businessDivision:"after sales",category1:"physical goods",category2:"All Accessories"};function E(){return"range"}function k(e){var t="size";switch(e){case b.Yi:t="size";break;case b.o$:t="color";break;case b.Y6:t="range";break;case b.T8:t="productID";break;case b.jC:t="packageID"}return t}function T(e){return Object.assign(e,S)}function A(e,t,n){if(Array.isArray(n))return n[0]&&n[0]===t?e:null;for(var r=0,i=Object.keys(n);r<i.length;r++){var o=i[r],a=e.slice();a.push({field:n.fieldType,value:o});var s=A(a,t,n[o]);if(s)return s}}function C(e){var t=e.variant,n=e.store,r=e.accessory,i=A([],t.id,n);if(!i)return[];var o=i.reduce((function(e,t){return Object.assign(e,(n={},r=k(t.field),i=t.value,(r=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==w(t)?t:t+""}(r))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n));var n,r,i}),{});return[T(Object.assign({category3:r.category,name:r.title},o))]}b.T8,b.jC,b.Yi,b.Y6,b.o$;var M={conClick:function(e){window.tronConfigurator&&window.tronConfigurator.conClick(Object.assign({componentDEVagency:a},x,e))},conListAdd:function(e){window.tronConfigurator&&window.tronConfigurator.conListAdd(Object.assign({componentDEVagency:a,listType:"wish list"},x,e))},conListRemove:function(e){window.tronConfigurator&&window.tronConfigurator.conListRemove(Object.assign({componentDEVagency:a,listType:"wish list"},x,e))}},L={componentName:"boutique",filterObject:"accessory"},R={filterSelected:function(e){window.tronSearchFilter&&window.tronSearchFilter.filterSelected(Object.assign({componentDEVagency:a},L,e))},filterRemoved:function(e){window.tronSearchFilter&&window.tronSearchFilter.filterRemoved(Object.assign({componentDEVagency:a},L,e))},filterRemoveAll:function(e){window.tronSearchFilter&&window.tronSearchFilter.filterRemoveAll(Object.assign({componentDEVagency:a},L,e))}},P=["GTM-WTXNCRK","GTM-P882QTB","GTM-W28ZNTL"];function I(){window.tronActivityMap.activityMapClick({componentVersion:"Last build:".concat(window.rrFormatedDate)})}function D(e){e.timestamp=(new Date).getTime();try{return window.dataLayer=window.dataLayer||[],F(e="string"==typeof e?{event:e}:e),window.dataLayer.push(e)}catch(e){console.warn(e)}}function O(){var e=window.location.pathname.split("/"),t=e[e.length-2]+"/"+e[e.length-1].split(".")[0];window.dataLayer=window.dataLayer||[];var n={event:"pageLoad",pageCategory:t};F(n),window.dataLayer.push(n)}function F(e){var t=o.n.get_current_preferred_dealer();t.get_name()?e.selectedDealer=t.get_name():e.selectedDealer="Not Selected",o.n.is_dealer_page()&&(e.dealerName=o.n.get_current_page_dealer_info_obj("dealerName")),o.n.is_dealer_page()&&(e.dealerSection=o.n.get_current_page_dealer_info_obj("dealerType"))}function N(e,t){var n=[];e&&[].slice.call(e).forEach((function(e,r){var i={id:e.getAttribute("data-tracking-id"),name:e.getAttribute("data-tracking-name"),category:e.getAttribute("data-category"),list:t,position:r+1};n.push(i)})),window.impression&&t.indexOf("Collection")>-1?n.forEach((function(e){D(["ecommerce.impressions.push",e])})):D({event:"ee-productImpression",ecommerce:{impressions:n}}),window.impression=!0}function j(e){if(e)try{var t=JSON.parse(e);window.impression?D(["ecommerce.impressions.push",Array.isArray(t)?t[0]:t]):(D({event:"ee-productImpression",ecommerce:{impressions:Array.isArray(t)?t:[t]}}),window.impression=!0)}catch(e){}}function B(){i().each({".cta a":"CTA",".rrmc-component-grid-container:not(.hero) .cta a":"in_page_cta",".rrmc-footer-link":"footer_nav",".rrmc-footer-social":"footer_social"},(function(e,t){i()(e).attr("data-analytics",t)}))}},6801:(e,t,n)=>{"use strict";n.d(t,{Fo:()=>l,MS:()=>s,Pl:()=>r,SJ:()=>o,h7:()=>i,wS:()=>a});var r={v:"5.5.8",fr:60,ip:0,op:61,w:16,h:16,nm:"menu-burger-icon  w/ hover",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.8],y:[1]},o:{x:[.2],y:[0]},t:37,s:[0],e:[-45]},{t:52}],ix:10},p:{a:1,k:[{i:{x:.8,y:1},o:{x:.2,y:0},t:30,s:[8.001,1.999,0],e:[8.001,8,0],to:[0,1,0],ti:[0,-1,0]},{t:45}],ix:2},a:{a:0,k:[8.001,.999,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.999,1.001],[8.001,1.001],[8.001,-1.001],[3.999,-1.001]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[3.999,-.999]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8.001,1.001],[.999,1.001],[.999,-1.001],[-8.001,-1.001]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,1],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:5,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:61,st:30,bm:0},{ddd:0,ind:2,ty:4,nm:"2",sr:1,ks:{o:{a:1,k:[{i:{x:[.8],y:[1]},o:{x:[.2],y:[0]},t:30,s:[100],e:[0]},{t:45}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[8,8,0],ix:2},a:{a:0,k:[8,7,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8,1.001],[8,1.001],[8,-1.001],[-8,-1.001]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,7],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:45,st:30,bm:0},{ddd:0,ind:3,ty:4,nm:"3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.8],y:[1]},o:{x:[.2],y:[0]},t:37,s:[0],e:[45]},{t:52}],ix:10},p:{a:1,k:[{i:{x:.8,y:1},o:{x:.2,y:0},t:30,s:[8,14,0],e:[8,8,0],to:[0,-1,0],ti:[0,1,0]},{t:45}],ix:2},a:{a:0,k:[8,13,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8,1],[8,1],[8,-1],[-8,-1]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,13],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:30,op:61,st:30,bm:0},{ddd:0,ind:4,ty:4,nm:"6",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.4,y:0},t:0,s:[8.001,1.999,0],e:[-8.062,2.001,0],to:[0,0,0],ti:[0,0,0]},{t:9,s:[-8.062,2.001,0],h:1},{i:{x:.3,y:1},o:{x:.4,y:0},t:11,s:[24.063,2,0],e:[8.001,1.999,0],to:[0,0,0],ti:[0,0,0]},{t:22}],ix:2},a:{a:0,k:[8.001,.999,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[3.999,1.001],[8.001,1.001],[8.001,-1.001],[3.999,-1.001]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[3.999,-.999]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8.001,1.001],[.999,1.001],[.999,-1.001],[-8.001,-1.001]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,1],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:5,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30,st:30,bm:0},{ddd:0,ind:5,ty:4,nm:"5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.4,y:0},t:5,s:[8,8,0],e:[-8.062,8.002,0],to:[0,0,0],ti:[0,0,0]},{t:14,s:[-8.062,8.002,0],h:1},{i:{x:.3,y:1},o:{x:.4,y:0},t:16,s:[24.062,8.001,0],e:[8,8,0],to:[0,0,0],ti:[0,0,0]},{t:26}],ix:2},a:{a:0,k:[8,7,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8,1.001],[8,1.001],[8,-1.001],[-8,-1.001]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,7],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30,st:35,bm:0},{ddd:0,ind:6,ty:4,nm:"4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.4,y:0},t:8,s:[8,14,0],e:[-8.062,14.001,0],to:[0,0,0],ti:[0,0,0]},{t:17,s:[-8.062,14.001,0],h:1},{i:{x:.3,y:1},o:{x:.4,y:0},t:19,s:[24.062,14.001,0],e:[8,14,0],to:[0,0,0],ti:[0,0,0]},{t:29}],ix:2},a:{a:0,k:[8,13,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-8,1],[8,1],[8,-1],[-8,-1]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.004000000393,.008000000785,.008000000785,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[8,13],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30,st:38,bm:0}],markers:[{tm:30,cm:"",dr:0}]},i={v:"5.4.3",fr:60,ip:0,op:91,w:4,h:80,nm:"scrolley",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"scrolley 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2.5,27,0],ix:2},a:{a:0,k:[1,477,0],ix:1},s:{a:0,k:[100,80,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[1,444],[1,543.125]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[],o:[],v:[],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.4],y:[1]},o:{x:[.33],y:[0]},n:["0p4_1_0p33_0"],t:18,s:[0],e:[100]},{t:60}],ix:1},e:{a:1,k:[{i:{x:[.4],y:[1]},o:{x:[.33],y:[0]},n:["0p4_1_0p33_0"],t:0,s:[0],e:[100]},{t:38}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:91,st:-180,bm:0},{ddd:0,ind:2,ty:4,nm:"scrolley 2",sr:1,ks:{o:{a:0,k:25,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[2.5,27,0],ix:2},a:{a:0,k:[1,477,0],ix:1},s:{a:0,k:[100,80,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[1,444],[1,543.125]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[],o:[],v:[],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"tm",s:{a:0,k:100,ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1},{ty:"st",c:{a:0,k:[1,1,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:4,ml2:{a:0,k:4,ix:8},bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:91,st:-180,bm:0}],markers:[]},o={v:"5.5.9",fr:60,ip:0,op:60,w:50,h:50,nm:"16. Preloader simple",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"halves",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.5],y:[1]},o:{x:[.5],y:[0]},t:0,s:[0],e:[180]},{t:60}],ix:10},p:{a:0,k:[25,25,0],ix:2},a:{a:0,k:[16.5,16.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,-8.836],[-8.836,0]],o:[[-8.836,0],[0,8.837],[0,0]],v:[[8,-16],[-8,0],[8,16]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,8.837],[8.837,0]],o:[[8.837,0],[0,-8.836],[0,0]],v:[[8,16],[24,0],[8,-16]],c:!1},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.999999940162,.999999940162,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[8.5,16.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.5],y:[1]},o:{x:[.5],y:[0]},t:0,s:[100],e:[0]},{t:30}],ix:1},e:{a:1,k:[{i:{x:[.5],y:[1]},o:{x:[.5],y:[0]},t:30,s:[100],e:[0]},{t:60}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:121,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"solid-bg",sr:1,ks:{o:{a:0,k:30,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[25,25,0],ix:2},a:{a:0,k:[16.5,16.5,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,-8.836],[-8.836,0]],o:[[-8.836,0],[0,8.837],[0,0]],v:[[8,-16],[-8,0],[8,16]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.999999940162,.999999940162,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[8.5,16.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,8.837],[8.837,0]],o:[[8.837,0],[0,-8.836],[0,0]],v:[[-8,16],[8,0],[-8,-16]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.999999940162,.999999940162,1,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:1,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[24.5,16.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:600,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"logo",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[25,25,0],ix:2},a:{a:0,k:[11.51,15.171,0],ix:1},s:{a:0,k:[50,50,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[.192,1.578],[.774,2.12],[1.39,2.227],[-.2,.144],[-.362,.504],[.714,2.143],[2.307,.491],[.776,.003],[0,0],[0,0],[0,0],[0,0],[.695,-.365],[0,0],[0,0],[0,0],[0,.205],[0,0],[-.789,.088],[-.72,.137],[-.737,.335],[0,0],[-.343,-.951],[.007,-1.723],[.171,-.091],[0,0],[0,0]],o:[[-.108,-.032],[-.081,-.662],[-.887,-2.429],[.213,-.134],[1.111,-.794],[1.535,-2.134],[-.878,-2.63],[-.621,-.133],[0,0],[0,0],[.749,.455],[0,0],[0,.205],[0,0],[0,0],[0,0],[-.714,-.384],[0,0],[.451,-.028],[.903,-.1],[1.012,-.192],[0,0],[.638,1.167],[.766,2.131],[-.008,2.351],[0,0],[0,0],[0,0]],v:[[6.361,12.501],[5.588,10.731],[4.147,5.128],[1.184,-.805],[1.719,-1.163],[4.158,-3.538],[5.325,-10.475],[.285,-14.957],[-2.127,-15.171],[-11.416,-15.171],[-11.416,-15.003],[-10.746,-13.206],[-10.746,10.817],[-11.51,12.501],[-11.51,12.669],[-7.253,12.669],[-7.253,12.501],[-8.014,10.817],[-8.014,1.483],[-6.011,1.313],[-3.655,.964],[-.351,-.017],[-.334,.012],[1.316,3.661],[2.495,9.413],[.818,12.501],[.818,12.669],[6.361,12.669]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[4.382,-1.297],[.538,-.023],[0,0],[0,0],[0,0],[-.278,-.055],[-.516,-.425],[.018,-2.092]],o:[[-1.314,.388],[0,0],[0,0],[0,0],[.217,0],[.496,.073],[.826,.683],[-.034,3.598]],v:[[-4.155,-.811],[-8.014,-.231],[-8.014,-13.6],[-2.585,-13.6],[-2.001,-13.59],[-.885,-13.528],[.808,-12.828],[2.354,-8.768]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ind:2,ty:"sh",ix:3,ks:{a:0,k:{i:[[-.773,.086],[-.476,.077],[0,0],[.262,.591],[.411,-.018],[0,0],[.888,-.117],[0,0],[.68,-.358],[0,0],[0,0],[0,0],[0,.201],[0,0]],o:[[.574,-.065],[0,0],[-.158,-.436],[-1.156,.224],[0,0],[-.821,.21],[0,0],[0,.201],[0,0],[0,0],[0,0],[-.7,-.375],[0,0],[.442,-.028]],v:[[-.614,4.074],[.941,3.863],[.919,3.803],[.272,2.215],[-2.578,2.561],[-2.578,1.151],[-5.256,1.637],[-5.256,13.355],[-6.003,15.005],[-6.003,15.171],[-1.831,15.171],[-1.831,15.005],[-2.578,13.355],[-2.578,4.24]],c:!0},ix:2},nm:"Path 3",mn:"ADBE Vector Shape - Group",hd:!1},{ind:3,ty:"sh",ix:4,ks:{a:0,k:{i:[[.187,1.545],[.759,2.077],[1.362,2.183],[-.196,.141],[-.355,.495],[.7,2.1],[2.259,.481],[.149,.021],[-.161,-.486],[-.054,-.242],[-.047,-.041],[.019,-2.05],[3.115,-1.495],[-.282,-.652],[-.276,.125],[0,0],[-.335,-.931],[.007,-1.69],[.167,-.089],[0,0],[0,0],[0,0]],o:[[-.08,-.65],[-.869,-2.382],[.208,-.13],[1.089,-.779],[1.504,-2.09],[-.86,-2.578],[-.123,-.026],[.222,.406],[.078,.232],[.05,.035],[.81,.669],[-.027,3.014],[.323,.601],[.435,-.137],[0,0],[.625,1.144],[.751,2.088],[-.007,2.302],[0,0],[0,0],[0,0],[-.106,-.032]],v:[[10.754,13.305],[9.34,7.814],[6.437,1.997],[6.961,1.647],[9.351,-.681],[10.494,-7.478],[5.557,-11.871],[5.147,-11.943],[5.724,-10.607],[5.921,-9.896],[6.068,-9.784],[7.582,-5.805],[2.937,1.333],[3.83,3.176],[4.933,2.771],[4.95,2.798],[6.565,6.375],[7.721,12.012],[6.078,15.005],[6.078,15.17],[11.51,15.17],[11.51,15.005]],c:!0},ix:2},nm:"Path 4",mn:"ADBE Vector Shape - Group",hd:!1},{ind:4,ty:"sh",ix:5,ks:{a:0,k:{i:[[.31,.376],[0,0],[0,0],[0,0],[0,0],[-.297,.089],[-.519,.247],[0,0],[0,0]],o:[[0,0],[0,0],[.733,.445],[0,0],[.348,-.065],[.614,-.18],[0,0],[0,0],[-.178,-.658]],v:[[.96,-12.08],[-5.912,-12.08],[-5.912,-11.915],[-5.256,-10.155],[-5.256,-.985],[-4.275,-1.215],[-2.578,-1.86],[-2.578,-10.54],[1.724,-10.54]],c:!0},ix:2},nm:"Path 5",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[11.51,15.171],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:9,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:1200,st:0,bm:0}],markers:[]},a={v:"5.5.9",fr:30,ip:0,op:9,w:48,h:24,nm:"17. Toggle - Dark",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Dot",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.545,y:1},o:{x:.668,y:0},t:0,s:[12,12,0],e:[36,12,0],to:[3.023,0,0],ti:[-.977,0,0]},{t:8}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.6,.6,.6],y:[1,1,1]},o:{x:[.7,.7,.7],y:[0,0,0]},t:0,s:[100,100,100],e:[130,100,100]},{i:{x:[.6,.6,.6],y:[1,1,1]},o:{x:[.7,.7,.7],y:[0,0,0]},t:4,s:[130,100,100],e:[100,100,100]},{t:8}],ix:6}},ao:0,shapes:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.6],y:[1]},o:{x:[.7],y:[0]},t:0,s:[.411764711142,.411764711142,.411764711142,1],e:[.42745098039215684,.18823529411764706,.6549019607843137,1]},{t:8}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],ip:0,op:9,st:-7,bm:0},{ddd:0,ind:2,ty:4,nm:"Border",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[24,12,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"rc",d:1,s:{a:0,k:[46,22],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"rd",nm:"Round Corners 1",r:{a:0,k:12,ix:1},ix:2,mn:"ADBE Vector Filter - RC",hd:!1},{ty:"st",c:{a:0,k:[.411764711142,.411764711142,.411764711142,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:9,st:-7,bm:0}],markers:[]},s={v:"5.5.9",fr:30,ip:0,op:9,w:48,h:24,nm:"17. Toggle - Light",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"Dot",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.6,y:1},o:{x:.7,y:0},t:0,s:[12,12,0],e:[36,12,0],to:[4,0,0],ti:[-4,0,0]},{t:8}],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:1,k:[{i:{x:[.6,.6,.6],y:[1,1,1]},o:{x:[.7,.7,.7],y:[0,0,0]},t:0,s:[100,100,100],e:[130,100,100]},{i:{x:[.6,.6,.6],y:[1,1,1]},o:{x:[.7,.7,.7],y:[0,0,0]},t:4,s:[130,100,100],e:[100,100,100]},{t:8}],ix:6}},ao:0,shapes:[{d:1,ty:"el",s:{a:0,k:[16,16],ix:2},p:{a:0,k:[0,0],ix:3},nm:"Ellipse Path 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"fl",c:{a:1,k:[{i:{x:[.6],y:[1]},o:{x:[.7],y:[0]},t:0,s:[.411764711142,.411764711142,.411764711142,1],e:[.42745098039215684,.18823529411764706,.6549019607843137,1]},{t:8}],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1}],ip:0,op:9,st:-7,bm:0},{ddd:0,ind:2,ty:4,nm:"Border",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[24,12,0],ix:2},a:{a:0,k:[0,0,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"rc",d:1,s:{a:0,k:[46,22],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"rd",nm:"Round Corners 1",r:{a:0,k:12,ix:1},ix:2,mn:"ADBE Vector Filter - RC",hd:!1},{ty:"st",c:{a:0,k:[.866666674614,.866666674614,.866666674614,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1}],ip:0,op:9,st:-7,bm:0}],markers:[]},l={v:"5.5.7",meta:{g:"LottieFiles AE 0.1.20",a:"",k:"",d:"",tc:""},fr:60,ip:0,op:31,w:16,h:16,nm:"search-icon",ddd:0,assets:[],layers:[{ddd:0,ind:1,ty:4,nm:"search icon Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.6],y:[1]},o:{x:[.4],y:[0]},t:4,s:[0]},{t:30,s:[360]}],ix:10},p:{a:0,k:[6,6,0],ix:2},a:{a:0,k:[6,6,0],ix:1},s:{a:1,k:[{i:{x:[.3,.3,.3],y:[1,1,1]},o:{x:[.4,.4,.4],y:[0,0,0]},t:4,s:[100,100,100]},{i:{x:[.3,.3,.3],y:[1,1,1]},o:{x:[.4,.4,.4],y:[0,0,0]},t:17,s:[75,75,100]},{t:30,s:[100,100,100]}],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,2.761],[2.762,0],[0,-2.761],[-2.762,0]],o:[[0,-2.761],[-2.762,0],[0,2.761],[2.762,0]],v:[[5,0],[0,-5],[-5,0],[0,5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,d:[{n:"d",nm:"dash",v:{a:0,k:28,ix:1}},{n:"o",nm:"offset",v:{a:0,k:0,ix:7}}],nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[6,6],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:600,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"handle",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[8,8,0],ix:2},a:{a:0,k:[8,8,0],ix:1},s:{a:0,k:[100,100,100],ix:6}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[2.732,2.732],[-2.732,-2.732]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[12.267,12.268],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:5,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:24,s:[100]},{t:30,s:[0]}],ix:1},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:600,st:0,bm:0}],markers:[]}},4315:(e,t,n)=>{"use strict";function r(e,t){var n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16);return n=parseInt(n*(100+t)/100),r=(r=parseInt(r*(100+t)/100))<255?r:255,i=(i=parseInt(i*(100+t)/100))<255?i:255,"#"+(1==(n=n<255?n:255).toString(16).length?"0"+n.toString(16):n.toString(16))+(1==r.toString(16).length?"0"+r.toString(16):r.toString(16))+(1==i.toString(16).length?"0"+i.toString(16):i.toString(16))}n.d(t,{x:()=>r})},7455:(e,t,n)=>{"use strict";n.d(t,{Go:()=>o,Jm:()=>i,iI:()=>a,xb:()=>r});var r="open-overlay",i="overlayClose",o="overlayBack",a="open-default-form"},9608:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(8607);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}const l=function(){return e=function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cursor=t,this.type_current="default",this.icon_current=null,this.action_queue=[],this.animation_active=!1,this.current_icon=null,this.options=Object.assign({change_document:!0},i),this.states={default_system:{enter:function(){return new Promise((function(e){n.setBodyStyleCursor(null),n.cursor.c.style.display="none",n.cursor.c_icon.className="rrmc-cursor-icon",e()}))},leave:function(){return Promise.resolve()}},default:{enter:function(){return new Promise((function(e){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),r.uo.set([n.cursor.c_border,n.cursor.c_icon],{scale:.05}),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:.3},"start").to(n.cursor.c_border,.1,{borderWidth:4,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:.3},"start").add(e)}))},leave:function(){return Promise.resolve()}},scale:{enter:function(e){return new Promise((function(t){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),n.cursor.c_icon.classList.add(e),n.current_icon=e,r.uo.set([n.cursor.c_border,n.cursor.c_icon],{scale:.2}),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:1},"start").to(n.cursor.c_border,.1,{borderWidth:1,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:1},"start").add(t)}))},leave:function(){return new Promise((function(e){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:.3},"start").to(n.cursor.c_border,.1,{borderWidth:4,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:.3},"start").add(e)}))}},scale_cta:{enter:function(){return new Promise((function(e){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:.7},"start").to(n.cursor.c_border,.1,{borderWidth:2,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:.7},"start").add(e)}))},leave:function(){return Promise.resolve()}},scale_strong:{enter:function(){return Promise.resolve()},leave:function(){return new Promise((function(e){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:.3},"start").to(n.cursor.c_border,.1,{borderWidth:4,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:.3},"start").add((function(){n.cursor.c.style.display="none"})).add(e)}))}},scale_large:{enter:function(e){return new Promise((function(t){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),n.cursor.c_icon.classList.add(e),n.current_icon=e,r.uo.set([n.cursor.c_border,n.cursor.c_icon],{scale:.2}),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:2.717391},"start").to(n.cursor.c_border,.1,{borderWidth:1,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:1},"start").add(t)}))},leave:function(){return new Promise((function(e){n.cursor.c.style.display="block",n.setBodyStyleCursor("none"),n.cursor.c_icon.classList.remove(n.current_icon),(new r.Y_).addLabel("start").to(n.cursor.c_border,.1,{scale:.3},"start").to(n.cursor.c_border,.1,{borderWidth:4,autoRound:!1},"start").to(n.cursor.c_icon,.1,{scale:.3},"start").add(e)}))}}}},(t=[{key:"setBodyStyleCursor",value:function(e){this.options.change_document&&(document.body.style.cursor=e)}},{key:"animate",value:function(e){var t=this,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,3),r=n[0],i=n[1],a=n[2];this.states[r][i](a).then((function(){t.type_current=r,t.icon_current=a,t.animation_active=!1,t.process_queue()}))}},{key:"process_queue",value:function(){if(!this.animation_active&&this.action_queue.length>0){this.animation_active=!0;var e=this.action_queue.pop();this.animate(e)}}},{key:"queue",value:function(e){this.action_queue=[e],this.process_queue()}}])&&a(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},637:(e,t,n)=>{"use strict";n.d(t,{n:()=>h,z:()=>c});var r=n(2725);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var c=function(){return s((function e(){o(this,e),this.preference={}}),[{key:"set_name",value:function(e){this.preference.name=e}},{key:"get_name",value:function(){return this.preference.name}},{key:"set_trading_name",value:function(e){this.preference.trading_name=e}},{key:"get_trading_name",value:function(){return this.preference.trading_name}},{key:"set_english_name",value:function(e){this.preference.english_name=e}},{key:"get_english_name",value:function(){return this.preference.english_name}},{key:"set_number",value:function(e){this.preference.number=e}},{key:"get_number",value:function(){return this.preference.number}},{key:"set_href",value:function(e){this.preference.href=e}},{key:"get_href",value:function(){return this.preference.href}},{key:"set_from_string",value:function(e){var t={};try{if(null===(t=JSON.parse(e)))return}catch(e){return}var n=t,r=n.href,i=n.number,o=n.name,a=n.trading_name;this.set_href(r),this.set_number(i),this.set_name(o),this.set_trading_name(a)}},{key:"to_string",value:function(){return JSON.stringify(this.preference)}}])}(),u=function(){function e(){o(this,e),this.list_removed_dealer_numbers=["39795","36823"]}return s(e,[{key:"is_removed_dealer",value:function(e){var t=e.get_number();return!!t&&this.list_removed_dealer_numbers.indexOf(t)>-1}}],[{key:"is_removed",value:function(t){return(new e).is_removed_dealer(t)}}])}(),h=new(function(){return s((function e(){var t=this;o(this,e),r.A.sub_epaas.subscribe({next:function(e){var n=e.epaas;t.epaas=n,t.initialise_dealer_preference()}})}),[{key:"is_epaas_available",value:function(){return!!this.epaas}},{key:"is_epaas_unavailable",value:function(){return!this.is_epaas_available()}},{key:"check_use_allowed",value:function(){this.is_epaas_available()?this.use_allowed=this.epaas.isUsageAllowed("rrmc-dealer"):this.use_allowed=!1}},{key:"is_use_allowed",value:function(){return this.use_allowed}},{key:"is_use_not_allowed",value:function(){return!this.is_use_allowed()}},{key:"read_persistence",value:function(){return this.epaas.getPersistence("rrmc-dealer")}},{key:"set_persistence",value:function(e){return this.epaas.setPersistence("rrmc-dealer",e)}},{key:"set_preference",value:function(e){this.preference=e}},{key:"get_preference",value:function(){return this.preference}},{key:"is_preference_set",value:function(){return!!this.get_preference()}},{key:"read_dealer_preference",value:function(){var e=new c;e.set_from_string(this.read_persistence()),u.is_removed(e)&&(e=new c),this.set_preference(e)}},{key:"store_dealer_preference",value:function(){this.check_use_allowed(),this.is_use_not_allowed()||this.set_persistence(this.preference.to_string())}},{key:"publish_preference",value:function(){r.A.sub_preferred_dealer.next(this.get_preference())}},{key:"initialise_dealer_preference",value:function(){this.check_use_allowed(),this.is_use_not_allowed()||(this.is_preference_set()?this.store_dealer_preference():(this.read_dealer_preference(),this.publish_preference()))}},{key:"select_dealer",value:function(e){this.set_preference(e),this.store_dealer_preference()}},{key:"subscribe",value:function(e){return r.A.sub_preferred_dealer.subscribe({next:e})}},{key:"get_current_preferred_dealer",value:function(){if(this.check_use_allowed(),this.is_use_not_allowed())return new c;var e=new c;return e.set_from_string(this.read_persistence()),e}},{key:"is_dealer_page",value:function(){return window.rrmc_is_dealer_page}},{key:"get_current_page_dealer_info_obj",value:function(e){return window.rrmc_dealer_info[e]}}])}())},5699:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(2725),i=!1;function o(){return i}document.addEventListenerRR("touchstart",(function e(){i=!0,document.removeEventListenerRR("touchstart",e),r.A.sub_touch_update.next(!0)}))},9018:(e,t,n)=>{"use strict";function r(){return!!window.MSInputMethodContext&&!!document.documentMode}function i(){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t=navigator.userAgent.toLowerCase().indexOf("android")>-1;return e&&t}function o(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function a(){return/Edge\/\d./i.test(navigator.userAgent)}n.d(t,{Kz:()=>i,Lo:()=>o,en:()=>r,nK:()=>a}),r()&&document.documentElement.classList.add("ie11"),a()&&document.documentElement.classList.add("edge"),/^(?=.*\bMacintosh\b)(?=.*\bChrome\b).*$/i.test(navigator.userAgent)&&document.documentElement.classList.add("mac_chrome"),/^(?=.*\bWindows\b)(?=.*\bChrome\b).*$/i.test(navigator.userAgent)&&document.documentElement.classList.add("win_chrome"),i()&&document.documentElement.classList.add("android_firefox"),o()&&document.documentElement.classList.add("firefox")},4861:(e,t,n)=>{"use strict";function r(e){var t=(new DOMParser).parseFromString(e.value,"text/html");return t.body?t.body.textContent:""}n.d(t,{A:()=>r})},2725:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var r=n(5215),i=n(6988),o=n(731),a=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return r.C6(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.P;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(i.B7),s=n(348),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return r.C6(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return r.C6(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(s.y)),c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return r.C6(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(l),u=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),h=function(e){function t(n,r){void 0===r&&(r=u.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return r.C6(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(u),d=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.C6(t,e),t}(h))(c),p=n(2968),f=n(1111),m=new f.c((function(e){return e.complete()}));var v;function g(e,t){return new f.c((function(n){var r=new s.y,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}v||(v={});var y,_=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e;switch(this.kind){case"N":return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,i,o=e[e.length-1];return(n=o)&&"function"==typeof n.schedule?(e.pop(),g(e,o)):(r=e,new f.c((i=r,function(e){for(var t=0,n=i.length;t<n&&!e.closed;t++)e.next(i[t]);e.complete()})))}(this.value);case"E":return e=this.error,new f.c((function(t){return t.error(e)}));case"C":return function(e){return e?function(e){return new f.c((function(t){return e.schedule((function(){return t.complete()}))}))}(e):m}()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),b=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return r.C6(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new w(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(_.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(_.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(_.createComplete()),this.unsubscribe()},t}(p.v),w=function(){return function(e,t){this.notification=e,this.destination=t}}(),x=n(293),S=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return r.C6(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new E(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,a=r.length;if(this.closed)throw new o.P;if(this.isStopped||this.hasError?t=s.y.EMPTY:(this.observers.push(e),t=new x.Y(this,e)),i&&e.add(e=new b(e,i)),n)for(var l=0;l<a&&!e.closed;l++)e.next(r[l]);else for(l=0;l<a&&!e.closed;l++)e.next(r[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||d).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.B7),E=function(){return function(e,t){this.time=e,this.value=t}}(),k=new h(l),T=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new A(e,this.dueTime,this.scheduler))},e}(),A=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return r.C6(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(C,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(p.v);function C(e){e.debouncedNext()}const M={sub_footer_height:new a(0),sub_us_banner_state:new a,sub_menu_top:new a(34),sub_loaded_component:new i.B7,sub_cursor:new S,sub_overlay_manager_bus:new i.B7,sub_my_list_manager_bus:new i.B7,sub_touch_update:new a(!1),sub_broadcast:new S,sub_height_resize:(new i.B7).pipe((void 0===y&&(y=k),function(e){return e.lift(new T(500,y))})),sub_dealer_recaptcha:new i.B7,sub_form_recaptcha:new i.B7,sub_mobile_menu:new i.B7,sub_my_list_updated:new S(1),sub_luggage_overlay:new S(1),sub_epaas:new S(1),sub_epaas_consent_change:new i.B7,sub_preferred_dealer:new S(1),sub_preferred_language:new S(1),sub_audio_manager_bus:new i.B7}},2453:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function o(){o=function(){return t};var e,t={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),s=new P(r||[]);return a(o,"_invoke",{value:C(e,n,s)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&i.call(E,l)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(o,a,s,l){var c=p(e[o],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==r(h)&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var o;a(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(i.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(r(t)+" is not iterable")}return b.prototype=w,a(k,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,l,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function a(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,l,"next",e)}function l(e){a(o,r,i,s,l,"throw",e)}s(void 0)}))}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{E3:()=>d,cy:()=>p,he:()=>f});var d=function(){function e(t){var n=this;l(this,e),this.experience_list=t,this.on_campaign_response=function(e){n.matchWithExperienceList(e)&&n.resolveLiveResponse(e)}}return u(e,[{key:"isDefaultExperience",value:function(){return this.experience_list.isDefaultExperience()}},{key:"isCampaignObserverAvailable",value:function(){return!!window.rrmc_experiences}},{key:"makeResponse",value:function(){this.response=[]}},{key:"getResponse",value:function(){return this.response}},{key:"addToResponse",value:function(e){this.response.push(e)}},{key:"isEmptyResponse",value:function(e){return 0===e.length}},{key:"isValidResponse",value:function(e){return!this.isEmptyResponse(e)}},{key:"setResolve",value:function(e){this.wait_resolve=e}},{key:"resolveWait",value:function(){this.wait_resolve(this.getResponse())}},{key:"resolveLiveResponse",value:function(e){this.cancelWait(),this.addToResponse(e),this.resolveWait()}},{key:"timeoutIfNoResponse",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.timer=setTimeout((function(){e.resolveWait()}),t)}},{key:"cancelWait",value:function(){clearTimeout(this.timer)}},{key:"matchWithExperienceList",value:function(e){var t=e.campaign,n=e.experience;return this.experience_list.match({campaign:t,experience:n})}},{key:"waitForLiveCampaign",value:(r=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.setResolve(e),t.timeoutIfNoResponse(),window.rrmc_experiences.subscribe(t.on_campaign_response)})));case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"waitForLiveCampaignIfAvailable",value:(n=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.makeResponse(),this.isCampaignObserverAvailable()){e.next=3;break}return e.abrupt("return",this.getResponse());case 3:return e.next=5,this.waitForLiveCampaign();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"doesLiveCampaignMatch",value:(t=s(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDefaultExperience()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.waitForLiveCampaignIfAvailable();case 4:return t=e.sent,e.abrupt("return",this.isValidResponse(t));case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}],[{key:"makeStrategy",value:function(t){return new e(t)}}]);var t,n,r}(),p=function(){function e(t){var n=this;l(this,e),this.campaign_name=t,this.on_campaign_response=function(e){n.matchCampaign(e)&&n.resolveLiveResponse(e)}}return u(e,[{key:"matchCampaign",value:function(e){return e.campaign===this.campaign_name}},{key:"makeResponse",value:function(){this.response=null}},{key:"updateResponse",value:function(e){this.response=e}},{key:"getResponse",value:function(){return this.response}},{key:"setResolve",value:function(e){this.wait_resolve=e}},{key:"resolveWait",value:function(){this.wait_resolve(this.getResponse())}},{key:"resolveLiveResponse",value:function(e){this.cancelWait(),this.updateResponse(e.experience),this.resolveWait()}},{key:"timeoutIfNoResponse",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4e3;this.timer=setTimeout((function(){e.resolveWait()}),t)}},{key:"cancelWait",value:function(){clearTimeout(this.timer)}},{key:"wait_for_experience",value:function(){var e=this;return new Promise((function(t){e.makeResponse(),e.setResolve(t),e.timeoutIfNoResponse(),window.rrmc_experiences.subscribe(e.on_campaign_response)}))}}],[{key:"makeStrategy",value:function(t){return new e(t)}}])}(),f=function(){function e(t){l(this,e),this.experience_array=t}return u(e,[{key:"getNumberOfExperiences",value:function(){return this.experience_array.length}},{key:"isDefaultExperience",value:function(){return 0===this.getNumberOfExperiences()}},{key:"matchConfigs",value:function(e,t){return e.experience===t.experience&&e.campaign===t.campaign}},{key:"match",value:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(this.experience_array);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.matchConfigs(r,e))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}}],[{key:"makeExperienceList",value:function(t){var n=[];try{n=JSON.parse(t)}catch(e){console.log(e)}return new e(n)}}])}()},2130:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(6540),i=n(7289),o=n(4012),a=n(5847),s=n(8607),l=n(5116),c=n(2999),u='[data-glide-el="controls[nav]"]';function h(e,t,n){var h=new c.A,d=!!o.A&&{passive:!0},p={mount:function(){this._n=t.Html.root.querySelectorAll(u),this._c=e.settings.bibsContainer,this.bibsColour=(0,l.S)()&&e.settings.bibsMobileColour?e.settings.bibsMobileColour:e.settings.bibsColour,this.addBindings(),this.bullet_progress=[],this.addSvg()},addSvg:function(){var e=this._c.item(0).children;this.bullet_progress=[];for(var t=0;t<e.length;++t){var n=this.load_rounded_square(e.item(t));this.bullet_progress.push(n)}},removeSvg:function(){for(var e=0;e<this.bullet_progress.length;++e)this.bullet_progress[e].destroy()},load_rounded_square:function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height,o=(0,a.A)(r,i,1.5),l='\n          <svg class="rrmc-button-svg-anim" width="'.concat(r,'" height="').concat(i,'" viewBox="0 0 ').concat(r," ").concat(i,'" xmlns="http://www.w3.org/2000/svg">\n          ').concat(this.makeSvgPaths(o,"#".concat(this.bibsColour)),"\n          </svg>\n      "),c=document.createRange().createContextualFragment(l);t.appendChild(c);var u=t.querySelector(".rrmc-button-svg-anim-path"),h=t.querySelector(".rrmc-button-svg-anim-scale"),d=t.querySelector(".rrmc-button-svg-anim-circle");return{start:function(){if(s.uo.killTweensOf(h),s.uo.killTweensOf(u),s.uo.killTweensOf(d),e.settings.autoplay)s.uo.set(h,{transform:"matrix(1,0,0,1,0,0)"}),s.uo.set(u,{strokeDashoffset:"-".concat(o.dash_length)}),s.uo.to(u,e.settings.autoplay/1e3,{strokeDashoffset:"-".concat(2*o.dash_length),autoRound:!1,ease:s.WG.easeNone}),s.uo.to(d,.4,{opacity:1,attr:{r:r/8},autoRound:!1,ease:s.WG.easeNone});else{var t=r/2-r/2*.4;s.uo.set(d,{opacity:1,attr:{r:r/8},autoRound:!1,ease:s.WG.easeNone}),s.uo.set(u,{strokeDashoffset:"-".concat(2*o.dash_length)}),s.uo.set(h,{transform:"matrix(".concat(.4,",0,0,").concat(.4,",").concat(t,",").concat(t,")"),autoRound:!1,ease:s.WG.easeNone}),s.uo.to(h,.4,{transform:"matrix(1,0,0,1,0,0)",autoRound:!1,ease:s.WG.easeNone})}},stop:function(){s.uo.killTweensOf(u),s.uo.killTweensOf(h),s.uo.killTweensOf(d);var e=r/2-r/2*.4;s.uo.to(h,.4,{transform:"matrix(".concat(.4,",0,0,").concat(.4,",").concat(e,",").concat(e,")"),autoRound:!1,ease:s.WG.easeNone}),s.uo.set(u,{strokeDashoffset:"-".concat(o.dash_length-1),delay:.4}),s.uo.to(d,.4,{opacity:.5,attr:{r:r/5},autoRound:!1,ease:s.WG.easeNone})},destroy:function(){t.removeChild(t.querySelector(".rrmc-button-svg-anim"))}}},makeSvgPaths:function(e,t){return'\n            <circle class="rrmc-button-svg-anim-circle"\n              opacity=".5"\n              cx="'.concat(e.w/2,'" cy="').concat(e.w/2,'" fill="').concat(t,'" r="').concat(e.w/5,'"/>\n            <g class="rrmc-button-svg-anim-scale" transform="">\n              <path class="rrmc-button-svg-anim-path" d="\n                       M ').concat(e.middle_left," ").concat(e.middle_vertical,"\n                       A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_left_x," ").concat(e.arc_top_left_y,"\n                       L ").concat(e.arc_top_right_x," ").concat(e.arc_top_right_y,"\n                       A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_right," ").concat(e.middle_vertical,"\n                       A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_right_x," ").concat(e.arc_bottom_y,"\n                       L ").concat(e.arc_top_left_x," ").concat(e.arc_bottom_y,"\n                       A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_left," ").concat(e.middle_vertical,'\n                       "\n                    stroke-dasharray="').concat(e.dash_length," ").concat(e.dash_length,'"\n                    stroke-dashoffset="').concat(Math.ceil(-e.dash_length),'"\n                    stroke="').concat(t,'" stroke-width="1.5"\n                    stroke-linecap="square" stroke-linejoin="round"\n                    fill="transparent"></path>\n            </g>\n   ')},setActive:function(){for(var e=0;e<this._n.length;e++)this.addClass(this._n[e].children)},removeActive:function(){for(var e=0;e<this._n.length;e++)this.removeClass(this._n[e].children)},addClass:function(t){var n=e.settings,i=t[e.index];i&&(i.classList.add(n.classes.activeNav),(0,r.w)(i).forEach((function(e){e.classList.remove(n.classes.activeNav)})))},removeClass:function(t){var n=t[e.index];n&&n.classList.remove(e.settings.classes.activeNav)},addBindings:function(){for(var e=0;e<this._c.length;e++)this.bind(this._c[e].children)},removeBindings:function(){for(var e=0;e<this._c.length;e++)this.unbind(this._c[e].children)},bind:function(e){for(var t=0;t<e.length;t++)h.on("click",e[t],this.click),h.on("touchstart",e[t],this.click,d)},unbind:function(e){for(var t=0;t<e.length;t++)h.off(["click","touchstart"],e[t])},click:function(e){e.preventDefault(),t.Run.make(t.Direction.resolve(e.currentTarget.getAttribute("data-glide-dir")))}};return(0,i.E8)(p,"items",{get:function(){return p._c}}),n.on("run.before",(function(n){var r=n.direction,i=e.index;p.bullet_progress[i].stop();var o=null;if(">"==r){var a=e.index+1;o=a>=t.Run.length+1?0:a}else if("<"==r){var s=e.index-1;o=s<0?t.Run.length:s}else"="==r&&(o=n.steps);p.bullet_progress[o].start()})),n.on("mount.after",(function(){p.bullet_progress[0].start()})),n.on("autoplay.hoverpause",(function(){var t=e.index;p.bullet_progress[t].stop()})),n.on("autoplay.hoverstart",(function(){var t=e.index;p.bullet_progress[t].start()})),n.on(["mount.after","move.after"],(function(){p.setActive()})),n.on("destroy",(function(){p.removeBindings(),p.removeActive(),h.destroy(),p.removeSvg()})),p}},502:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(7289),i=n(7232),o=n(2999);function a(e,t,n){var a=new o.A,s={mount:function(){this.start(),e.settings.hoverpause&&this.bind()},start:function(){var r=this;e.settings.autoplay&&(n.emit("autoplay.start"),(0,i.b0)(this._i)&&(this._i=setInterval((function(){r.stop(),t.Run.make(">"),r.start()}),this.time)))},stop:function(){n.emit("autoplay.stop"),this._i=clearInterval(this._i)},bind:function(){var e=this;a.on("mouseover",t.Html.root,(function(){n.emit("autoplay.hoverpause"),e.stop()})),a.on("mouseout",t.Html.root,(function(){n.emit("autoplay.hoverstart"),e.start()}))},unbind:function(){a.off(["mouseover","mouseout"],t.Html.root)}};return(0,r.E8)(s,"time",{get:function(){var n=t.Html.slides[e.index].getAttribute("data-glide-autoplay");return n?(0,i.RI)(n):(0,i.RI)(e.settings.autoplay)}}),n.on(["destroy","update"],(function(){s.unbind()})),n.on(["run.before","pause","destroy","swipe.start","update"],(function(){s.stop()})),n.on(["run.after","play","swipe.end"],(function(){s.start()})),n.on("update",(function(){s.mount()})),n.on("destroy",(function(){a.destroy()})),s}},719:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(6540);function i(e,t,n){var i={mount:function(){n.emit("build.before"),this.typeClass(),this.activeClass(),n.emit("build.after")},typeClass:function(){t.Html.root.classList.add(e.settings.classes[e.settings.type])},activeClass:function(){var n=e.settings.classes,i=t.Html.slides[e.index];i&&(i.classList.add(n.activeSlide),(0,r.w)(i).forEach((function(e){e.classList.remove(n.activeSlide)})))},removeClasses:function(){var n=e.settings.classes;t.Html.root.classList.remove(n[e.settings.type]),t.Html.slides.forEach((function(e){e.classList.remove(n.activeSlide)}))}};return n.on(["destroy","update"],(function(){i.removeClasses()})),n.on(["resize","update"],(function(){i.mount()})),n.on("move.after",(function(){i.activeClass()})),i}},6829:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7289);function i(e,t,n){var i={mount:function(){this.items=[],e.isType("carousel")&&(this.items=this.collect())},collect:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=t.Html.slides,i=e.settings,o=i.perView,a=i.classes,s=o+ +!!e.settings.peek,l=r.slice(0,s),c=r.slice(-s),u=0;u<Math.max(1,Math.floor(o/r.length));u++){for(var h=0;h<l.length;h++){var d=l[h].cloneNode(!0);d.classList.add(a.cloneSlide),n.push(d)}for(var p=0;p<c.length;p++){var f=c[p].cloneNode(!0);f.classList.add(a.cloneSlide),n.unshift(f)}}return n},append:function(){for(var e=this.items,n=t.Html,r=n.wrapper,i=n.slides,o=Math.floor(e.length/2),a=e.slice(0,o).reverse(),s=e.slice(o,e.length),l="".concat(t.Sizes.slideWidth,"px"),c=0;c<s.length;c++)r.appendChild(s[c]);for(var u=0;u<a.length;u++)r.insertBefore(a[u],i[0]);for(var h=0;h<e.length;h++)e[h].style.width=l},remove:function(){for(var e=this.items,n=0;n<e.length;n++)t.Html.wrapper.removeChild(e[n])}};return(0,r.E8)(i,"grow",{get:function(){return(t.Sizes.slideWidth+t.Gaps.value)*i.items.length}}),n.on("update",(function(){i.remove(),i.mount(),i.append()})),n.on("build.before",(function(){e.isType("carousel")&&i.append()})),n.on("destroy",(function(){i.remove()})),i}},2314:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(1558),i=n(7289),o=["ltr","rtl"],a={">":"<","<":">","=":"="};function s(e,t,n){var s={mount:function(){this.value=e.settings.direction},resolve:function(e){var t=e.slice(0,1);return this.is("rtl")?e.split(t).join(a[t]):e},is:function(e){return this.value===e},addClass:function(){t.Html.root.classList.add(e.settings.classes.direction[this.value])},removeClass:function(){t.Html.root.classList.remove(e.settings.classes.direction[this.value])}};return(0,i.E8)(s,"value",{get:function(){return s._v},set:function(e){o.indexOf(e)>-1?s._v=e:(0,r.R)("Direction value must be `ltr` or `rtl`")}}),n.on(["destroy","update"],(function(){s.removeClass()})),n.on("update",(function(){s.mount()})),n.on(["build.before","update"],(function(){s.addClass()})),s}},2430:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(7232),i=n(7289),o=n(5492),a={ltr:["marginLeft","marginRight"],rtl:["marginRight","marginLeft"]};function s(e,t,n){var s={apply:function(e){for(var n=0,r=e.length;n<r;n++){var i=e[n].style,o=t.Direction.value;i[a[o][0]]=0!==n?"".concat(this.value/2,"px"):"",n!==e.length-1?i[a[o][1]]="".concat(this.value/2,"px"):i[a[o][1]]=""}},remove:function(e){for(var t=0,n=e.length;t<n;t++){var r=e[t].style;r.marginLeft="",r.marginRight=""}}};return(0,i.E8)(s,"value",{get:function(){return(0,r.RI)(e.settings.gap)}}),(0,i.E8)(s,"grow",{get:function(){return s.value*(t.Sizes.length-1)}}),(0,i.E8)(s,"reductor",{get:function(){var t=e.settings.perView;return s.value*(t-1)/t}}),n.on(["build.after","update"],(0,o.n)((function(){s.apply(t.Html.wrapper.children)}),30)),n.on("destroy",(function(){s.remove(t.Html.wrapper.children)})),s}},4958:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(1558),i=n(6540),o=n(7289),a=n(7232),s='[data-glide-el="track"]';function l(e){var t={mount:function(){this.root=e.selector,this.track=this.root.querySelector(s),this.slides=Array.prototype.slice.call(this.wrapper.children).filter((function(t){return!t.classList.contains(e.settings.classes.cloneSlide)}))}};return(0,o.E8)(t,"root",{get:function(){return t._r},set:function(e){(0,a.Kg)(e)&&(e=document.querySelector(e)),(0,i.q)(e)?t._r=e:(0,r.R)("Root element must be a existing Html node")}}),(0,o.E8)(t,"track",{get:function(){return t._t},set:function(e){(0,i.q)(e)?t._t=e:(0,r.R)("Could not find track element. Please use ".concat(s," attribute."))}}),(0,o.E8)(t,"wrapper",{get:function(){return t.track.children[0]}}),t}},6270:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7289),i=n(7232);function o(e,t,n){var o={mount:function(){this._o=0},make:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=r,n.emit("move",{movement:this.value}),t.Transition.after((function(){n.emit("move.after",{movement:e.value})}))}};return(0,r.E8)(o,"offset",{get:function(){return o._o},set:function(e){o._o=(0,i.b0)(e)?0:(0,i.RI)(e)}}),(0,r.E8)(o,"translate",{get:function(){return t.Sizes.slideWidth*e.index}}),(0,r.E8)(o,"value",{get:function(){var e=this.offset,n=this.translate;return t.Direction.is("rtl")?n+e:n-e}}),n.on(["build.before","run"],(function(){o.make()})),o}},412:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(7289),i=n(7232);function o(e,t,n){var o={mount:function(){this.value=e.settings.peek}};return(0,r.E8)(o,"value",{get:function(){return o._v},set:function(e){(0,i.Gv)(e)?(e.before=(0,i.RI)(e.before),e.after=(0,i.RI)(e.after)):e=(0,i.RI)(e),o._v=e}}),(0,r.E8)(o,"reductor",{get:function(){var t=o.value,n=e.settings.perView;return(0,i.Gv)(t)?t.before/n+t.after/n:2*t/n}}),n.on(["resize","update"],(function(){o.mount()})),o}},9719:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(5492),i=n(2999);function o(e,t,n){var o=new i.A,a={mount:function(){this.bind()},bind:function(){o.on("resize",window,(0,r.n)((function(){n.emit("resize")}),e.settings.throttle))},unbind:function(){o.off("resize",window)}};return n.on("destroy",(function(){a.unbind(),o.destroy()})),a}},8686:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(1558),i=n(7289),o=n(7232);function a(e,t,n){var a={mount:function(){this._o=!1},make:function(r){var i=this;e.disabled||(e.disable(),this.move=r,n.emit("run.before",this.move),this.calculate(),n.emit("run",this.move),t.Transition.after((function(){i.isStart()&&n.emit("run.start",i.move),i.isEnd()&&n.emit("run.end",i.move),(i.isOffset("<")||i.isOffset(">"))&&(i._o=!1,n.emit("run.offset",i.move)),n.emit("run.after",i.move),e.enable()})))},calculate:function(){var t=this.move,n=this.length,i=t.steps,a=t.direction,s=(0,o.Et)((0,o.RI)(i))&&0!==(0,o.RI)(i);switch(a){case">":">"===i?e.index=n:this.isEnd()?e.isType("slider")&&!e.settings.rewind||(this._o=!0,e.index=0):s?e.index+=Math.min(n-e.index,-(0,o.RI)(i)):e.index++;break;case"<":"<"===i?e.index=0:this.isStart()?e.isType("slider")&&!e.settings.rewind||(this._o=!0,e.index=n):s?e.index-=Math.min(e.index,(0,o.RI)(i)):e.index--;break;case"=":e.index=i;break;default:(0,r.R)("Invalid direction pattern [".concat(a).concat(i,"] has been used"))}},isStart:function(){return 0===e.index},isEnd:function(){return e.index===this.length},isOffset:function(e){return this._o&&this.move.direction===e}};return(0,i.E8)(a,"move",{get:function(){return this._m},set:function(e){var t=e.substr(1);this._m={direction:e.substr(0,1),steps:t?(0,o.RI)(t)?(0,o.RI)(t):t:0}}}),(0,i.E8)(a,"length",{get:function(){var n=e.settings,r=t.Html.slides.length;return e.isType("slider")&&"center"!==n.focusAt&&n.bound?r-1-((0,o.RI)(n.perView)-1)+(0,o.RI)(n.focusAt):r-1}}),(0,i.E8)(a,"offset",{get:function(){return this._o}}),a}},353:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7289);function i(e,t,n){var i={setupSlides:function(){for(var e="".concat(this.slideWidth,"px"),n=t.Html.slides,r=0;r<n.length;r++)n[r].style.width=e},setupWrapper:function(){t.Html.wrapper.style.width="".concat(this.wrapperSize,"px")},remove:function(){for(var e=t.Html.slides,n=0;n<e.length;n++)e[n].style.width="";t.Html.wrapper.style.width=""}};return(0,r.E8)(i,"length",{get:function(){return t.Html.slides.length}}),(0,r.E8)(i,"width",{get:function(){return t.Html.root.offsetWidth}}),(0,r.E8)(i,"wrapperSize",{get:function(){return i.slideWidth*i.length+t.Gaps.grow+t.Clones.grow}}),(0,r.E8)(i,"slideWidth",{get:function(){return i.width/e.settings.perView-t.Peek.reductor-t.Gaps.reductor}}),n.on(["build.before","resize","update"],(function(){i.setupSlides(),i.setupWrapper()})),n.on("destroy",(function(){i.remove()})),i}},9173:(e,t,n)=>{"use strict";n.d(t,{A:()=>h});var r=n(5492),i=n(7232),o=n(4012),a=n(2999),s=["touchstart","mousedown"],l=["touchmove","mousemove"],c=["touchend","touchcancel","mouseup","mouseleave"],u=["mousedown","mousemove","mouseup","mouseleave"];function h(e,t,n){var h=new a.A,d=0,p=0,f=0,m=!1,v=!!o.A&&{passive:!1},g=!1,y={mount:function(){this.bindSwipeStart(),this.bindSwipeMove(),this.bindSwipeEnd()},start:function(t){if(!m&&!e.disabled){this.disable();var r=this.touches(t);d=null,p=(0,i.RI)(r.pageX),f=(0,i.RI)(r.pageY),g=!0,n.emit("swipe.start")}},move:function(r){if(!e.disabled&&g){var o=e.settings,a=o.touchAngle,s=o.touchRatio,l=o.classes,c=this.touches(r),u=(0,i.RI)(c.pageX)-p,h=(0,i.RI)(c.pageY)-f,m=Math.abs(u<<2),v=Math.abs(h<<2),y=Math.sqrt(m+v),_=Math.sqrt(v);if(!(180*(d=Math.asin(_/y))/Math.PI<a))return!1;r.preventDefault(),r.stopPropagation(),t.Move.make(u*(0,i.SP)(s)),t.Html.root.classList.add(l.dragging),n.emit("swipe.move")}},end:function(r){if(!e.disabled&&g){var o=e.settings,a=this.touches(r),s=this.threshold(r),l=a.pageX-p,c=180*d/Math.PI,u=Math.round(l/t.Sizes.slideWidth);this.enable(),l>s&&c<o.touchAngle?(o.perTouch&&(u=Math.min(u,(0,i.RI)(o.perTouch))),t.Direction.is("rtl")&&(u=-u),t.Run.make(t.Direction.resolve("<".concat(u)))):l<-s&&c<o.touchAngle?(o.perTouch&&(u=Math.max(u,-(0,i.RI)(o.perTouch))),t.Direction.is("rtl")&&(u=-u),t.Run.make(t.Direction.resolve(">".concat(u)))):t.Move.make(),t.Html.root.classList.remove(o.classes.dragging),g=!1,n.emit("swipe.end")}},bindSwipeStart:function(){var n=this,r=e.settings;r.swipeThreshold&&h.on(s[0],t.Html.wrapper,(function(e){n.start(e)}),v),r.dragThreshold&&h.on(s[1],t.Html.wrapper,(function(e){n.start(e)}),v)},unbindSwipeStart:function(){h.off(s[0],t.Html.wrapper,v),h.off(s[1],t.Html.wrapper,v)},bindSwipeMove:function(){var n=this;h.on(l,t.Html.wrapper,(0,r.n)((function(e){n.move(e)}),e.settings.throttle),v)},unbindSwipeMove:function(){h.off(l,t.Html.wrapper,v)},bindSwipeEnd:function(){var e=this;h.on(c,t.Html.wrapper,(function(t){e.end(t)}))},unbindSwipeEnd:function(){h.off(c,t.Html.wrapper)},touches:function(e){return u.indexOf(e.type)>-1?e:e.touches[0]||e.changedTouches[0]},threshold:function(t){var n=e.settings;return u.indexOf(t.type)>-1?n.dragThreshold:n.swipeThreshold},enable:function(){return m=!1,t.Transition.enable(),this},disable:function(){return m=!0,t.Transition.disable(),this}};return n.on("build.after",(function(){t.Html.root.classList.add(e.settings.classes.swipeable)})),n.on("destroy",(function(){y.unbindSwipeStart(),y.unbindSwipeMove(),y.unbindSwipeEnd(),h.destroy()})),y}},1872:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(7289);function i(e,t,n){var i=!1,o={compose:function(t){var n=e.settings;return i?"".concat(t," 0ms ").concat(n.animationTimingFunc):"".concat(t," ").concat(this.duration,"ms ").concat(n.animationTimingFunc)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";t.Html.wrapper.style.transition=this.compose(e)},remove:function(){t.Html.wrapper.style.transition=""},after:function(e){setTimeout((function(){e()}),this.duration)},enable:function(){i=!1,this.set()},disable:function(){i=!0,this.set()}};return(0,r.E8)(o,"duration",{get:function(){var n=e.settings;return e.isType("slider")&&t.Run.offset?n.rewindDuration:n.animationDuration}}),n.on("move",(function(){o.set()})),n.on(["build.before","resize","translate.jump"],(function(){o.disable()})),n.on("run",(function(){o.enable()})),n.on("destroy",(function(){o.remove()})),o}},6180:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(1558),i=n(7232);function o(e,t){return{modify:function(e){return t.Direction.is("rtl")?-e:e}}}function a(e,t){return{modify:function(n){return n+t.Gaps.value*e.index}}}function s(e,t){return{modify:function(e){return e+t.Clones.grow/2}}}function l(e,t){return{modify:function(n){if(e.settings.focusAt>=0){var r=t.Peek.value;return(0,i.Gv)(r)?n-r.before:n-r}return n}}}function c(e,t){return{modify:function(n){var r=t.Gaps.value,i=t.Sizes.width,o=e.settings.focusAt,a=t.Sizes.slideWidth;return"center"===o?n-(i/2-a/2):n-a*o-r*o}}}function u(e,t,n){var u={set:function(n){var u=function(e,t,n){var u=[a,s,l,c].concat(e._t,[o]);return{mutate:function(n){for(var o=0;o<u.length;o++){var a=u[o];(0,i.Tn)(a)&&(0,i.Tn)(a().modify)?n=a(e,t,undefined).modify(n):(0,r.R)("Transformer should be a function that returns an object with `modify()` method")}return n}}}(e,t).mutate(n);t.Html.wrapper.style.transform="translate3d(".concat(-1*u,"px, 0px, 0px)")},remove:function(){t.Html.wrapper.style.transform=""}};return n.on("move",(function(r){var i=t.Gaps.value,o=t.Sizes.length,a=t.Sizes.slideWidth;if(e.isType("carousel")&&t.Run.isOffset("<")){t.Transition.after((function(){n.emit("translate.jump");var e=a*(o-1);n.emit("translate.move",e),u.set(e)}));var s=-a-i*o;return n.emit("translate.move",s),u.set(s)}if(e.isType("carousel")&&t.Run.isOffset(">")){t.Transition.after((function(){n.emit("translate.jump"),n.emit("translate.move",0),u.set(0)}));var l=a*o+i*o;return n.emit("translate.move",l),u.set(l)}return n.emit("translate.move",r.movement),u.set(r.movement)})),n.on("destroy",(function(){u.remove()})),u}},2999:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(7232);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var s=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=t},t=[{key:"on",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,r.Kg)(e)&&(e=[e]);for(var o=0;o<e.length;o++)this.listeners[e[o]]=n,t.addEventListenerRR(e[o],this.listeners[e[o]],i)}},{key:"off",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,r.Kg)(e)&&(e=[e]);for(var i=0;i<e.length;i++)t.removeEventListenerRR(e[i],this.listeners[e[i]],n)}},{key:"destroy",value:function(){delete this.listeners}}],t&&o(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},3336:(e,t,n)=>{"use strict";n.d(t,{A:()=>f});const r={type:"slider",startAt:0,perView:1,focusAt:0,gap:10,autoplay:!1,hoverpause:!0,keyboard:!0,bound:!1,swipeThreshold:80,dragThreshold:120,perTouch:!1,touchRatio:.5,touchAngle:45,animationDuration:400,rewind:!0,rewindDuration:800,animationTimingFunc:"cubic-bezier(.165, .840, .440, 1)",throttle:10,direction:"ltr",peek:0,breakpoints:{},classes:{direction:{ltr:"glide--ltr",rtl:"glide--rtl"},slider:"glide--slider",carousel:"glide--carousel",swipeable:"glide--swipeable",dragging:"glide--dragging",cloneSlide:"glide__slide--clone",activeNav:"glide__bullet--active",activeSlide:"glide__slide--active",disabledArrow:"glide__arrow--disabled"}};var i=n(1558),o=n(7232),a=n(7289);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}var u=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=t,this.hop=t.hasOwnProperty},(t=[{key:"on",value:function(e,t){if((0,o.cy)(e))for(var n=0;n<e.length;n++)this.on(e[n],t);this.hop.call(this.events,e)||(this.events[e]=[]);var r=this.events[e].push(t)-1;return{remove:function(){delete this.events[e][r]}}}},{key:"emit",value:function(e,t){if((0,o.cy)(e))for(var n=0;n<e.length;n++)this.emit(e[n],t);this.hop.call(this.events,e)&&this.events[e].forEach((function(e){e(void 0!==t?t:{})}))}}])&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function p(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==h(t)?t:t+""}var f=function(){return e=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._c={},this._t=[],this._e=new u,this.disabled=!1,this.selector=t,this.settings=(0,a.lL)(r,n),this.index=this.settings.startAt},t=[{key:"mount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._e.emit("mount.before"),(0,o.Gv)(e)?this._c=function(e,t,n){var r={};for(var a in t)(0,o.Tn)(t[a])?r[a]=t[a](e,r,n):(0,i.R)("Extension must be a function");for(var s in r)(0,o.Tn)(r[s].mount)&&r[s].mount();return r}(this,e,this._e):(0,i.R)("You need to provide a object on `mount()`"),this._e.emit("mount.after"),this}},{key:"mutate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,o.cy)(e)?this._t=e:(0,i.R)("You need to provide a array on `mutate()`"),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.settings=(0,a.lL)(this.settings,e),e.hasOwnProperty("startAt")&&(this.index=e.startAt),this._e.emit("update"),this}},{key:"resize",value:function(){this._c.Sizes.setupSlides(),this._c.Sizes.setupWrapper()}},{key:"go",value:function(e){return this._c.Run.make(e),this}},{key:"move",value:function(e){return this._c.Transition.disable(),this._c.Move.make(e),this}},{key:"destroy",value:function(){return this._e.emit("destroy"),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&(this.settings.autoplay=e),this._e.emit("play"),this}},{key:"pause",value:function(){return this._e.emit("pause"),this}},{key:"disable",value:function(){return this.disabled=!0,this}},{key:"enable",value:function(){return this.disabled=!1,this}},{key:"on",value:function(e,t){return this._e.on(e,t),this}},{key:"isType",value:function(e){return this.settings.type===e}},{key:"settings",get:function(){return this._o},set:function(e){(0,o.Gv)(e)?this._o=e:(0,i.R)("Options must be an `object` instance.")}},{key:"index",get:function(){return this._i},set:function(e){this._i=(0,o.RI)(e)}},{key:"type",get:function(){return this.settings.type}},{key:"disabled",get:function(){return this._d},set:function(e){this._d=!!e}}],t&&d(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}()},4012:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=!1;try{var i=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListenerRR("testPassive",null,i),window.removeEventListenerRR("testPassive",null,i)}catch(e){}const o=r},6540:(e,t,n)=>{"use strict";function r(e){if(e&&e.parentNode){for(var t=e.parentNode.firstChild,n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}return[]}function i(e){return!!(e&&e instanceof window.HTMLElement)}n.d(t,{q:()=>i,w:()=>r})},1558:(e,t,n)=>{"use strict";function r(e){console.error("[Glide warn]: ".concat(e))}n.d(t,{R:()=>r})},7289:(e,t,n)=>{"use strict";n.d(t,{E8:()=>i,lL:()=>o});var r=n(9491);function i(e,t,n){Object.defineProperty(e,t,n)}function o(e,t){var n=(0,r.assign)({},e,t);return t.hasOwnProperty("classes")&&(n.classes=(0,r.assign)({},e.classes,t.classes),t.classes.hasOwnProperty("direction")&&(n.classes.direction=(0,r.assign)({},e.classes.direction,t.classes.direction))),t.hasOwnProperty("breakpoints")&&(n.breakpoints=(0,r.assign)({},e.breakpoints,t.breakpoints)),n}},7232:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){return parseInt(e)}function o(e){return parseFloat(e)}function a(e){return"string"==typeof e}function s(e){var t=r(e);return"function"===t||"object"===t&&!!e}function l(e){return"number"==typeof e}function c(e){return"function"==typeof e}function u(e){return void 0===e}function h(e){return e.constructor===Array}n.d(t,{Et:()=>l,Gv:()=>s,Kg:()=>a,RI:()=>i,SP:()=>o,Tn:()=>c,b0:()=>u,cy:()=>h})},5492:(e,t,n)=>{"use strict";function r(){return(new Date).getTime()}function i(e,t,n){var i,o,a,s,l=0;n||(n={});var c=function(){l=!1===n.leading?0:r(),i=null,s=e.apply(o,a),i||(o=a=null)},u=function(){var u=r();l||!1!==n.leading||(l=u);var h=t-(u-l);return o=this,a=arguments,h<=0||h>t?(i&&(clearTimeout(i),i=null),l=u,s=e.apply(o,a),i||(o=a=null)):i||!1===n.trailing||(i=setTimeout(c,h)),s};return u.cancel=function(){clearTimeout(i),l=0,i=o=a=null},u}n.d(t,{n:()=>i})},2862:(e,t,n)=>{"use strict";n.d(t,{Yf:()=>m,$l:()=>p,Ss:()=>h,Il:()=>y,Kj:()=>v});var r=n(8607),i=n(9018);function o(e){return new Promise((function(t){if(void 0===window.webpSupport){var n=new Image;n.onload=function(){var e=n.width>0&&n.height>0;window.webpSupport=e,t(e)},n.onerror=function(){window.webpSupport=!1,t(!1)},n.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[e]}else t(window.webpSupport)}))}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){s=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof _?t:_,a=Object.create(o.prototype),s=new P(r||[]);return i(a,"_invoke",{value:C(e,n,s)}),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",v="executing",g="completed",y={};function _(){}function b(){}function w(){}var x={};h(x,l,(function(){return this}));var S=Object.getPrototypeOf,E=S&&S(S(I([])));E&&E!==n&&r.call(E,l)&&(x=E);var k=w.prototype=_.prototype=Object.create(x);function T(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(i,o,s,l){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==a(h)&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,l)}),(function(e){n("throw",e,s,l)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,l)}))}l(c.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function C(t,n,r){var i=f;return function(o,a){if(i===v)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var l=M(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=v;var c=p(t,n,r);if("normal"===c.type){if(i=r.done?g:m,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=g,r.method="throw",r.arg=c.arg)}}}function M(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,M(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var o=p(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,y;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=w,i(k,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:b,configurable:!0}),b.displayName=h(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,h(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},t.awrap=function(e){return{__await:e}},T(A.prototype),h(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new A(d(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(k),h(k,u,"Generator"),h(k,l,(function(){return this})),h(k,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function l(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))}}var u=function(e){r.uo.to(e,.5,{opacity:0,delay:1,ease:r.WG.easeNone}).eventCallback("onComplete",(function(){e.style.display="none",e.style.zIndex="0"}))};function h(e){return d.apply(this,arguments)}function d(){return(d=c(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.querySelectorAll(".rrmc-picture-preloader"),r=(0,i.en)(),e.next=4,o("lossy");case 4:a=e.sent,[].slice.call(n).forEach((function(e){var t,n=e.querySelector(".rrmc-preload-blur"),i=e.querySelector(".rrmc-preload-picture"),o=i.querySelector("img"),s=i.querySelectorAll("source");r?o.src=o.getAttribute("data-src"):(t="data-srcset",a&&(t="data-webp-srcset"),[].slice.call(s).forEach((function(e){return e.setAttribute("srcset",e.getAttribute(t))}))),o.onload=function(){o.onload=null,u(n)}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return f.apply(this,arguments)}function f(){return(f=c(s().mark((function e(t,n){var r,i,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("lossy");case 2:r=e.sent,a="data-src",r&&(a="data-webp-src"),l=(i=t).getAttribute(a),i.onload=function(){i.onload=null,n()},i.src=l;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e,t){var n=e,r=n.getAttribute("data-src");n.onload=function(){n.onload=null,t()},n.src=r}function v(e,t){return g.apply(this,arguments)}function g(){return(g=c(s().mark((function e(t,n){var r,i,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("lossy");case 2:r=e.sent,a="data-srcset",l="data-src",r&&(a="data-webp-srcset",l="data-webp-src"),(i=t).onload=function(){i.onload=null,n()},i.src=i.getAttribute(l),i.srcset=i.getAttribute(a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return _.apply(this,arguments)}function _(){return _=c(s().mark((function e(t){var n,r,i,a,l,c,u,h=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>1&&void 0!==h[1]?h[1]:function(){},e.next=3,o("lossy");case 3:if(r=e.sent,null!==(i=t)){e.next=7;break}return e.abrupt("return",n());case 7:a=i.querySelector("img"),l=i.querySelectorAll("source"),c="data-srcset",u="data-src",r&&(c="data-webp-srcset",u="data-webp-src"),a.onload=function(){a.onload=null,n()},null!==a.getAttribute(u)&&(a.src=a.getAttribute(u)),[].slice.call(l).forEach((function(e){null!==e.getAttribute(c)&&e.setAttribute("srcset",e.getAttribute(c))})),a.complete&&(a.onload=null,n());case 16:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},4540:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){(function(e){for(var t=/\{\{([^}]+)\}\}/g,n=[],r=t.exec(e);null!=r;)n.push(r[1]),r=t.exec(e);return n})(e.innerHTML).forEach((function(n){var i,o,a,s,l,c=(s=n.split(":"),l=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(s,l)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(s,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],h=c[1],d='<span class="rrmc-embedded-icon" style="color: '.concat(h,'">').concat(t[u],"</span>");e.innerHTML=(i=e.innerHTML,o=d,a=new RegExp("{{"+n+"}}","g"),i.replace(a,o||"")),e.style.visibility="visible"}))}n.d(t,{Xq:()=>i})},5410:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}var i;e=n.nmd(e),i=function(e,t,n){"use strict";return function(){for(var n=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria","at","43"],["Azerbaijan","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain","bh","973",0,null,8],["Bangladesh","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus","by","375"],["Belgium","be","32"],["Belize","bz","501"],["Benin","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan","bt","975"],["Bolivia, Plurinational State of","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55"],["Virgin Islands, British","vg","1",11,["284"]],["Brunei Darussalam","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Cayman Islands","ky","1",12,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86"],["Christmas Island","cx","61",2],["Colombia","co","57"],["Congo, The Democratic Republic of the","cd","243"],["Congo","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Cote d'Ivoire","ci","225"],["Croatia","hr","385"],["Cuba","cu","53"],["Cyprus","cy","357",0,null,8],["Czech Republic","cz","420"],["Denmark","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic","do","1",2,["809","829","849"]],["Dutch Antilles","an","599"],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Malvinas)","fk","500"],["Faroe Islands","fo","298"],["Fiji","fj","679"],["Finland","fi","358",0],["France","fr","33"],["French Guiana","gf","594"],["French Polynesia","pf","689"],["French Southern Territories","tf","262"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49"],["Ghana","gh","233"],["Gibraltar","gi","350"],["Greece","gr","30"],["Greenland","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong SAR","hk","852"],["Hungary","hu","36"],["Iceland","is","354"],["India","in","91"],["Indonesia","id","62"],["Iran, Islamic Republic of","ir","98",0,null,10],["Iraq","iq","964",0,null,10],["Ireland","ie","353"],["Israel","il","972",0,null,9],["Italy","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan","jo","962",0,null,9],["Kazakhstan","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965",0,null,9],["Kyrgyzstan","kg","996"],["Lao People's Democratic Republic","la","856"],["Latvia","lv","371"],["Lebanon","lb","961",0,null,8],["Lesotho","ls","266"],["Liberia","lr","231"],["Libyan Arab Jamahiriya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macao SAR","mo","853"],["Macedonia, The Former Yugoslav Republic of","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico","mx","52"],["Moldova, Republic of","md","373"],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco","ma","212",0],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31"],["New Caledonia","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["Korea, Democratic People's Republic of","kp","850"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway","no","47",0],["Oman","om","968",0,null,8],["Pakistan","pk","92"],["Palau","pw","680"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63"],["Poland","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar","qa","974",0,null,8],["Reunion","re","262",0],["Romania","ro","40"],["Russian Federation","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena, Ascension and Tristan Da Cunha","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Pierre and Miquelon","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["Sao Tome and Principe","st","239"],["Saudi Arabia","sa","966",0,null,9],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["Korea, Republic of","kr","82"],["South Sudan","ss","211"],["Spain","es","34"],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Swaziland","sz","268"],["Sweden","se","46"],["Switzerland","ch","41"],["Syrian Arab Republic","sy","963",0,null,9],["Taiwan, Province of China","tw","886"],["Tajikistan","tj","992"],["Tanzania, United Republic of","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia","tn","216"],["Turkey","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["American Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine","ua","380"],["United Arab Emirates","ae","971",0,null,10],["United Kingdom","gb","44",0,null,10],["United States","us","1",0,null,7],["Uruguay","uy","598"],["Uzbekistan","uz","998"],["Vanuatu","vu","678"],["Venezuela, Bolivarian Republic of","ve","58"],["Viet Nam","vn","84"],["Wallis and Futuna","wf","681"],["Western Sahara","eh","212",1,["5288","5289"]],["Yemen","ye","967",0,null,9],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Aland Islands","ax","358",1,["18"]]],r=0;r<n.length;r++){var i=n[r];n[r]={name:i[0],iso2:i[1],dialCode:i[2],priority:i[3]||0,areaCodes:i[4]||null,minLength:i[5]||4}}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.intlTelInputGlobals={getInstance:function(t){var n=t.getAttribute("data-intl-tel-input-id");return e.intlTelInputGlobals.instances[n]},instances:{}};var a=0,s={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},l=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];e.addEventListener("load",(function(){e.intlTelInputGlobals.windowLoaded=!0}));var c=function(e,t){for(var n=Object.keys(e),r=0;r<n.length;r++)t(n[r],e[n[r]])},u=function(t){c(e.intlTelInputGlobals.instances,(function(n){e.intlTelInputGlobals.instances[n][t]()}))},h=function(){function r(e,t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),this.id=a++,this.telInput=e,this.activeItem=null,this.highlightedItem=null;var i=t||{};this.options={},c(s,(function(e,t){n.options[e]=i.hasOwnProperty(e)?i[e]:t})),this.hadInitialPlaceholder=Boolean(e.getAttribute("placeholder"))}return i=r,h=[{key:"_init",value:function(){var e=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(t.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=t.body)),"undefined"!=typeof Promise){var n=new Promise((function(t,n){e.resolveAutoCountryPromise=t,e.rejectAutoCountryPromise=n})),r=new Promise((function(t,n){e.resolveUtilsScriptPromise=t,e.rejectUtilsScriptPromise=n}));this.promise=Promise.all([n,r])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(e,t,n){t.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=t.length),this.countryCodes.hasOwnProperty(t)||(this.countryCodes[t]=[]);for(var r=0;r<this.countryCodes[t].length;r++)if(this.countryCodes[t][r]===e)return;var i=void 0!==n?n:this.countryCodes[t].length;this.countryCodes[t][i]=e}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var e=this.options.onlyCountries.map((function(e){return e.toLowerCase()}));this.countries=n.filter((function(t){return e.indexOf(t.iso2)>-1}))}else if(this.options.excludeCountries.length){var t=this.options.excludeCountries.map((function(e){return e.toLowerCase()}));this.countries=n.filter((function(e){return-1===t.indexOf(e.iso2)}))}else this.countries=n}},{key:"_translateCountriesByLocale",value:function(){for(var e=0;e<this.countries.length;e++){var t=this.countries[e].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[e].name=this.options.localizedCountries[t])}}},{key:"_countryNameSort",value:function(e,t){return e.name.localeCompare(t.name)}},{key:"_processCountryCodes",value:function(){this.dialCodeMaxLen=0,this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];this._addCountryCode(t.iso2,t.dialCode,t.priority)}for(var n=0;n<this.countries.length;n++){var r=this.countries[n];if(r.areaCodes)for(var i=this.countryCodes[r.dialCode][0],o=0;o<r.areaCodes.length;o++){for(var a=r.areaCodes[o],s=1;s<a.length;s++){var l=r.dialCode+a.substr(0,s);this._addCountryCode(i,l),this._addCountryCode(r.iso2,l)}this._addCountryCode(r.iso2,r.dialCode+a)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),n=this._getCountryData(t,!1,!0);n&&this.preferredCountries.push(n)}}},{key:"_createEl",value:function(e,n,r){var i=t.createElement(e);return n&&c(n,(function(e,t){return i.setAttribute(e,t)})),r&&r.appendChild(i),i}},{key:"_generateMarkup",value:function(){this.telInput.setAttribute("autocomplete","off");var e="iti";this.options.allowDropdown&&(e+=" iti--allow-dropdown"),this.options.separateDialCode&&(e+=" iti--separate-dial-code"),this.options.customContainer&&(e+=" ",e+=this.options.customContainer);var t=this._createEl("div",{class:e});if(this.telInput.parentNode.insertBefore(t,this.telInput),this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},t),t.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{class:"iti__selected-flag",role:"combobox","aria-owns":"country-listbox"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"country-listbox","aria-expanded":"false",role:"listbox"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred"),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var n=this.options.hiddenInput,r=this.telInput.getAttribute("name");if(r){var i=r.lastIndexOf("[");-1!==i&&(n="".concat(r.substr(0,i),"[").concat(n,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:n}),t.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(e,t){for(var n="",r=0;r<e.length;r++){var i=e[r];n+="<li class='iti__country ".concat(t,"' tabIndex='-1' id='iti-item-").concat(i.iso2,"' role='option' data-dial-code='").concat(i.dialCode,"' data-country-code='").concat(i.iso2,"'>"),n+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(i.iso2,"'></div></div>"),n+="<span class='iti__country-name'>".concat(i.name,"</span>"),n+="<span class='iti__dial-code'>+".concat(i.dialCode,"</span>"),n+="</li>"}this.countryList.insertAdjacentHTML("beforeend",n)}},{key:"_setInitialState",value:function(){var e=this.telInput.value,t=this._getDialCode(e),n=this._isRegionlessNanp(e),r=this.options,i=r.initialCountry,o=r.nationalMode,a=r.autoHideDialCode,s=r.separateDialCode;t&&!n?this._updateFlagFromNumber(e):"auto"!==i&&(i?this._setFlag(i.toLowerCase()):t&&n?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,e||this._setFlag(this.defaultCountry)),e||o||a||s||(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),e&&this._updateValFromNumber(e)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var e=this;this._handleHiddenInputSubmit=function(){e.hiddenInput.value=e.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var e=this.telInput;e&&"LABEL"!==e.tagName;)e=e.parentNode;return e}},{key:"_initDropdownListeners",value:function(){var e=this;this._handleLabelClick=function(t){e.countryList.classList.contains("iti__hide")?e.telInput.focus():t.preventDefault()};var t=this._getClosestLabel();t&&t.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!e.countryList.classList.contains("iti__hide")||e.telInput.disabled||e.telInput.readOnly||e._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(t){e.countryList.classList.contains("iti__hide")&&-1!==["ArrowUp","ArrowDown"," ","Enter"].indexOf(t.key)&&(t.preventDefault(),t.stopPropagation(),e._showDropdown()),"Tab"===t.key&&e._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var t=this;this.options.utilsScript&&!e.intlTelInputUtils?e.intlTelInputGlobals.windowLoaded?e.intlTelInputGlobals.loadUtils(this.options.utilsScript):e.addEventListener("load",(function(){e.intlTelInputGlobals.loadUtils(t.options.utilsScript)})):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){e.intlTelInputGlobals.autoCountry?this.handleAutoCountry():e.intlTelInputGlobals.startedLoadingAutoCountry||(e.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup((function(t){e.intlTelInputGlobals.autoCountry=t.toLowerCase(),setTimeout((function(){return u("handleAutoCountry")}))}),(function(){return u("rejectAutoCountryPromise")})))}},{key:"_initKeyListeners",value:function(){var e=this;this._handleKeyupEvent=function(){e._updateFlagFromNumber(e.telInput.value)&&e._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(e._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(e){var t=this.telInput.getAttribute("maxlength");return t&&e.length>t?e.substr(0,t):e}},{key:"_initBlurListeners",value:function(){var e=this;this._handleSubmitOrBlurEvent=function(){e._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var e=this._getNumeric(this.telInput.value);e&&this.selectedCountryData.dialCode!==e||(this.telInput.value="")}}},{key:"_getNumeric",value:function(e){return e.replace(/\D/g,"")}},{key:"_trigger",value:function(e){var n=t.createEvent("Event");n.initEvent(e,!0,!0),this.telInput.dispatchEvent(n)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.countryList.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(e,t,n){n&&!e.classList.contains(t)?e.classList.add(t):!n&&e.classList.contains(t)&&e.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var n=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var r=this.telInput.getBoundingClientRect(),i=e.pageYOffset||t.documentElement.scrollTop,o=r.top+i,a=this.countryList.offsetHeight,s=o+this.telInput.offsetHeight+a<i+e.innerHeight,l=o-a>i;if(this._toggleClass(this.countryList,"iti__country-list--dropup",!s&&l),this.options.dropdownContainer){var c=!s&&l?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(o+c,"px"),this.dropdown.style.left="".concat(r.left+t.body.scrollLeft,"px"),this._handleWindowScroll=function(){return n._closeDropdown()},e.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(e){for(var t=e;t&&t!==this.countryList&&!t.classList.contains("iti__country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var e=this;this._handleMouseoverCountryList=function(t){var n=e._getClosestListItem(t.target);n&&e._highlightListItem(n,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(t){var n=e._getClosestListItem(t.target);n&&e._selectListItem(n)},this.countryList.addEventListener("click",this._handleClickCountryList);var n=!0;this._handleClickOffToClose=function(){n||e._closeDropdown(),n=!1},t.documentElement.addEventListener("click",this._handleClickOffToClose);var r="",i=null;this._handleKeydownOnDropdown=function(t){t.preventDefault(),"ArrowUp"===t.key||"ArrowDown"===t.key?e._handleUpDownKey(t.key):"Enter"===t.key?e._handleEnterKey():"Escape"===t.key?e._closeDropdown():/^[a-zA-ZÀ-ÿ ]$/.test(t.key)&&(i&&clearTimeout(i),r+=t.key.toLowerCase(),e._searchForCountry(r),i=setTimeout((function(){r=""}),1e3))},t.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(e){var t="ArrowUp"===e?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("iti__divider")&&(t="ArrowUp"===e?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var n=this.countryList.querySelector("#iti-item-".concat(this.countries[t].iso2));this._highlightListItem(n,!1),this._scrollTo(n,!0);break}}},{key:"_startsWith",value:function(e,t){return e.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(t){var n=t;if(this.options.formatOnDisplay&&e.intlTelInputUtils&&this.selectedCountryData){var r=!this.options.separateDialCode&&(this.options.nationalMode||"+"!==n.charAt(0)),i=intlTelInputUtils.numberFormat,o=i.NATIONAL,a=i.INTERNATIONAL,s=r?o:a;n=intlTelInputUtils.formatNumber(n,this.selectedCountryData.iso2,s)}n=this._beforeSetNumber(n),this.telInput.value=n}},{key:"_updateFlagFromNumber",value:function(e){var t=e,n=this.selectedCountryData.dialCode,r="1"===n;t&&this.options.nationalMode&&r&&"+"!==t.charAt(0)&&("1"!==t.charAt(0)&&(t="1".concat(t)),t="+".concat(t)),this.options.separateDialCode&&n&&"+"!==t.charAt(0)&&(t="+".concat(n).concat(t));var i=this._getDialCode(t),o=this._getNumeric(t),a=null;if(i){var s=this.countryCodes[this._getNumeric(i)],l=-1!==s.indexOf(this.selectedCountryData.iso2)&&o.length<=i.length-1;if(!("1"===n&&this._isRegionlessNanp(o)||l))for(var c=0;c<s.length;c++)if(s[c]){a=s[c];break}}else"+"===t.charAt(0)&&o.length?a="":t&&"+"!==t||(a=this.defaultCountry);return null!==a&&this._setFlag(a)}},{key:"_isRegionlessNanp",value:function(e){var t=this._getNumeric(e);if("1"===t.charAt(0)){var n=t.substr(1,3);return-1!==l.indexOf(n)}return!1}},{key:"_highlightListItem",value:function(e,t){var n=this.highlightedItem;n&&n.classList.remove("iti__highlight"),this.highlightedItem=e,this.highlightedItem.classList.add("iti__highlight"),t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(e,t,r){for(var i=t?n:this.countries,o=0;o<i.length;o++)if(i[o].iso2===e)return i[o];if(r)return null;throw new Error("No country data for '".concat(e,"'"))}},{key:"_setFlag",value:function(e){var t=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(e));var n=e?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",n),this.selectedFlag.setAttribute("min-length",this.selectedCountryData.minLength),this.options.separateDialCode){var r=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=r;var i=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(i+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var o=this.activeItem;if(o&&(o.classList.remove("iti__active"),o.setAttribute("aria-selected","false")),e){var a=this.countryList.querySelector("#iti-item-".concat(e));a.setAttribute("aria-selected","true"),a.classList.add("iti__active"),this.activeItem=a,this.countryList.setAttribute("aria-activedescendant",a.getAttribute("id"))}}return t.iso2!==e}},{key:"_getHiddenSelectedFlagWidth",value:function(){var e=this.telInput.parentNode.cloneNode();e.style.visibility="hidden",t.body.appendChild(e);var n=this.selectedFlag.cloneNode(!0);e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),r}},{key:"_updatePlaceholder",value:function(){var t="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;if(e.intlTelInputUtils&&t){var n=intlTelInputUtils.numberType[this.options.placeholderNumberType],r=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,n):"";r=this._beforeSetNumber(r),"function"==typeof this.options.customPlaceholder&&(r=this.options.customPlaceholder(r,this.selectedCountryData)),this.telInput.setAttribute("placeholder",r)}}},{key:"_selectListItem",value:function(e){var t=this._setFlag(e.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(e.getAttribute("data-dial-code"),!0),this.telInput.focus();var n=this.telInput.value.length;this.telInput.setSelectionRange(n,n),t&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.countryList.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("iti__arrow--up"),t.removeEventListener("keydown",this._handleKeydownOnDropdown),t.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||e.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(n,r){var i=this.countryList,o=e.pageYOffset||t.documentElement.scrollTop,a=i.offsetHeight,s=i.getBoundingClientRect().top+o,l=s+a,c=n.offsetHeight,u=n.getBoundingClientRect().top+o,h=u+c,d=u-s+i.scrollTop,p=a/2-c/2;if(u<s)r&&(d-=p),i.scrollTop=d;else if(h>l){r&&(d+=p);var f=a-c;i.scrollTop=d-f}}},{key:"_updateDialCode",value:function(e,t){var n,r=this.telInput.value,i="+".concat(e);if("+"===r.charAt(0)){var o=this._getDialCode(r);n=o?r.replace(o,i):i}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(r)n=i+r;else{if(!t&&this.options.autoHideDialCode)return;n=i}}this.telInput.value=n}},{key:"_getDialCode",value:function(e){var t="";if("+"===e.charAt(0))for(var n="",r=0;r<e.length;r++){var i=e.charAt(r);if(!isNaN(parseInt(i,10))&&(n+=i,this.countryCodes[n]&&(t=e.substr(0,r+1)),n.length===this.dialCodeMaxLen))break}return t}},{key:"_getFullNumber",value:function(){var e=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,n=this._getNumeric(e);return(this.options.separateDialCode&&"+"!==e.charAt(0)&&t&&n?"+".concat(t):"")+e}},{key:"_beforeSetNumber",value:function(e){var t=e;if(this.options.separateDialCode){var n=this._getDialCode(t);if(n){var r=" "===t[(n="+".concat(this.selectedCountryData.dialCode)).length]||"-"===t[n.length]?n.length+1:n.length;t=t.substr(r)}}return this._cap(t)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=e.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){e.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var t=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var n=this._getClosestLabel();n&&n.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&t&&t.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(t&&t.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var r=this.telInput.parentNode;r.parentNode.insertBefore(this.telInput,r),r.parentNode.removeChild(r),delete e.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(t){if(e.intlTelInputUtils){var n=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),n,t)}return""}},{key:"getNumberType",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(e.intlTelInputUtils){var t=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),t)}return-99}},{key:"isValidNumber",value:function(){var t=this._getFullNumber().trim(),n=this.options.nationalMode?this.selectedCountryData.iso2:"";return e.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,n):null}},{key:"setCountry",value:function(e){var t=e.toLowerCase();this.selectedFlagInner.classList.contains("iti__".concat(t))||(this._setFlag(t),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}}],h&&o(i.prototype,h),d&&o(i,d),r;var i,h,d}();e.intlTelInputGlobals.getCountryData=function(){return n};var d=function(e,n,r){var i=t.createElement("script");i.onload=function(){u("handleUtils"),n&&n()},i.onerror=function(){u("rejectUtilsScriptPromise"),r&&r()},i.className="iti-load-utils",i.async=!0,i.src=e,t.body.appendChild(i)};return e.intlTelInputGlobals.loadUtils=function(t){if(!e.intlTelInputUtils&&!e.intlTelInputGlobals.startedLoadingUtilsScript){if(e.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise((function(e,n){return d(t,e,n)}));d(t)}return null},e.intlTelInputGlobals.defaults=s,e.intlTelInputGlobals.version="16.0.4",function(t,n){var r=new h(t,n);return r._init(),t.setAttribute("data-intl-tel-input-id",r.id),e.intlTelInputGlobals.instances[r.id]=r,r}}()}(window,document),"object"===r(e)&&e.exports?e.exports=i:window.intlTelInput=i},4344:(e,t,n)=>{"use strict";n.d(t,{Nv:()=>a,T2:()=>o,fI:()=>i});var r=/\b[a-zA-Z]{2}_[a-zA-Z]{2}\b/;function i(){var e=window.location.href.match(r);return e?e[0]:"en_GB"}function o(e,t){return e.replace(r,t)}var a={en_GB:"iti__gb",en_US:"iti__us",ja_JP:"iti__jp",ru_RU:"iti__ru",ko_KR:"iti__kr",de_DE:"iti__de",cs_CZ:"iti__cz",uk_UA:"iti__ua",tr_TR:"iti__tr",az_AZ:"iti__az",pl_PL:"iti__pl",zh_CN:"iti__cn",zh_TW:"iti__tw"}},330:(e,t,n)=>{"use strict";function r(e,t,n){return'\n            <path class="rrmc-initial-path" d="\n                     M '.concat(e.middle_left," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_left_x," ").concat(e.arc_top_left_y,"\n                     L ").concat(e.arc_top_right_x," ").concat(e.arc_top_right_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_right," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_right_x," ").concat(e.arc_bottom_y,"\n                     L ").concat(e.arc_top_left_x," ").concat(e.arc_bottom_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_left," ").concat(e.middle_vertical,'\n                     "\n                  stroke="').concat(t,'" stroke-opacity="').concat(n?1:.7,'" stroke-width="1"\n                  stroke-linecap="square" stroke-linejoin="round"\n                  fill="transparent"></path>\n            <path class="rrmc-button-svg-anim-path" d="\n                     M ').concat(e.middle_left," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_left_x," ").concat(e.arc_top_left_y,"\n                     L ").concat(e.arc_top_right_x," ").concat(e.arc_top_right_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_right," ").concat(e.middle_vertical,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.arc_top_right_x," ").concat(e.arc_bottom_y,"\n                     L ").concat(e.arc_top_left_x," ").concat(e.arc_bottom_y,"\n                     A ").concat(e.radius," ").concat(e.radius," 0 0 1 ").concat(e.middle_left," ").concat(e.middle_vertical,'\n                     "\n                  stroke-dasharray="').concat(e.dash_length," ").concat(e.dash_length,'"\n                  stroke-dashoffset="-').concat(e.dash_length,'"\n                  stroke="').concat(n||t,'" stroke-width="1"\n                  stroke-linecap="square" stroke-linejoin="round"\n                  fill="transparent"></path>\n   ')}n.d(t,{p:()=>r})},5116:(e,t,n)=>{"use strict";function r(){return window.innerWidth<768}function i(){return window.innerWidth<1024}n.d(t,{S:()=>r,h:()=>i})},7293:(e,t,n)=>{"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"local",t=document.querySelector(".rrmc-page-overlay-container-".concat(e)),n=t?t.querySelector(".overlay-".concat(e)):null;return{overlay_container:t,overlay_container_wrapper:n}}function i(e){if(!e||!e.children)return null;var t=e.children.item(0);if(!t||!t.children)return null;var n=t.children.item(0);return n&&n.children?n.children.item(0):null}n.d(t,{K:()=>i,g:()=>r})},299:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>a});const a=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodesThatLazyResize=[]},(t=[{key:"register",value:function(e){this.nodesThatLazyResize.add(e)}},{key:"listenToBodyResize",value:function(e){var t=new ResizeObserver(e);return t.observe(document.querySelector("body")),t}},{key:"listenToComponentResizes",value:function(e){var t=new ResizeObserver(e);return this.nodesThatLazyResize.forEach((function(e){t.observe(e)})),t}},{key:"getClosestAspectRatio",value:function(e,t){var n=e/t;return[{aspectRatio:"4:3",value:4/3},{aspectRatio:"16:9",value:16/9},{aspectRatio:"1:1",value:1},{aspectRatio:"3:4",value:3/4},{aspectRatio:"9:16",value:9/16}].reduce((function(e,t){return Math.abs(t.value-n)<Math.abs(e.value-n)?t:e})).aspectRatio}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())},9381:function(e,t,n){var r,i;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}!function(a,s){"use strict";r=[n(4692)],void 0===(i=function(e){return function(e,t,n,r){var i,a,s,l,c,u,h=[],d=[],p=[],f=[],m=0,v=0,g=1,y=!1,_=e(t),b=_.scrollTop(),w=!1,x=!1,S=!1,E=!1,k=[],T=(new Date).getTime(),A=!0,C=!1,M=0,L="onwheel"in n?"wheel":n.onmousewheel!==r?"mousewheel":"DOMMouseScroll",R={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}};function P(){return t.innerHeight+R.offset}function I(n,r,i,o){if(v===n&&(i=!1),!0===E)return!0;if(d[n]){if(w=!1,!0===A&&(A=!1,R.afterRender()),i&&"function"==typeof R.before&&!1===R.before(n,p))return!0;if(g=1,M=n?h[n]:0,!1===A&&v>n&&!1===o&&f[n]&&(s=P(),g=parseInt(p[n].outerHeight()/s),M=parseInt(h[n])+(p[n].outerHeight()-s)),R.updateHash&&R.sectionName&&(!0!==A||0!==n))if(history.pushState)try{history.replaceState(null,null,d[n])}catch(e){t.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else t.location.hash=d[n];if(v=n,r)e(R.target).stop().scrollTop(M),i&&R.after(n,p);else{if(x=!0,e().velocity?e(R.target).stop().velocity("scroll",{duration:R.scrollSpeed,easing:R.easing,offset:M,mobileHA:!1}):e(R.target).stop().animate({scrollTop:M},R.scrollSpeed,R.easing),t.location.hash.length&&R.sectionName&&t.console)try{e(t.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(e){}e(R.target).promise().done((function(){x=!1,A=!1,i&&R.after(n,p)}))}}}function D(e){function t(t){for(var n=0,r=e.slice(Math.max(e.length-t,1)),i=0;i<r.length;i++)n+=r[i];return Math.ceil(n/t)}return t(10)>=t(70)}var O=function(r){function o(t){e().velocity?e(R.target).stop().velocity("scroll",{duration:R.scrollSpeed,easing:R.easing,offset:t,mobileHA:!1}):e(R.target).stop().animate({scrollTop:t},R.scrollSpeed,R.easing)}function v(t){t&&(b=_.scrollTop());var n=R.section;f=[],R.interstitialSection.length&&(n+=","+R.interstitialSection),!1===R.scrollbars&&(R.overflowScroll=!1),s=P(),e(n).each((function(t){var n=e(this);R.setHeights?n.is(R.interstitialSection)?f[t]=!1:n.css("height","auto").outerHeight()<s||"hidden"===n.css("overflow")?(n.css({height:s}),f[t]=!1):(n.css({height:n.outerHeight()}),R.overflowScroll?f[t]=!0:f[t]=!1):n.outerHeight()<s||!1===R.overflowScroll?f[t]=!1:f[t]=!0})),t&&_.scrollTop(b)}function A(n,r){var i=R.section;R.interstitialSection.length&&(i+=","+R.interstitialSection),h=[],d=[],p=[],e(i).each((function(n){var r=e(this);h[n]=n>0?parseInt(r.offset().top)+R.offset:parseInt(r.offset().top),R.sectionName&&r.data(R.sectionName)?d[n]="#"+r.data(R.sectionName).toString().replace(/ /g,"-"):!1===r.is(R.interstitialSection)?d[n]="#"+(n+1):(d[n]="#",n===e(i).length-1&&n>1&&(h[n]=h[n-1]+(parseInt(e(e(i)[n-1]).outerHeight())-parseInt(e(t).height()))+parseInt(r.outerHeight()))),p[n]=r;try{e(d[n]).length&&t.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(e){}t.location.hash===d[n]&&(m=n,y=!0)})),!0===n&&I(m,!1,!1,!1)}function M(){return!(f[m]&&(b=_.scrollTop())>parseInt(h[m]))}function O(){return!(f[m]&&(b=_.scrollTop(),s=P(),b<parseInt(h[m])+(p[m].outerHeight()-s)-28))}C=!0,e.easing.easeOutExpo=function(e,t,n,r,i){return t==i?n+r:r*(1-Math.pow(2,-10*t/i))+n},l={handleMousedown:function(){if(!0===E)return!0;w=!1,S=!1},handleMouseup:function(){if(!0===E)return!0;w=!0,S&&l.calculateNearest(!1,!0)},handleScroll:function(){if(!0===E)return!0;i&&clearTimeout(i),i=setTimeout((function(){if(S=!0,!1===w)return!1;w=!1,l.calculateNearest(!1,!0)}),200)},calculateNearest:function(e,t){b=_.scrollTop();for(var n,r=1,i=h.length,o=0,a=Math.abs(h[0]-b);r<i;r++)(n=Math.abs(h[r]-b))<a&&(a=n,o=r);(O()&&o>m||M())&&(m=o,I(o,e,t,!1))},wheelHandler:function(n){if(!0===E)return!0;if(R.standardScrollElements&&(e(n.target).is(R.standardScrollElements)||e(n.target).closest(R.standardScrollElements).length))return!0;f[m]||n.preventDefault();var r,i=(new Date).getTime();r=(n=n||t.event).originalEvent?n.originalEvent.wheelDelta||-n.originalEvent.deltaY||-n.originalEvent.detail:n.wheelDelta||-n.deltaY||-n.detail;var o=Math.max(-1,Math.min(1,r));if(k.length>149&&k.shift(),k.push(Math.abs(r)),i-T>200&&(k=[]),T=i,x)return n.preventDefault(),!1;if(o<0){if(m<h.length-1&&O()){if(!D(k))return!1;n.preventDefault(),m++,x=!0,I(m,!1,!0,!1)}}else if(o>0&&m>0&&M()){if(!D(k))return!1;n.preventDefault(),m--,x=!0,I(m,!1,!0,!1)}},keyHandler:function(t){return!0===E||!1===n.activeElement.readOnly||!(!R.standardScrollElements||!e(t.target).is(R.standardScrollElements)&&!e(t.target).closest(R.standardScrollElements).length)||!0!==x&&void(38==t.keyCode||33==t.keyCode?m>0&&M()&&(t.preventDefault(),I(--m,!1,!0,!1)):40!=t.keyCode&&34!=t.keyCode||m<h.length-1&&O()&&(t.preventDefault(),I(++m,!1,!0,!1)))},init:function(){R.scrollbars?(_.on("mousedown",l.handleMousedown),_.on("mouseup",l.handleMouseup),_.on("scroll",l.handleScroll)):e("body").css({overflow:"hidden"}),t.addEventListenerRR(L,l.wheelHandler,{passive:!1}),_.on("keydown",l.keyHandler)}},c={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(t){if(!0===E)return!0;if(R.standardScrollElements&&(e(t.target).is(R.standardScrollElements)||e(t.target).closest(R.standardScrollElements).length))return!0;var n;if(void 0!==t&&void 0!==t.touches)switch(n=t.touches[0],t.type){case"touchstart":c.touches.touchstart.y=n.pageY,c.touches.touchmove.y=-1,c.touches.touchstart.x=n.pageX,c.touches.touchmove.x=-1,c.options.timeStamp=(new Date).getTime(),c.touches.touchend=!1;case"touchmove":c.touches.touchmove.y=n.pageY,c.touches.touchmove.x=n.pageX,c.touches.touchstart.y!==c.touches.touchmove.y&&Math.abs(c.touches.touchstart.y-c.touches.touchmove.y)>Math.abs(c.touches.touchstart.x-c.touches.touchmove.x)&&(t.preventDefault(),c.touches.direction="y",c.options.timeStamp+c.options.timeGap<(new Date).getTime()&&0==c.touches.touchend&&(c.touches.touchend=!0,c.touches.touchstart.y>-1&&Math.abs(c.touches.touchmove.y-c.touches.touchstart.y)>c.options.distance&&(c.touches.touchstart.y<c.touches.touchmove.y?c.up():c.down())));break;case"touchend":!1===c.touches[t.type]&&(c.touches[t.type]=!0,c.touches.touchstart.y>-1&&c.touches.touchmove.y>-1&&"y"===c.touches.direction&&(Math.abs(c.touches.touchmove.y-c.touches.touchstart.y)>c.options.distance&&(c.touches.touchstart.y<c.touches.touchmove.y?c.up():c.down()),c.touches.touchstart.y=-1,c.touches.touchstart.x=-1,c.touches.direction="undetermined"))}},down:function(){m<h.length&&(O()&&m<h.length-1?I(++m,!1,!0,!1):(s=P(),Math.floor(p[m].height()/s)>g?(o(parseInt(h[m])+s*g),g+=1):o(parseInt(h[m])+(p[m].outerHeight()-s))))},up:function(){m>=0&&(M()&&m>0?I(--m,!1,!0,!1):g>2?(s=P(),g-=1,o(parseInt(h[m])+s*g)):(g=1,o(parseInt(h[m]))))},init:function(){if(n.addEventListenerRR&&R.touchScroll){var e={passive:!1};n.addEventListenerRR("touchstart",c.touchHandler,e),n.addEventListenerRR("touchmove",c.touchHandler,e),n.addEventListenerRR("touchend",c.touchHandler,e)}}},u={refresh:function(e,t){clearTimeout(a),a=setTimeout((function(){v(!0),A(t),e&&R.afterResize()}),400)},handleUpdate:function(){u.refresh(!1,!1)},handleResize:function(){u.refresh(!0,!1)},handleOrientation:function(){u.refresh(!0,!0)}},R=e.extend(R,r),v(!1),A(!1),!0===y?I(m,!1,!0,!0):setTimeout((function(){l.calculateNearest(!0,!1)}),200),h.length&&(l.init(),c.init(),_.on("resize",u.handleResize),n.addEventListenerRR&&t.addEventListenerRR("orientationchange",u.handleOrientation,!1))};function F(e,t){for(var n=d.length;n>=0;n--)"string"==typeof e?d[n]===e&&(m=n,I(n,t,!0,!0)):n===e&&(m=n,I(n,t,!0,!0))}return O.move=function(t){if(t===r)return!1;t.originalEvent&&(t=e(this).attr("href")),F(t,!1)},O.instantMove=function(e){if(e===r)return!1;F(e,!0)},O.next=function(){m<d.length&&I(m+=1,!1,!0,!0)},O.previous=function(){m>0&&I(m-=1,!1,!0,!0)},O.instantNext=function(){m<d.length&&I(m+=1,!0,!0,!0)},O.instantPrevious=function(){m>0&&I(m-=1,!0,!0,!0)},O.destroy=function(){if(!C)return!1;R.setHeights&&e(R.section).each((function(){e(this).css("height","auto")})),_.off("resize",u.handleResize),R.scrollbars&&(_.off("mousedown",l.handleMousedown),_.off("mouseup",l.handleMouseup),_.off("scroll",l.handleScroll)),t.removeEventListenerRR(L,l.wheelHandler),_.off("keydown",l.keyHandler),n.addEventListenerRR&&R.touchScroll&&(n.removeEventListenerRR("touchstart",c.touchHandler,!1),n.removeEventListenerRR("touchmove",c.touchHandler,!1),n.removeEventListenerRR("touchend",c.touchHandler,!1)),h=[],d=[],p=[],f=[],A=!0,C=!1},O.update=function(){if(!C)return!1;u.handleUpdate()},O.current=function(){return p[m]},O.currentIndex=function(){return m},O.disable=function(){E=!0},O.enable=function(){E=!1,C&&l.calculateNearest(!1,!1)},O.isDisabled=function(){return E},O.setOptions=function(n){if(!C)return!1;"object"===o(n)?(R=e.extend(R,n),u.handleUpdate()):t.console&&console.warn("Scrollify warning: setOptions expects an object.")},e.scrollify=O,O}(e,a,a.document)}.apply(t,r))||(e.exports=i)}("undefined"!=typeof window?window:this)},14:(e,t,n)=>{"use strict";function r(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0}});window.addEventListenerRR("testPassive",null,t),window.removeEventListenerRR("testPassive",null,t)}catch(e){console.log(e)}return e}n.d(t,{C:()=>r})},5847:(e,t,n)=>{"use strict";function r(e,t,n){var r=t-n,i=r/2,o=n/2;return{w:e,h:t,diameter:r,radius:i,middle_left:n/2,middle_right:e-n/2,middle_vertical:t/2,arc_top_left_y:o,arc_top_left_x:n/2+i,arc_top_right_y:o,arc_top_right_x:e-(n/2+i),arc_bottom_y:t-n/2,dash_length:Math.PI*r/4*4+2*(e-r)}}n.d(t,{A:()=>r})},1203:(e,t,n)=>{"use strict";var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Math.random().toString(36).substring(7),r='id="'.concat(t,'"'),i='"#'.concat(t,'"');return(e=e.replace(r,'id="'.concat(n,'"'))).replace(i,'"#'.concat(n,'"'))}n.d(t,{I:()=>a,o:()=>s});var s=(o(o(o(o(o(o(o(o(o(o(r={},"twitter",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><defs/><path fill="currentColor" fill-rule="evenodd" d="M32 19.54090271c-.5890172.26145078-1.2207794.43874222-1.8846982.51792407.6778404-.40678127 1.1967598-1.05199236 1.4427392-1.81833393-.6358471.37658867-1.337805.65018852-2.0856124.79846623C28.8734768 18.39872553 28.0216175 18 27.0768502 18c-1.81270503 0-3.28237222 1.47272375-3.28237222 3.28811052 0 .25752121.02895409.50898419.0849996.74934602-2.72747251-.137242-5.14599204-1.44662455-6.76467822-3.43635547-.28300538.48491526-.44398513 1.04992928-.44398513 1.65306061 0 1.14116201.57993229 2.14799643 1.4597326 2.73704669-.53780825-.01791258-1.04368854-.16628849-1.48666059-.41264297v.04103179c0 1.59297013 1.13179275 2.92242648 2.63250563 3.22494186-.27496625.0742043-.56486699.11523615-.86486576.11523615-.21189456 0-.41692645-.020958-.61784064-.06113839.41793946 1.30745049 1.62963386 2.25825509 3.06537963 2.28435429-1.12274048.8816105-2.53855169 1.40556-4.07615977 1.40556-.26499897 0-.52594562-.0159804-.78290533-.0450269 1.45270648.9346932 3.17743798 1.4797316 5.03112321 1.4797316 6.03781849 0 9.33819719-5.01141317 9.33819719-9.35741044l-.0111111-.4258072c.644932-.46091184 1.2027728-1.03997424 1.6417907-1.69913545z"/></svg>'),"facebook",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><defs/><path fill="currentColor" fill-rule="evenodd" d="M31.1157895 16H16.88421054C16.39587454 16 16 16.39587455 16 16.88421054V31.1157895c0 .488336.39587454.8842105.88421054.8842105h7.6631579v-6.17543862h-2.09122808v-2.43368422h2.08v-1.77684211c0-2.06877192 1.26035084-3.19438596 3.10456134-3.19438596a17.44564051 17.44564051 0 011.8750878.10666669v2.15859651h-1.274386c-1.0021052 0-1.1957895.47438596-1.1957895 1.17333331v1.54385964h2.4l-.3115789 2.42245614H27.045614V32h4.0701755C31.6041255 32 32 31.6041255 32 31.1157895V16.88421054C32 16.39587454 31.6041255 16 31.1157895 16z"/></svg>'),"linkedin",'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><defs/><path fill="currentColor" d="M32 24.94621288v5.83929092h-3.4305821v-5.450996c0-1.370472-.4947259-2.30193372-1.7361417-2.30193372-.94925638 0-1.50919008.6305972-1.75935539 1.23752995-.08984369.21859652-.11728202.52462346-.11728202.82676827v5.688012h-3.42736143s.04609299-9.22875584 0-10.18462533h3.42815617v1.44353016c-.00472642.01193551-.01468117.02180598-.01944945.03485652h.01944945v-.03485652c.45796023-.6937023 1.26918857-1.6824459 3.09124227-1.6824459C30.3101186 20.36134323 32 21.81680889 32 24.94621288zm-14.05932594-9.57313596C16.76806323 15.37307692 16 16.20495548 16 17.30203661c0 1.06759403.74535139 1.92755765 1.89658875 1.92755765h.02074603c1.19858526 0 1.94134335-.85996362 1.94134335-1.92755765-.02338114-1.09708113-.74259078-1.92895969-1.91800407-1.92895969zm-1.7359325 15.41242688h3.42861628V20.59963946h-3.42861628V30.7855038z"/></svg>'),"youtube",'<svg xmlns="http://www.w3.org/2000/svg" width="23" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 23 16"><defs/><defs><path id="a" d="M22.4156461 2.47057863c-.2698718-.96698741-1.0254962-1.72261175-1.9924836-1.99248355C18.6387065 0 11.4569865 0 11.4569865 0S4.29339745-.009529 2.49081055.47809508C1.52382314.74796688.7681988 1.50359122.498327 2.47057863.1600634 4.29750909-.00670217 6.15205727 0 8.01002644c-.0053962 1.85095827.16136391 3.69841746.498327 5.51845426.2698718.9669874 1.02549614 1.7226117 1.99248355 1.9924835C4.2733581 16 11.4569865 16 11.4569865 16s7.1626349 0 8.966176-.4790358c.9669874-.2698718 1.7226118-1.0254961 1.9924836-1.9924835.3299232-1.820696.4896547-3.66814988.4771273-5.51845426.0138332-1.85731283-.1459034-3.71185565-.4771273-5.53944781zM9.16486705 11.4367546V4.57280146l5.97745065 3.43722498-5.97745065 3.42672816z"/></defs><use fill="currentColor" fill-rule="nonzero" xlink:href="#a"/></svg>'),"my-list",'<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>icon/wishlist</title><defs><path id="a" d="M2 0v16l6-3.999L14 16V5h-2v7.262l-2.891-1.925L8 9.597l-1.109.74L4 12.262V2h10V0z"/></defs><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><mask id="b" fill="#fff"><use xlink:href="#a"/></mask><use fill="currentColor" xlink:href="#a"/><path d="M0 0h16v16H0z" mask="url(#b)" fill-rule="nonzero"/></g></svg>'),"arrow-back",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M13 9V7h3v2h-3zM7.03233022 1l1.43859292 1.43076034-4.58011387 4.55637467H10v2.02471813H3.89080927l4.58011387 4.55637466L7.03233022 15 0 8l.71777145-.71538017.71878813-.71639202L7.03233022 1z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"bespoke",'<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="17px" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 17"><defs/><defs><path id="a" d="M16 9.0376v7H9v-7h7zM3.5 9C5.433 9 7 10.567 7 12.5S5.433 16 3.5 16 0 14.433 0 12.5 1.567 9 3.5 9zm0 1C2.121 10 1 11.122 1 12.5S2.121 15 3.5 15 6 13.878 6 12.5 4.879 10 3.5 10zM8 0c1.933 0 3.5 1.567 3.5 3.5S9.933 7 8 7 4.5 5.433 4.5 3.5 6.067 0 8 0z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"add",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><defs/><path fill="currentColor" fill-rule="evenodd" d="M9.00045405 8.9999041l-.00054995 7.0003571-2.00040508-.0007071.00109988-6.99965H-.00015101V7.00020612l15.99970511-.0007071.0007071 2.00040508H9.00045405zM7.00020612-.00015101H8.9999041l.00070711 3.99995205-2.00040509-.00070711V-.00015101z"/></svg>'),"arrow-down",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M1.4139 3.99999l7.656 7.656-1.414 1.414-7.656-7.656 1.414-1.414zm12.9474 0l1.414 1.414-4.2181222 4.07099-1.414-1.415L14.3613 3.99999z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"arrow-left",'<svg xmlns="http://www.w3.org/2000/svg"  width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M13 10.1428571V7.85714286h3v2.28571424h-3zM7.03233022 1l1.43859292 1.63515467-4.58011387 5.20728534H10v2.31396359H3.89080927l4.58011387 5.2072853L7.03233022 17 0 9l.71777145-.81757733.71878813-.81873374L7.03233022 1z"/></defs><use fill="currentColor" fill-rule="evenodd" transform="translate(0 -1)" xlink:href="#a"/></svg>'),o(o(o(o(o(o(o(o(o(o(r,"arrow-right",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M13 9V7h3v2h-3zM7.03233022 1l1.43859292 1.43076034-4.58011387 4.55637467H10v2.02471813H3.89080927l4.58011387 4.55637466L7.03233022 15 0 8l.71777145-.71538017.71878813-.71639202L7.03233022 1z"/></defs><use fill="currentColor" fill-rule="evenodd" transform="matrix(-1 0 0 1 16 0)" xlink:href="#a"/></svg>'),"arrow-up",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M1.4139 2.99999l7.656 7.656-1.414 1.414-7.656-7.656 1.414-1.414zm12.9474 0l1.414 1.414-4.2181222 4.07099-1.414-1.415L14.3613 2.99999z"/></defs><use fill="currentColor" fill-rule="evenodd" transform="matrix(1 0 0 -1 0 15.06998)" xlink:href="#a"/></svg>'),"check-mark",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><defs/><path d="M1 8.659l1.415-1.414 1.414 1.414-1.414 1.414L1 8.659zm12.7296-5.6592l1.415 1.414v.002l-9.195 9.193-1.414-1.414 9.194-9.195z"/></svg>'),"close",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M13.3139 2.0003l1.414 1.414-2.829 2.829-1.414-1.414 2.829-2.829zm-9.9 0l11.314 11.314-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95 1.414-1.414z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"document",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M2-.0002h8.414L14 3.5868v12.413H2v-11h2v9h8v-9.585l-2.414-2.415H2v-2zM6 8V6h4v2H6zm0 4v-2h4v2H6z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"download",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M7.0002 0h2v8.586l3.293-3.293 1.414 1.414-5.707 5.708-.708-.708-.706-.707-4.293-4.293 1.414-1.414 3.293 3.293V0zM0 16.0002v-2h16v2H0z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"minus",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M0 9h16V7H0z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"play",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M2 0v2.4288803l9.0961836 5.43012514-7.08753094 4.43844596V5.76243203H2V16l13-8.14099456z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"rotate",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M12.9756 3.3418l2.022-.375-.365-1.967-5.253.976-.668 4.606 1.979.287.366-2.522c1.199.828 1.943 2.188 1.943 3.691 0 2.482-2.018 4.5-4.5 4.5-2.481 0-4.5-2.018-4.5-4.5 0-1.201.468-2.331 1.319-3.181l-1.414-1.414c-1.228 1.227-1.905 2.86-1.905 4.595 0 3.584 2.916 6.5 6.5 6.5s6.5-2.916 6.5-6.5c0-1.82-.76-3.493-2.024-4.696"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"search",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M13.7732 15.1871l-4.154-4.155c-2.378 1.699-5.709 1.482-7.84-.649-2.372-2.372-2.372-6.232 0-8.604 2.372-2.371 6.23-2.373 8.604 0 1.15 1.15 1.783 2.678 1.783 4.303h-2c0-1.091-.425-2.117-1.197-2.889-1.592-1.593-4.183-1.59-5.776 0-1.593 1.593-1.593 4.184 0 5.776 1.591 1.592 4.184 1.593 5.776 0l.707-.707 5.511 5.511-1.414 1.414z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),o(o(o(o(o(o(o(o(o(r,"upload",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M7.0002 12.415V3.829l-3.293 3.293-1.414-1.414 4.293-4.293.706-.707.708-.708 5.707 5.708-1.414 1.414-3.293-3.293v8.586h-2zM0 16.0002v-2h16v2H0z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"share",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M12.354 0c-1.419 0-2.58 1.162-2.58 2.581 0 .29.048.57.137.831l-4.419 2.87c-.474-.525-1.154-.863-1.911-.863C2.161 5.419 1 6.581 1 8s1.161 2.581 2.581 2.581c.76 0 1.445-.334 1.919-.863l4.411 2.871c-.091.263-.137.538-.137.831 0 1.419 1.161 2.58 2.58 2.58 1.42 0 2.581-1.161 2.581-2.58 0-1.42-1.161-2.581-2.581-2.581-.758 0-1.437.338-1.911.863L6.024 8.831c.089-.261.137-.541.137-.831 0-.292-.046-.568-.137-.831l4.411-2.871c.474.529 1.158.864 1.919.864 1.42 0 2.581-1.162 2.581-2.581S13.774 0 12.354 0"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"location",'<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 16 16"><defs/><defs><path id="a" d="M16 1.4143L14.586.0003l-2.122 2.121 1.415 1.414L16 1.4143zm-1.414 14.586L16 14.5863l-2.121-2.122-1.415 1.415 2.122 2.121zM0 14.5863l1.414 1.414 2.122-2.121-1.415-1.415L0 14.5863zM1.414.0003L0 1.4143l2.121 2.121 1.415-1.414L1.414.0003zm6.586 5c-1.654 0-3 1.346-3 3s1.346 3 3 3 3-1.346 3-3-1.346-3-3-3zm0 8c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"/></defs><use fill="currentColor" fill-rule="evenodd" xlink:href="#a"/></svg>'),"info",'<svg xmlns="http://www.w3.org/2000/svg" width="34px" height="34px" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 34 34"><defs/><defs><circle id="a" cx="16" cy="16" r="16"/><path id="b" d="M9 6v9H7V6h2zm0-5v2H7V1h2z"/></defs><g fill="none" fill-rule="evenodd"><use stroke="#B49A6D" stroke-width=".75" opacity=".32" transform="translate(1 1)" xlink:href="#a"/><use fill="#B59B6E" transform="translate(9 9)" xlink:href="#b"/></g></svg>'),"infinity-logo",'<svg xmlns="http://www.w3.org/2000/svg" width="64" height="32" viewBox="0 0 64 32"><defs/><g fill="currentColor" class="cls-2"><path d="M14 2.66c6.52 0 11.5 5.59 16.27 11.27-5 6-9.8 11.39-16.27 11.39a11.33 11.33 0 010-22.66m36 0a11.33 11.33 0 010 22.66c-6.44 0-11.23-5.38-16.26-11.39C38.5 8.25 43.49 2.66 50 2.66M14 27.99c7.49 0 12.85-5.86 18-12 5.1 6.07 10.48 12 18 12a14 14 0 100-28c-7.57 0-12.93 5.83-18 11.86-5.07-6-10.43-11.86-18-11.86a14 14 0 100 28M0 32.16h64v-2.23H0z" class="cls-3"/></g></svg>'),"customize",'<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" viewBox="0 0 18 18"><defs/><path fill="currentColor" fill-rule="nonzero" d="M12.1783902 0L18 5.71824617 13.902 9.732l-1.388-1.383 2.6874747-2.6319504-3.0122241-2.95854556L1.96300034 12.9794675v3.0651157h2.69716248L10.415 10.406l1.388 1.383L5.46258194 18H0v-5.8292421L12.1783902 0z"/></svg>'),"black-badge-logo",'<svg xmlns="http://www.w3.org/2000/svg" width="463px" height="37px" class="black-badge-logo" viewBox="0 0 463 37"><defs/><g fill="#FFFFFF" fill-rule="nonzero"><path fill="currentColor" d="M205.505657 3.04337174c7.449197 0 13.146723 6.39051351 18.590282 12.88081196-5.703407 6.807481-11.189232 13.0156972-18.590282 13.0156972-4.642334.0245489-8.94265-2.4379158-11.270986-6.4542236-2.328337-4.0163079-2.328337-8.9717541 0-12.98806193 2.328336-4.01630783 6.628652-6.47877249 11.270986-6.45422363m41.142222 0c4.642334-.02454886 8.94265 2.4379158 11.270986 6.45422363 2.328336 4.01630783 2.328336 8.97175403 0 12.98806193-2.328336 4.0163078-6.628652 6.4787725-11.270986 6.4542236-7.363194 0-12.82954-6.147573-18.587342-13.0156972 5.44503-6.49029845 11.144025-12.88081196 18.587342-12.88081196M205.502717 31.9828851c8.563562 0 14.691839-6.6891348 20.574602-13.6873664 5.827266 6.9342805 11.971714 13.6873664 20.575338 13.6873664 8.83183 0 15.991442-7.1596127 15.991442-15.9914426C262.644099 7.1596127 255.484487 0 246.652657 0c-8.660592 0-14.785561 6.66708269-20.5735 13.5543188C220.28644 6.66377488 214.162573 0 205.502717 0c-8.83183 0-15.991443 7.1596127-15.991443 15.9914425 0 8.8318299 7.159613 15.9914426 15.991443 15.9914426m-15.992178 4.7706027h73.129885v-2.5539999h-73.129885v2.5539999z"/><path d="M7.92735979 3.05899279c7.39002381 0 10.04399311 3.22107567 10.04399311 7.27719061 0 2.7278438-1.4025131 5.0782294-4.8882138 6.027572 3.9421791.7968156 5.9503896 3.7143075 5.9503896 6.8982621 0 4.1318271-2.5385634 8.225063-9.96681079 8.225063H.19405841V3.05899279H7.9273598zm.1128332 11.78684351c3.37360261 0 5.57109371-.8706901 5.57109371-3.9793001 0-3.07001883-2.1974911-3.97930012-5.57109371-3.97930012H4.47510468v7.95860022h3.56508831zm.98609608 12.8115308c3.37360263 0 5.60968483-1.3639219 5.60968483-4.5478766 0-3.1839546-2.2360822-4.6618124-5.60968483-4.6618124H4.47694235v9.209689h4.54934672zM35.9243291 3.05899279h4.2839866V27.6573671h11.5589719v3.8282433H35.9243291V3.05899279zM79.2232456 1.7693129l13.3433537 29.7162975h-4.5493467l-3.2596668-7.4668386H73.5396862l-3.2225458 7.4668386h-4.3214751L79.2232456 1.7693129zm3.9039555 18.535519l-3.9793002-9.0975909-3.9793001 9.0975909h7.9586003zm21.8639149-3.10861c0-9.7029208 7.695078-14.78115022 15.541212-14.78115022 3.145364 0 6.252504.68104213 8.678234 2.34854788v4.54934672c-2.273203-2.00931318-5.457158-3.03289782-8.794007-3.03289782-5.571094 0-10.80185 3.52465948-10.80185 10.91578584 0 7.3911264 5.230756 10.9157859 10.80185 10.9157859 3.336849 0 6.520804-1.0232171 8.794007-3.0314276v4.5486116c-2.42573 1.6675057-5.571461 2.350018-8.716825 2.350018-5.95039 0-11.598666-2.8803708-14.175453-8.37759-.912573-2.0099524-1.365942-4.1979518-1.327168-6.4050303zm41.020568 14.2893885V3.05899279h4.282884V17.234813l12.736186-14.17582021h4.890051L155.146028 17.1591009l13.72265 14.3265095h-5.725459L150.294568 18.029791v13.4558194h-4.282884zm149.61426-28.42661761c7.392597 0 10.045096 3.22107567 10.045096 7.27719061 0 2.7278438-1.402513 5.0782294-4.888214 6.027572 3.942179.7968156 5.95186 3.7143075 5.95186 6.8982621 0 4.1318271-2.541136 8.225063-9.969751 8.225063h-8.869719V3.05899279h7.730728zm.115406 11.78684351c3.372133 0 5.571094-.8706901 5.571094-3.9793001 0-3.07001883-2.198961-3.97930012-5.571094-3.97930012h-3.565088v7.95860022h3.565088zm.983156 12.8115308c3.373603 0 5.610052-1.3639219 5.610052-4.5478766 0-3.1839546-2.236449-4.6618124-5.610052-4.6618124h-4.546407v9.209689h4.546407zM333.33098 1.7693129l13.341516 29.7162975h-4.549714l-3.259667-7.4668386h-11.21937l-3.220708 7.4668386h-4.321843L333.33098 1.7693129zm3.903588 18.535519l-3.981138-9.0975909-3.978933 9.0975909h7.960071zm24.173136-17.24583911h9.059c9.664329 0 15.842958 5.95038968 15.842958 14.25116491 0 8.2621841-6.253973 14.1754527-15.842958 14.1754527h-9.059V3.05899279zm8.981818 24.59837431c6.747205 0 11.370794-3.9793001 11.370794-10.3858006 0-6.4432539-4.623589-10.38433042-11.370794-10.38433042h-4.698934V27.6573671h4.698934zm31.068825-10.5368574c0-8.64111253 6.822918-14.70543802 14.858333-14.70543802 6.064325 0 10.991498 3.67534879 12.810061 8.94469632h-4.924968c-1.327168-3.18395464-4.435411-5.07969954-7.96154-5.07969954-5.610053 0-10.156459 4.20753924-10.156459 10.87903244 0 6.5946783 4.016421 11.028619 10.271865 11.028619 5.267509 0 8.716824-3.2596668 8.716824-8.1111272v-.3032163h-7.354373v-3.7514285h11.599401v15.4636625h-3.031428l-.795713-4.4717969c-1.782911 3.2978905-5.420036 4.9653962-9.70292 4.9653962-6.178629 0-11.144393-3.5650883-13.227948-8.9446963-.746537-1.8814335-1.120507-3.8899647-1.101135-5.9140037zm61.440806-14.06151691v3.82824329h-11.560075v7.84613462h11.181147v3.8271406h-11.181147v9.0968558h11.560075v3.8282433h-15.842958V3.05899279h15.842958z"/></g></svg>'),"black-badge-logo-no-text",'<svg width="82px" height="42px" viewBox="0 0 82 42" fill="none" class="black-badge-logo-no-text" xmlns="http://www.w3.org/2000/svg"><path d="M0.173435 41.0495H81.6463V38.1909H0.173435V41.0495ZM17.9885 35.7325C27.5308 35.7325 34.3487 28.2573 40.9099 20.4533C47.3998 28.1858 54.2462 35.7325 63.8313 35.7325C68.5599 35.7325 73.0949 33.8502 76.4385 30.4996C79.7822 27.149 81.6606 22.6047 81.6606 17.8663C81.6606 13.1278 79.7822 8.58348 76.4385 5.2329C73.0949 1.88233 68.5599 0 63.8313 0C54.1749 0 47.357 7.44666 40.9099 15.122C34.4628 7.43236 27.6306 0 17.9885 0C13.2599 0 8.72491 1.88233 5.38127 5.2329C2.03762 8.58348 0.15918 13.1278 0.15918 17.8663C0.15918 22.6047 2.03762 27.149 5.38127 30.4996C8.72491 33.8502 13.2599 35.7325 17.9885 35.7325ZM63.817 3.43032C67.6415 3.43032 71.3094 4.95275 74.0138 7.6627C76.7181 10.3726 78.2374 14.0481 78.2374 17.8806C78.2374 21.713 76.7181 25.3885 74.0138 28.0984C71.3094 30.8083 67.6415 32.3308 63.817 32.3308C55.6155 32.3308 49.5535 25.4701 43.1207 17.7948C49.1827 10.5625 55.53 3.50178 63.817 3.50178V3.43032ZM17.9885 3.50178C26.2898 3.50178 32.6371 10.6483 38.6991 17.7948C32.3518 25.3987 26.2328 32.3308 17.9885 32.3308C14.164 32.3308 10.4961 30.8083 7.79177 28.0984C5.08743 25.3885 3.56815 21.713 3.56815 17.8806C3.56815 14.0481 5.08743 10.3726 7.79177 7.6627C10.4961 4.95275 14.164 3.43032 17.9885 3.43032" fill="currentColor"/></svg>'),"email",'<svg xmlns="http://www.w3.org/2000/svg" width="16px" height="13px" viewBox="0 0 16 13"><defs/><g fill="#000000" fill-rule="evenodd" stroke="#fff"><path d="M0 .00018353v3.08467059l7.99670588 4.48637647L16 3.20552471V.00018353H0zm.94117647 2.55381176V.91783059H15.0588235V2.6673247L8.00329412 6.51593647.94117647 2.55399529z"/><path d="M15.0590118 4.71349412v6.84885878H.94089412V4.71945882l-.94070588-.51571764V12.48H16.0001882V4.20374118z"/></g></svg>'))},8521:(e,t,n)=>{"use strict";function r(e){return t=e.replace(/{{([^}]+)}}/g),(n=window.rrmc_i18n)&&(r=n[t]),r||(r=t),r=r.replace("{string}",t).replace("{comment}"),Granite.Util.patchText(r);var t,n,r}n.d(t,{K:()=>r})},5076:(e,t,n)=>{"use strict";function r(e,t,n){e()?t.call(n):setTimeout((function(){r(e,t,n)}),750)}n.d(t,{A:()=>r})},997:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}n.d(t,{A:()=>s});var a=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._value=t.value,this.behsub=t},(t=[{key:"subscribe",value:function(e,t){var n=this;this.subscription=this.behsub.subscribe({next:function(r){n._value=r,e.call(t,r)}})}},{key:"value",value:function(){return this._value}},{key:"unsub",value:function(){this.subscription.unsubscribe()}}])&&i(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function s(e,t,n,r){e[t]=new a(n),r&&e[t].subscribe(r,e)}},7709:(e,t,n)=>{"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||a(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=n(1914),c=n(454),u=n(3570),h=n(3055);function d(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function p(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function f(e,t){return t.decode?c(e):e}function m(e){return Array.isArray(e)?e.sort():"object"===i(e)?m(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function v(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function g(e){var t=(e=v(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function y(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function _(e,t){d((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return function(t,n,r){var i="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!i&&f(n,e).includes(e.arrayFormatSeparator);n=o?f(n,e):n;var a=i||o?n.split(e.arrayFormatSeparator).map((function(t){return f(t,e)})):null===n?n:f(n,e);r[t]=a};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;var s,l=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=a(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}(e.split("&"));try{for(l.s();!(s=l.n()).done;){var c=s.value;if(""!==c){var h=r(u(t.decode?c.replace(/\+/g," "):c,"="),2),p=h[0],v=h[1];v=void 0===v?null:["comma","separator"].includes(t.arrayFormat)?v:f(v,t),n(f(p,t),v,o)}}}catch(e){l.e(e)}finally{l.f()}for(var g=0,_=Object.keys(o);g<_.length;g++){var b=_[g],w=o[b];if("object"===i(w)&&null!==w)for(var x=0,S=Object.keys(w);x<S.length;x++){var E=S[x];w[E]=y(w[E],t)}else o[b]=y(w,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce((function(e,t){var n=o[t];return Boolean(n)&&"object"===i(n)&&!Array.isArray(n)?e[t]=m(n):e[t]=n,e}),Object.create(null))}t.extract=g,t.parse=_,t.stringify=function(e,t){if(!e)return"";d((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);for(var n=function(n){return t.skipNull&&null==e[n]||t.skipEmptyString&&""===e[n]},r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[p(t,e),"[",i,"]"].join("")]:[[p(t,e),"[",p(i,e),"]=",p(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[[p(t,e),"[]"].join("")]:[[p(t,e),"[]=",p(r,e)].join("")])}};case"comma":case"separator":return function(t){return function(n,r){return null==r||0===r.length?n:0===n.length?[[p(t,e),"=",p(r,e)].join("")]:[[n,p(r,e)].join(e.arrayFormatSeparator)]}};default:return function(t){return function(n,r){return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:[].concat(o(n),null===r?[p(t,e)]:[[p(t,e),"=",p(r,e)].join("")])}}}}(t),i={},a=0,s=Object.keys(e);a<s.length;a++){var l=s[a];n(l)||(i[l]=e[l])}var c=Object.keys(i);return!1!==t.sort&&c.sort(t.sort),c.map((function(n){var i=e[n];return void 0===i?"":null===i?p(n,t):Array.isArray(i)?i.reduce(r(n),[]).join("&"):p(n,t)+"="+p(i,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){t=Object.assign({decode:!0},t);var n=r(u(e,"#"),2),i=n[0],o=n[1];return Object.assign({url:i.split("?")[0]||"",query:_(g(e),t)},t&&t.parseFragmentIdentifier&&o?{fragmentIdentifier:f(o,t)}:{})},t.stringifyUrl=function(e,n){n=Object.assign({encode:!0,strict:!0},n);var r=v(e.url).split("?")[0]||"",i=t.extract(e.url),o=t.parse(i,{sort:!1}),a=Object.assign(o,e.query),s=t.stringify(a,n);s&&(s="?".concat(s));var l=function(e){var t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(e.url);return e.fragmentIdentifier&&(l="#".concat(p(e.fragmentIdentifier,n))),"".concat(r).concat(s).concat(l)},t.pick=function(e,n,r){r=Object.assign({parseFragmentIdentifier:!0},r);var i=t.parseUrl(e,r),o=i.url,a=i.query,s=i.fragmentIdentifier;return t.stringifyUrl({url:o,query:h(a,n),fragmentIdentifier:s},r)},t.exclude=function(e,n,r){var i=Array.isArray(n)?function(e){return!n.includes(e)}:function(e,t){return!n(e,t)};return t.pick(e,i,r)}},3570:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}},1914:e=>{"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},4755:function(e,t){var n,r;n=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var r={get passive(){n=!0}};window.addEventListener("testPassive",null,r),window.removeEventListener("testPassive",null,r)}function i(e){return l.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))}function o(e){var t=e||window.event;return!!i(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)}function a(){setTimeout((function(){void 0!==d&&(document.body.style.paddingRight=d,d=void 0),void 0!==h&&(document.body.style.overflow=h,h=void 0)}))}var s="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints),l=[],c=!1,u=-1,h=void 0,d=void 0;e.disableBodyScroll=function(e,r){if(s){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!l.some((function(t){return t.targetElement===e}))){var a={targetElement:e,options:r||{}};l=[].concat(t(l),[a]),e.ontouchstart=function(e){1===e.targetTouches.length&&(u=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,r,a,s;1===t.targetTouches.length&&(r=e,s=(n=t).targetTouches[0].clientY-u,i(n.target)||(r&&0===r.scrollTop&&0<s||(a=r)&&a.scrollHeight-a.scrollTop<=a.clientHeight&&s<0?o(n):n.stopPropagation()))},c||(document.addEventListener("touchmove",o,n?{passive:!1}:void 0),c=!0)}}else{f=r,setTimeout((function(){if(void 0===d){var e=!!f&&!0===f.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(d=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===h&&(h=document.body.style.overflow,document.body.style.overflow="hidden")}));var p={targetElement:e,options:r||{}};l=[].concat(t(l),[p])}var f},e.clearAllBodyScrollLocks=function(){s?(l.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),c&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),c=!1),l=[],u=-1):(a(),l=[])},e.enableBodyScroll=function(e){if(s){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,l=l.filter((function(t){return t.targetElement!==e})),c&&0===l.length&&(document.removeEventListener("touchmove",o,n?{passive:!1}:void 0),c=!1)}else(l=l.filter((function(t){return t.targetElement!==e}))).length||a()}},void 0===(r=n.apply(t,[t]))||(e.exports=r)},454:e=>{"use strict";var t="%[a-f0-9]{2}",n=new RegExp("("+t+")|([^%]+?)","gi"),r=new RegExp("("+t+")+","gi");function i(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],i(n),i(r))}function o(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(n)||[],r=1;r<t.length;r++)t=(e=i(t,r).join("")).match(n)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},n=r.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(e){var i=o(n[0]);i!==n[0]&&(t[n[0]]=i)}n=r.exec(e)}t["%C2"]="�";for(var a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}},6090:e=>{"use strict";var t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),n="-1",r={name:"na",version:n};function i(e){return function(t){return Object.prototype.toString.call(t)==="[object "+e+"]"}}var o=i("String"),a=i("RegExp"),s=i("Object"),l=i("Function");function c(e,t,i,c){var u=r;!function(e,t){for(var n=0,r=e.length;n<r&&!1!==t.call(e,e[n],n);n++);}(t,(function(t){var r=function(e,t,r){var i=l(t)?t.call(null,r):t;if(!i)return null;var c={name:e,version:n,codename:""};if(!0===i)return c;if(o(i)){if(-1!==r.indexOf(i))return c}else{if(s(i))return i.hasOwnProperty("version")&&(c.version=i.version),c;if(a(i)){var u=i.exec(r);if(u)return u.length>=2&&u[1]?c.version=u[1].replace(/_/g,"."):c.version=n,c}}}(t[0],t[1],e);if(r)return u=r,!1})),i.call(c,u.name,u.version)}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._rules=t}return t(e,[{key:"parse",value:function(e){e=(e||"").toLowerCase();var t={};c(e,this._rules.device,(function(e,n){var r=parseFloat(n);t.device={name:e,version:r,fullVersion:n},t.device[e]=r}),t),c(e,this._rules.os,(function(e,n){var r=parseFloat(n);t.os={name:e,version:r,fullVersion:n},t.os[e]=r}),t);var n=this.IEMode(e);return c(e,this._rules.engine,(function(e,r){var i=r;n&&(r=n.engineVersion||n.engineMode,i=n.engineMode);var o=parseFloat(r);t.engine={name:e,version:o,fullVersion:r,mode:parseFloat(i),fullMode:i,compatible:!!n&&n.compatible},t.engine[e]=o}),t),c(e,this._rules.browser,(function(e,r){var i=r;n&&("ie"===e&&(r=n.browserVersion),i=n.browserMode);var o=parseFloat(r);t.browser={name:e,version:o,fullVersion:r,mode:parseFloat(i),fullMode:i,compatible:!!n&&n.compatible},t.browser[e]=o}),t),t}},{key:"IEMode",value:function(e){if(!this._rules.re_msie.test(e))return null;var t,n,r=void 0,i=void 0,o=void 0;if(-1!==e.indexOf("trident/")&&(r=/\btrident\/([0-9.]+)/.exec(e))&&r.length>=2){i=r[1];var a=r[1].split(".");a[0]=parseInt(a[0],10)+4,o=a.join(".")}n=(r=this._rules.re_msie.exec(e))[1];var s=r[1].split(".");return void 0===o&&(o=n),s[0]=parseInt(s[0],10)-4,t=s.join("."),void 0===i&&(i=t),{browserVersion:o,browserMode:n,engineVersion:i,engineMode:t,compatible:i!==t}}}]),e}();e.exports=u},7467:(e,t,n)=>{"use strict";var r=n(6090),i=n(8326),o=(navigator.userAgent||"")+" "+(navigator.appVersion||"")+" "+(navigator.vendor||""),a=new r(i);function s(e){var t=a.parse(e),n=function(e){if(!i.re_msie.test(e))return null;var t,n,r=void 0,o=void 0,a=void 0;if(-1!==e.indexOf("trident/")&&(r=/\btrident\/([0-9.]+)/.exec(e))&&r.length>=2){o=r[1];var s=r[1].split(".");s[0]=parseInt(s[0],10)+4,a=s.join(".")}n=(r=i.re_msie.exec(e))[1];var l=r[1].split(".");return void 0===a&&(a=n),l[0]=parseInt(l[0],10)-4,t=l.join("."),void 0===o&&(o=t),{browserVersion:a,browserMode:n,engineVersion:o,engineMode:t,compatible:o!==t}}(e);if(n){var r=t.engine.name,o=n.engineVersion||n.engineMode,s=parseFloat(o),l=n.engineMode;t.engine={name:r,version:s,fullVersion:o,mode:parseFloat(l),fullMode:l,compatible:!!n&&n.compatible},t.engine[t.engine.name]=s;var c=t.browser.name,u=t.browser.fullVersion;"ie"===c&&(u=n.browserVersion);var h=n.browserMode,d=parseFloat(u);t.browser={name:c,version:d,fullVersion:u,mode:parseFloat(h),fullMode:h,compatible:!!n&&n.compatible},t.browser[c]=d}return t}var l=s(o);l.parse=s,e.exports=l},8326:(e,t,n)=>{"use strict";var r="undefined"==typeof window?n.g:window,i=r.external,o=/\b(?:msie |ie |trident\/[0-9].*rv[ :])([0-9.]+)/,a=/\bbb10\b.+?\bversion\/([\d.]+)/,s=/\bblackberry\b.+\bversion\/([\d.]+)/,l=/\bblackberry\d+\/([\d.]+)/,c=[["wp",function(e){return-1!==e.indexOf("windows phone ")?/\bwindows phone (?:os )?([0-9.]+)/:-1!==e.indexOf("xblwp")?/\bxblwp([0-9.]+)/:-1!==e.indexOf("zunewp")?/\bzunewp([0-9.]+)/:"windows phone"}],["windows",/\bwindows nt ([0-9.]+)/],["macosx",/\bmac os x ([0-9._]+)/],["ios",function(e){return/\bcpu(?: iphone)? os /.test(e)?/\bcpu(?: iphone)? os ([0-9._]+)/:-1!==e.indexOf("iph os ")?/\biph os ([0-9_]+)/:/\bios\b/}],["yunos",/\baliyunos ([0-9.]+)/],["android",function(e){return e.indexOf("android")>=0?/\bandroid[ \/-]?([0-9.x]+)?/:e.indexOf("adr")>=0?e.indexOf("mqqbrowser")>=0?/\badr[ ]\(linux; u; ([0-9.]+)?/:/\badr(?:[ ]([0-9.]+))?/:"android"}],["chromeos",/\bcros i686 ([0-9.]+)/],["linux","linux"],["windowsce",/\bwindows ce(?: ([0-9.]+))?/],["symbian",/\bsymbian(?:os)?\/([0-9.]+)/],["blackberry",function(e){var t=e.match(a)||e.match(s)||e.match(l);return t?{version:t[1]}:"blackberry"}]];function u(e){if(i)try{var t=i.twGetRunPath.toLowerCase(),n=i.twGetSecurityID(r),o=i.twGetVersion(n);if(t&&-1===t.indexOf(e))return!1;if(o)return{version:o}}catch(e){}}var h=[["edgehtml",/edge\/([0-9.]+)/],["trident",o],["blink",function(){return"chrome"in r&&"CSS"in r&&/\bapplewebkit[\/]?([0-9.+]+)/}],["webkit",/\bapplewebkit[\/]?([0-9.+]+)/],["gecko",function(e){var t=e.match(/\brv:([\d\w.]+).*\bgecko\/(\d+)/);if(t)return{version:t[1]+"."+t[2]}}],["presto",/\bpresto\/([0-9.]+)/],["androidwebkit",/\bandroidwebkit\/([0-9.]+)/],["coolpadwebkit",/\bcoolpadwebkit\/([0-9.]+)/],["u2",/\bu2\/([0-9.]+)/],["u3",/\bu3\/([0-9.]+)/]],d=[["edge",/edge\/([0-9.]+)/],["sogou",function(e){return e.indexOf("sogoumobilebrowser")>=0?/sogoumobilebrowser\/([0-9.]+)/:e.indexOf("sogoumse")>=0||/ se ([0-9.x]+)/}],["theworld",function(){var e=u("theworld");return void 0!==e?e:/theworld(?: ([\d.])+)?/}],["360",function(e){var t=u("360se");return void 0!==t?t:-1!==e.indexOf("360 aphone browser")?/\b360 aphone browser \(([^\)]+)\)/:/\b360(?:se|ee|chrome|browser)\b/}],["maxthon",function(){try{if(i&&(i.mxVersion||i.max_version))return{version:i.mxVersion||i.max_version}}catch(e){}return/\b(?:maxthon|mxbrowser)(?:[ \/]([0-9.]+))?/}],["micromessenger",/\bmicromessenger\/([\d.]+)/],["qq",/\bm?qqbrowser\/([0-9.]+)/],["green","greenbrowser"],["tt",/\btencenttraveler ([0-9.]+)/],["liebao",function(e){if(e.indexOf("liebaofast")>=0)return/\bliebaofast\/([0-9.]+)/;if(-1===e.indexOf("lbbrowser"))return!1;var t=void 0;try{i&&i.LiebaoGetVersion&&(t=i.LiebaoGetVersion())}catch(e){}return{version:t||"-1"}}],["tao",/\btaobrowser\/([0-9.]+)/],["coolnovo",/\bcoolnovo\/([0-9.]+)/],["saayaa","saayaa"],["baidu",/\b(?:ba?idubrowser|baiduhd)[ \/]([0-9.x]+)/],["ie",o],["mi",/\bmiuibrowser\/([0-9.]+)/],["opera",function(e){var t=/\bopera.+version\/([0-9.ab]+)/;return t.test(e)?t:/\bopr\/([0-9.]+)/}],["oupeng",/\boupeng\/([0-9.]+)/],["yandex",/yabrowser\/([0-9.]+)/],["ali-ap",function(e){return e.indexOf("aliapp")>0?/\baliapp\(ap\/([0-9.]+)\)/:/\balipayclient\/([0-9.]+)\b/}],["ali-ap-pd",/\baliapp\(ap-pd\/([0-9.]+)\)/],["ali-am",/\baliapp\(am\/([0-9.]+)\)/],["ali-tb",/\baliapp\(tb\/([0-9.]+)\)/],["ali-tb-pd",/\baliapp\(tb-pd\/([0-9.]+)\)/],["ali-tm",/\baliapp\(tm\/([0-9.]+)\)/],["ali-tm-pd",/\baliapp\(tm-pd\/([0-9.]+)\)/],["uc",function(e){return e.indexOf("ucbrowser/")>=0?/\bucbrowser\/([0-9.]+)/:e.indexOf("ubrowser/")>=0?/\bubrowser\/([0-9.]+)/:/\buc\/[0-9]/.test(e)?/\buc\/([0-9.]+)/:e.indexOf("ucweb")>=0?/\bucweb([0-9.]+)?/:/\b(?:ucbrowser|uc)\b/}],["chrome",/ (?:chrome|crios|crmo)\/([0-9.]+)/],["android",function(e){if(-1!==e.indexOf("android"))return/\bversion\/([0-9.]+(?: beta)?)/}],["blackberry",function(e){var t=e.match(a)||e.match(s)||e.match(l);return t?{version:t[1]}:"blackberry"}],["safari",/\bversion\/([0-9.]+(?: beta)?)(?: mobile(?:\/[a-z0-9]+)?)? safari\//],["webview",/\bcpu(?: iphone)? os (?:[0-9._]+).+\bapplewebkit\b/],["firefox",/\bfirefox\/([0-9.ab]+)/],["nokia",/\bnokiabrowser\/([0-9.]+)/]];e.exports={device:[["nokia",function(e){return-1!==e.indexOf("nokia ")?/\bnokia ([0-9]+)?/:/\bnokia([a-z0-9]+)?/}],["samsung",function(e){return-1!==e.indexOf("samsung")?/\bsamsung(?:[ \-](?:sgh|gt|sm))?-([a-z0-9]+)/:/\b(?:sgh|sch|gt|sm)-([a-z0-9]+)/}],["wp",function(e){return-1!==e.indexOf("windows phone ")||-1!==e.indexOf("xblwp")||-1!==e.indexOf("zunewp")||-1!==e.indexOf("windows ce")}],["pc","windows"],["ipad","ipad"],["ipod","ipod"],["iphone",/\biphone\b|\biph(\d)/],["mac","macintosh"],["mi",/\bmi[ \-]?([a-z0-9 ]+(?= build|\)))/],["hongmi",/\bhm[ \-]?([a-z0-9]+)/],["aliyun",/\baliyunos\b(?:[\-](\d+))?/],["meizu",function(e){return e.indexOf("meizu")>=0?/\bmeizu[\/ ]([a-z0-9]+)\b/:/\bm([0-9cx]{1,4})\b/}],["nexus",/\bnexus ([0-9s.]+)/],["huawei",function(e){var t=/\bmediapad (.+?)(?= build\/huaweimediapad\b)/;return-1!==e.indexOf("huawei-huawei")?/\bhuawei\-huawei\-([a-z0-9\-]+)/:t.test(e)?t:/\bhuawei[ _\-]?([a-z0-9]+)/}],["lenovo",function(e){return-1!==e.indexOf("lenovo-lenovo")?/\blenovo\-lenovo[ \-]([a-z0-9]+)/:/\blenovo[ \-]?([a-z0-9]+)/}],["zte",function(e){return/\bzte\-[tu]/.test(e)?/\bzte-[tu][ _\-]?([a-su-z0-9\+]+)/:/\bzte[ _\-]?([a-su-z0-9\+]+)/}],["vivo",/\bvivo(?: ([a-z0-9]+))?/],["htc",function(e){return/\bhtc[a-z0-9 _\-]+(?= build\b)/.test(e)?/\bhtc[ _\-]?([a-z0-9 ]+(?= build))/:/\bhtc[ _\-]?([a-z0-9 ]+)/}],["oppo",/\boppo[_]([a-z0-9]+)/],["konka",/\bkonka[_\-]([a-z0-9]+)/],["sonyericsson",/\bmt([a-z0-9]+)/],["coolpad",/\bcoolpad[_ ]?([a-z0-9]+)/],["lg",/\blg[\-]([a-z0-9]+)/],["android",/\bandroid\b|\badr\b/],["blackberry",function(e){return e.indexOf("blackberry")>=0?/\bblackberry\s?(\d+)/:"bb10"}]],os:c,browser:d,engine:h,re_msie:o}},9491:e=>{"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var l=o[a],c=Object.getOwnPropertyDescriptor(i,l);void 0!==c&&c.enumerable&&(n[l]=i[l])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},3055:e=>{"use strict";e.exports=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}},6575:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.d(t,{u:()=>cn});var i,o,a,s,l,c,u,h,d,p,f,m,v,g=function(){return i||"undefined"!=typeof window&&(i=window.gsap)&&i.registerPlugin&&i},y=1,_=[],b=[],w=[],x=Date.now,S=function(e,t){return t},E=function(e,t){return~w.indexOf(e)&&w[w.indexOf(e)+1][t]},k=function(e){return!!~p.indexOf(e)},T=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!1!==r,capture:!!i})},A=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},C="scrollLeft",M="scrollTop",L=function(){return f&&f.isPressed||b.cache++},R=function(e,t){var n=function n(r){if(r||0===r){y&&(a.history.scrollRestoration="manual");var i=f&&f.isPressed;r=n.v=Math.round(r)||(f&&f.iOS?1:0),e(r),n.cacheID=b.cache,i&&S("ss",r)}else(t||b.cache!==n.cacheID||S("ref"))&&(n.cacheID=b.cache,n.v=e());return n.v+n.offset};return n.offset=0,e&&n},P={s:C,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:R((function(e){return arguments.length?a.scrollTo(e,I.sc()):a.pageXOffset||s[C]||l[C]||c[C]||0}))},I={s:M,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:P,sc:R((function(e){return arguments.length?a.scrollTo(P.sc(),e):a.pageYOffset||s[M]||l[M]||c[M]||0}))},D=function(e,t){return(t&&t._ctx&&t._ctx.selector||i.utils.toArray)(e)[0]||("string"==typeof e&&!1!==i.config().nullTargetWarn?console.warn("Element not found:",e):null)},O=function(e,t){var n=t.s,r=t.sc;k(e)&&(e=s.scrollingElement||l);var o=b.indexOf(e),a=r===I.sc?1:2;!~o&&(o=b.push(e)-1),b[o+a]||T(e,"scroll",L);var c=b[o+a],u=c||(b[o+a]=R(E(e,n),!0)||(k(e)?r:R((function(t){return arguments.length?e[n]=t:e[n]}))));return u.target=e,c||(u.smooth="smooth"===i.getProperty(e,"scrollBehavior")),u},F=function(e,t,n){var r=e,i=e,o=x(),a=o,s=t||50,l=Math.max(500,3*s),c=function(e,t){var l=x();t||l-o>s?(i=r,r=e,a=o,o=l):n?r+=e:r=i+(e-i)/(l-a)*(o-a)};return{update:c,reset:function(){i=r=n?0:r,a=o=0},getVelocity:function(e){var t=a,s=i,u=x();return(e||0===e)&&e!==r&&c(e),o===a||u-a>l?0:(r+(n?s:-s))/((n?u:o)-t)*1e3}}},N=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},j=function(e){var t=Math.max.apply(Math,e),n=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(n)?t:n},B=function(){var e,t,n,r;(d=i.core.globals().ScrollTrigger)&&d.core&&(e=d.core,t=e.bridge||{},n=e._scrollers,r=e._proxies,n.push.apply(n,b),r.push.apply(r,w),b=n,w=r,S=function(e,n){return t[e](n)})},U=function(e){return i=e||g(),!o&&i&&"undefined"!=typeof document&&document.body&&(a=window,s=document,l=s.documentElement,c=s.body,p=[a,s,l,c],i.utils.clamp,v=i.core.context||function(){},h="onpointerenter"in c?"pointer":"mouse",u=z.isTouch=a.matchMedia&&a.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in a||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,m=z.eventTypes=("ontouchstart"in l?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in l?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout((function(){return y=0}),500),B(),o=1),o};P.op=I,b.cache=0;var z=function(){function e(e){this.init(e)}var t,n;return e.prototype.init=function(e){o||U(i)||console.warn("Please gsap.registerPlugin(Observer)"),d||B();var t=e.tolerance,n=e.dragMinimum,r=e.type,p=e.target,g=e.lineHeight,y=e.debounce,b=e.preventDefault,w=e.onStop,S=e.onStopDelay,E=e.ignore,C=e.wheelSpeed,M=e.event,R=e.onDragStart,z=e.onDragEnd,G=e.onDrag,H=e.onPress,q=e.onRelease,V=e.onRight,W=e.onLeft,Y=e.onUp,X=e.onDown,K=e.onChangeX,$=e.onChangeY,J=e.onChange,Z=e.onToggleX,Q=e.onToggleY,ee=e.onHover,te=e.onHoverEnd,ne=e.onMove,re=e.ignoreCheck,ie=e.isNormalizer,oe=e.onGestureStart,ae=e.onGestureEnd,se=e.onWheel,le=e.onEnable,ce=e.onDisable,ue=e.onClick,he=e.scrollSpeed,de=e.capture,pe=e.allowClicks,fe=e.lockAxis,me=e.onLockAxis;this.target=p=D(p)||l,this.vars=e,E&&(E=i.utils.toArray(E)),t=t||1e-9,n=n||0,C=C||1,he=he||1,r=r||"wheel,touch,pointer",y=!1!==y,g||(g=parseFloat(a.getComputedStyle(c).lineHeight)||22);var ve,ge,ye,_e,be,we,xe,Se=this,Ee=0,ke=0,Te=e.passive||!b,Ae=O(p,P),Ce=O(p,I),Me=Ae(),Le=Ce(),Re=~r.indexOf("touch")&&!~r.indexOf("pointer")&&"pointerdown"===m[0],Pe=k(p),Ie=p.ownerDocument||s,De=[0,0,0],Oe=[0,0,0],Fe=0,Ne=function(){return Fe=x()},je=function(e,t){return(Se.event=e)&&E&&~E.indexOf(e.target)||t&&Re&&"touch"!==e.pointerType||re&&re(e,t)},Be=function(){var e=Se.deltaX=j(De),n=Se.deltaY=j(Oe),r=Math.abs(e)>=t,i=Math.abs(n)>=t;J&&(r||i)&&J(Se,e,n,De,Oe),r&&(V&&Se.deltaX>0&&V(Se),W&&Se.deltaX<0&&W(Se),K&&K(Se),Z&&Se.deltaX<0!=Ee<0&&Z(Se),Ee=Se.deltaX,De[0]=De[1]=De[2]=0),i&&(X&&Se.deltaY>0&&X(Se),Y&&Se.deltaY<0&&Y(Se),$&&$(Se),Q&&Se.deltaY<0!=ke<0&&Q(Se),ke=Se.deltaY,Oe[0]=Oe[1]=Oe[2]=0),(_e||ye)&&(ne&&ne(Se),ye&&(G(Se),ye=!1),_e=!1),we&&!(we=!1)&&me&&me(Se),be&&(se(Se),be=!1),ve=0},Ue=function(e,t,n){De[n]+=e,Oe[n]+=t,Se._vx.update(e),Se._vy.update(t),y?ve||(ve=requestAnimationFrame(Be)):Be()},ze=function(e,t){fe&&!xe&&(Se.axis=xe=Math.abs(e)>Math.abs(t)?"x":"y",we=!0),"y"!==xe&&(De[2]+=e,Se._vx.update(e,!0)),"x"!==xe&&(Oe[2]+=t,Se._vy.update(t,!0)),y?ve||(ve=requestAnimationFrame(Be)):Be()},Ge=function(e){if(!je(e,1)){var t=(e=N(e,b)).clientX,r=e.clientY,i=t-Se.x,o=r-Se.y,a=Se.isDragging;Se.x=t,Se.y=r,(a||Math.abs(Se.startX-t)>=n||Math.abs(Se.startY-r)>=n)&&(G&&(ye=!0),a||(Se.isDragging=!0),ze(i,o),a||R&&R(Se))}},He=Se.onPress=function(e){je(e,1)||e&&e.button||(Se.axis=xe=null,ge.pause(),Se.isPressed=!0,e=N(e),Ee=ke=0,Se.startX=Se.x=e.clientX,Se.startY=Se.y=e.clientY,Se._vx.reset(),Se._vy.reset(),T(ie?p:Ie,m[1],Ge,Te,!0),Se.deltaX=Se.deltaY=0,H&&H(Se))},qe=Se.onRelease=function(e){if(!je(e,1)){A(ie?p:Ie,m[1],Ge,!0);var t=!isNaN(Se.y-Se.startY),n=Se.isDragging,r=n&&(Math.abs(Se.x-Se.startX)>3||Math.abs(Se.y-Se.startY)>3),o=N(e);!r&&t&&(Se._vx.reset(),Se._vy.reset(),b&&pe&&i.delayedCall(.08,(function(){if(x()-Fe>300&&!e.defaultPrevented)if(e.target.click)e.target.click();else if(Ie.createEvent){var t=Ie.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,a,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}))),Se.isDragging=Se.isGesturing=Se.isPressed=!1,w&&n&&!ie&&ge.restart(!0),z&&n&&z(Se),q&&q(Se,r)}},Ve=function(e){return e.touches&&e.touches.length>1&&(Se.isGesturing=!0)&&oe(e,Se.isDragging)},We=function(){return(Se.isGesturing=!1)||ae(Se)},Ye=function(e){if(!je(e)){var t=Ae(),n=Ce();Ue((t-Me)*he,(n-Le)*he,1),Me=t,Le=n,w&&ge.restart(!0)}},Xe=function(e){if(!je(e)){e=N(e,b),se&&(be=!0);var t=(1===e.deltaMode?g:2===e.deltaMode?a.innerHeight:1)*C;Ue(e.deltaX*t,e.deltaY*t,0),w&&!ie&&ge.restart(!0)}},Ke=function(e){if(!je(e)){var t=e.clientX,n=e.clientY,r=t-Se.x,i=n-Se.y;Se.x=t,Se.y=n,_e=!0,w&&ge.restart(!0),(r||i)&&ze(r,i)}},$e=function(e){Se.event=e,ee(Se)},Je=function(e){Se.event=e,te(Se)},Ze=function(e){return je(e)||N(e,b)&&ue(Se)};ge=Se._dc=i.delayedCall(S||.25,(function(){Se._vx.reset(),Se._vy.reset(),ge.pause(),w&&w(Se)})).pause(),Se.deltaX=Se.deltaY=0,Se._vx=F(0,50,!0),Se._vy=F(0,50,!0),Se.scrollX=Ae,Se.scrollY=Ce,Se.isDragging=Se.isGesturing=Se.isPressed=!1,v(this),Se.enable=function(e){return Se.isEnabled||(T(Pe?Ie:p,"scroll",L),r.indexOf("scroll")>=0&&T(Pe?Ie:p,"scroll",Ye,Te,de),r.indexOf("wheel")>=0&&T(p,"wheel",Xe,Te,de),(r.indexOf("touch")>=0&&u||r.indexOf("pointer")>=0)&&(T(p,m[0],He,Te,de),T(Ie,m[2],qe),T(Ie,m[3],qe),pe&&T(p,"click",Ne,!0,!0),ue&&T(p,"click",Ze),oe&&T(Ie,"gesturestart",Ve),ae&&T(Ie,"gestureend",We),ee&&T(p,h+"enter",$e),te&&T(p,h+"leave",Je),ne&&T(p,h+"move",Ke)),Se.isEnabled=!0,e&&e.type&&He(e),le&&le(Se)),Se},Se.disable=function(){Se.isEnabled&&(_.filter((function(e){return e!==Se&&k(e.target)})).length||A(Pe?Ie:p,"scroll",L),Se.isPressed&&(Se._vx.reset(),Se._vy.reset(),A(ie?p:Ie,m[1],Ge,!0)),A(Pe?Ie:p,"scroll",Ye,de),A(p,"wheel",Xe,de),A(p,m[0],He,de),A(Ie,m[2],qe),A(Ie,m[3],qe),A(p,"click",Ne,!0),A(p,"click",Ze),A(Ie,"gesturestart",Ve),A(Ie,"gestureend",We),A(p,h+"enter",$e),A(p,h+"leave",Je),A(p,h+"move",Ke),Se.isEnabled=Se.isPressed=Se.isDragging=!1,ce&&ce(Se))},Se.kill=Se.revert=function(){Se.disable();var e=_.indexOf(Se);e>=0&&_.splice(e,1),f===Se&&(f=0)},_.push(Se),ie&&k(p)&&(f=Se),Se.enable(M)},t=e,(n=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}])&&r(t.prototype,n),e}();z.version="3.12.5",z.create=function(e){return new z(e)},z.register=U,z.getAll=function(){return _.slice()},z.getById=function(e){return _.filter((function(t){return t.vars.id===e}))[0]},g()&&i.registerPlugin(z);var G,H,q,V,W,Y,X,K,$,J,Z,Q,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he,de,pe,fe,me,ve,ge,ye,_e,be,we,xe,Se,Ee,ke,Te=1,Ae=Date.now,Ce=Ae(),Me=0,Le=0,Re=function(e,t,n){var r=Ve(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return n["_"+t+"Clamp"]=r,r?e.substr(6,e.length-7):e},Pe=function(e,t){return!t||Ve(e)&&"clamp("===e.substr(0,6)?e:"clamp("+e+")"},Ie=function e(){return Le&&requestAnimationFrame(e)},De=function(){return te=1},Oe=function(){return te=0},Fe=function(e){return e},Ne=function(e){return Math.round(1e5*e)/1e5||0},je=function(){return"undefined"!=typeof window},Be=function(){return G||je()&&(G=window.gsap)&&G.registerPlugin&&G},Ue=function(e){return!!~X.indexOf(e)},ze=function(e){return("Height"===e?ye:q["inner"+e])||W["client"+e]||Y["client"+e]},Ge=function(e){return E(e,"getBoundingClientRect")||(Ue(e)?function(){return tn.width=q.innerWidth,tn.height=ye,tn}:function(){return ft(e)})},He=function(e,t){var n=t.s,r=t.d2,i=t.d,o=t.a;return Math.max(0,(n="scroll"+r)&&(o=E(e,n))?o()-Ge(e)()[i]:Ue(e)?(W[n]||Y[n])-ze(r):e[n]-e["offset"+r])},qe=function(e,t){for(var n=0;n<ae.length;n+=3)(!t||~t.indexOf(ae[n+1]))&&e(ae[n],ae[n+1],ae[n+2])},Ve=function(e){return"string"==typeof e},We=function(e){return"function"==typeof e},Ye=function(e){return"number"==typeof e},Xe=function(e){return"object"==typeof e},Ke=function(e,t,n){return e&&e.progress(t?0:1)&&n&&e.pause()},$e=function(e,t){if(e.enabled){var n=e._ctx?e._ctx.add((function(){return t(e)})):t(e);n&&n.totalTime&&(e.callbackAnimation=n)}},Je=Math.abs,Ze="left",Qe="right",et="bottom",tt="width",nt="height",rt="Right",it="Left",ot="Top",at="Bottom",st="padding",lt="margin",ct="Width",ut="Height",ht="px",dt=function(e){return q.getComputedStyle(e)},pt=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ft=function(e,t){var n=t&&"matrix(1, 0, 0, 1, 0, 0)"!==dt(e)[ne]&&G.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),r=e.getBoundingClientRect();return n&&n.progress(0).kill(),r},mt=function(e,t){var n=t.d2;return e["offset"+n]||e["client"+n]||0},vt=function(e){var t,n=[],r=e.labels,i=e.duration();for(t in r)n.push(r[t]/i);return n},gt=function(e){var t=G.utils.snap(e),n=Array.isArray(e)&&e.slice(0).sort((function(e,t){return e-t}));return n?function(e,r,i){var o;if(void 0===i&&(i=.001),!r)return t(e);if(r>0){for(e-=i,o=0;o<n.length;o++)if(n[o]>=e)return n[o];return n[o-1]}for(o=n.length,e+=i;o--;)if(n[o]<=e)return n[o];return n[0]}:function(n,r,i){void 0===i&&(i=.001);var o=t(n);return!r||Math.abs(o-n)<i||o-n<0==r<0?o:t(r<0?n-e:n+e)}},yt=function(e,t,n,r){return n.split(",").forEach((function(n){return e(t,n,r)}))},_t=function(e,t,n,r,i){return e.addEventListener(t,n,{passive:!r,capture:!!i})},bt=function(e,t,n,r){return e.removeEventListener(t,n,!!r)},wt=function(e,t,n){(n=n&&n.wheelHandler)&&(e(t,"wheel",n),e(t,"touchmove",n))},xt={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},St={toggleActions:"play",anticipatePin:0},Et={top:0,left:0,center:.5,bottom:1,right:1},kt=function(e,t){if(Ve(e)){var n=e.indexOf("="),r=~n?+(e.charAt(n-1)+1)*parseFloat(e.substr(n+1)):0;~n&&(e.indexOf("%")>n&&(r*=t/100),e=e.substr(0,n-1)),e=r+(e in Et?Et[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},Tt=function(e,t,n,r,i,o,a,s){var l=i.startColor,c=i.endColor,u=i.fontSize,h=i.indent,d=i.fontWeight,p=V.createElement("div"),f=Ue(n)||"fixed"===E(n,"pinType"),m=-1!==e.indexOf("scroller"),v=f?Y:n,g=-1!==e.indexOf("start"),y=g?l:c,_="border-color:"+y+";font-size:"+u+";color:"+y+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return _+="position:"+((m||s)&&f?"fixed;":"absolute;"),(m||s||!f)&&(_+=(r===I?Qe:et)+":"+(o+parseFloat(h))+"px;"),a&&(_+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=g,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=_,p.innerText=t||0===t?e+"-"+t:e,v.children[0]?v.insertBefore(p,v.children[0]):v.appendChild(p),p._offset=p["offset"+r.op.d2],At(p,0,r,g),p},At=function(e,t,n,r){var i={display:"block"},o=n[r?"os2":"p2"],a=n[r?"p2":"os2"];e._isFlipped=r,i[n.a+"Percent"]=r?-100:0,i[n.a]=r?"1px":0,i["border"+o+ct]=1,i["border"+a+ct]=0,i[n.p]=t+"px",G.set(e,i)},Ct=[],Mt={},Lt=function(){return Ae()-Me>34&&(xe||(xe=requestAnimationFrame(Xt)))},Rt=function(){(!ue||!ue.isPressed||ue.startX>Y.clientWidth)&&(b.cache++,ue?xe||(xe=requestAnimationFrame(Xt)):Xt(),Me||Nt("scrollStart"),Me=Ae())},Pt=function(){pe=q.innerWidth,de=q.innerHeight},It=function(){b.cache++,!ee&&!ce&&!V.fullscreenElement&&!V.webkitFullscreenElement&&(!he||pe!==q.innerWidth||Math.abs(q.innerHeight-de)>.25*q.innerHeight)&&K.restart(!0)},Dt={},Ot=[],Ft=function e(){return bt(cn,"scrollEnd",e)||Vt(!0)},Nt=function(e){return Dt[e]&&Dt[e].map((function(e){return e()}))||Ot},jt=[],Bt=function(e){for(var t=0;t<jt.length;t+=5)(!e||jt[t+4]&&jt[t+4].query===e)&&(jt[t].style.cssText=jt[t+1],jt[t].getBBox&&jt[t].setAttribute("transform",jt[t+2]||""),jt[t+3].uncache=1)},Ut=function(e,t){var n;for(re=0;re<Ct.length;re++)!(n=Ct[re])||t&&n._ctx!==t||(e?n.kill(1):n.revert(!0,!0));_e=!0,t&&Bt(t),t||Nt("revert")},zt=function(e,t){b.cache++,(t||!Se)&&b.forEach((function(e){return We(e)&&e.cacheID++&&(e.rec=0)})),Ve(e)&&(q.history.scrollRestoration=ve=e)},Gt=0,Ht=function(){Y.appendChild(ge),ye=!ue&&ge.offsetHeight||q.innerHeight,Y.removeChild(ge)},qt=function(e){return $(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach((function(t){return t.style.display=e?"none":"block"}))},Vt=function(e,t){if(!Me||e||_e){Ht(),Se=cn.isRefreshing=!0,b.forEach((function(e){return We(e)&&++e.cacheID&&(e.rec=e())}));var n=Nt("refreshInit");se&&cn.sort(),t||Ut(),b.forEach((function(e){We(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))})),Ct.slice(0).forEach((function(e){return e.refresh()})),_e=!1,Ct.forEach((function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",n=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-n),e.refresh()}})),be=1,qt(!0),Ct.forEach((function(e){var t=He(e.scroller,e._dir),n="max"===e.vars.end||e._endClamp&&e.end>t,r=e._startClamp&&e.start>=t;(n||r)&&e.setPositions(r?t-1:e.start,n?Math.max(r?t:e.start+1,t):e.end,!0)})),qt(!1),be=0,n.forEach((function(e){return e&&e.render&&e.render(-1)})),b.forEach((function(e){We(e)&&(e.smooth&&requestAnimationFrame((function(){return e.target.style.scrollBehavior="smooth"})),e.rec&&e(e.rec))})),zt(ve,1),K.pause(),Gt++,Se=2,Xt(2),Ct.forEach((function(e){return We(e.vars.onRefresh)&&e.vars.onRefresh(e)})),Se=cn.isRefreshing=!1,Nt("refresh")}else _t(cn,"scrollEnd",Ft)},Wt=0,Yt=1,Xt=function(e){if(2===e||!Se&&!_e){cn.isUpdating=!0,ke&&ke.update(0);var t=Ct.length,n=Ae(),r=n-Ce>=50,i=t&&Ct[0].scroll();if(Yt=Wt>i?-1:1,Se||(Wt=i),r&&(Me&&!te&&n-Me>200&&(Me=0,Nt("scrollEnd")),Z=Ce,Ce=n),Yt<0){for(re=t;re-- >0;)Ct[re]&&Ct[re].update(0,r);Yt=1}else for(re=0;re<t;re++)Ct[re]&&Ct[re].update(0,r);cn.isUpdating=!1}xe=0},Kt=[Ze,"top",et,Qe,lt+at,lt+rt,lt+ot,lt+it,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],$t=Kt.concat([tt,nt,"boxSizing","max"+ct,"max"+ut,"position",lt,st,st+ot,st+rt,st+at,st+it]),Jt=function(e,t,n,r){if(!e._gsap.swappedIn){for(var i,o=Kt.length,a=t.style,s=e.style;o--;)a[i=Kt[o]]=n[i];a.position="absolute"===n.position?"absolute":"relative","inline"===n.display&&(a.display="inline-block"),s[et]=s[Qe]="auto",a.flexBasis=n.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[tt]=mt(e,P)+ht,a[nt]=mt(e,I)+ht,a[st]=s[lt]=s.top=s[Ze]="0",Qt(r),s[tt]=s["max"+ct]=n[tt],s[nt]=s["max"+ut]=n[nt],s[st]=n[st],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},Zt=/([A-Z])/g,Qt=function(e){if(e){var t,n,r=e.t.style,i=e.length,o=0;for((e.t._gsap||G.core.getCache(e.t)).uncache=1;o<i;o+=2)n=e[o+1],t=e[o],n?r[t]=n:r[t]&&r.removeProperty(t.replace(Zt,"-$1").toLowerCase())}},en=function(e){for(var t=$t.length,n=e.style,r=[],i=0;i<t;i++)r.push($t[i],n[$t[i]]);return r.t=e,r},tn={left:0,top:0},nn=function(e,t,n,r,i,o,a,s,l,c,u,h,d,p){We(e)&&(e=e(s)),Ve(e)&&"max"===e.substr(0,3)&&(e=h+("="===e.charAt(4)?kt("0"+e.substr(3),n):0));var f,m,v,g=d?d.time():0;if(d&&d.seek(0),isNaN(e)||(e=+e),Ye(e))d&&(e=G.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,h,e)),a&&At(a,n,r,!0);else{We(t)&&(t=t(s));var y,_,b,w,x=(e||"0").split(" ");v=D(t,s)||Y,(y=ft(v)||{})&&(y.left||y.top)||"none"!==dt(v).display||(w=v.style.display,v.style.display="block",y=ft(v),w?v.style.display=w:v.style.removeProperty("display")),_=kt(x[0],y[r.d]),b=kt(x[1]||"0",n),e=y[r.p]-l[r.p]-c+_+i-b,a&&At(a,b,r,n-b<20||a._isStart&&b>20),n-=n-b}if(p&&(s[p]=e||-.001,e<0&&(e=0)),o){var S=e+n,E=o._isStart;f="scroll"+r.d2,At(o,S,r,E&&S>20||!E&&(u?Math.max(Y[f],W[f]):o.parentNode[f])<=S+1),u&&(l=ft(a),u&&(o.style[r.op.p]=l[r.op.p]-r.op.m-o._offset+ht))}return d&&v&&(f=ft(v),d.seek(h),m=ft(v),d._caScrollDist=f[r.p]-m[r.p],e=e/d._caScrollDist*h),d&&d.seek(g),d?e:Math.round(e)},rn=/(webkit|moz|length|cssText|inset)/i,on=function(e,t,n,r){if(e.parentNode!==t){var i,o,a=e.style;if(t===Y){for(i in e._stOrig=a.cssText,o=dt(e))+i||rn.test(i)||!o[i]||"string"!=typeof a[i]||"0"===i||(a[i]=o[i]);a.top=n,a.left=r}else a.cssText=e._stOrig;G.core.getCache(e).uncache=1,t.appendChild(e)}},an=function(e,t,n){var r=t,i=r;return function(t){var o=Math.round(e());return o!==r&&o!==i&&Math.abs(o-r)>3&&Math.abs(o-i)>3&&(t=o,n&&n()),i=r,r=t,t}},sn=function(e,t,n){var r={};r[t.p]="+="+n,G.set(e,r)},ln=function(e,t){var n=O(e,t),r="_scroll"+t.p2,i=function t(i,o,a,s,l){var c=t.tween,u=o.onComplete,h={};a=a||n();var d=an(n,a,(function(){c.kill(),t.tween=0}));return l=s&&l||0,s=s||i-a,c&&c.kill(),o[r]=i,o.inherit=!1,o.modifiers=h,h[r]=function(){return d(a+s*c.ratio+l*c.ratio*c.ratio)},o.onUpdate=function(){b.cache++,t.tween&&Xt()},o.onComplete=function(){t.tween=0,u&&u.call(c)},c=t.tween=G.to(e,o)};return e[r]=n,n.wheelHandler=function(){return i.tween&&i.tween.kill()&&(i.tween=0)},_t(e,"wheel",n.wheelHandler),cn.isTouch&&_t(e,"touchmove",n.wheelHandler),i},cn=function(){function e(t,n){H||e.register(G)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),me(this),this.init(t,n)}return e.prototype.init=function(t,n){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),Le){var r,i,o,a,s,l,c,u,h,d,p,f,m,v,g,y,_,x,S,k,T,A,C,M,L,R,F,N,j,B,U,z,H,X,K,Q,ne,ie,oe,ae,ce,ue,he=t=pt(Ve(t)||Ye(t)||t.nodeType?{trigger:t}:t,St),de=he.onUpdate,pe=he.toggleClass,fe=he.id,me=he.onToggle,ve=he.onRefresh,ge=he.scrub,ye=he.trigger,_e=he.pin,xe=he.pinSpacing,Ce=he.invalidateOnRefresh,Ie=he.anticipatePin,De=he.onScrubComplete,Oe=he.onSnapComplete,je=he.once,Be=he.snap,qe=he.pinReparent,Ze=he.pinSpacer,Qe=he.containerAnimation,et=he.fastScrollEnd,yt=he.preventOverlaps,wt=t.horizontal||t.containerAnimation&&!1!==t.horizontal?P:I,Et=!ge&&0!==ge,At=D(t.scroller||q),Lt=G.core.getCache(At),Pt=Ue(At),Dt="fixed"===("pinType"in t?t.pinType:E(At,"pinType")||Pt&&"fixed"),Ot=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],Nt=Et&&t.toggleActions.split(" "),jt="markers"in t?t.markers:St.markers,Bt=Pt?0:parseFloat(dt(At)["border"+wt.p2+ct])||0,Ut=this,zt=t.onRefreshInit&&function(){return t.onRefreshInit(Ut)},Ht=function(e,t,n){var r=n.d,i=n.d2,o=n.a;return(o=E(e,"getBoundingClientRect"))?function(){return o()[r]}:function(){return(t?ze(i):e["client"+i])||0}}(At,Pt,wt),qt=function(e,t){return!t||~w.indexOf(e)?Ge(e):function(){return tn}}(At,Pt),Wt=0,Xt=0,Kt=0,$t=O(At,wt);if(Ut._startClamp=Ut._endClamp=!1,Ut._dir=wt,Ie*=45,Ut.scroller=At,Ut.scroll=Qe?Qe.time.bind(Qe):$t,a=$t(),Ut.vars=t,n=n||t.animation,"refreshPriority"in t&&(se=1,-9999===t.refreshPriority&&(ke=Ut)),Lt.tweenScroll=Lt.tweenScroll||{top:ln(At,I),left:ln(At,P)},Ut.tweenTo=r=Lt.tweenScroll[wt.p],Ut.scrubDuration=function(e){(H=Ye(e)&&e)?z?z.duration(e):z=G.to(n,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:H,paused:!0,onComplete:function(){return De&&De(Ut)}}):(z&&z.progress(1).kill(),z=0)},n&&(n.vars.lazy=!1,n._initted&&!Ut.isReverted||!1!==n.vars.immediateRender&&!1!==t.immediateRender&&n.duration()&&n.render(0,!0,!0),Ut.animation=n.pause(),n.scrollTrigger=Ut,Ut.scrubDuration(ge),B=0,fe||(fe=n.vars.id)),Be&&(Xe(Be)&&!Be.push||(Be={snapTo:Be}),"scrollBehavior"in Y.style&&G.set(Pt?[Y,W]:At,{scrollBehavior:"auto"}),b.forEach((function(e){return We(e)&&e.target===(Pt?V.scrollingElement||W:At)&&(e.smooth=!1)})),o=We(Be.snapTo)?Be.snapTo:"labels"===Be.snapTo?function(e){return function(t){return G.utils.snap(vt(e),t)}}(n):"labelsDirectional"===Be.snapTo?(ae=n,function(e,t){return gt(vt(ae))(e,t.direction)}):!1!==Be.directional?function(e,t){return gt(Be.snapTo)(e,Ae()-Xt<500?0:t.direction)}:G.utils.snap(Be.snapTo),X=Be.duration||{min:.1,max:2},X=Xe(X)?J(X.min,X.max):J(X,X),K=G.delayedCall(Be.delay||H/2||.1,(function(){var e=$t(),t=Ae()-Xt<500,i=r.tween;if(!(t||Math.abs(Ut.getVelocity())<10)||i||te||Wt===e)Ut.isActive&&Wt!==e&&K.restart(!0);else{var a,s,u=(e-l)/v,h=n&&!Et?n.totalProgress():u,d=t?0:(h-U)/(Ae()-Z)*1e3||0,p=G.utils.clamp(-u,1-u,Je(d/2)*d/.185),f=u+(!1===Be.inertia?0:p),m=Be,g=m.onStart,y=m.onInterrupt,_=m.onComplete;if(a=o(f,Ut),Ye(a)||(a=f),s=Math.round(l+a*v),e<=c&&e>=l&&s!==e){if(i&&!i._initted&&i.data<=Je(s-e))return;!1===Be.inertia&&(p=a-u),r(s,{duration:X(Je(.185*Math.max(Je(f-h),Je(a-h))/d/.05||0)),ease:Be.ease||"power3",data:Je(s-e),onInterrupt:function(){return K.restart(!0)&&y&&y(Ut)},onComplete:function(){Ut.update(),Wt=$t(),n&&(z?z.resetTo("totalProgress",a,n._tTime/n._tDur):n.progress(a)),B=U=n&&!Et?n.totalProgress():Ut.progress,Oe&&Oe(Ut),_&&_(Ut)}},e,p*v,s-e-p*v),g&&g(Ut,r.tween)}}})).pause()),fe&&(Mt[fe]=Ut),(oe=(ye=Ut.trigger=D(ye||!0!==_e&&_e))&&ye._gsap&&ye._gsap.stRevert)&&(oe=oe(Ut)),_e=!0===_e?ye:D(_e),Ve(pe)&&(pe={targets:ye,className:pe}),_e&&(!1===xe||xe===lt||(xe=!(!xe&&_e.parentNode&&_e.parentNode.style&&"flex"===dt(_e.parentNode).display)&&st),Ut.pin=_e,(i=G.core.getCache(_e)).spacer?g=i.pinState:(Ze&&((Ze=D(Ze))&&!Ze.nodeType&&(Ze=Ze.current||Ze.nativeElement),i.spacerIsNative=!!Ze,Ze&&(i.spacerState=en(Ze))),i.spacer=x=Ze||V.createElement("div"),x.classList.add("pin-spacer"),fe&&x.classList.add("pin-spacer-"+fe),i.pinState=g=en(_e)),!1!==t.force3D&&G.set(_e,{force3D:!0}),Ut.spacer=x=i.spacer,j=dt(_e),M=j[xe+wt.os2],k=G.getProperty(_e),T=G.quickSetter(_e,wt.a,ht),Jt(_e,x,j),_=en(_e)),jt){f=Xe(jt)?pt(jt,xt):xt,d=Tt("scroller-start",fe,At,wt,f,0),p=Tt("scroller-end",fe,At,wt,f,0,d),S=d["offset"+wt.op.d2];var Zt=D(E(At,"content")||At);u=this.markerStart=Tt("start",fe,Zt,wt,f,S,0,Qe),h=this.markerEnd=Tt("end",fe,Zt,wt,f,S,0,Qe),Qe&&(ie=G.quickSetter([u,h],wt.a,ht)),Dt||w.length&&!0===E(At,"fixedMarkers")||(ue=dt(ce=Pt?Y:At).position,ce.style.position="absolute"===ue||"fixed"===ue?ue:"relative",G.set([d,p],{force3D:!0}),R=G.quickSetter(d,wt.a,ht),N=G.quickSetter(p,wt.a,ht))}if(Qe){var rn=Qe.vars.onUpdate,an=Qe.vars.onUpdateParams;Qe.eventCallback("onUpdate",(function(){Ut.update(0,0,1),rn&&rn.apply(Qe,an||[])}))}if(Ut.previous=function(){return Ct[Ct.indexOf(Ut)-1]},Ut.next=function(){return Ct[Ct.indexOf(Ut)+1]},Ut.revert=function(e,t){if(!t)return Ut.kill(!0);var r=!1!==e||!Ut.enabled,i=ee;r!==Ut.isReverted&&(r&&(Q=Math.max($t(),Ut.scroll.rec||0),Kt=Ut.progress,ne=n&&n.progress()),u&&[u,h,d,p].forEach((function(e){return e.style.display=r?"none":"block"})),r&&(ee=Ut,Ut.update(r)),!_e||qe&&Ut.isActive||(r?function(e,t,n){Qt(n);var r=e._gsap;if(r.spacerIsNative)Qt(r.spacerState);else if(e._gsap.swappedIn){var i=t.parentNode;i&&(i.insertBefore(e,t),i.removeChild(t))}e._gsap.swappedIn=!1}(_e,x,g):Jt(_e,x,dt(_e),L)),r||Ut.update(r),ee=i,Ut.isReverted=r)},Ut.refresh=function(i,o,f,b){if(!ee&&Ut.enabled||o)if(_e&&i&&Me)_t(e,"scrollEnd",Ft);else{!Se&&zt&&zt(Ut),ee=Ut,r.tween&&!f&&(r.tween.kill(),r.tween=0),z&&z.pause(),Ce&&n&&n.revert({kill:!1}).invalidate(),Ut.isReverted||Ut.revert(!0,!0),Ut._subPinOffset=!1;var w,S,E,T,M,R,N,j,B,U,H,q,X,$=Ht(),J=qt(),Z=Qe?Qe.duration():He(At,wt),te=v<=.01,re=0,ie=b||0,oe=Xe(f)?f.end:t.end,ae=t.endTrigger||ye,se=Xe(f)?f.start:t.start||(0!==t.start&&ye?_e?"0 0":"0 100%":0),ce=Ut.pinnedContainer=t.pinnedContainer&&D(t.pinnedContainer,Ut),ue=ye&&Math.max(0,Ct.indexOf(Ut))||0,he=ue;for(jt&&Xe(f)&&(q=G.getProperty(d,wt.p),X=G.getProperty(p,wt.p));he--;)(R=Ct[he]).end||R.refresh(0,1)||(ee=Ut),!(N=R.pin)||N!==ye&&N!==_e&&N!==ce||R.isReverted||(U||(U=[]),U.unshift(R),R.revert(!0,!0)),R!==Ct[he]&&(ue--,he--);for(We(se)&&(se=se(Ut)),se=Re(se,"start",Ut),l=nn(se,ye,$,wt,$t(),u,d,Ut,J,Bt,Dt,Z,Qe,Ut._startClamp&&"_startClamp")||(_e?-.001:0),We(oe)&&(oe=oe(Ut)),Ve(oe)&&!oe.indexOf("+=")&&(~oe.indexOf(" ")?oe=(Ve(se)?se.split(" ")[0]:"")+oe:(re=kt(oe.substr(2),$),oe=Ve(se)?se:(Qe?G.utils.mapRange(0,Qe.duration(),Qe.scrollTrigger.start,Qe.scrollTrigger.end,l):l)+re,ae=ye)),oe=Re(oe,"end",Ut),c=Math.max(l,nn(oe||(ae?"100% 0":Z),ae,$,wt,$t()+re,h,p,Ut,J,Bt,Dt,Z,Qe,Ut._endClamp&&"_endClamp"))||-.001,re=0,he=ue;he--;)(N=(R=Ct[he]).pin)&&R.start-R._pinPush<=l&&!Qe&&R.end>0&&(w=R.end-(Ut._startClamp?Math.max(0,R.start):R.start),(N===ye&&R.start-R._pinPush<l||N===ce)&&isNaN(se)&&(re+=w*(1-R.progress)),N===_e&&(ie+=w));if(l+=re,c+=re,Ut._startClamp&&(Ut._startClamp+=re),Ut._endClamp&&!Se&&(Ut._endClamp=c||-.001,c=Math.min(c,He(At,wt))),v=c-l||(l-=.01)&&.001,te&&(Kt=G.utils.clamp(0,1,G.utils.normalize(l,c,Q))),Ut._pinPush=ie,u&&re&&((w={})[wt.a]="+="+re,ce&&(w[wt.p]="-="+$t()),G.set([u,h],w)),!_e||be&&Ut.end>=He(At,wt)){if(ye&&$t()&&!Qe)for(S=ye.parentNode;S&&S!==Y;)S._pinOffset&&(l-=S._pinOffset,c-=S._pinOffset),S=S.parentNode}else w=dt(_e),T=wt===I,E=$t(),A=parseFloat(k(wt.a))+ie,!Z&&c>1&&(H={style:H=(Pt?V.scrollingElement||W:At).style,value:H["overflow"+wt.a.toUpperCase()]},Pt&&"scroll"!==dt(Y)["overflow"+wt.a.toUpperCase()]&&(H.style["overflow"+wt.a.toUpperCase()]="scroll")),Jt(_e,x,w),_=en(_e),S=ft(_e,!0),j=Dt&&O(At,T?P:I)(),xe?((L=[xe+wt.os2,v+ie+ht]).t=x,(he=xe===st?mt(_e,wt)+v+ie:0)&&(L.push(wt.d,he+ht),"auto"!==x.style.flexBasis&&(x.style.flexBasis=he+ht)),Qt(L),ce&&Ct.forEach((function(e){e.pin===ce&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)})),Dt&&$t(Q)):(he=mt(_e,wt))&&"auto"!==x.style.flexBasis&&(x.style.flexBasis=he+ht),Dt&&((M={top:S.top+(T?E-l:j)+ht,left:S.left+(T?j:E-l)+ht,boxSizing:"border-box",position:"fixed"})[tt]=M["max"+ct]=Math.ceil(S.width)+ht,M[nt]=M["max"+ut]=Math.ceil(S.height)+ht,M[lt]=M[lt+ot]=M[lt+rt]=M[lt+at]=M[lt+it]="0",M[st]=w[st],M[st+ot]=w[st+ot],M[st+rt]=w[st+rt],M[st+at]=w[st+at],M[st+it]=w[st+it],y=function(e,t,n){for(var r,i=[],o=e.length,a=n?8:0;a<o;a+=2)r=e[a],i.push(r,r in t?t[r]:e[a+1]);return i.t=e.t,i}(g,M,qe),Se&&$t(0)),n?(B=n._initted,le(1),n.render(n.duration(),!0,!0),C=k(wt.a)-A+v+ie,F=Math.abs(v-C)>1,Dt&&F&&y.splice(y.length-2,2),n.render(0,!0,!0),B||n.invalidate(!0),n.parent||n.totalTime(n.totalTime()),le(0)):C=v,H&&(H.value?H.style["overflow"+wt.a.toUpperCase()]=H.value:H.style.removeProperty("overflow-"+wt.a));U&&U.forEach((function(e){return e.revert(!1,!0)})),Ut.start=l,Ut.end=c,a=s=Se?Q:$t(),Qe||Se||(a<Q&&$t(Q),Ut.scroll.rec=0),Ut.revert(!1,!0),Xt=Ae(),K&&(Wt=-1,K.restart(!0)),ee=0,n&&Et&&(n._initted||ne)&&n.progress()!==ne&&n.progress(ne||0,!0).render(n.time(),!0,!0),(te||Kt!==Ut.progress||Qe||Ce)&&(n&&!Et&&n.totalProgress(Qe&&l<-.001&&!Kt?G.utils.normalize(l,c,0):Kt,!0),Ut.progress=te||(a-l)/v===Kt?0:Kt),_e&&xe&&(x._pinOffset=Math.round(Ut.progress*C)),z&&z.invalidate(),isNaN(q)||(q-=G.getProperty(d,wt.p),X-=G.getProperty(p,wt.p),sn(d,wt,q),sn(u,wt,q-(b||0)),sn(p,wt,X),sn(h,wt,X-(b||0))),te&&!Se&&Ut.update(),!ve||Se||m||(m=!0,ve(Ut),m=!1)}},Ut.getVelocity=function(){return($t()-s)/(Ae()-Z)*1e3||0},Ut.endAnimation=function(){Ke(Ut.callbackAnimation),n&&(z?z.progress(1):n.paused()?Et||Ke(n,Ut.direction<0,1):Ke(n,n.reversed()))},Ut.labelToScroll=function(e){return n&&n.labels&&(l||Ut.refresh()||l)+n.labels[e]/n.duration()*v||0},Ut.getTrailing=function(e){var t=Ct.indexOf(Ut),n=Ut.direction>0?Ct.slice(0,t).reverse():Ct.slice(t+1);return(Ve(e)?n.filter((function(t){return t.vars.preventOverlaps===e})):n).filter((function(e){return Ut.direction>0?e.end<=l:e.start>=c}))},Ut.update=function(e,t,i){if(!Qe||i||e){var o,u,h,p,f,m,g,b=!0===Se?Q:Ut.scroll(),w=e?0:(b-l)/v,S=w<0?0:w>1?1:w||0,E=Ut.progress;if(t&&(s=a,a=Qe?$t():b,Be&&(U=B,B=n&&!Et?n.totalProgress():S)),Ie&&_e&&!ee&&!Te&&Me&&(!S&&l<b+(b-s)/(Ae()-Z)*Ie?S=1e-4:1===S&&c>b+(b-s)/(Ae()-Z)*Ie&&(S=.9999)),S!==E&&Ut.enabled){if(p=(f=(o=Ut.isActive=!!S&&S<1)!=(!!E&&E<1))||!!S!=!!E,Ut.direction=S>E?1:-1,Ut.progress=S,p&&!ee&&(u=S&&!E?0:1===S?1:1===E?2:3,Et&&(h=!f&&"none"!==Nt[u+1]&&Nt[u+1]||Nt[u],g=n&&("complete"===h||"reset"===h||h in n))),yt&&(f||g)&&(g||ge||!n)&&(We(yt)?yt(Ut):Ut.getTrailing(yt).forEach((function(e){return e.endAnimation()}))),Et||(!z||ee||Te?n&&n.totalProgress(S,!(!ee||!Xt&&!e)):(z._dp._time-z._start!==z._time&&z.render(z._dp._time-z._start),z.resetTo?z.resetTo("totalProgress",S,n._tTime/n._tDur):(z.vars.totalProgress=S,z.invalidate().restart()))),_e)if(e&&xe&&(x.style[xe+wt.os2]=M),Dt){if(p){if(m=!e&&S>E&&c+1>b&&b+1>=He(At,wt),qe)if(e||!o&&!m)on(_e,x);else{var k=ft(_e,!0),L=b-l;on(_e,Y,k.top+(wt===I?L:0)+ht,k.left+(wt===I?0:L)+ht)}Qt(o||m?y:_),F&&S<1&&o||T(A+(1!==S||m?0:C))}}else T(Ne(A+C*S));Be&&!r.tween&&!ee&&!Te&&K.restart(!0),pe&&(f||je&&S&&(S<1||!we))&&$(pe.targets).forEach((function(e){return e.classList[o||je?"add":"remove"](pe.className)})),de&&!Et&&!e&&de(Ut),p&&!ee?(Et&&(g&&("complete"===h?n.pause().totalProgress(1):"reset"===h?n.restart(!0).pause():"restart"===h?n.restart(!0):n[h]()),de&&de(Ut)),!f&&we||(me&&f&&$e(Ut,me),Ot[u]&&$e(Ut,Ot[u]),je&&(1===S?Ut.kill(!1,1):Ot[u]=0),f||Ot[u=1===S?1:3]&&$e(Ut,Ot[u])),et&&!o&&Math.abs(Ut.getVelocity())>(Ye(et)?et:2500)&&(Ke(Ut.callbackAnimation),z?z.progress(1):Ke(n,"reverse"===h?1:!S,1))):Et&&de&&!ee&&de(Ut)}if(N){var P=Qe?b/Qe.duration()*(Qe._caScrollDist||0):b;R(P+(d._isFlipped?1:0)),N(P)}ie&&ie(-b/Qe.duration()*(Qe._caScrollDist||0))}},Ut.enable=function(t,n){Ut.enabled||(Ut.enabled=!0,_t(At,"resize",It),Pt||_t(At,"scroll",Rt),zt&&_t(e,"refreshInit",zt),!1!==t&&(Ut.progress=Kt=0,a=s=Wt=$t()),!1!==n&&Ut.refresh())},Ut.getTween=function(e){return e&&r?r.tween:z},Ut.setPositions=function(e,t,n,r){if(Qe){var i=Qe.scrollTrigger,o=Qe.duration(),a=i.end-i.start;e=i.start+a*e/o,t=i.start+a*t/o}Ut.refresh(!1,!1,{start:Pe(e,n&&!!Ut._startClamp),end:Pe(t,n&&!!Ut._endClamp)},r),Ut.update()},Ut.adjustPinSpacing=function(e){if(L&&e){var t=L.indexOf(wt.d)+1;L[t]=parseFloat(L[t])+e+ht,L[1]=parseFloat(L[1])+e+ht,Qt(L)}},Ut.disable=function(t,n){if(Ut.enabled&&(!1!==t&&Ut.revert(!0,!0),Ut.enabled=Ut.isActive=!1,n||z&&z.pause(),Q=0,i&&(i.uncache=1),zt&&bt(e,"refreshInit",zt),K&&(K.pause(),r.tween&&r.tween.kill()&&(r.tween=0)),!Pt)){for(var o=Ct.length;o--;)if(Ct[o].scroller===At&&Ct[o]!==Ut)return;bt(At,"resize",It),Pt||bt(At,"scroll",Rt)}},Ut.kill=function(e,r){Ut.disable(e,r),z&&!r&&z.kill(),fe&&delete Mt[fe];var o=Ct.indexOf(Ut);o>=0&&Ct.splice(o,1),o===re&&Yt>0&&re--,o=0,Ct.forEach((function(e){return e.scroller===Ut.scroller&&(o=1)})),o||Se||(Ut.scroll.rec=0),n&&(n.scrollTrigger=null,e&&n.revert({kill:!1}),r||n.kill()),u&&[u,h,d,p].forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),ke===Ut&&(ke=0),_e&&(i&&(i.uncache=1),o=0,Ct.forEach((function(e){return e.pin===_e&&o++})),o||(i.spacer=0)),t.onKill&&t.onKill(Ut)},Ct.push(Ut),Ut.enable(!1,!1),oe&&oe(Ut),n&&n.add&&!v){var cn=Ut.update;Ut.update=function(){Ut.update=cn,l||c||Ut.refresh()},G.delayedCall(.01,Ut.update),v=.01,l=c=0}else Ut.refresh();_e&&function(){if(Ee!==Gt){var e=Ee=Gt;requestAnimationFrame((function(){return e===Gt&&Vt(!0)}))}}()}else this.update=this.refresh=this.kill=Fe},e.register=function(t){return H||(G=t||Be(),je()&&window.document&&e.enable(),H=Le),H},e.defaults=function(e){if(e)for(var t in e)St[t]=e[t];return St},e.disable=function(e,t){Le=0,Ct.forEach((function(n){return n[t?"kill":"disable"](e)})),bt(q,"wheel",Rt),bt(V,"scroll",Rt),clearInterval(Q),bt(V,"touchcancel",Fe),bt(Y,"touchstart",Fe),yt(bt,V,"pointerdown,touchstart,mousedown",De),yt(bt,V,"pointerup,touchend,mouseup",Oe),K.kill(),qe(bt);for(var n=0;n<b.length;n+=3)wt(bt,b[n],b[n+1]),wt(bt,b[n],b[n+2])},e.enable=function(){if(q=window,V=document,W=V.documentElement,Y=V.body,G&&($=G.utils.toArray,J=G.utils.clamp,me=G.core.context||Fe,le=G.core.suppressOverwrites||Fe,ve=q.history.scrollRestoration||"auto",Wt=q.pageYOffset,G.core.globals("ScrollTrigger",e),Y)){Le=1,(ge=document.createElement("div")).style.height="100vh",ge.style.position="absolute",Ht(),Ie(),z.register(G),e.isTouch=z.isTouch,fe=z.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),he=1===z.isTouch,_t(q,"wheel",Rt),X=[q,V,W,Y],G.matchMedia?(e.matchMedia=function(e){var t,n=G.matchMedia();for(t in e)n.add(t,e[t]);return n},G.addEventListener("matchMediaInit",(function(){return Ut()})),G.addEventListener("matchMediaRevert",(function(){return Bt()})),G.addEventListener("matchMedia",(function(){Vt(0,1),Nt("matchMedia")})),G.matchMedia("(orientation: portrait)",(function(){return Pt(),Pt}))):console.warn("Requires GSAP 3.11.0 or later"),Pt(),_t(V,"scroll",Rt);var t,n,r=Y.style,i=r.borderTopStyle,o=G.core.Animation.prototype;for(o.revert||Object.defineProperty(o,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",t=ft(Y),I.m=Math.round(t.top+I.sc())||0,P.m=Math.round(t.left+P.sc())||0,i?r.borderTopStyle=i:r.removeProperty("border-top-style"),Q=setInterval(Lt,250),G.delayedCall(.5,(function(){return Te=0})),_t(V,"touchcancel",Fe),_t(Y,"touchstart",Fe),yt(_t,V,"pointerdown,touchstart,mousedown",De),yt(_t,V,"pointerup,touchend,mouseup",Oe),ne=G.utils.checkPrefix("transform"),$t.push(ne),H=Ae(),K=G.delayedCall(.2,Vt).pause(),ae=[V,"visibilitychange",function(){var e=q.innerWidth,t=q.innerHeight;V.hidden?(ie=e,oe=t):ie===e&&oe===t||It()},V,"DOMContentLoaded",Vt,q,"load",Vt,q,"resize",It],qe(_t),Ct.forEach((function(e){return e.enable(0,1)})),n=0;n<b.length;n+=3)wt(bt,b[n],b[n+1]),wt(bt,b[n],b[n+2])}},e.config=function(t){"limitCallbacks"in t&&(we=!!t.limitCallbacks);var n=t.syncInterval;n&&clearInterval(Q)||(Q=n)&&setInterval(Lt,n),"ignoreMobileResize"in t&&(he=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(qe(bt)||qe(_t,t.autoRefreshEvents||"none"),ce=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var n=D(e),r=b.indexOf(n),i=Ue(n);~r&&b.splice(r,i?6:2),t&&(i?w.unshift(q,t,Y,t,W,t):w.unshift(n,t))},e.clearMatchMedia=function(e){Ct.forEach((function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)}))},e.isInViewport=function(e,t,n){var r=(Ve(e)?D(e):e).getBoundingClientRect(),i=r[n?tt:nt]*t||0;return n?r.right-i>0&&r.left+i<q.innerWidth:r.bottom-i>0&&r.top+i<q.innerHeight},e.positionInViewport=function(e,t,n){Ve(e)&&(e=D(e));var r=e.getBoundingClientRect(),i=r[n?tt:nt],o=null==t?i/2:t in Et?Et[t]*i:~t.indexOf("%")?parseFloat(t)*i/100:parseFloat(t)||0;return n?(r.left+o)/q.innerWidth:(r.top+o)/q.innerHeight},e.killAll=function(e){if(Ct.slice(0).forEach((function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()})),!0!==e){var t=Dt.killAll||[];Dt={},t.forEach((function(e){return e()}))}},e}();cn.version="3.12.5",cn.saveStyles=function(e){return e?$(e).forEach((function(e){if(e&&e.style){var t=jt.indexOf(e);t>=0&&jt.splice(t,5),jt.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),G.core.getCache(e),me())}})):jt},cn.revert=function(e,t){return Ut(!e,t)},cn.create=function(e,t){return new cn(e,t)},cn.refresh=function(e){return e?It():(H||cn.register())&&Vt(!0)},cn.update=function(e){return++b.cache&&Xt(!0===e?2:0)},cn.clearScrollMemory=zt,cn.maxScroll=function(e,t){return He(e,t?P:I)},cn.getScrollFunc=function(e,t){return O(D(e),t?P:I)},cn.getById=function(e){return Mt[e]},cn.getAll=function(){return Ct.filter((function(e){return"ScrollSmoother"!==e.vars.id}))},cn.isScrolling=function(){return!!Me},cn.snapDirectional=gt,cn.addEventListener=function(e,t){var n=Dt[e]||(Dt[e]=[]);~n.indexOf(t)||n.push(t)},cn.removeEventListener=function(e,t){var n=Dt[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},cn.batch=function(e,t){var n,r=[],i={},o=t.interval||.016,a=t.batchMax||1e9,s=function(e,t){var n=[],r=[],i=G.delayedCall(o,(function(){t(n,r),n=[],r=[]})).pause();return function(e){n.length||i.restart(!0),n.push(e.trigger),r.push(e),a<=n.length&&i.progress(1)}};for(n in t)i[n]="on"===n.substr(0,2)&&We(t[n])&&"onRefreshInit"!==n?s(0,t[n]):t[n];return We(a)&&(a=a(),_t(cn,"refresh",(function(){return a=t.batchMax()}))),$(e).forEach((function(e){var t={};for(n in i)t[n]=i[n];t.trigger=e,r.push(cn.create(t))})),r};var un,hn=function(e,t,n,r){return t>r?e(r):t<0&&e(0),n>r?(r-t)/(n-t):n<0?t/(t-n):1},dn=function e(t,n){!0===n?t.style.removeProperty("touch-action"):t.style.touchAction=!0===n?"auto":n?"pan-"+n+(z.isTouch?" pinch-zoom":""):"none",t===W&&e(Y,n)},pn={auto:1,scroll:1},fn=function(e){var t,n=e.event,r=e.target,i=e.axis,o=(n.changedTouches?n.changedTouches[0]:n).target,a=o._gsap||G.core.getCache(o),s=Ae();if(!a._isScrollT||s-a._isScrollT>2e3){for(;o&&o!==Y&&(o.scrollHeight<=o.clientHeight&&o.scrollWidth<=o.clientWidth||!pn[(t=dt(o)).overflowY]&&!pn[t.overflowX]);)o=o.parentNode;a._isScroll=o&&o!==r&&!Ue(o)&&(pn[(t=dt(o)).overflowY]||pn[t.overflowX]),a._isScrollT=s}(a._isScroll||"x"===i)&&(n.stopPropagation(),n._gsapAllow=!0)},mn=function(e,t,n,r){return z.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:r=r&&fn,onPress:r,onDrag:r,onScroll:r,onEnable:function(){return n&&_t(V,z.eventTypes[0],gn,!1,!0)},onDisable:function(){return bt(V,z.eventTypes[0],gn,!0)}})},vn=/(input|label|select|textarea)/i,gn=function(e){var t=vn.test(e.target.tagName);(t||un)&&(e._gsapAllow=!0,un=t)};cn.sort=function(e){return Ct.sort(e||function(e,t){return-1e6*(e.vars.refreshPriority||0)+e.start-(t.start+-1e6*(t.vars.refreshPriority||0))})},cn.observe=function(e){return new z(e)},cn.normalizeScroll=function(e){if(void 0===e)return ue;if(!0===e&&ue)return ue.enable();if(!1===e)return ue&&ue.kill(),void(ue=e);var t=e instanceof z?e:function(e){Xe(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,n,r,i,o,a,s,l,c=e,u=c.normalizeScrollX,h=c.momentum,d=c.allowNestedScroll,p=c.onRelease,f=D(e.target)||W,m=G.core.globals().ScrollSmoother,v=m&&m.get(),g=fe&&(e.content&&D(e.content)||v&&!1!==e.content&&!v.smooth()&&v.content()),y=O(f,I),_=O(f,P),w=1,x=(z.isTouch&&q.visualViewport?q.visualViewport.scale*q.visualViewport.width:q.outerWidth)/q.innerWidth,S=0,E=We(h)?function(){return h(t)}:function(){return h||2.8},k=mn(f,e.type,!0,d),T=function(){return i=!1},A=Fe,C=Fe,M=function(){n=He(f,I),C=J(fe?1:0,n),u&&(A=J(0,He(f,P))),r=Gt},L=function(){g._gsap.y=Ne(parseFloat(g._gsap.y)+y.offset)+"px",g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(g._gsap.y)+", 0, 1)",y.offset=y.cacheID=0},R=function(){M(),o.isActive()&&o.vars.scrollY>n&&(y()>n?o.progress(1)&&y(n):o.resetTo("scrollY",n))};return g&&G.set(g,{y:"+=0"}),e.ignoreCheck=function(e){return fe&&"touchmove"===e.type&&function(){if(i){requestAnimationFrame(T);var e=Ne(t.deltaY/2),n=C(y.v-e);if(g&&n!==y.v+y.offset){y.offset=n-y.v;var r=Ne((parseFloat(g&&g._gsap.y)||0)-y.offset);g.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+r+", 0, 1)",g._gsap.y=r+"px",y.cacheID=b.cache,Xt()}return!0}y.offset&&L(),i=!0}()||w>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){i=!1;var e=w;w=Ne((q.visualViewport&&q.visualViewport.scale||1)/x),o.pause(),e!==w&&dn(f,w>1.01||!u&&"x"),a=_(),s=y(),M(),r=Gt},e.onRelease=e.onGestureStart=function(e,t){if(y.offset&&L(),t){b.cache++;var r,i,a=E();u&&(i=(r=_())+.05*a*-e.velocityX/.227,a*=hn(_,r,i,He(f,P)),o.vars.scrollX=A(i)),i=(r=y())+.05*a*-e.velocityY/.227,a*=hn(y,r,i,He(f,I)),o.vars.scrollY=C(i),o.invalidate().duration(a).play(.01),(fe&&o.vars.scrollY>=n||r>=n-1)&&G.to({},{onUpdate:R,duration:a})}else l.restart(!0);p&&p(e)},e.onWheel=function(){o._ts&&o.pause(),Ae()-S>1e3&&(r=0,S=Ae())},e.onChange=function(e,t,n,i,o){if(Gt!==r&&M(),t&&u&&_(A(i[2]===t?a+(e.startX-e.x):_()+t-i[1])),n){y.offset&&L();var l=o[2]===n,c=l?s+e.startY-e.y:y()+n-o[1],h=C(c);l&&c!==h&&(s+=h-c),y(h)}(n||t)&&Xt()},e.onEnable=function(){dn(f,!u&&"x"),cn.addEventListener("refresh",R),_t(q,"resize",R),y.smooth&&(y.target.style.scrollBehavior="auto",y.smooth=_.smooth=!1),k.enable()},e.onDisable=function(){dn(f,!0),bt(q,"resize",R),cn.removeEventListener("refresh",R),k.kill()},e.lockAxis=!1!==e.lockAxis,(t=new z(e)).iOS=fe,fe&&!y()&&y(1),fe&&G.ticker.add(Fe),l=t._dc,o=G.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:u?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:an(y,y(),(function(){return o.pause()}))},onUpdate:Xt,onComplete:l.vars.onComplete}),t}(e);return ue&&ue.target===t.target&&ue.kill(),Ue(t.target)&&(ue=t),t},cn.core={_getVelocityProp:F,_inputObserver:mn,_scrollers:b,_proxies:w,bridge:{ss:function(){Me||Nt("scrollStart"),Me=Ae()},ref:function(){return ee}}},Be()&&G.registerPlugin(cn)},1716:function(e,t){!function(e){"use strict";var t,n,r,i,o,a,s,l,c=function(){return"undefined"!=typeof window},u=function(){return t||c()&&(t=window.gsap)&&t.registerPlugin&&t},h=function(e){return"string"==typeof e},d=function(e){return"function"==typeof e},p=function(e,t){var n="x"===t?"Width":"Height",a="scroll"+n,s="client"+n;return e===r||e===i||e===o?Math.max(i[a],o[a])-(r["inner"+n]||i[s]||o[s]):e[a]-e["offset"+n]},f=function(e,t){var n="scroll"+("x"===t?"Left":"Top");return e===r&&(null!=e.pageXOffset?n="page"+t.toUpperCase()+"Offset":e=null!=i[n]?i:o),function(){return e[n]}},m=function(e,t){if(!(e=a(e)[0])||!e.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var n=e.getBoundingClientRect(),s=!t||t===r||t===o,l=s?{top:i.clientTop-(r.pageYOffset||i.scrollTop||o.scrollTop||0),left:i.clientLeft-(r.pageXOffset||i.scrollLeft||o.scrollLeft||0)}:t.getBoundingClientRect(),c={x:n.left-l.left,y:n.top-l.top};return!s&&t&&(c.x+=f(t,"x")(),c.y+=f(t,"y")()),c},v=function(e,t,n,r,i){return isNaN(e)||"object"==typeof e?h(e)&&"="===e.charAt(1)?parseFloat(e.substr(2))*("-"===e.charAt(0)?-1:1)+r-i:"max"===e?p(t,n)-i:Math.min(p(t,n),m(e,t)[n]-i):parseFloat(e)-i},g=function(){t=u(),c()&&t&&"undefined"!=typeof document&&document.body&&(r=window,o=document.body,i=document.documentElement,a=t.utils.toArray,t.config({autoKillThreshold:7}),s=t.config(),n=1)},y={version:"3.12.5",name:"scrollTo",rawVars:1,register:function(e){t=e,g()},init:function(e,i,o,a,s){n||g();var c=this,u=t.getProperty(e,"scrollSnapType");c.isWin=e===r,c.target=e,c.tween=o,i=function(e,t,n,r){if(d(e)&&(e=e(t,n,r)),"object"!=typeof e)return h(e)&&"max"!==e&&"="!==e.charAt(1)?{x:e,y:e}:{y:e};if(e.nodeType)return{y:e,x:e};var i,o={};for(i in e)o[i]="onAutoKill"!==i&&d(e[i])?e[i](t,n,r):e[i];return o}(i,a,e,s),c.vars=i,c.autoKill=!!i.autoKill,c.getX=f(e,"x"),c.getY=f(e,"y"),c.x=c.xPrev=c.getX(),c.y=c.yPrev=c.getY(),l||(l=t.core.globals().ScrollTrigger),"smooth"===t.getProperty(e,"scrollBehavior")&&t.set(e,{scrollBehavior:"auto"}),u&&"none"!==u&&(c.snap=1,c.snapInline=e.style.scrollSnapType,e.style.scrollSnapType="none"),null!=i.x?(c.add(c,"x",c.x,v(i.x,e,"x",c.x,i.offsetX||0),a,s),c._props.push("scrollTo_x")):c.skipX=1,null!=i.y?(c.add(c,"y",c.y,v(i.y,e,"y",c.y,i.offsetY||0),a,s),c._props.push("scrollTo_y")):c.skipY=1},render:function(e,t){for(var n,i,o,a,c,u=t._pt,h=t.target,d=t.tween,f=t.autoKill,m=t.xPrev,v=t.yPrev,g=t.isWin,y=t.snap,_=t.snapInline;u;)u.r(e,u.d),u=u._next;n=g||!t.skipX?t.getX():m,o=(i=g||!t.skipY?t.getY():v)-v,a=n-m,c=s.autoKillThreshold,t.x<0&&(t.x=0),t.y<0&&(t.y=0),f&&(!t.skipX&&(a>c||a<-c)&&n<p(h,"x")&&(t.skipX=1),!t.skipY&&(o>c||o<-c)&&i<p(h,"y")&&(t.skipY=1),t.skipX&&t.skipY&&(d.kill(),t.vars.onAutoKill&&t.vars.onAutoKill.apply(d,t.vars.onAutoKillParams||[]))),g?r.scrollTo(t.skipX?n:t.x,t.skipY?i:t.y):(t.skipY||(h.scrollTop=t.y),t.skipX||(h.scrollLeft=t.x)),!y||1!==e&&0!==e||(i=h.scrollTop,n=h.scrollLeft,_?h.style.scrollSnapType=_:h.style.removeProperty("scroll-snap-type"),h.scrollTop=i+1,h.scrollLeft=n+1,h.scrollTop=i,h.scrollLeft=n),t.xPrev=t.x,t.yPrev=t.y,l&&l.update()},kill:function(e){var t="scrollTo"===e,n=this._props.indexOf(e);return(t||"scrollTo_x"===e)&&(this.skipX=1),(t||"scrollTo_y"===e)&&(this.skipY=1),n>-1&&this._props.splice(n,1),!this._props.length}};y.max=p,y.getOffset=m,y.buildGetter=f,u()&&t.registerPlugin(y),e.ScrollToPlugin=y,e.default=y,Object.defineProperty(e,"__esModule",{value:!0})}(t)},8607:(e,t,n)=>{"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{B0:()=>_e,Dx:()=>on,E_:()=>ge,FL:()=>Mn,J7:()=>fn,Ks:()=>W,OF:()=>O,St:()=>pn,Uc:()=>Tt,Vy:()=>ht,WG:()=>Ln,Y_:()=>Gt,Yz:()=>x,Zm:()=>Yt,a0:()=>fe,au:()=>At,dg:()=>Z,fA:()=>ve,l1:()=>ln,l_:()=>et,n:()=>me,n6:()=>Ut,oh:()=>Gt,os:()=>An,qA:()=>Et,uo:()=>Qt,vM:()=>q,vQ:()=>P,vX:()=>H,wU:()=>le,ys:()=>Cn});var o,a,s,l,c,u,h,d,p,f,m,v,g,y,_,b,w,x={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},S={duration:.5,overwrite:!1,delay:0},E=1e8,k=1e-8,T=2*Math.PI,A=T/4,C=0,M=Math.sqrt,L=Math.cos,R=Math.sin,P=function(e){return"string"==typeof e},I=function(e){return"function"==typeof e},D=function(e){return"number"==typeof e},O=function(e){return void 0===e},F=function(e){return"object"==typeof e},N=function(e){return!1!==e},j=function(){return"undefined"!=typeof window},B=function(e){return I(e)||P(e)},U="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},z=Array.isArray,G=/(?:-?\.?\d|\.)+/gi,H=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,q=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,V=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,W=/[+-]=-?[.\d]+/,Y=/[^,'"\[\]\s]+/gi,X=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,K={},$={},J=function(e){return($=Te(e,K))&&An},Z=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Q=function(e,t){return!t&&console.warn(e)},ee=function(e,t){return e&&(K[e]=t)&&$&&($[e]=t)||K},te=function(){return 0},ne={suppressEvents:!0,isStart:!0,kill:!1},re={suppressEvents:!0,kill:!1},ie={suppressEvents:!0},oe={},ae=[],se={},le={},ce={},ue=30,he=[],de="",pe=function(e){var t,n,r=e[0];if(F(r)||I(r)||(e=[e]),!(t=(r._gsap||{}).harness)){for(n=he.length;n--&&!he[n].targetTest(r););t=he[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Ut(e[n],t)))||e.splice(n,1);return e},fe=function(e){return e._gsap||pe(rt(e))[0]._gsap},me=function(e,t,n){return(n=e[t])&&I(n)?e[t]():O(n)&&e.getAttribute&&e.getAttribute(t)||n},ve=function(e,t){return(e=e.split(",")).forEach(t)||e},ge=function(e){return Math.round(1e5*e)/1e5||0},ye=function(e){return Math.round(1e7*e)/1e7||0},_e=function(e,t){var n=t.charAt(0),r=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+r:"-"===n?e-r:"*"===n?e*r:e/r},be=function(e,t){for(var n=t.length,r=0;e.indexOf(t[r])<0&&++r<n;);return r<n},we=function(){var e,t,n=ae.length,r=ae.slice(0);for(se={},ae.length=0,e=0;e<n;e++)(t=r[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},xe=function(e,t,n,r){ae.length&&!a&&we(),e.render(t,n,r||a&&t<0&&(e._initted||e._startAt)),ae.length&&!a&&we()},Se=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Y).length<2?t:P(e)?e.trim():e},Ee=function(e){return e},ke=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},Te=function(e,t){for(var n in t)e[n]=t[n];return e},Ae=function e(t,n){for(var r in n)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(t[r]=F(n[r])?e(t[r]||(t[r]={}),n[r]):n[r]);return t},Ce=function(e,t){var n,r={};for(n in e)n in t||(r[n]=e[n]);return r},Me=function(e){var t,n=e.parent||l,r=e.keyframes?(t=z(e.keyframes),function(e,n){for(var r in n)r in e||"duration"===r&&t||"ease"===r||(e[r]=n[r])}):ke;if(N(e.inherit))for(;n;)r(e,n.vars.defaults),n=n.parent||n._dp;return e},Le=function(e,t,n,r,i){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o,a=e[r];if(i)for(o=t[i];a&&a[i]>o;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[r]=t,t._prev=a,t.parent=t._dp=e,t},Re=function(e,t,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var i=t._prev,o=t._next;i?i._next=o:e[n]===t&&(e[n]=o),o?o._prev=i:e[r]===t&&(e[r]=i),t._next=t._prev=t.parent=null},Pe=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},Ie=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},De=function(e,t,n,r){return e._startAt&&(a?e._startAt.revert(re):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,r))},Oe=function e(t){return!t||t._ts&&e(t.parent)},Fe=function(e){return e._repeat?Ne(e._tTime,e=e.duration()+e._rDelay)*e:0},Ne=function(e,t){var n=Math.floor(e/=t);return e&&n===e?n-1:n},je=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Be=function(e){return e._end=ye(e._start+(e._tDur/Math.abs(e._ts||e._rts||k)||0))},Ue=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=ye(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Be(e),n._dirty||Ie(n,e)),e},ze=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=je(e.rawTime(),t),(!t._dur||Qe(0,t.totalDuration(),n)-t._tTime>k)&&t.render(n,!0)),Ie(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Ge=function(e,t,n,r){return t.parent&&Pe(t),t._start=ye((D(n)?n:n||e!==l?$e(e,n,t):e._time)+t._delay),t._end=ye(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),Le(e,t,"_first","_last",e._sort?"_start":0),We(t)||(e._recent=t),r||ze(e,t),e._ts<0&&Ue(e,e._tTime),e},He=function(e,t){return(K.ScrollTrigger||Z("scrollTrigger",t))&&K.ScrollTrigger.create(t,e)},qe=function(e,t,n,r,i){return Xt(e,t,i),e._initted?!n&&e._pt&&!a&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&p!==At.frame?(ae.push(e),e._lazy=[i,r],1):void 0:1},Ve=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},We=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Ye=function(e,t,n,r){var i=e._repeat,o=ye(t)||0,a=e._tTime/e._tDur;return a&&!r&&(e._time*=o/e._dur),e._dur=o,e._tDur=i?i<0?1e10:ye(o*(i+1)+e._rDelay*i):o,a>0&&!r&&Ue(e,e._tTime=e._tDur*a),e.parent&&Be(e),n||Ie(e.parent,e),e},Xe=function(e){return e instanceof Gt?Ie(e):Ye(e,e._dur)},Ke={_start:0,endTime:te,totalDuration:te},$e=function e(t,n,r){var i,o,a,s=t.labels,l=t._recent||Ke,c=t.duration()>=E?l.endTime(!1):t._dur;return P(n)&&(isNaN(n)||n in s)?(o=n.charAt(0),a="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(i<0?l:r).totalDuration()/100:1)):i<0?(n in s||(s[n]=c),s[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),a&&r&&(o=o/100*(z(r)?r[0]:r).totalDuration()),i>1?e(t,n.substr(0,i-1),r)+o:c+o)):null==n?c:+n},Je=function(e,t,n){var r,i,o=D(t[1]),a=(o?2:1)+(e<2?0:1),s=t[a];if(o&&(s.duration=t[1]),s.parent=n,e){for(r=s,i=n;i&&!("immediateRender"in r);)r=i.vars.defaults||{},i=N(i.vars.inherit)&&i.parent;s.immediateRender=N(r.immediateRender),e<2?s.runBackwards=1:s.startAt=t[a-1]}return new Qt(t[0],s,t[a+1])},Ze=function(e,t){return e||0===e?t(e):t},Qe=function(e,t,n){return n<e?e:n>t?t:n},et=function(e,t){return P(e)&&(t=X.exec(e))?t[1]:""},tt=[].slice,nt=function(e,t){return e&&F(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&F(e[0]))&&!e.nodeType&&e!==c},rt=function(e,t,n){return s&&!t&&s.selector?s.selector(e):!P(e)||n||!u&&Ct()?z(e)?function(e,t,n){return void 0===n&&(n=[]),e.forEach((function(e){var r;return P(e)&&!t||nt(e,1)?(r=n).push.apply(r,rt(e)):n.push(e)}))||n}(e,n):nt(e)?tt.call(e,0):e?[e]:[]:tt.call((t||h).querySelectorAll(e),0)},it=function(e){return e=rt(e)[0]||Q("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return rt(t,n.querySelectorAll?n:n===e?Q("Invalid scope")||h.createElement("div"):e)}},ot=function(e){return e.sort((function(){return.5-Math.random()}))},at=function(e){if(I(e))return e;var t=F(e)?e:{each:e},n=Ot(t.ease),r=t.from||0,i=parseFloat(t.base)||0,o={},a=r>0&&r<1,s=isNaN(r)||a,l=t.axis,c=r,u=r;return P(r)?c=u={center:.5,edges:.5,end:1}[r]||0:!a&&s&&(c=r[0],u=r[1]),function(e,a,h){var d,p,f,m,v,g,y,_,b,w=(h||t).length,x=o[w];if(!x){if(!(b="auto"===t.grid?0:(t.grid||[1,E])[1])){for(y=-E;y<(y=h[b++].getBoundingClientRect().left)&&b<w;);b<w&&b--}for(x=o[w]=[],d=s?Math.min(b,w)*c-.5:r%b,p=b===E?0:s?w*u/b-.5:r/b|0,y=0,_=E,g=0;g<w;g++)f=g%b-d,m=p-(g/b|0),x[g]=v=l?Math.abs("y"===l?m:f):M(f*f+m*m),v>y&&(y=v),v<_&&(_=v);"random"===r&&ot(x),x.max=y-_,x.min=_,x.v=w=(parseFloat(t.amount)||parseFloat(t.each)*(b>w?w-1:l?"y"===l?w/b:b:Math.max(b,w/b))||0)*("edges"===r?-1:1),x.b=w<0?i-w:i,x.u=et(t.amount||t.each)||0,n=n&&w<0?It(n):n}return w=(x[e]-x.min)/x.max||0,ye(x.b+(n?n(w):w)*x.v)+x.u}},st=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var r=ye(Math.round(parseFloat(n)/e)*e*t);return(r-r%1)/t+(D(n)?0:et(n))}},lt=function(e,t){var n,r,i=z(e);return!i&&F(e)&&(n=i=e.radius||E,e.values?(e=rt(e.values),(r=!D(e[0]))&&(n*=n)):e=st(e.increment)),Ze(t,i?I(e)?function(t){return r=e(t),Math.abs(r-t)<=n?r:t}:function(t){for(var i,o,a=parseFloat(r?t.x:t),s=parseFloat(r?t.y:0),l=E,c=0,u=e.length;u--;)(i=r?(i=e[u].x-a)*i+(o=e[u].y-s)*o:Math.abs(e[u]-a))<l&&(l=i,c=u);return c=!n||l<=n?e[c]:t,r||c===t||D(t)?c:c+et(t)}:st(e))},ct=function(e,t,n,r){return Ze(z(e)?!t:!0===n?!!(n=0):!r,(function(){return z(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*r)/r}))},ut=function(e,t,n){return Ze(n,(function(n){return e[~~t(n)]}))},ht=function(e){for(var t,n,r,i,o=0,a="";~(t=e.indexOf("random(",o));)r=e.indexOf(")",t),i="["===e.charAt(t+7),n=e.substr(t+7,r-t-7).match(i?Y:G),a+=e.substr(o,t-o)+ct(i?n:+n[0],i?0:+n[1],+n[2]||1e-5),o=r+1;return a+e.substr(o,e.length-o)},dt=function(e,t,n,r,i){var o=t-e,a=r-n;return Ze(i,(function(t){return n+((t-e)/o*a||0)}))},pt=function(e,t,n){var r,i,o,a=e.labels,s=E;for(r in a)(i=a[r]-t)<0==!!n&&i&&s>(i=Math.abs(i))&&(o=r,s=i);return o},ft=function(e,t,n){var r,i,o,a=e.vars,l=a[t],c=s,u=e._ctx;if(l)return r=a[t+"Params"],i=a.callbackScope||e,n&&ae.length&&we(),u&&(s=u),o=r?l.apply(i,r):l.call(i),s=c,o},mt=function(e){return Pe(e),e.scrollTrigger&&e.scrollTrigger.kill(!!a),e.progress()<1&&ft(e,"onInterrupt"),e},vt=[],gt=function(e){if(e)if(e=!e.name&&e.default||e,j()||e.headless){var t=e.name,n=I(e),r=t&&!n&&e.init?function(){this._props=[]}:e,i={init:te,render:cn,add:Wt,kill:hn,modifier:un,rawVars:0},o={targetTest:0,get:0,getSetter:on,aliases:{},register:0};if(Ct(),e!==r){if(le[t])return;ke(r,ke(Ce(e,i),o)),Te(r.prototype,Te(i,Ce(e,o))),le[r.prop=t]=r,e.targetTest&&(he.push(r),oe[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ee(t,r),e.register&&e.register(An,r,fn)}else vt.push(e)},yt=255,_t={aqua:[0,yt,yt],lime:[0,yt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,yt],navy:[0,0,128],white:[yt,yt,yt],olive:[128,128,0],yellow:[yt,yt,0],orange:[yt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[yt,0,0],pink:[yt,192,203],cyan:[0,yt,yt],transparent:[yt,yt,yt,0]},bt=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*yt+.5|0},wt=function(e,t,n){var r,i,o,a,s,l,c,u,h,d,p=e?D(e)?[e>>16,e>>8&yt,e&yt]:0:_t.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),_t[e])p=_t[e];else if("#"===e.charAt(0)){if(e.length<6&&(r=e.charAt(1),i=e.charAt(2),o=e.charAt(3),e="#"+r+r+i+i+o+o+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&yt,p&yt,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&yt,e&yt]}else if("hsl"===e.substr(0,3))if(p=d=e.match(G),t){if(~e.indexOf("="))return p=e.match(H),n&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,s=+p[1]/100,r=2*(l=+p[2]/100)-(i=l<=.5?l*(s+1):l+s-l*s),p.length>3&&(p[3]*=1),p[0]=bt(a+1/3,r,i),p[1]=bt(a,r,i),p[2]=bt(a-1/3,r,i);else p=e.match(G)||_t.transparent;p=p.map(Number)}return t&&!d&&(r=p[0]/yt,i=p[1]/yt,o=p[2]/yt,l=((c=Math.max(r,i,o))+(u=Math.min(r,i,o)))/2,c===u?a=s=0:(h=c-u,s=l>.5?h/(2-c-u):h/(c+u),a=c===r?(i-o)/h+(i<o?6:0):c===i?(o-r)/h+2:(r-i)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*s+.5),p[2]=~~(100*l+.5)),n&&p.length<4&&(p[3]=1),p},xt=function(e){var t=[],n=[],r=-1;return e.split(Et).forEach((function(e){var i=e.match(q)||[];t.push.apply(t,i),n.push(r+=i.length+1)})),t.c=n,t},St=function(e,t,n){var r,i,o,a,s="",l=(e+s).match(Et),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map((function(e){return(e=wt(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),n&&(o=xt(e),(r=n.c).join(s)!==o.c.join(s)))for(a=(i=e.replace(Et,"1").split(q)).length-1;u<a;u++)s+=i[u]+(~r.indexOf(u)?l.shift()||c+"0,0,0,0)":(o.length?o:l.length?l:n).shift());if(!i)for(a=(i=e.split(Et)).length-1;u<a;u++)s+=i[u]+l[u];return s+i[a]},Et=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in _t)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),kt=/hsl[a]?\(/,Tt=function(e){var t,n=e.join(" ");if(Et.lastIndex=0,Et.test(n))return t=kt.test(n),e[1]=St(e[1],t),e[0]=St(e[0],t,xt(e[1])),!0},At=function(){var e,t,n,r,i,o,a=Date.now,s=500,l=33,p=a(),f=p,v=1e3/240,g=v,y=[],_=function n(c){var u,h,d,m,_=a()-f,b=!0===c;if((_>s||_<0)&&(p+=_-l),((u=(d=(f+=_)-p)-g)>0||b)&&(m=++r.frame,i=d-1e3*r.time,r.time=d/=1e3,g+=u+(u>=v?4:v-u),h=1),b||(e=t(n)),h)for(o=0;o<y.length;o++)y[o](d,i,m,c)};return r={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(e){return i/(1e3/(e||60))},wake:function(){d&&(!u&&j()&&(c=u=window,h=c.document||{},K.gsap=An,(c.gsapVersions||(c.gsapVersions=[])).push(An.version),J($||c.GreenSockGlobals||!c.gsap&&c||{}),vt.forEach(gt)),n="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,e&&r.sleep(),t=n||function(e){return setTimeout(e,g-1e3*r.time+1|0)},m=1,_(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(e),m=0,t=te},lagSmoothing:function(e,t){s=e||1/0,l=Math.min(t||33,s)},fps:function(e){v=1e3/(e||240),g=1e3*r.time+v},add:function(e,t,n){var i=t?function(t,n,o,a){e(t,n,o,a),r.remove(i)}:e;return r.remove(e),y[n?"unshift":"push"](i),Ct(),i},remove:function(e,t){~(t=y.indexOf(e))&&y.splice(t,1)&&o>=t&&o--},_listeners:y}}(),Ct=function(){return!m&&At.wake()},Mt={},Lt=/^[\d.\-M][\d.\-,\s]/,Rt=/["']/g,Pt=function(e){for(var t,n,r,i={},o=e.substr(1,e.length-3).split(":"),a=o[0],s=1,l=o.length;s<l;s++)n=o[s],t=s!==l-1?n.lastIndexOf(","):n.length,r=n.substr(0,t),i[a]=isNaN(r)?r.replace(Rt,"").trim():+r,a=n.substr(t+1).trim();return i},It=function(e){return function(t){return 1-e(1-t)}},Dt=function e(t,n){for(var r,i=t._first;i;)i instanceof Gt?e(i,n):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===n||(i.timeline?e(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},Ot=function(e,t){return e&&(I(e)?e:Mt[e]||function(e){var t,n,r,i,o=(e+"").split("("),a=Mt[o[0]];return a&&o.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[Pt(o[1])]:(t=e,n=t.indexOf("(")+1,r=t.indexOf(")"),i=t.indexOf("(",n),t.substring(n,~i&&i<r?t.indexOf(")",r+1):r)).split(",").map(Se)):Mt._CE&&Lt.test(e)?Mt._CE("",e):a}(e))||t},Ft=function(e,t,n,r){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===r&&(r=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,o={easeIn:t,easeOut:n,easeInOut:r};return ve(e,(function(e){for(var t in Mt[e]=K[e]=o,Mt[i=e.toLowerCase()]=n,o)Mt[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=Mt[e+"."+t]=o[t]})),o},Nt=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},jt=function e(t,n,r){var i=n>=1?n:1,o=(r||(t?.3:.45))/(n<1?n:1),a=o/T*(Math.asin(1/i)||0),s=function(e){return 1===e?1:i*Math.pow(2,-10*e)*R((e-a)*o)+1},l="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:Nt(s);return o=T/o,l.config=function(n,r){return e(t,n,r)},l},Bt=function e(t,n){void 0===n&&(n=1.70158);var r=function(e){return e?--e*e*((n+1)*e+n)+1:0},i="out"===t?r:"in"===t?function(e){return 1-r(1-e)}:Nt(r);return i.config=function(n){return e(t,n)},i};ve("Linear,Quad,Cubic,Quart,Quint,Strong",(function(e,t){var n=t<5?t+1:t;Ft(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},(function(e){return 1-Math.pow(1-e,n)}),(function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2}))})),Mt.Linear.easeNone=Mt.none=Mt.Linear.easeIn,Ft("Elastic",jt("in"),jt("out"),jt()),v=7.5625,_=2*(y=1/(g=2.75)),b=2.5*y,Ft("Bounce",(function(e){return 1-w(1-e)}),w=function(e){return e<y?v*e*e:e<_?v*Math.pow(e-1.5/g,2)+.75:e<b?v*(e-=2.25/g)*e+.9375:v*Math.pow(e-2.625/g,2)+.984375}),Ft("Expo",(function(e){return e?Math.pow(2,10*(e-1)):0})),Ft("Circ",(function(e){return-(M(1-e*e)-1)})),Ft("Sine",(function(e){return 1===e?1:1-L(e*A)})),Ft("Back",Bt("in"),Bt("out"),Bt()),Mt.SteppedEase=Mt.steps=K.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,r=e+(t?0:1),i=t?1:0;return function(e){return((r*Qe(0,.99999999,e)|0)+i)*n}}},S.ease=Mt["quad.out"],ve("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(e){return de+=e+","+e+"Params,"}));var Ut=function(e,t){this.id=C++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:me,this.set=t?t.getSetter:on},zt=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Ye(this,+e.duration,1,1),this.data=e.data,s&&(this._ctx=s,s.data.push(this)),m||At.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Ye(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(Ct(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Ue(this,e),!n._dp||n.parent||ze(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Ge(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===k||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),xe(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+Fe(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+Fe(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?Ne(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?je(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(Qe(-Math.abs(this._delay),this._tDur,n),!1!==t),Be(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ct(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==k&&(this._tTime-=k)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ge(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(N(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?je(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=ie);var t=a;return a=e,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),a=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Xe(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Xe(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime($e(this,e),N(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,N(t))},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-k))},t.eventCallback=function(e,t,n){var r=this.vars;return arguments.length>1?(t?(r[e]=t,n&&(r[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete r[e],this):r[e]},t.then=function(e){var t=this;return new Promise((function(n){var r=I(e)?e:Ee,i=function(){var e=t.then;t.then=null,I(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i}))},t.kill=function(){mt(this)},e}();ke(zt.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Gt=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=N(t.sortChildren),l&&Ge(t.parent||l,r(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&He(r(i),t.scrollTrigger),i}i(t,e);var n=t.prototype;return n.to=function(e,t,n){return Je(0,arguments,this),this},n.from=function(e,t,n){return Je(1,arguments,this),this},n.fromTo=function(e,t,n,r){return Je(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,Me(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Qt(e,t,$e(this,n),1),this},n.call=function(e,t,n){return Ge(this,Qt.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,r,i,o,a){return n.duration=t,n.stagger=n.stagger||r,n.onComplete=o,n.onCompleteParams=a,n.parent=this,new Qt(e,n,$e(this,i)),this},n.staggerFrom=function(e,t,n,r,i,o,a){return n.runBackwards=1,Me(n).immediateRender=N(n.immediateRender),this.staggerTo(e,t,n,r,i,o,a)},n.staggerFromTo=function(e,t,n,r,i,o,a,s){return r.startAt=n,Me(r).immediateRender=N(r.immediateRender),this.staggerTo(e,t,r,i,o,a,s)},n.render=function(e,t,n){var r,i,o,s,c,u,h,d,p,f,m,v,g=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,b=e<=0?0:ye(e),w=this._zTime<0!=e<0&&(this._initted||!_);if(this!==l&&b>y&&e>=0&&(b=y),b!==this._tTime||n||w){if(g!==this._time&&_&&(b+=this._time-g,e+=this._time-g),r=b,p=this._start,u=!(d=this._ts),w&&(_||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(m=this._yoyo,c=_+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*c+e,t,n);if(r=ye(b%c),b===y?(s=this._repeat,r=_):((s=~~(b/c))&&s===b/c&&(r=_,s--),r>_&&(r=_)),f=Ne(this._tTime,c),!g&&this._tTime&&f!==s&&this._tTime-f*c-this._dur<=0&&(f=s),m&&1&s&&(r=_-r,v=1),s!==f&&!this._lock){var x=m&&1&f,S=x===(m&&1&s);if(s<f&&(x=!x),g=x?0:b%_?_:b,this._lock=1,this.render(g||(v?0:ye(s*c)),t,!_)._lock=0,this._tTime=b,!t&&this.parent&&ft(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),g&&g!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(_=this._dur,y=this._tDur,S&&(this._lock=2,g=x?_:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;Dt(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(e,t,n){var r;if(n>t)for(r=e._first;r&&r._start<=n;){if("isPause"===r.data&&r._start>t)return r;r=r._next}else for(r=e._last;r&&r._start>=n;){if("isPause"===r.data&&r._start<t)return r;r=r._prev}}(this,ye(g),ye(r)),h&&(b-=r-(r=h._start))),this._tTime=b,this._time=r,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&r&&!t&&!s&&(ft(this,"onStart"),this._tTime!==b))return this;if(r>=g&&e>=0)for(i=this._first;i;){if(o=i._next,(i._act||r>=i._start)&&i._ts&&h!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(r-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(r-i._start)*i._ts,t,n),r!==this._time||!this._ts&&!u){h=0,o&&(b+=this._zTime=-1e-8);break}}i=o}else{i=this._last;for(var E=e<0?e:r;i;){if(o=i._prev,(i._act||E<=i._end)&&i._ts&&h!==i){if(i.parent!==this)return this.render(e,t,n);if(i.render(i._ts>0?(E-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(E-i._start)*i._ts,t,n||a&&(i._initted||i._startAt)),r!==this._time||!this._ts&&!u){h=0,o&&(b+=this._zTime=E?-1e-8:k);break}}i=o}}if(h&&!t&&(this.pause(),h.render(r>=g?0:-1e-8)._zTime=r>=g?1:-1,this._ts))return this._start=p,Be(this),this.render(e,t,n);this._onUpdate&&!t&&ft(this,"onUpdate",!0),(b===y&&this._tTime>=this.totalDuration()||!b&&g)&&(p!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!_)&&(b===y&&this._ts>0||!b&&this._ts<0)&&Pe(this,1),t||e<0&&!g||!b&&!g&&y||(ft(this,b===y&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(b<y&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(D(t)||(t=$e(this,t,e)),!(e instanceof zt)){if(z(e))return e.forEach((function(e){return n.add(e,t)})),this;if(P(e))return this.addLabel(e,t);if(!I(e))return this;e=Qt.delayedCall(0,e)}return this!==e?Ge(this,e,t):this},n.getChildren=function(e,t,n,r){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=-E);for(var i=[],o=this._first;o;)o._start>=r&&(o instanceof Qt?t&&i.push(o):(n&&i.push(o),e&&i.push.apply(i,o.getChildren(!0,t,n)))),o=o._next;return i},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return P(e)?this.removeLabel(e):I(e)?this.killTweensOf(e):(Re(this,e),e===this._recent&&(this._recent=this._last),Ie(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ye(At.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=$e(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var r=Qt.delayedCall(0,t||te,n);return r.data="isPause",this._hasPause=1,Ge(this,r,$e(this,e))},n.removePause=function(e){var t=this._first;for(e=$e(this,e);t;)t._start===e&&"isPause"===t.data&&Pe(t),t=t._next},n.killTweensOf=function(e,t,n){for(var r=this.getTweensOf(e,n),i=r.length;i--;)Ht!==r[i]&&r[i].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,r=[],i=rt(e),o=this._first,a=D(t);o;)o instanceof Qt?be(o._targets,i)&&(a?(!Ht||o._initted&&o._ts)&&o.globalTime(0)<=t&&o.globalTime(o.totalDuration())>t:!t||o.isActive())&&r.push(o):(n=o.getTweensOf(i,t)).length&&r.push.apply(r,n),o=o._next;return r},n.tweenTo=function(e,t){t=t||{};var n,r=this,i=$e(r,e),o=t,a=o.startAt,s=o.onStart,l=o.onStartParams,c=o.immediateRender,u=Qt.to(r,ke({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale())||k,onStart:function(){if(r.pause(),!n){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:r._time))/r.timeScale());u._dur!==e&&Ye(u,e,0,1).render(u._time,!0,!0),n=1}s&&s.apply(u,l||[])}},t));return c?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,ke({startAt:{time:$e(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),pt(this,$e(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),pt(this,$e(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+k)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var r,i=this._first,o=this.labels;i;)i._start>=n&&(i._start+=e,i._end+=e),i=i._next;if(t)for(r in o)o[r]>=n&&(o[r]+=e);return Ie(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),Ie(this)},n.totalDuration=function(e){var t,n,r,i=0,o=this,a=o._last,s=E;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-e:e));if(o._dirty){for(r=o.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>s&&o._sort&&a._ts&&!o._lock?(o._lock=1,Ge(o,a,n-a._delay,1)._lock=0):s=n,n<0&&a._ts&&(i-=n,(!r&&!o._dp||r&&r.smoothChildTiming)&&(o._start+=n/o._ts,o._time-=n,o._tTime-=n),o.shiftChildren(-n,!1,-Infinity),s=0),a._end>i&&a._ts&&(i=a._end),a=t;Ye(o,o===l&&o._time>i?o._time:i,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(e){if(l._ts&&(xe(l,je(e,l)),p=At.frame),At.frame>=ue){ue+=x.autoSleep||120;var t=l._first;if((!t||!t._ts)&&x.autoSleep&&At._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||At.sleep()}}},t}(zt);ke(Gt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ht,qt,Vt=function(e,t,n,r,i,o,a){var s,l,c,u,h,d,p,f,m=new fn(this._pt,e,t,0,1,ln,null,i),v=0,g=0;for(m.b=n,m.e=r,n+="",(p=~(r+="").indexOf("random("))&&(r=ht(r)),o&&(o(f=[n,r],e,t),n=f[0],r=f[1]),l=n.match(V)||[];s=V.exec(r);)u=s[0],h=r.substring(v,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[g++]&&(d=parseFloat(l[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:d,c:"="===u.charAt(1)?_e(d,u)-d:parseFloat(u)-d,m:c&&c<4?Math.round:0},v=V.lastIndex);return m.c=v<r.length?r.substring(v,r.length):"",m.fp=a,(W.test(r)||p)&&(m.e=0),this._pt=m,m},Wt=function(e,t,n,r,i,o,a,s,l,c){I(r)&&(r=r(i||0,e,o));var u,h=e[t],d="get"!==n?n:I(h)?l?e[t.indexOf("set")||!I(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,p=I(h)?l?nn:tn:en;if(P(r)&&(~r.indexOf("random(")&&(r=ht(r)),"="===r.charAt(1)&&((u=_e(d,r)+(et(d)||0))||0===u)&&(r=u)),!c||d!==r||qt)return isNaN(d*r)||""===r?(!h&&!(t in e)&&Z(t,r),Vt.call(this,e,t,d,r,p,s||x.stringFilter,l)):(u=new fn(this._pt,e,t,+d||0,r-(d||0),"boolean"==typeof h?sn:an,0,p),l&&(u.fp=l),a&&u.modifier(a,this,e),this._pt=u)},Yt=function(e,t,n,r,i,o){var a,s,l,c;if(le[e]&&!1!==(a=new le[e]).init(i,a.rawVars?t[e]:function(e,t,n,r,i){if(I(e)&&(e=$t(e,i,t,n,r)),!F(e)||e.style&&e.nodeType||z(e)||U(e))return P(e)?$t(e,i,t,n,r):e;var o,a={};for(o in e)a[o]=$t(e[o],i,t,n,r);return a}(t[e],r,i,o,n),n,r,o)&&(n._pt=s=new fn(n._pt,i,e,0,1,a.render,a,0,a.priority),n!==f))for(l=n._ptLookup[n._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=s;return a},Xt=function e(t,n,r){var i,s,c,u,h,d,p,f,m,v,g,y,_,b=t.vars,w=b.ease,x=b.startAt,T=b.immediateRender,A=b.lazy,C=b.onUpdate,M=b.runBackwards,L=b.yoyoEase,R=b.keyframes,P=b.autoRevert,I=t._dur,D=t._startAt,O=t._targets,F=t.parent,j=F&&"nested"===F.data?F.vars.targets:O,B="auto"===t._overwrite&&!o,U=t.timeline;if(U&&(!R||!w)&&(w="none"),t._ease=Ot(w,S.ease),t._yEase=L?It(Ot(!0===L?w:L,S.ease)):0,L&&t._yoyo&&!t._repeat&&(L=t._yEase,t._yEase=t._ease,t._ease=L),t._from=!U&&!!b.runBackwards,!U||R&&!b.stagger){if(y=(f=O[0]?fe(O[0]).harness:0)&&b[f.prop],i=Ce(b,oe),D&&(D._zTime<0&&D.progress(1),n<0&&M&&T&&!P?D.render(-1,!0):D.revert(M&&I?re:ne),D._lazy=0),x){if(Pe(t._startAt=Qt.set(O,ke({data:"isStart",overwrite:!1,parent:F,immediateRender:!0,lazy:!D&&N(A),startAt:null,delay:0,onUpdate:C&&function(){return ft(t,"onUpdate")},stagger:0},x))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(a||!T&&!P)&&t._startAt.revert(re),T&&I&&n<=0&&r<=0)return void(n&&(t._zTime=n))}else if(M&&I&&!D)if(n&&(T=!1),c=ke({overwrite:!1,data:"isFromStart",lazy:T&&!D&&N(A),immediateRender:T,stagger:0,parent:F},i),y&&(c[f.prop]=y),Pe(t._startAt=Qt.set(O,c)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(a?t._startAt.revert(re):t._startAt.render(-1,!0)),t._zTime=n,T){if(!n)return}else e(t._startAt,k,k);for(t._pt=t._ptCache=0,A=I&&N(A)||A&&!I,s=0;s<O.length;s++){if(p=(h=O[s])._gsap||pe(O)[s]._gsap,t._ptLookup[s]=v={},se[p.id]&&ae.length&&we(),g=j===O?s:j.indexOf(h),f&&!1!==(m=new f).init(h,y||i,t,g,j)&&(t._pt=u=new fn(t._pt,h,m.name,0,1,m.render,m,0,m.priority),m._props.forEach((function(e){v[e]=u})),m.priority&&(d=1)),!f||y)for(c in i)le[c]&&(m=Yt(c,i,t,g,h,j))?m.priority&&(d=1):v[c]=u=Wt.call(t,h,c,"get",i[c],g,j,0,b.stringFilter);t._op&&t._op[s]&&t.kill(h,t._op[s]),B&&t._pt&&(Ht=t,l.killTweensOf(h,v,t.globalTime(n)),_=!t.parent,Ht=0),t._pt&&A&&(se[p.id]=1)}d&&pn(t),t._onInit&&t._onInit(t)}t._onUpdate=C,t._initted=(!t._op||t._pt)&&!_,R&&n<=0&&U.render(E,!0,!0)},Kt=function(e,t,n,r){var i,o,a=t.ease||r||"power1.inOut";if(z(t))o=n[e]||(n[e]=[]),t.forEach((function(e,n){return o.push({t:n/(t.length-1)*100,v:e,e:a})}));else for(i in t)o=n[i]||(n[i]=[]),"ease"===i||o.push({t:parseFloat(e),v:t[i],e:a})},$t=function(e,t,n,r,i){return I(e)?e.call(t,n,r,i):P(e)&&~e.indexOf("random(")?ht(e):e},Jt=de+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Zt={};ve(Jt+",id,stagger,delay,duration,paused,scrollTrigger",(function(e){return Zt[e]=1}));var Qt=function(e){function t(t,n,i,a){var s;"number"==typeof n&&(i.duration=n,n=i,i=null);var c,u,h,d,p,f,m,v,g=(s=e.call(this,a?n:Me(n))||this).vars,y=g.duration,_=g.delay,b=g.immediateRender,w=g.stagger,S=g.overwrite,E=g.keyframes,k=g.defaults,T=g.scrollTrigger,A=g.yoyoEase,C=n.parent||l,M=(z(t)||U(t)?D(t[0]):"length"in n)?[t]:rt(t);if(s._targets=M.length?pe(M):Q("GSAP target "+t+" not found. https://gsap.com",!x.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=S,E||w||B(y)||B(_)){if(n=s.vars,(c=s.timeline=new Gt({data:"nested",defaults:k||{},targets:C&&"nested"===C.data?C.vars.targets:M})).kill(),c.parent=c._dp=r(s),c._start=0,w||B(y)||B(_)){if(d=M.length,m=w&&at(w),F(w))for(p in w)~Jt.indexOf(p)&&(v||(v={}),v[p]=w[p]);for(u=0;u<d;u++)(h=Ce(n,Zt)).stagger=0,A&&(h.yoyoEase=A),v&&Te(h,v),f=M[u],h.duration=+$t(y,r(s),u,f,M),h.delay=(+$t(_,r(s),u,f,M)||0)-s._delay,!w&&1===d&&h.delay&&(s._delay=_=h.delay,s._start+=_,h.delay=0),c.to(f,h,m?m(u,f,M):0),c._ease=Mt.none;c.duration()?y=_=0:s.timeline=0}else if(E){Me(ke(c.vars.defaults,{ease:"none"})),c._ease=Ot(E.ease||n.ease||"none");var L,R,P,I=0;if(z(E))E.forEach((function(e){return c.to(M,e,">")})),c.duration();else{for(p in h={},E)"ease"===p||"easeEach"===p||Kt(p,E[p],h,E.easeEach);for(p in h)for(L=h[p].sort((function(e,t){return e.t-t.t})),I=0,u=0;u<L.length;u++)(P={ease:(R=L[u]).e,duration:(R.t-(u?L[u-1].t:0))/100*y})[p]=R.v,c.to(M,P,I),I+=P.duration;c.duration()<y&&c.to({},{duration:y-c.duration()})}}y||s.duration(y=c.duration())}else s.timeline=0;return!0!==S||o||(Ht=r(s),l.killTweensOf(M),Ht=0),Ge(C,r(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(b||!y&&!E&&s._start===ye(C._time)&&N(b)&&Oe(r(s))&&"nested"!==C.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-_)||0)),T&&He(r(s),T),s}i(t,e);var n=t.prototype;return n.render=function(e,t,n){var r,i,o,s,l,c,u,h,d,p=this._time,f=this._tDur,m=this._dur,v=e<0,g=e>f-k&&!v?f:e<k?0:e;if(m){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==v){if(r=g,h=this.timeline,this._repeat){if(s=m+this._rDelay,this._repeat<-1&&v)return this.totalTime(100*s+e,t,n);if(r=ye(g%s),g===f?(o=this._repeat,r=m):((o=~~(g/s))&&o===ye(g/s)&&(r=m,o--),r>m&&(r=m)),(c=this._yoyo&&1&o)&&(d=this._yEase,r=m-r),l=Ne(this._tTime,s),r===p&&!n&&this._initted&&o===l)return this._tTime=g,this;o!==l&&(h&&this._yEase&&Dt(h,c),this.vars.repeatRefresh&&!c&&!this._lock&&this._time!==s&&this._initted&&(this._lock=n=1,this.render(ye(s*o),!0).invalidate()._lock=0))}if(!this._initted){if(qe(this,v?e:r,n,t,g))return this._tTime=0,this;if(!(p===this._time||n&&this.vars.repeatRefresh&&o!==l))return this;if(m!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=u=(d||this._ease)(r/m),this._from&&(this.ratio=u=1-u),r&&!p&&!t&&!o&&(ft(this,"onStart"),this._tTime!==g))return this;for(i=this._pt;i;)i.r(u,i.d),i=i._next;h&&h.render(e<0?e:h._dur*h._ease(r/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(v&&De(this,e,0,n),ft(this,"onUpdate")),this._repeat&&o!==l&&this.vars.onRepeat&&!t&&this.parent&&ft(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(v&&!this._onUpdate&&De(this,e,0,!0),(e||!m)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&Pe(this,1),t||v&&!p||!(g||p||c)||(ft(this,g===f?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,r){var i,o,s,l=e.ratio,c=t<0||!t&&(!e._start&&Ve(e)&&(e._initted||!We(e))||(e._ts<0||e._dp._ts<0)&&!We(e))?0:1,u=e._rDelay,h=0;if(u&&e._repeat&&(h=Qe(0,e._tDur,t),o=Ne(h,u),e._yoyo&&1&o&&(c=1-c),o!==Ne(e._tTime,u)&&(l=1-c,e.vars.repeatRefresh&&e._initted&&e.invalidate())),c!==l||a||r||e._zTime===k||!t&&e._zTime){if(!e._initted&&qe(e,t,r,n,h))return;for(s=e._zTime,e._zTime=t||(n?k:0),n||(n=t&&!s),e.ratio=c,e._from&&(c=1-c),e._time=0,e._tTime=h,i=e._pt;i;)i.r(c,i.d),i=i._next;t<0&&De(e,t,0,!0),e._onUpdate&&!n&&ft(e,"onUpdate"),h&&e._repeat&&!n&&e.parent&&ft(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===c&&(c&&Pe(e,1),n||a||(ft(e,c?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,r,i){m||At.wake(),this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Xt(this,o),function(e,t,n,r,i,o,a,s){var l,c,u,h,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],u=e._ptLookup,h=e._targets.length;h--;){if((l=u[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return qt=1,e.vars[t]="+=0",Xt(e,a),qt=0,s?Q(t+" not eligible for reset"):1;d.push(l)}for(h=d.length;h--;)(l=(c=d[h])._pt||c).s=!r&&0!==r||i?l.s+(r||0)+o*l.c:r,l.c=n-l.s,c.e&&(c.e=ge(n)+et(c.e)),c.b&&(c.b=l.s+et(c.b))}(this,e,t,n,r,this._ease(o/this._dur),o,i)?this.resetTo(e,t,n,r,1):(Ue(this,0),this.parent||Le(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?mt(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Ht&&!0!==Ht.vars.overwrite)._first||mt(this),this.parent&&n!==this.timeline.totalDuration()&&Ye(this,this._dur*this.timeline._tDur/n,0,1),this}var r,i,o,a,s,l,c,u=this._targets,h=e?rt(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,r=n===t.length;r&&n--&&e[n]===t[n];);return n<0}(u,h))return"all"===t&&(this._pt=0),mt(this);for(r=this._op=this._op||[],"all"!==t&&(P(t)&&(s={},ve(t,(function(e){return s[e]=1})),t=s),t=function(e,t){var n,r,i,o,a=e[0]?fe(e[0]).harness:0,s=a&&a.aliases;if(!s)return t;for(r in n=Te({},t),s)if(r in n)for(i=(o=s[r].split(",")).length;i--;)n[o[i]]=n[r];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(s in i=d[c],"all"===t?(r[c]=t,a=i,o={}):(o=r[c]=r[c]||{},a=t),a)(l=i&&i[s])&&("kill"in l.d&&!0!==l.d.kill(s)||Re(this,l,"_pt"),delete i[s]),"all"!==o&&(o[s]=1);return this._initted&&!this._pt&&p&&mt(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Je(1,arguments)},t.delayedCall=function(e,n,r,i){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:i})},t.fromTo=function(e,t,n){return Je(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return l.killTweensOf(e,t,n)},t}(zt);ke(Qt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ve("staggerTo,staggerFrom,staggerFromTo",(function(e){Qt[e]=function(){var t=new Gt,n=tt.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}}));var en=function(e,t,n){return e[t]=n},tn=function(e,t,n){return e[t](n)},nn=function(e,t,n,r){return e[t](r.fp,n)},rn=function(e,t,n){return e.setAttribute(t,n)},on=function(e,t){return I(e[t])?tn:O(e[t])&&e.setAttribute?rn:en},an=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},sn=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},ln=function(e,t){var n=t._pt,r="";if(!e&&t.b)r=t.b;else if(1===e&&t.e)r=t.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+r,n=n._next;r+=t.c}t.set(t.t,t.p,r,t)},cn=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},un=function(e,t,n,r){for(var i,o=this._pt;o;)i=o._next,o.p===r&&o.modifier(e,t,n),o=i},hn=function(e){for(var t,n,r=this._pt;r;)n=r._next,r.p===e&&!r.op||r.op===e?Re(this,r,"_pt"):r.dep||(t=1),r=n;return!t},dn=function(e,t,n,r){r.mSet(e,t,r.m.call(r.tween,n,r.mt),r)},pn=function(e){for(var t,n,r,i,o=e._pt;o;){for(t=o._next,n=r;n&&n.pr>o.pr;)n=n._next;(o._prev=n?n._prev:i)?o._prev._next=o:r=o,(o._next=n)?n._prev=o:i=o,o=t}e._pt=r},fn=function(){function e(e,t,n,r,i,o,a,s,l){this.t=t,this.s=r,this.c=i,this.p=n,this.r=o||an,this.d=a||this,this.set=s||en,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=dn,this.m=e,this.mt=n,this.tween=t},e}();ve(de+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(e){return oe[e]=1})),K.TweenMax=K.TweenLite=Qt,K.TimelineLite=K.TimelineMax=Gt,l=new Gt({sortChildren:!1,defaults:S,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),x.stringFilter=Tt;var mn=[],vn={},gn=[],yn=0,_n=0,bn=function(e){return(vn[e]||gn).map((function(e){return e()}))},wn=function(){var e=Date.now(),t=[];e-yn>2&&(bn("matchMediaInit"),mn.forEach((function(e){var n,r,i,o,a=e.queries,s=e.conditions;for(r in a)(n=c.matchMedia(a[r]).matches)&&(i=1),n!==s[r]&&(s[r]=n,o=1);o&&(e.revert(),i&&t.push(e))})),bn("matchMediaRevert"),t.forEach((function(e){return e.onMatch(e,(function(t){return e.add(null,t)}))})),yn=e,bn("matchMedia"))},xn=function(){function e(e,t){this.selector=t&&it(t),this.data=[],this._r=[],this.isReverted=!1,this.id=_n++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){I(e)&&(n=t,t=e,e=I);var r=this,i=function(){var e,i=s,o=r.selector;return i&&i!==r&&i.data.push(r),n&&(r.selector=it(n)),s=r,e=t.apply(r,arguments),I(e)&&r._r.push(e),s=i,r.selector=o,r.isReverted=!1,e};return r.last=i,e===I?i(r,(function(e){return r.add(null,e)})):e?r[e]=i:i},t.ignore=function(e){var t=s;s=null,e(this),s=t},t.getTweens=function(){var t=[];return this.data.forEach((function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof Qt&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)})),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,r=n.getTweens(),i=n.data.length;i--;)"isFlip"===(t=n.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(e){return r.splice(r.indexOf(e),1)})));for(r.map((function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}})).sort((function(e,t){return t.g-e.g||-1/0})).forEach((function(t){return t.t.revert(e)})),i=n.data.length;i--;)(t=n.data[i])instanceof Gt?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Qt)&&t.revert&&t.revert(e);n._r.forEach((function(t){return t(e,n)})),n.isReverted=!0}():this.data.forEach((function(e){return e.kill&&e.kill()})),this.clear(),t)for(var r=mn.length;r--;)mn[r].id===this.id&&mn.splice(r,1)},t.revert=function(e){this.kill(e||{})},e}(),Sn=function(){function e(e){this.contexts=[],this.scope=e,s&&s.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){F(e)||(e={matches:e});var r,i,o,a=new xn(0,n||this.scope),l=a.conditions={};for(i in s&&!a.selector&&(a.selector=s.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===i?o=1:(r=c.matchMedia(e[i]))&&(mn.indexOf(a)<0&&mn.push(a),(l[i]=r.matches)&&(o=1),r.addListener?r.addListener(wn):r.addEventListener("change",wn));return o&&t(a,(function(e){return a.add(null,e)})),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach((function(t){return t.kill(e,!0)}))},e}(),En={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((function(e){return gt(e)}))},timeline:function(e){return new Gt(e)},getTweensOf:function(e,t){return l.getTweensOf(e,t)},getProperty:function(e,t,n,r){P(e)&&(e=rt(e)[0]);var i=fe(e||{}).get,o=n?Ee:Se;return"native"===n&&(n=""),e?t?o((le[t]&&le[t].get||i)(e,t,n,r)):function(t,n,r){return o((le[t]&&le[t].get||i)(e,t,n,r))}:e},quickSetter:function(e,t,n){if((e=rt(e)).length>1){var r=e.map((function(e){return An.quickSetter(e,t,n)})),i=r.length;return function(e){for(var t=i;t--;)r[t](e)}}e=e[0]||{};var o=le[t],a=fe(e),s=a.harness&&(a.harness.aliases||{})[t]||t,l=o?function(t){var r=new o;f._pt=0,r.init(e,n?t+n:t,f,0,[e]),r.render(1,r),f._pt&&cn(1,f)}:a.set(e,s);return o?l:function(t){return l(e,s,n?t+n:t,a,1)}},quickTo:function(e,t,n){var r,i=An.to(e,Te(((r={})[t]="+=0.1",r.paused=!0,r),n||{})),o=function(e,n,r){return i.resetTo(t,e,n,r)};return o.tween=i,o},isTweening:function(e){return l.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ot(e.ease,S.ease)),Ae(S,e||{})},config:function(e){return Ae(x,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,r=e.plugins,i=e.defaults,o=e.extendTimeline;(r||"").split(",").forEach((function(e){return e&&!le[e]&&!K[e]&&Q(t+" effect requires "+e+" plugin.")})),ce[t]=function(e,t,r){return n(rt(e),ke(t||{},i),r)},o&&(Gt.prototype[t]=function(e,n,r){return this.add(ce[t](e,F(n)?n:(r=n)&&{},this),r)})},registerEase:function(e,t){Mt[e]=Ot(t)},parseEase:function(e,t){return arguments.length?Ot(e,t):Mt},getById:function(e){return l.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,r,i=new Gt(e);for(i.smoothChildTiming=N(e.smoothChildTiming),l.remove(i),i._dp=0,i._time=i._tTime=l._time,n=l._first;n;)r=n._next,!t&&!n._dur&&n instanceof Qt&&n.vars.onComplete===n._targets[0]||Ge(i,n,n._start-n._delay),n=r;return Ge(l,i,0),i},context:function(e,t){return e?new xn(e,t):s},matchMedia:function(e){return new Sn(e)},matchMediaRefresh:function(){return mn.forEach((function(e){var t,n,r=e.conditions;for(n in r)r[n]&&(r[n]=!1,t=1);t&&e.revert()}))||wn()},addEventListener:function(e,t){var n=vn[e]||(vn[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=vn[e],r=n&&n.indexOf(t);r>=0&&n.splice(r,1)},utils:{wrap:function e(t,n,r){var i=n-t;return z(t)?ut(t,e(0,t.length),n):Ze(r,(function(e){return(i+(e-t)%i)%i+t}))},wrapYoyo:function e(t,n,r){var i=n-t,o=2*i;return z(t)?ut(t,e(0,t.length-1),n):Ze(r,(function(e){return t+((e=(o+(e-t)%o)%o||0)>i?o-e:e)}))},distribute:at,random:ct,snap:lt,normalize:function(e,t,n){return dt(e,t,0,1,n)},getUnit:et,clamp:function(e,t,n){return Ze(n,(function(n){return Qe(e,t,n)}))},splitColor:wt,toArray:rt,selector:it,mapRange:dt,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||et(n))}},interpolate:function e(t,n,r,i){var o=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!o){var a,s,l,c,u,h=P(t),d={};if(!0===r&&(i=1)&&(r=null),h)t={p:t},n={p:n};else if(z(t)&&!z(n)){for(l=[],c=t.length,u=c-2,s=1;s<c;s++)l.push(e(t[s-1],t[s]));c--,o=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},r=n}else i||(t=Te(z(t)?[]:{},t));if(!l){for(a in n)Wt.call(d,t,a,"get",n[a]);o=function(e){return cn(e,d)||(h?t.p:t)}}}return Ze(r,o)},shuffle:ot},install:J,effects:ce,ticker:At,updateRoot:Gt.updateRoot,plugins:le,globalTimeline:l,core:{PropTween:fn,globals:ee,Tween:Qt,Timeline:Gt,Animation:zt,getCache:fe,_removeLinkedListItem:Re,reverting:function(){return a},context:function(e){return e&&s&&(s.data.push(e),e._ctx=s),s},suppressOverwrites:function(e){return o=e}}};ve("to,from,fromTo,delayedCall,set,killTweensOf",(function(e){return En[e]=Qt[e]})),At.add(Gt.updateRoot),f=En.to({},{duration:0});var kn=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},Tn=function(e,t){return{name:e,rawVars:1,init:function(e,n,r){r._onInit=function(e){var r,i;if(P(n)&&(r={},ve(n,(function(e){return r[e]=1})),n=r),t){for(i in r={},n)r[i]=t(n[i]);n=r}!function(e,t){var n,r,i,o=e._targets;for(n in t)for(r=o.length;r--;)(i=e._ptLookup[r][n])&&(i=i.d)&&(i._pt&&(i=kn(i,n)),i&&i.modifier&&i.modifier(t[n],e,o[r],n))}(e,n)}}}},An=En.registerPlugin({name:"attr",init:function(e,t,n,r,i){var o,a,s;for(o in this.tween=n,t)s=e.getAttribute(o)||"",(a=this.add(e,"setAttribute",(s||0)+"",t[o],r,i,0,0,o)).op=o,a.b=s,this._props.push(o)},render:function(e,t){for(var n=t._pt;n;)a?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},Tn("roundProps",st),Tn("modifiers"),Tn("snap",lt))||En;Qt.version=Gt.version=An.version="3.12.5",d=1,j()&&Ct(),Mt.Power0,Mt.Power1;var Cn=Mt.Power2,Mn=Mt.Power3,Ln=(Mt.Power4,Mt.Linear);Mt.Quad,Mt.Cubic,Mt.Quart,Mt.Quint,Mt.Strong,Mt.Elastic,Mt.Back,Mt.SteppedEase,Mt.Bounce,Mt.Sine,Mt.Expo,Mt.Circ},1500:(e,t,n)=>{"use strict";n.d(t,{K3:()=>Te,os:()=>ke});var r,i,o,a,s,l,c,u,h=n(8607),d={},p=180/Math.PI,f=Math.PI/180,m=Math.atan2,v=/([A-Z])/g,g=/(left|right|width|margin|padding|x)/i,y=/[\s,\(]\S/,_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},b=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},w=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},x=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},S=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},E=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},k=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},T=function(e,t,n){return e.style[t]=n},A=function(e,t,n){return e.style.setProperty(t,n)},C=function(e,t,n){return e._gsap[t]=n},M=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},L=function(e,t,n,r,i){var o=e._gsap;o.scaleX=o.scaleY=n,o.renderTransform(i,o)},R=function(e,t,n,r,i){var o=e._gsap;o[t]=n,o.renderTransform(i,o)},P="transform",I=P+"Origin",D=function e(t,n){var r=this,i=this.target,o=i.style,a=i._gsap;if(t in d&&o){if(this.tfm=this.tfm||{},"transform"===t)return _.transform.split(",").forEach((function(t){return e.call(r,t,n)}));if(~(t=_[t]||t).indexOf(",")?t.split(",").forEach((function(e){return r.tfm[e]=Z(i,e)})):this.tfm[t]=a.x?a[t]:Z(i,t),t===I&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(P)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(I,n,"")),t=P}(o||n)&&this.props.push(t,n,o[t])},O=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},F=function(){var e,t,n=this.props,r=this.target,i=r.style,o=r._gsap;for(e=0;e<n.length;e+=3)n[e+1]?r[n[e]]=n[e+2]:n[e+2]?i[n[e]]=n[e+2]:i.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(v,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)o[t]=this.tfm[t];o.svg&&(o.renderTransform(),r.setAttribute("data-svg-origin",this.svgo||"")),(e=c())&&e.isStart||i[P]||(O(i),o.zOrigin&&i[I]&&(i[I]+=" "+o.zOrigin+"px",o.zOrigin=0,o.renderTransform()),o.uncache=1)}},N=function(e,t){var n={target:e,props:[],revert:F,save:D};return e._gsap||h.os.core.getCache(e),t&&t.split(",").forEach((function(e){return n.save(e)})),n},j=function(e,t){var n=i.createElementNS?i.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):i.createElement(e);return n&&n.style?n:i.createElement(e)},B=function e(t,n,r){var i=getComputedStyle(t);return i[n]||i.getPropertyValue(n.replace(v,"-$1").toLowerCase())||i.getPropertyValue(n)||!r&&e(t,z(n)||n,1)||""},U="O,Moz,ms,Ms,Webkit".split(","),z=function(e,t,n){var r=(t||s).style,i=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(U[i]+e in r););return i<0?null:(3===i?"ms":i>=0?U[i]:"")+e},G=function(){"undefined"!=typeof window&&window.document&&(r=window,i=r.document,o=i.documentElement,s=j("div")||{style:{}},j("div"),P=z(P),I=P+"Origin",s.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",u=!!z("perspective"),c=h.os.core.reverting,a=1)},H=function e(t){var n,r=j("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,a=this.nextSibling,s=this.style.cssText;if(o.appendChild(r),r.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=e}catch(e){}else this._gsapBBox&&(n=this._gsapBBox());return i&&(a?i.insertBefore(this,a):i.appendChild(this)),o.removeChild(r),this.style.cssText=s,n},q=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},V=function(e){var t;try{t=e.getBBox()}catch(n){t=H.call(e,!0)}return t&&(t.width||t.height)||e.getBBox===H||(t=H.call(e,!0)),!t||t.width||t.x||t.y?t:{x:+q(e,["x","cx","x1"])||0,y:+q(e,["y","cy","y1"])||0,width:0,height:0}},W=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!V(e))},Y=function(e,t){if(t){var n,r=e.style;t in d&&t!==I&&(t=P),r.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),r.removeProperty("--"===n?t:t.replace(v,"-$1").toLowerCase())):r.removeAttribute(t)}},X=function(e,t,n,r,i,o){var a=new h.J7(e._pt,t,n,0,1,o?k:E);return e._pt=a,a.b=r,a.e=i,e._props.push(n),a},K={deg:1,rad:1,turn:1},$={grid:1,flex:1},J=function e(t,n,r,o){var a,l,c,u,p=parseFloat(r)||0,f=(r+"").trim().substr((p+"").length)||"px",m=s.style,v=g.test(n),y="svg"===t.tagName.toLowerCase(),_=(y?"client":"offset")+(v?"Width":"Height"),b=100,w="px"===o,x="%"===o;if(o===f||!p||K[o]||K[f])return p;if("px"!==f&&!w&&(p=e(t,n,r,"px")),u=t.getCTM&&W(t),(x||"%"===f)&&(d[n]||~n.indexOf("adius")))return a=u?t.getBBox()[v?"width":"height"]:t[_],(0,h.E_)(x?p/a*b:p/100*a);if(m[v?"width":"height"]=b+(w?f:o),l=~n.indexOf("adius")||"em"===o&&t.appendChild&&!y?t:t.parentNode,u&&(l=(t.ownerSVGElement||{}).parentNode),l&&l!==i&&l.appendChild||(l=i.body),(c=l._gsap)&&x&&c.width&&v&&c.time===h.au.time&&!c.uncache)return(0,h.E_)(p/c.width*b);if(!x||"height"!==n&&"width"!==n)(x||"%"===f)&&!$[B(l,"display")]&&(m.position=B(t,"position")),l===t&&(m.position="static"),l.appendChild(s),a=s[_],l.removeChild(s),m.position="absolute";else{var S=t.style[n];t.style[n]=b+o,a=t[_],S?t.style[n]=S:Y(t,n)}return v&&x&&((c=(0,h.a0)(l)).time=h.au.time,c.width=l[_]),(0,h.E_)(w?a*p/b:a&&p?b/a*p:0)},Z=function(e,t,n,r){var i;return a||G(),t in _&&"transform"!==t&&~(t=_[t]).indexOf(",")&&(t=t.split(",")[0]),d[t]&&"transform"!==t?(i=ce(e,r),i="transformOrigin"!==t?i[t]:i.svg?i.origin:ue(B(e,I))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||r||~(i+"").indexOf("calc("))&&(i=ne[t]&&ne[t](e,t,n)||B(e,t)||(0,h.n)(e,t)||("opacity"===t?1:0)),n&&!~(i+"").trim().indexOf(" ")?J(e,t,i,n)+n:i},Q=function(e,t,n,r){if(!n||"none"===n){var i=z(t,e,1),o=i&&B(e,i,1);o&&o!==n?(t=i,n=o):"borderColor"===t&&(n=B(e,"borderTopColor"))}var a,s,l,c,u,d,p,f,m,v,g,y=new h.J7(this._pt,e.style,t,0,1,h.l1),_=0,b=0;if(y.b=n,y.e=r,n+="","auto"==(r+="")&&(d=e.style[t],e.style[t]=r,r=B(e,t)||r,d?e.style[t]=d:Y(e,t)),a=[n,r],(0,h.Uc)(a),r=a[1],l=(n=a[0]).match(h.vM)||[],(r.match(h.vM)||[]).length){for(;s=h.vM.exec(r);)p=s[0],m=r.substring(_,s.index),u?u=(u+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(u=1),p!==(d=l[b++]||"")&&(c=parseFloat(d)||0,g=d.substr((c+"").length),"="===p.charAt(1)&&(p=(0,h.B0)(c,p)+g),f=parseFloat(p),v=p.substr((f+"").length),_=h.vM.lastIndex-v.length,v||(v=v||h.Yz.units[t]||g,_===r.length&&(r+=v,y.e+=v)),g!==v&&(c=J(e,t,d,v)||0),y._pt={_next:y._pt,p:m||1===b?m:",",s:c,c:f-c,m:u&&u<4||"zIndex"===t?Math.round:0});y.c=_<r.length?r.substring(_,r.length):""}else y.r="display"===t&&"none"===r?k:E;return h.Ks.test(r)&&(y.e=0),this._pt=y,y},ee={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},te=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,r,i,o=t.t,a=o.style,s=t.u,l=o._gsap;if("all"===s||!0===s)a.cssText="",r=1;else for(i=(s=s.split(",")).length;--i>-1;)n=s[i],d[n]&&(r=1,n="transformOrigin"===n?I:P),Y(o,n);r&&(Y(o,P),l&&(l.svg&&o.removeAttribute("transform"),ce(o,1),l.uncache=1,O(a)))}},ne={clearProps:function(e,t,n,r,i){if("isFromStart"!==i.data){var o=e._pt=new h.J7(e._pt,t,n,0,0,te);return o.u=r,o.pr=-10,o.tween=i,e._props.push(n),1}}},re=[1,0,0,1,0,0],ie={},oe=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},ae=function(e){var t=B(e,P);return oe(t)?re:t.substr(7).match(h.vX).map(h.E_)},se=function(e,t){var n,r,i,a,s=e._gsap||(0,h.a0)(e),l=e.style,c=ae(e);return s.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(c=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?re:c:(c!==re||e.offsetParent||e===o||s.svg||(i=l.display,l.display="block",(n=e.parentNode)&&e.offsetParent||(a=1,r=e.nextElementSibling,o.appendChild(e)),c=ae(e),i?l.display=i:Y(e,"display"),a&&(r?n.insertBefore(e,r):n?n.appendChild(e):o.removeChild(e))),t&&c.length>6?[c[0],c[1],c[4],c[5],c[12],c[13]]:c)},le=function(e,t,n,r,i,o){var a,s,l,c=e._gsap,u=i||se(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,p=c.xOffset||0,f=c.yOffset||0,m=u[0],v=u[1],g=u[2],y=u[3],_=u[4],b=u[5],w=t.split(" "),x=parseFloat(w[0])||0,S=parseFloat(w[1])||0;n?u!==re&&(s=m*y-v*g)&&(l=x*(-v/s)+S*(m/s)-(m*b-v*_)/s,x=x*(y/s)+S*(-g/s)+(g*b-y*_)/s,S=l):(x=(a=V(e)).x+(~w[0].indexOf("%")?x/100*a.width:x),S=a.y+(~(w[1]||w[0]).indexOf("%")?S/100*a.height:S)),r||!1!==r&&c.smooth?(_=x-h,b=S-d,c.xOffset=p+(_*m+b*g)-_,c.yOffset=f+(_*v+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=x,c.yOrigin=S,c.smooth=!!r,c.origin=t,c.originIsAbsolute=!!n,e.style[I]="0px 0px",o&&(X(o,c,"xOrigin",h,x),X(o,c,"yOrigin",d,S),X(o,c,"xOffset",p,c.xOffset),X(o,c,"yOffset",f,c.yOffset)),e.setAttribute("data-svg-origin",x+" "+S)},ce=function(e,t){var n=e._gsap||new h.n6(e);if("x"in n&&!t&&!n.uncache)return n;var r,i,o,a,s,l,c,d,v,g,y,_,b,w,x,S,E,k,T,A,C,M,L,R,D,O,F,N,j,U,z,G,H=e.style,q=n.scaleX<0,V="px",Y="deg",X=getComputedStyle(e),K=B(e,I)||"0";return r=i=o=l=c=d=v=g=y=0,a=s=1,n.svg=!(!e.getCTM||!W(e)),X.translate&&("none"===X.translate&&"none"===X.scale&&"none"===X.rotate||(H[P]=("none"!==X.translate?"translate3d("+(X.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==X.rotate?"rotate("+X.rotate+") ":"")+("none"!==X.scale?"scale("+X.scale.split(" ").join(",")+") ":"")+("none"!==X[P]?X[P]:"")),H.scale=H.rotate=H.translate="none"),w=se(e,n.svg),n.svg&&(n.uncache?(D=e.getBBox(),K=n.xOrigin-D.x+"px "+(n.yOrigin-D.y)+"px",R=""):R=!t&&e.getAttribute("data-svg-origin"),le(e,R||K,!!R||n.originIsAbsolute,!1!==n.smooth,w)),_=n.xOrigin||0,b=n.yOrigin||0,w!==re&&(k=w[0],T=w[1],A=w[2],C=w[3],r=M=w[4],i=L=w[5],6===w.length?(a=Math.sqrt(k*k+T*T),s=Math.sqrt(C*C+A*A),l=k||T?m(T,k)*p:0,(v=A||C?m(A,C)*p+l:0)&&(s*=Math.abs(Math.cos(v*f))),n.svg&&(r-=_-(_*k+b*A),i-=b-(_*T+b*C))):(G=w[6],U=w[7],F=w[8],N=w[9],j=w[10],z=w[11],r=w[12],i=w[13],o=w[14],c=(x=m(G,j))*p,x&&(R=M*(S=Math.cos(-x))+F*(E=Math.sin(-x)),D=L*S+N*E,O=G*S+j*E,F=M*-E+F*S,N=L*-E+N*S,j=G*-E+j*S,z=U*-E+z*S,M=R,L=D,G=O),d=(x=m(-A,j))*p,x&&(S=Math.cos(-x),z=C*(E=Math.sin(-x))+z*S,k=R=k*S-F*E,T=D=T*S-N*E,A=O=A*S-j*E),l=(x=m(T,k))*p,x&&(R=k*(S=Math.cos(x))+T*(E=Math.sin(x)),D=M*S+L*E,T=T*S-k*E,L=L*S-M*E,k=R,M=D),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,d=180-d),a=(0,h.E_)(Math.sqrt(k*k+T*T+A*A)),s=(0,h.E_)(Math.sqrt(L*L+G*G)),x=m(M,L),v=Math.abs(x)>2e-4?x*p:0,y=z?1/(z<0?-z:z):0),n.svg&&(R=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!oe(B(e,P)),R&&e.setAttribute("transform",R))),Math.abs(v)>90&&Math.abs(v)<270&&(q?(a*=-1,v+=l<=0?180:-180,l+=l<=0?180:-180):(s*=-1,v+=v<=0?180:-180)),t=t||n.uncache,n.x=r-((n.xPercent=r&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-r)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+V,n.y=i-((n.yPercent=i&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+V,n.z=o+V,n.scaleX=(0,h.E_)(a),n.scaleY=(0,h.E_)(s),n.rotation=(0,h.E_)(l)+Y,n.rotationX=(0,h.E_)(c)+Y,n.rotationY=(0,h.E_)(d)+Y,n.skewX=v+Y,n.skewY=g+Y,n.transformPerspective=y+V,(n.zOrigin=parseFloat(K.split(" ")[2])||!t&&n.zOrigin||0)&&(H[I]=ue(K)),n.xOffset=n.yOffset=0,n.force3D=h.Yz.force3D,n.renderTransform=n.svg?ge:u?ve:de,n.uncache=0,n},ue=function(e){return(e=e.split(" "))[0]+" "+e[1]},he=function(e,t,n){var r=(0,h.l_)(t);return(0,h.E_)(parseFloat(t)+parseFloat(J(e,"x",n+"px",r)))+r},de=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,ve(e,t)},pe="0deg",fe="0px",me=") ",ve=function(e,t){var n=t||this,r=n.xPercent,i=n.yPercent,o=n.x,a=n.y,s=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,p=n.scaleX,m=n.scaleY,v=n.transformPerspective,g=n.force3D,y=n.target,_=n.zOrigin,b="",w="auto"===g&&e&&1!==e||!0===g;if(_&&(u!==pe||c!==pe)){var x,S=parseFloat(c)*f,E=Math.sin(S),k=Math.cos(S);S=parseFloat(u)*f,x=Math.cos(S),o=he(y,o,E*x*-_),a=he(y,a,-Math.sin(S)*-_),s=he(y,s,k*x*-_+_)}v!==fe&&(b+="perspective("+v+me),(r||i)&&(b+="translate("+r+"%, "+i+"%) "),(w||o!==fe||a!==fe||s!==fe)&&(b+=s!==fe||w?"translate3d("+o+", "+a+", "+s+") ":"translate("+o+", "+a+me),l!==pe&&(b+="rotate("+l+me),c!==pe&&(b+="rotateY("+c+me),u!==pe&&(b+="rotateX("+u+me),h===pe&&d===pe||(b+="skew("+h+", "+d+me),1===p&&1===m||(b+="scale("+p+", "+m+me),y.style[P]=b||"translate(0, 0)"},ge=function(e,t){var n,r,i,o,a,s=t||this,l=s.xPercent,c=s.yPercent,u=s.x,d=s.y,p=s.rotation,m=s.skewX,v=s.skewY,g=s.scaleX,y=s.scaleY,_=s.target,b=s.xOrigin,w=s.yOrigin,x=s.xOffset,S=s.yOffset,E=s.forceCSS,k=parseFloat(u),T=parseFloat(d);p=parseFloat(p),m=parseFloat(m),(v=parseFloat(v))&&(m+=v=parseFloat(v),p+=v),p||m?(p*=f,m*=f,n=Math.cos(p)*g,r=Math.sin(p)*g,i=Math.sin(p-m)*-y,o=Math.cos(p-m)*y,m&&(v*=f,a=Math.tan(m-v),i*=a=Math.sqrt(1+a*a),o*=a,v&&(a=Math.tan(v),n*=a=Math.sqrt(1+a*a),r*=a)),n=(0,h.E_)(n),r=(0,h.E_)(r),i=(0,h.E_)(i),o=(0,h.E_)(o)):(n=g,o=y,r=i=0),(k&&!~(u+"").indexOf("px")||T&&!~(d+"").indexOf("px"))&&(k=J(_,"x",u,"px"),T=J(_,"y",d,"px")),(b||w||x||S)&&(k=(0,h.E_)(k+b-(b*n+w*i)+x),T=(0,h.E_)(T+w-(b*r+w*o)+S)),(l||c)&&(a=_.getBBox(),k=(0,h.E_)(k+l/100*a.width),T=(0,h.E_)(T+c/100*a.height)),a="matrix("+n+","+r+","+i+","+o+","+k+","+T+")",_.setAttribute("transform",a),E&&(_.style[P]=a)},ye=function(e,t,n,r,i){var o,a,s=360,l=(0,h.vQ)(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?p:1)-r,u=r+c+"deg";return l&&("short"===(o=i.split("_")[1])&&(c%=s)!=c%180&&(c+=c<0?s:-360),"cw"===o&&c<0?c=(c+36e9)%s-~~(c/s)*s:"ccw"===o&&c>0&&(c=(c-36e9)%s-~~(c/s)*s)),e._pt=a=new h.J7(e._pt,t,n,r,c,w),a.e=u,a.u="deg",e._props.push(n),a},_e=function(e,t){for(var n in t)e[n]=t[n];return e},be=function(e,t,n){var r,i,o,a,s,l,c,u=_e({},n._gsap),p=n.style;for(i in u.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),p[P]=t,r=ce(n,1),Y(n,P),n.setAttribute("transform",o)):(o=getComputedStyle(n)[P],p[P]=t,r=ce(n,1),p[P]=o),d)(o=u[i])!==(a=r[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(s=(0,h.l_)(o)!==(c=(0,h.l_)(a))?J(n,i,o,c):parseFloat(o),l=parseFloat(a),e._pt=new h.J7(e._pt,r,i,s,l-s,b),e._pt.u=c||0,e._props.push(i));_e(r,u)};(0,h.fA)("padding,margin,Width,Radius",(function(e,t){var n="Top",r="Right",i="Bottom",o="Left",a=(t<3?[n,r,i,o]:[n+o,n+r,i+r,i+o]).map((function(n){return t<2?e+n:"border"+n+e}));ne[t>1?"border"+e:e]=function(e,t,n,r,i){var o,s;if(arguments.length<4)return o=a.map((function(t){return Z(e,t,n)})),5===(s=o.join(" ")).split(o[0]).length?o[0]:s;o=(r+"").split(" "),s={},a.forEach((function(e,t){return s[e]=o[t]=o[t]||o[(t-1)/2|0]})),e.init(t,s,i)}}));var we,xe,Se,Ee={name:"css",register:G,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,r,i){var o,s,l,c,u,p,f,m,v,g,w,E,k,T,A,C,M,L,R,D,O=this._props,F=e.style,j=n.vars.startAt;for(f in a||G(),this.styles=this.styles||N(e),C=this.styles.props,this.tween=n,t)if("autoRound"!==f&&(s=t[f],!h.wU[f]||!(0,h.Zm)(f,t,n,r,e,i)))if(u=typeof s,p=ne[f],"function"===u&&(u=typeof(s=s.call(n,r,e,i))),"string"===u&&~s.indexOf("random(")&&(s=(0,h.Vy)(s)),p)p(this,e,f,s,n)&&(A=1);else if("--"===f.substr(0,2))o=(getComputedStyle(e).getPropertyValue(f)+"").trim(),s+="",h.qA.lastIndex=0,h.qA.test(o)||(m=(0,h.l_)(o),v=(0,h.l_)(s)),v?m!==v&&(o=J(e,f,o,v)+v):m&&(s+=m),this.add(F,"setProperty",o,s,r,i,0,0,f),O.push(f),C.push(f,0,F[f]);else if("undefined"!==u){if(j&&f in j?(o="function"==typeof j[f]?j[f].call(n,r,e,i):j[f],(0,h.vQ)(o)&&~o.indexOf("random(")&&(o=(0,h.Vy)(o)),(0,h.l_)(o+"")||"auto"===o||(o+=h.Yz.units[f]||(0,h.l_)(Z(e,f))||""),"="===(o+"").charAt(1)&&(o=Z(e,f))):o=Z(e,f),c=parseFloat(o),(g="string"===u&&"="===s.charAt(1)&&s.substr(0,2))&&(s=s.substr(2)),l=parseFloat(s),f in _&&("autoAlpha"===f&&(1===c&&"hidden"===Z(e,"visibility")&&l&&(c=0),C.push("visibility",0,F.visibility),X(this,F,"visibility",c?"inherit":"hidden",l?"inherit":"hidden",!l)),"scale"!==f&&"transform"!==f&&~(f=_[f]).indexOf(",")&&(f=f.split(",")[0])),w=f in d)if(this.styles.save(f),E||((k=e._gsap).renderTransform&&!t.parseTransform||ce(e,t.parseTransform),T=!1!==t.smoothOrigin&&k.smooth,(E=this._pt=new h.J7(this._pt,F,P,0,1,k.renderTransform,k,0,-1)).dep=1),"scale"===f)this._pt=new h.J7(this._pt,k,"scaleY",k.scaleY,(g?(0,h.B0)(k.scaleY,g+l):l)-k.scaleY||0,b),this._pt.u=0,O.push("scaleY",f),f+="X";else{if("transformOrigin"===f){C.push(I,0,F[I]),L=void 0,R=void 0,D=void 0,R=(L=(M=s).split(" "))[0],D=L[1]||"50%","top"!==R&&"bottom"!==R&&"left"!==D&&"right"!==D||(M=R,R=D,D=M),L[0]=ee[R]||R,L[1]=ee[D]||D,s=L.join(" "),k.svg?le(e,s,0,T,0,this):((v=parseFloat(s.split(" ")[2])||0)!==k.zOrigin&&X(this,k,"zOrigin",k.zOrigin,v),X(this,F,f,ue(o),ue(s)));continue}if("svgOrigin"===f){le(e,s,1,T,0,this);continue}if(f in ie){ye(this,k,f,c,g?(0,h.B0)(c,g+s):s);continue}if("smoothOrigin"===f){X(this,k,"smooth",k.smooth,s);continue}if("force3D"===f){k[f]=s;continue}if("transform"===f){be(this,s,e);continue}}else f in F||(f=z(f)||f);if(w||(l||0===l)&&(c||0===c)&&!y.test(s)&&f in F)l||(l=0),(m=(o+"").substr((c+"").length))!==(v=(0,h.l_)(s)||(f in h.Yz.units?h.Yz.units[f]:m))&&(c=J(e,f,o,v)),this._pt=new h.J7(this._pt,w?k:F,f,c,(g?(0,h.B0)(c,g+l):l)-c,w||"px"!==v&&"zIndex"!==f||!1===t.autoRound?b:S),this._pt.u=v||0,m!==v&&"%"!==v&&(this._pt.b=o,this._pt.r=x);else if(f in F)Q.call(this,e,f,o,g?g+s:s);else if(f in e)this.add(e,f,o||e[f],g?g+s:s,r,i);else if("parseTransform"!==f){(0,h.dg)(f,s);continue}w||(f in F?C.push(f,0,F[f]):C.push(f,1,o||e[f])),O.push(f)}A&&(0,h.St)(this)},render:function(e,t){if(t.tween._time||!c())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:Z,aliases:_,getSetter:function(e,t,n){var r=_[t];return r&&r.indexOf(",")<0&&(t=r),t in d&&t!==I&&(e._gsap.x||Z(e,"x"))?n&&l===n?"scale"===t?M:C:(l=n||{})&&("scale"===t?L:R):e.style&&!(0,h.OF)(e.style[t])?T:~t.indexOf("-")?A:(0,h.Dx)(e,t)},core:{_removeProperty:Y,_getMatrix:se}};h.os.utils.checkPrefix=z,h.os.core.getStyleSaver=N,we="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",xe="rotation,rotationX,rotationY,skewX,skewY",Se=(0,h.fA)(we+","+xe+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(e){d[e]=1})),(0,h.fA)(xe,(function(e){h.Yz.units[e]="deg",ie[e]=1})),_[Se[13]]=we+","+xe,(0,h.fA)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(e){var t=e.split(":");_[t[1]]=Se[t[0]]})),(0,h.fA)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(e){h.Yz.units[e]="px"})),h.os.registerPlugin(Ee);var ke=h.os.registerPlugin(Ee)||h.os,Te=ke.core.Tween},5127:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=window.document,t=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(i(window,"resize",this._checkForIntersections,!0),i(e,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in window&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(e,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(window,"resize",this._checkForIntersections,!0),o(e,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var i=r.element,o=a(i),s=this._rootContainsTarget(i),l=r.entry,c=e&&s&&this._computeTargetAndRootIntersection(i,t),u=r.entry=new n({time:window.performance&&performance.now&&performance.now(),target:i,boundingClientRect:o,rootBounds:t,intersectionRect:c});l?e&&s?this._hasCrossedThreshold(l,u)&&this._queuedEntries.push(u):l&&l.isIntersecting&&this._queuedEntries.push(u):this._queuedEntries.push(u)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(t,n){if("none"!=window.getComputedStyle(t).display){for(var r,i,o,s,c,u,h,d,p=a(t),f=l(t),m=!1;!m;){var v=null,g=1==f.nodeType?window.getComputedStyle(f):{};if("none"==g.display)return;if(f==this.root||f==e?(m=!0,v=n):f!=e.body&&f!=e.documentElement&&"visible"!=g.overflow&&(v=a(f)),v&&(r=v,i=p,void 0,void 0,void 0,void 0,void 0,void 0,o=Math.max(r.top,i.top),s=Math.min(r.bottom,i.bottom),c=Math.max(r.left,i.left),d=s-o,!(p=(h=(u=Math.min(r.right,i.right))-c)>=0&&d>=0&&{top:o,bottom:s,left:c,right:u,width:h,height:d})))break;f=l(f)}return p}},r.prototype._getRootRect=function(){var t;if(this.root)t=a(this.root);else{var n=e.documentElement,r=e.body;t={top:0,left:0,right:n.clientWidth||r.clientWidth,width:n.clientWidth||r.clientWidth,bottom:n.clientHeight||r.clientHeight,height:n.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},r.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,r=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==r)for(var i=0;i<this.thresholds.length;i++){var o=this.thresholds[i];if(o==n||o==r||o<n!=o<r)return!0}},r.prototype._rootIsInDom=function(){return!this.root||s(e,this.root)},r.prototype._rootContainsTarget=function(t){return s(this.root||e,t)},r.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},r.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=r,window.IntersectionObserverEntry=n}function n(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,r=this.intersectionRect,i=r.width*r.height;this.intersectionRatio=n?Number((i/n).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var n,r,i,o=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(o.root&&1!=o.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),r=this.THROTTLE_TIMEOUT,i=null,function(){i||(i=setTimeout((function(){n(),i=null}),r))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(o.rootMargin),this.thresholds=this._initThresholds(o.threshold),this.root=o.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function i(e,t,n,r){"function"==typeof e.addEventListener?e.addEventListener(t,n,r||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,r){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,r||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,n)}function a(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(e,t){for(var n=t;n;){if(n==e)return!0;n=l(n)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t&&t.assignedSlot?t.assignedSlot.parentNode:t}}()},4692:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,l=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},c=o.push,u=o.indexOf,h={},d=h.toString,p=h.hasOwnProperty,f=p.toString,m=f.call(Object),v={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},y=function(e){return null!=e&&e===e.window},_=r.document,b={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var r,i,o=(n=n||_).createElement("script");if(o.text=e,t)for(r in b)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[d.call(e)]||"object":typeof e}var S="3.7.1",E=/HTML$/i,k=function(e,t){return new k.fn.init(e,t)};function T(e){var t=!!e&&"length"in e&&e.length,n=x(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}k.fn=k.prototype={jquery:S,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(e){return this.pushStack(k.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(k.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(k.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:o.sort,splice:o.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e)||(t=a(e))&&("function"!=typeof(n=p.call(t,"constructor")&&t.constructor)||f.call(n)!==m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(T(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=k.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(T(Object(e))?k.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:u.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!E.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(T(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return l(a)},guid:1,support:v}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=o[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var C=o.pop,M=o.sort,L=o.splice,R="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g");k.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var I=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function D(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}k.escapeSelector=function(e){return(e+"").replace(I,D)};var O=_,F=c;!function(){var e,t,n,i,a,l,c,h,d,f,m=F,g=k.expando,y=0,_=0,b=ee(),w=ee(),x=ee(),S=ee(),E=function(e,t){return e===t&&(a=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+R+"*("+I+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+R+"*\\]",N=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",j=new RegExp(R+"+","g"),B=new RegExp("^"+R+"*,"+R+"*"),U=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),z=new RegExp(R+"|>"),G=new RegExp(N),H=new RegExp("^"+I+"$"),q={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+N),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},V=/^(?:input|select|textarea|button)$/i,W=/^h\d$/i,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,X=/[+~]/,K=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),$=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){le()},Z=de((function(e){return!0===e.disabled&&A(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{m.apply(o=s.call(O.childNodes),O.childNodes),o[O.childNodes.length].nodeType}catch(e){m={apply:function(e,t){F.apply(e,s.call(t))},call:function(e){F.apply(e,s.call(arguments,1))}}}function Q(e,t,n,r){var i,o,a,s,c,u,p,f=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(le(t),t=t||l,h)){if(11!==y&&(c=Y.exec(e)))if(i=c[1]){if(9===y){if(!(a=t.getElementById(i)))return n;if(a.id===i)return m.call(n,a),n}else if(f&&(a=f.getElementById(i))&&Q.contains(t,a)&&a.id===i)return m.call(n,a),n}else{if(c[2])return m.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&t.getElementsByClassName)return m.apply(n,t.getElementsByClassName(i)),n}if(!(S[e+" "]||d&&d.test(e))){if(p=e,f=t,1===y&&(z.test(e)||U.test(e))){for((f=X.test(e)&&se(t.parentNode)||t)==t&&v.scope||((s=t.getAttribute("id"))?s=k.escapeSelector(s):t.setAttribute("id",s=g)),o=(u=ue(e)).length;o--;)u[o]=(s?"#"+s:":scope")+" "+he(u[o]);p=u.join(",")}try{return m.apply(n,f.querySelectorAll(p)),n}catch(t){S(e,!0)}finally{s===g&&t.removeAttribute("id")}}}return ye(e.replace(P,"$1"),t,n,r)}function ee(){var e=[];return function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}}function te(e){return e[g]=!0,e}function ne(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return A(t,"input")&&t.type===e}}function ie(e){return function(t){return(A(t,"input")||A(t,"button"))&&t.type===e}}function oe(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Z(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function ae(e){return te((function(t){return t=+t,te((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function se(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var n,r=e?e.ownerDocument||e:O;return r!=l&&9===r.nodeType&&r.documentElement?(c=(l=r).documentElement,h=!k.isXMLDoc(l),f=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,c.msMatchesSelector&&O!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",J),v.getById=ne((function(e){return c.appendChild(e).id=k.expando,!l.getElementsByName||!l.getElementsByName(k.expando).length})),v.disconnectedMatch=ne((function(e){return f.call(e,"*")})),v.scope=ne((function(){return l.querySelectorAll(":scope")})),v.cssHas=ne((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),v.getById?(t.filter.ID=function(e){var t=e.replace(K,$);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(K,$);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],ne((function(e){var t;c.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+R+"*(?:value|"+T+")"),e.querySelectorAll("[id~="+g+"-]").length||d.push("~="),e.querySelectorAll("a#"+g+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")")})),v.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),E=function(e,t){if(e===t)return a=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!v.sortDetached&&t.compareDocumentPosition(e)===n?e===l||e.ownerDocument==O&&Q.contains(O,e)?-1:t===l||t.ownerDocument==O&&Q.contains(O,t)?1:i?u.call(i,e)-u.call(i,t):0:4&n?-1:1)},l):l}for(e in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(le(e),h&&!S[t+" "]&&(!d||!d.test(t)))try{var n=f.call(e,t);if(n||v.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){S(t,!0)}return Q(t,l,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=l&&le(e),k.contains(e,t)},Q.attr=function(e,n){(e.ownerDocument||e)!=l&&le(e);var r=t.attrHandle[n.toLowerCase()],i=r&&p.call(t.attrHandle,n.toLowerCase())?r(e,n,!h):void 0;return void 0!==i?i:e.getAttribute(n)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},k.uniqueSort=function(e){var t,n=[],r=0,o=0;if(a=!v.sortStable,i=!v.sortStable&&s.call(e,0),M.call(e,E),a){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)L.call(e,n[r],1)}return i=null,e},k.fn.uniqueSort=function(){return this.pushStack(k.uniqueSort(s.apply(this)))},t=k.expr={cacheLength:50,createPseudo:te,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(K,$),e[3]=(e[3]||e[4]||e[5]||"").replace(K,$),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(K,$).toLowerCase();return"*"===e?function(){return!0}:function(e){return A(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&b(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=Q.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,p,f=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),_=!l&&!s,b=!1;if(m){if(o){for(;f;){for(h=t;h=h[f];)if(s?A(h,v):1===h.nodeType)return!1;p=f="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&_){for(b=(d=(c=(u=m[g]||(m[g]={}))[e]||[])[0]===y&&c[1])&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[f]||(b=d=0)||p.pop();)if(1===h.nodeType&&++b&&h===t){u[e]=[y,d,b];break}}else if(_&&(b=d=(c=(u=t[g]||(t[g]={}))[e]||[])[0]===y&&c[1]),!1===b)for(;(h=++d&&h&&h[f]||(b=d=0)||p.pop())&&(!(s?A(h,v):1===h.nodeType)||!++b||(_&&((u=h[g]||(h[g]={}))[e]=[y,b]),h!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return i[g]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,t){for(var r,o=i(e,n),a=o.length;a--;)e[r=u.call(e,o[a])]=!(t[r]=o[a])})):function(e){return i(e,0,r)}):i}},pseudos:{not:te((function(e){var t=[],n=[],r=ge(e.replace(P,"$1"));return r[g]?te((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(K,$),function(t){return(t.textContent||k.text(t)).indexOf(e)>-1}})),lang:te((function(e){return H.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(K,$).toLowerCase(),function(t){var n;do{if(n=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=r.location&&r.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:oe(!1),disabled:oe(!0),checked:function(e){return A(e,"input")&&!!e.checked||A(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return W.test(e.nodeName)},input:function(e){return V.test(e.nodeName)},button:function(e){return A(e,"input")&&"button"===e.type||A(e,"button")},text:function(e){var t;return A(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ae((function(){return[0]})),last:ae((function(e,t){return[t-1]})),eq:ae((function(e,t,n){return[n<0?n+t:n]})),even:ae((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:ae((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:ae((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:ae((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=re(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=ie(e);function ce(){}function ue(e,n){var r,i,o,a,s,l,c,u=w[e+" "];if(u)return n?0:u.slice(0);for(s=e,l=[],c=t.preFilter;s;){for(a in r&&!(i=B.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=U.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(P," ")}),s=s.slice(r.length)),t.filter)!(i=q[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?Q.error(e):w(e,l).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=_++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,h=[y,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=t[g]||(t[g]={}),i&&A(t,i))t=t[r]||t;else{if((c=u[o])&&c[0]===y&&c[1]===s)return h[2]=c[2];if(u[o]=h,h[2]=e(t,n,l))return!0}return!1}}function pe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function fe(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function me(e,t,n,r,i,o){return r&&!r[g]&&(r=me(r)),i&&!i[g]&&(i=me(i,o)),te((function(o,a,s,l){var c,h,d,p,f=[],v=[],g=a.length,y=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Q(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),_=!e||!o&&t?y:fe(y,f,e,s,l);if(n?n(_,p=i||(o?e:g||r)?[]:a,s,l):p=_,r)for(c=fe(p,v),r(c,[],s,l),h=c.length;h--;)(d=c[h])&&(p[v[h]]=!(_[v[h]]=d));if(o){if(i||e){if(i){for(c=[],h=p.length;h--;)(d=p[h])&&c.push(_[h]=d);i(null,p=[],c,l)}for(h=p.length;h--;)(d=p[h])&&(c=i?u.call(o,d):f[h])>-1&&(o[c]=!(a[c]=d))}}else p=fe(p===a?p.splice(g,p.length):p),i?i(null,a,p,l):m.apply(a,p)}))}function ve(e){for(var r,i,o,a=e.length,s=t.relative[e[0].type],l=s||t.relative[" "],c=s?1:0,h=de((function(e){return e===r}),l,!0),d=de((function(e){return u.call(r,e)>-1}),l,!0),p=[function(e,t,i){var o=!s&&(i||t!=n)||((r=t).nodeType?h(e,t,i):d(e,t,i));return r=null,o}];c<a;c++)if(i=t.relative[e[c].type])p=[de(pe(p),i)];else{if((i=t.filter[e[c].type].apply(null,e[c].matches))[g]){for(o=++c;o<a&&!t.relative[e[o].type];o++);return me(c>1&&pe(p),c>1&&he(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(P,"$1"),i,c<o&&ve(e.slice(c,o)),o<a&&ve(e=e.slice(o)),o<a&&he(e))}p.push(i)}return pe(p)}function ge(e,r){var i,o=[],a=[],s=x[e+" "];if(!s){for(r||(r=ue(e)),i=r.length;i--;)(s=ve(r[i]))[g]?o.push(s):a.push(s);s=x(e,function(e,r){var i=r.length>0,o=e.length>0,a=function(a,s,c,u,d){var p,f,v,g=0,_="0",b=a&&[],w=[],x=n,S=a||o&&t.find.TAG("*",d),E=y+=null==x?1:Math.random()||.1,T=S.length;for(d&&(n=s==l||s||d);_!==T&&null!=(p=S[_]);_++){if(o&&p){for(f=0,s||p.ownerDocument==l||(le(p),c=!h);v=e[f++];)if(v(p,s||l,c)){m.call(u,p);break}d&&(y=E)}i&&((p=!v&&p)&&g--,a&&b.push(p))}if(g+=_,i&&_!==g){for(f=0;v=r[f++];)v(b,w,s,c);if(a){if(g>0)for(;_--;)b[_]||w[_]||(w[_]=C.call(u));w=fe(w)}m.apply(u,w),d&&!a&&w.length>0&&g+r.length>1&&k.uniqueSort(u)}return d&&(y=E,n=x),b};return i?te(a):a}(a,o)),s.selector=e}return s}function ye(e,n,r,i){var o,a,s,l,c,u="function"==typeof e&&e,d=!i&&ue(e=u.selector||e);if(r=r||[],1===d.length){if((a=d[0]=d[0].slice(0)).length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&h&&t.relative[a[1].type]){if(!(n=(t.find.ID(s.matches[0].replace(K,$),n)||[])[0]))return r;u&&(n=n.parentNode),e=e.slice(a.shift().value.length)}for(o=q.needsContext.test(e)?0:a.length;o--&&(s=a[o],!t.relative[l=s.type]);)if((c=t.find[l])&&(i=c(s.matches[0].replace(K,$),X.test(a[0].type)&&se(n.parentNode)||n))){if(a.splice(o,1),!(e=i.length&&he(a)))return m.apply(r,i),r;break}}return(u||ge(e,d))(i,n,!h,r,!n||X.test(e)&&se(n.parentNode)||n),r}ce.prototype=t.filters=t.pseudos,t.setFilters=new ce,v.sortStable=g.split("").sort(E).join("")===g,le(),v.sortDetached=ne((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),k.find=Q,k.expr[":"]=k.expr.pseudos,k.unique=k.uniqueSort,Q.compile=ge,Q.select=ye,Q.setDocument=le,Q.tokenize=ue,Q.escape=k.escapeSelector,Q.getText=k.text,Q.isXML=k.isXMLDoc,Q.selectors=k.expr,Q.support=k.support,Q.uniqueSort=k.uniqueSort}();var N=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},j=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},B=k.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(e,t,n){return g(t)?k.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?k.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?k.grep(e,(function(e){return u.call(t,e)>-1!==n})):k.filter(t,e,n)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,(function(e){return 1===e.nodeType})))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter((function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return r>1?k.uniqueSort(n):n},filter:function(e){return this.pushStack(z(this,e||[],!1))},not:function(e){return this.pushStack(z(this,e||[],!0))},is:function(e){return!!z(this,"string"==typeof e&&B.test(e)?k(e):e||[],!1).length}});var G,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||G,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),U.test(r[1])&&k.isPlainObject(t))for(r in t)g(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=_.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,G=k(_);var q=/^(?:parents|prev(?:Until|All))/,V={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!B.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?u.call(k(e),this[0]):u.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return N(e,"parentNode")},parentsUntil:function(e,t,n){return N(e,"parentNode",n)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return N(e,"nextSibling")},prevAll:function(e){return N(e,"previousSibling")},nextUntil:function(e,t,n){return N(e,"nextSibling",n)},prevUntil:function(e,t,n){return N(e,"previousSibling",n)},siblings:function(e){return j((e.parentNode||{}).firstChild,e)},children:function(e){return j(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},(function(e,t){k.fn[e]=function(n,r){var i=k.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=k.filter(r,i)),this.length>1&&(V[e]||k.uniqueSort(i),q.test(e)&&i.reverse()),this.pushStack(i)}}));var Y=/[^\x20\t\r\n\f]+/g;function X(e){return e}function K(e){throw e}function $(e,t,n,r){var i;try{e&&g(i=e.promise)?i.call(e).done(t).fail(n):e&&g(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return k.each(e.match(Y)||[],(function(e,n){t[n]=!0})),t}(e):k.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){k.each(n,(function(n,r){g(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return k.each(arguments,(function(e,t){for(var n;(n=k.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?k.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},k.extend({Deferred:function(e){var t=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return k.Deferred((function(n){k.each(t,(function(t,r){var i=g(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,i){var o=0;function a(e,t,n,i){return function(){var s=this,l=arguments,c=function(){var r,c;if(!(e<o)){if((r=n.apply(s,l))===t.promise())throw new TypeError("Thenable self-resolution");c=r&&("object"==typeof r||"function"==typeof r)&&r.then,g(c)?i?c.call(r,a(o,t,X,i),a(o,t,K,i)):(o++,c.call(r,a(o,t,X,i),a(o,t,K,i),a(o,t,X,t.notifyWith))):(n!==X&&(s=void 0,l=[r]),(i||t.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(r){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(r,u.error),e+1>=o&&(n!==K&&(s=void 0,l=[r]),t.rejectWith(s,l))}};e?u():(k.Deferred.getErrorHook?u.error=k.Deferred.getErrorHook():k.Deferred.getStackHook&&(u.error=k.Deferred.getStackHook()),r.setTimeout(u))}}return k.Deferred((function(r){t[0][3].add(a(0,r,g(i)?i:X,r.notifyWith)),t[1][3].add(a(0,r,g(e)?e:X)),t[2][3].add(a(0,r,g(n)?n:K))})).promise()},promise:function(e){return null!=e?k.extend(e,i):i}},o={};return k.each(t,(function(e,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=s.call(arguments),o=k.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&($(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||g(i[n]&&i[n].then)))return o.then();for(;n--;)$(i[n],a(n),o.reject);return o.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){r.console&&r.console.warn&&e&&J.test(e.name)&&r.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){r.setTimeout((function(){throw e}))};var Z=k.Deferred();function Q(){_.removeEventListener("DOMContentLoaded",Q),r.removeEventListener("load",Q),k.ready()}k.fn.ready=function(e){return Z.then(e).catch((function(e){k.readyException(e)})),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0,!0!==e&&--k.readyWait>0||Z.resolveWith(_,[k]))}}),k.ready.then=Z.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?r.setTimeout(k.ready):(_.addEventListener("DOMContentLoaded",Q),r.addEventListener("load",Q));var ee=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===x(n))for(s in i=!0,n)ee(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,g(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(k(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},te=/^-ms-/,ne=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(te,"ms-").replace(ne,re)}var oe=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ae(){this.expando=k.expando+ae.uid++}ae.uid=1,ae.prototype={cache:function(e){var t=e[this.expando];return t||(t={},oe(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[ie(t)]=n;else for(r in t)i[ie(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in r?[t]:t.match(Y)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var se=new ae,le=new ae,ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ue=/[A-Z]/g;function he(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ue,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ce.test(e)?JSON.parse(e):e)}(n)}catch(e){}le.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return le.hasData(e)||se.hasData(e)},data:function(e,t,n){return le.access(e,t,n)},removeData:function(e,t){le.remove(e,t)},_data:function(e,t,n){return se.access(e,t,n)},_removeData:function(e,t){se.remove(e,t)}}),k.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=le.get(o),1===o.nodeType&&!se.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=ie(r.slice(5)),he(o,r,i[r]));se.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){le.set(this,e)})):ee(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=le.get(o,e))||void 0!==(n=he(o,e))?n:void 0;this.each((function(){le.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){le.remove(this,e)}))}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),n&&(!r||Array.isArray(n)?r=se.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){k.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return se.get(e,n)||se.access(e,n,{empty:k.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",n])}))})}}),k.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?k.queue(this[0],e):void 0===t?this:this.each((function(){var n=k.queue(this,e,t);k._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&k.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){k.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=se.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var de=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,pe=new RegExp("^(?:([+-])=|)("+de+")([a-z%]*)$","i"),fe=["Top","Right","Bottom","Left"],me=_.documentElement,ve=function(e){return k.contains(e.ownerDocument,e)},ge={composed:!0};me.getRootNode&&(ve=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ge)===e.ownerDocument});var ye=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ve(e)&&"none"===k.css(e,"display")};function _e(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},l=s(),c=n&&n[3]||(k.cssNumber[t]?"":"px"),u=e.nodeType&&(k.cssNumber[t]||"px"!==c&&+l)&&pe.exec(k.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)k.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,k.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var be={};function we(e){var t,n=e.ownerDocument,r=e.nodeName,i=be[r];return i||(t=n.body.appendChild(n.createElement(r)),i=k.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),be[r]=i,i)}function xe(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=se.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ye(r)&&(i[o]=we(r))):"none"!==n&&(i[o]="none",se.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}k.fn.extend({show:function(){return xe(this,!0)},hide:function(){return xe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ye(this)?k(this).show():k(this).hide()}))}});var Se,Ee,ke=/^(?:checkbox|radio)$/i,Te=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ae=/^$|^module$|\/(?:java|ecma)script/i;Se=_.createDocumentFragment().appendChild(_.createElement("div")),(Ee=_.createElement("input")).setAttribute("type","radio"),Ee.setAttribute("checked","checked"),Ee.setAttribute("name","t"),Se.appendChild(Ee),v.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue,Se.innerHTML="<option></option>",v.option=!!Se.lastChild;var Ce={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Me(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function Le(e,t){for(var n=0,r=e.length;n<r;n++)se.set(e[n],"globalEval",!t||se.get(t[n],"globalEval"))}Ce.tbody=Ce.tfoot=Ce.colgroup=Ce.caption=Ce.thead,Ce.th=Ce.td,v.option||(Ce.optgroup=Ce.option=[1,"<select multiple='multiple'>","</select>"]);var Re=/<|&#?\w+;/;function Pe(e,t,n,r,i){for(var o,a,s,l,c,u,h=t.createDocumentFragment(),d=[],p=0,f=e.length;p<f;p++)if((o=e[p])||0===o)if("object"===x(o))k.merge(d,o.nodeType?[o]:o);else if(Re.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(Te.exec(o)||["",""])[1].toLowerCase(),l=Ce[s]||Ce._default,a.innerHTML=l[1]+k.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;k.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",p=0;o=d[p++];)if(r&&k.inArray(o,r)>-1)i&&i.push(o);else if(c=ve(o),a=Me(h.appendChild(o),"script"),c&&Le(a),n)for(u=0;o=a[u++];)Ae.test(o.type||"")&&n.push(o);return h}var Ie=/^([^.]*)(?:\.(.+)|)/;function De(){return!0}function Oe(){return!1}function Fe(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Fe(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Oe;else if(!i)return e;return 1===o&&(a=i,i=function(e){return k().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=k.guid++)),e.each((function(){k.event.add(this,t,i,r,n)}))}function Ne(e,t,n){n?(se.set(e,t,!1),k.event.add(e,t,{namespace:!1,handler:function(e){var n,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(k.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),se.set(this,t,r),this[t](),n=se.get(this,t),se.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(se.set(this,t,k.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=De)}})):void 0===se.get(e,t)&&k.event.add(e,t,De)}k.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f,m,v=se.get(e);if(oe(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(me,i),n.guid||(n.guid=k.guid++),(l=v.events)||(l=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(t){return void 0!==k&&k.event.triggered!==t.type?k.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(Y)||[""]).length;c--;)p=m=(s=Ie.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p&&(h=k.event.special[p]||{},p=(i?h.delegateType:h.bindType)||p,h=k.event.special[p]||{},u=k.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:f.join(".")},o),(d=l[p])||((d=l[p]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,f,a)||e.addEventListener&&e.addEventListener(p,a)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),k.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,p,f,m,v=se.hasData(e)&&se.get(e);if(v&&(l=v.events)){for(c=(t=(t||"").match(Y)||[""]).length;c--;)if(p=m=(s=Ie.exec(t[c])||[])[1],f=(s[2]||"").split(".").sort(),p){for(h=k.event.special[p]||{},d=l[p=(r?h.delegateType:h.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)u=d[o],!i&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,f,v.handle)||k.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)k.event.remove(e,p+t[c],n,r,!0);k.isEmptyObject(l)&&se.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),l=k.event.fix(e),c=(se.get(this,"events")||Object.create(null))[l.type]||[],u=k.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=k.event.handlers.call(this,l,c),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?k(i,this).index(c)>-1:k.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(k.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ke.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click",!0),!1},trigger:function(e){var t=this||e;return ke.test(t.type)&&t.click&&A(t,"input")&&Ne(t,"click"),!0},_default:function(e){var t=e.target;return ke.test(t.type)&&t.click&&A(t,"input")&&se.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?De:Oe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Oe,isPropagationStopped:Oe,isImmediatePropagationStopped:Oe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=De,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=De,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=De,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(_.documentMode){var n=se.get(this,"handle"),r=k.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else k.event.simulate(t,e.target,k.event.fix(e))}k.event.special[e]={setup:function(){var r;if(Ne(this,e,!0),!_.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,n),se.set(this,t,(r||0)+1)},trigger:function(){return Ne(this,e),!0},teardown:function(){var e;if(!_.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,n),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},k.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,o=se.get(i,t);o||(_.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),se.set(i,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,o=se.get(i,t)-1;o?se.set(i,t,o):(_.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),se.remove(i,t))}}})),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){k.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||k.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}})),k.fn.extend({on:function(e,t,n,r){return Fe(this,e,t,n,r)},one:function(e,t,n,r){return Fe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Oe),this.each((function(){k.event.remove(this,e,n,t)}))}});var je=/<script|<style|<link/i,Be=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function ze(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Ge(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function He(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function qe(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(se.hasData(e)&&(s=se.get(e).events))for(i in se.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)k.event.add(t,i,s[i][n]);le.hasData(e)&&(o=le.access(e),a=k.extend({},o),le.set(t,a))}}function Ve(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ke.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function We(e,t,n,r){t=l(t);var i,o,a,s,c,u,h=0,d=e.length,p=d-1,f=t[0],m=g(f);if(m||d>1&&"string"==typeof f&&!v.checkClone&&Be.test(f))return e.each((function(i){var o=e.eq(i);m&&(t[0]=f.call(this,i,o.html())),We(o,t,n,r)}));if(d&&(o=(i=Pe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=k.map(Me(i,"script"),Ge)).length;h<d;h++)c=i,h!==p&&(c=k.clone(c,!0,!0),s&&k.merge(a,Me(c,"script"))),n.call(e[h],c,h);if(s)for(u=a[a.length-1].ownerDocument,k.map(a,He),h=0;h<s;h++)c=a[h],Ae.test(c.type||"")&&!se.access(c,"globalEval")&&k.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?k._evalUrl&&!c.noModule&&k._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):w(c.textContent.replace(Ue,""),c,u))}return e}function Ye(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(Me(r)),r.parentNode&&(n&&ve(r)&&Le(Me(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=ve(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=Me(s),r=0,i=(o=Me(e)).length;r<i;r++)Ve(o[r],a[r]);if(t)if(n)for(o=o||Me(e),a=a||Me(s),r=0,i=o.length;r<i;r++)qe(o[r],a[r]);else qe(e,s);return(a=Me(s,"script")).length>0&&Le(a,!l&&Me(e,"script")),s},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(oe(n)){if(t=n[se.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[se.expando]=void 0}n[le.expando]&&(n[le.expando]=void 0)}}}),k.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return ee(this,(function(e){return void 0===e?k.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ze(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ze(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(Me(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return k.clone(this,e,t)}))},html:function(e){return ee(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!je.test(e)&&!Ce[(Te.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(Me(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var n=this.parentNode;k.inArray(this,e)<0&&(k.cleanData(Me(this)),n&&n.replaceChild(t,this))}),e)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){k.fn[e]=function(e){for(var n,r=[],i=k(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),k(i[a])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var Xe=new RegExp("^("+de+")(?!px)[a-z%]+$","i"),Ke=/^--/,$e=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=r),t.getComputedStyle(e)},Je=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ze=new RegExp(fe.join("|"),"i");function Qe(e,t,n){var r,i,o,a,s=Ke.test(t),l=e.style;return(n=n||$e(e))&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(P,"$1")||void 0),""!==a||ve(e)||(a=k.style(e,t)),!v.pixelBoxStyles()&&Xe.test(a)&&Ze.test(t)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==a?a+"":a}function et(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",me.appendChild(c).appendChild(u);var e=r.getComputedStyle(u);n="1%"!==e.top,l=12===t(e.marginLeft),u.style.right="60%",a=36===t(e.right),i=36===t(e.width),u.style.position="absolute",o=12===t(u.offsetWidth/3),me.removeChild(c),u=null}}function t(e){return Math.round(parseFloat(e))}var n,i,o,a,s,l,c=_.createElement("div"),u=_.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,i;return null==s&&(e=_.createElement("table"),t=_.createElement("tr"),n=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="box-sizing:content-box;border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",me.appendChild(e).appendChild(t).appendChild(n),i=r.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,me.removeChild(e)),s}}))}();var tt=["Webkit","Moz","ms"],nt=_.createElement("div").style,rt={};function it(e){return k.cssProps[e]||rt[e]||(e in nt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=tt.length;n--;)if((e=tt[n]+t)in nt)return e}(e)||e)}var ot=/^(none|table(?!-c[ea]).+)/,at={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function lt(e,t,n){var r=pe.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ct(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=k.css(e,n+fe[a],!0,i)),r?("content"===n&&(l-=k.css(e,"padding"+fe[a],!0,i)),"margin"!==n&&(l-=k.css(e,"border"+fe[a]+"Width",!0,i))):(l+=k.css(e,"padding"+fe[a],!0,i),"padding"!==n?l+=k.css(e,"border"+fe[a]+"Width",!0,i):s+=k.css(e,"border"+fe[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l+c}function ut(e,t,n){var r=$e(e),i=(!v.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=Qe(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Xe.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+ct(e,t,n||(i?"border":"content"),o,r,a)+"px"}function ht(e,t,n,r,i){return new ht.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ie(t),l=Ke.test(t),c=e.style;if(l||(t=it(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"==(o=typeof n)&&(i=pe.exec(n))&&i[1]&&(n=_e(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=ie(t);return Ke.test(t)||(t=it(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=Qe(e,t,r)),"normal"===i&&t in st&&(i=st[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],(function(e,t){k.cssHooks[t]={get:function(e,n,r){if(n)return!ot.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ut(e,t,r):Je(e,at,(function(){return ut(e,t,r)}))},set:function(e,n,r){var i,o=$e(e),a=!v.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===k.css(e,"boxSizing",!1,o),l=r?ct(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ct(e,t,"border",!1,o)-.5)),l&&(i=pe.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=k.css(e,t)),lt(0,n,l)}}})),k.cssHooks.marginLeft=et(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-Je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),k.each({margin:"",padding:"",border:"Width"},(function(e,t){k.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+fe[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(k.cssHooks[e+t].set=lt)})),k.fn.extend({css:function(e,t){return ee(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=$e(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)}),e,t,arguments.length>1)}}),k.Tween=ht,ht.prototype={constructor:ht,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=ht.propHooks[this.prop];return e&&e.get?e.get(this):ht.propHooks._default.get(this)},run:function(e){var t,n=ht.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ht.propHooks._default.set(this),this}},ht.prototype.init.prototype=ht.prototype,ht.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}},ht.propHooks.scrollTop=ht.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=ht.prototype.init,k.fx.step={};var dt,pt,ft=/^(?:toggle|show|hide)$/,mt=/queueHooks$/;function vt(){pt&&(!1===_.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(vt):r.setTimeout(vt,k.fx.interval),k.fx.tick())}function gt(){return r.setTimeout((function(){dt=void 0})),dt=Date.now()}function yt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=fe[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function _t(e,t,n){for(var r,i=(bt.tweeners[t]||[]).concat(bt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function bt(e,t,n){var r,i,o=0,a=bt.prefilters.length,s=k.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=dt||gt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:k.extend({},t),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},n),originalProperties:t,originalOptions:n,startTime:dt||gt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=k.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=ie(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=bt.prefilters[o].call(c,e,u,c.opts))return g(r.stop)&&(k._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return k.map(u,_t,c),g(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),k.fx.timer(k.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}k.Animation=k.extend(bt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return _e(n.elem,e,pe.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(Y);for(var n,r=0,i=e.length;r<i;r++)n=e[r],bt.tweeners[n]=bt.tweeners[n]||[],bt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,c,u,h="width"in t||"height"in t,d=this,p={},f=e.style,m=e.nodeType&&ye(e),v=se.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],ft.test(i)){if(delete t[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;m=!0}p[r]=v&&v[r]||k.style(e,r)}if((l=!k.isEmptyObject(t))||!k.isEmptyObject(p))for(r in h&&1===e.nodeType&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],null==(c=v&&v.display)&&(c=se.get(e,"display")),"none"===(u=k.css(e,"display"))&&(c?u=c:(xe([e],!0),c=e.style.display||c,u=k.css(e,"display"),xe([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===k.css(e,"float")&&(l||(d.done((function(){f.display=c})),null==c&&(u=f.display,c="none"===u?"":u)),f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always((function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}))),l=!1,p)l||(v?"hidden"in v&&(m=v.hidden):v=se.access(e,"fxshow",{display:c}),o&&(v.hidden=!m),m&&xe([e],!0),d.done((function(){for(r in m||xe([e]),se.remove(e,"fxshow"),p)k.style(e,r,p[r])}))),l=_t(m?v[r]:0,r,d),r in v||(v[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?bt.prefilters.unshift(e):bt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ye).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=k.isEmptyObject(e),o=k.speed(t,n,r),a=function(){var t=bt(this,k.extend({},e),o);(i||se.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=k.timers,a=se.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&mt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||k.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=se.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=k.timers,a=r?r.length:0;for(n.finish=!0,k.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),k.each(["toggle","show","hide"],(function(e,t){var n=k.fn[t];k.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(yt(t,!0),e,r,i)}})),k.each({slideDown:yt("show"),slideUp:yt("hide"),slideToggle:yt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){k.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(dt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),dt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){pt||(pt=!0,vt())},k.fx.stop=function(){pt=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(e,t){return e=k.fx&&k.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var i=r.setTimeout(t,e);n.stop=function(){r.clearTimeout(i)}}))},function(){var e=_.createElement("input"),t=_.createElement("select").appendChild(_.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=_.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var wt,xt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return ee(this,k.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){k.removeAttr(this,e)}))}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?wt:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Y);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),wt={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=xt[t]||k.find.attr;xt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=xt[a],xt[a]=i,i=null!=n(e,t,r)?a:null,xt[a]=o),i}}));var St=/^(?:input|select|textarea|button)$/i,Et=/^(?:a|area)$/i;function kt(e){return(e.match(Y)||[]).join(" ")}function Tt(e){return e.getAttribute&&e.getAttribute("class")||""}function At(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(Y)||[]}k.fn.extend({prop:function(e,t){return ee(this,k.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[k.propFix[e]||e]}))}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||Et.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){k.propFix[this.toLowerCase()]=this})),k.fn.extend({addClass:function(e){var t,n,r,i,o,a;return g(e)?this.each((function(t){k(this).addClass(e.call(this,t,Tt(this)))})):(t=At(e)).length?this.each((function(){if(r=Tt(this),n=1===this.nodeType&&" "+kt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=kt(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,i,o,a;return g(e)?this.each((function(t){k(this).removeClass(e.call(this,t,Tt(this)))})):arguments.length?(t=At(e)).length?this.each((function(){if(r=Tt(this),n=1===this.nodeType&&" "+kt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=kt(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return g(e)?this.each((function(n){k(this).toggleClass(e.call(this,n,Tt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=At(e),this.each((function(){if(s)for(o=k(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||((r=Tt(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+kt(Tt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Ct=/\r/g;k.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=g(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,k(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=k.map(i,(function(e){return null==e?"":e+""}))),(t=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=k.valHooks[i.type]||k.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(Ct,""):null==n?"":n:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:kt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=k.makeArray(t),a=i.length;a--;)((r=i[a]).selected=k.inArray(k.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],(function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=k.inArray(k(e).val(),t)>-1}},v.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Mt=r.location,Lt={guid:Date.now()},Rt=/\?/;k.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new r.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||k.error("Invalid XML: "+(n?k.map(n.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Pt=/^(?:focusinfocus|focusoutblur)$/,It=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,i){var o,a,s,l,c,u,h,d,f=[n||_],m=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(a=d=s=n=n||_,3!==n.nodeType&&8!==n.nodeType&&!Pt.test(m+k.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[k.expando]?e:new k.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),h=k.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(n,t))){if(!i&&!h.noBubble&&!y(n)){for(l=h.delegateType||m,Pt.test(l+m)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(n.ownerDocument||_)&&f.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=f[o++])&&!e.isPropagationStopped();)d=a,e.type=o>1?l:h.bindType||m,(u=(se.get(a,"events")||Object.create(null))[e.type]&&se.get(a,"handle"))&&u.apply(a,t),(u=c&&a[c])&&u.apply&&oe(a)&&(e.result=u.apply(a,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),t)||!oe(n)||c&&g(n[m])&&!y(n)&&((s=n[c])&&(n[c]=null),k.event.triggered=m,e.isPropagationStopped()&&d.addEventListener(m,It),n[m](),e.isPropagationStopped()&&d.removeEventListener(m,It),k.event.triggered=void 0,s&&(n[c]=s)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each((function(){k.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}});var Dt=/\[\]$/,Ot=/\r?\n/g,Ft=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;function jt(e,t,n,r){var i;if(Array.isArray(t))k.each(t,(function(t,i){n||Dt.test(e)?r(e,i):jt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==x(t))r(e,t);else for(i in t)jt(e+"["+i+"]",t[i],n,r)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=g(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,(function(){i(this.name,this.value)}));else for(n in e)jt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&Nt.test(this.nodeName)&&!Ft.test(e)&&(this.checked||!ke.test(e))})).map((function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Bt=/%20/g,Ut=/#.*$/,zt=/([?&])_=[^&]*/,Gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ht=/^(?:GET|HEAD)$/,qt=/^\/\//,Vt={},Wt={},Yt="*/".concat("*"),Xt=_.createElement("a");function Kt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Y)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function $t(e,t,n,r){var i={},o=e===Wt;function a(s){var l;return i[s]=!0,k.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Jt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Xt.href=Mt.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Mt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Yt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Jt(Jt(e,k.ajaxSettings),t):Jt(k.ajaxSettings,e)},ajaxPrefilter:Kt(Vt),ajaxTransport:Kt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,i,o,a,s,l,c,u,h,d,p=k.ajaxSetup({},t),f=p.context||p,m=p.context&&(f.nodeType||f.jquery)?k(f):k.event,v=k.Deferred(),g=k.Callbacks("once memory"),y=p.statusCode||{},b={},w={},x="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Gt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||x;return n&&n.abort(t),E(0,t),this}};if(v.promise(S),p.url=((e||p.url||Mt.href)+"").replace(qt,Mt.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(Y)||[""],null==p.crossDomain){l=_.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Xt.protocol+"//"+Xt.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=k.param(p.data,p.traditional)),$t(Vt,p,t,S),c)return S;for(h in(u=k.event&&p.global)&&0==k.active++&&k.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ht.test(p.type),i=p.url.replace(Ut,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Bt,"+")):(d=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Rt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(zt,"$1"),d=(Rt.test(i)?"&":"?")+"_="+Lt.guid+++d),p.url=i+d),p.ifModified&&(k.lastModified[i]&&S.setRequestHeader("If-Modified-Since",k.lastModified[i]),k.etag[i]&&S.setRequestHeader("If-None-Match",k.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Yt+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||c))return S.abort();if(x="abort",g.add(p.complete),S.done(p.success),S.fail(p.error),n=$t(Wt,p,t,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,p]),c)return S;p.async&&p.timeout>0&&(s=r.setTimeout((function(){S.abort("timeout")}),p.timeout));try{c=!1,n.send(b,E)}catch(e){if(c)throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,t,a,l){var h,d,_,b,w,x=t;c||(c=!0,s&&r.clearTimeout(s),n=void 0,o=l||"",S.readyState=e>0?4:0,h=e>=200&&e<300||304===e,a&&(b=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(p,S,a)),!h&&k.inArray("script",p.dataTypes)>-1&&k.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),b=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(p,b,S,h),h?(p.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(k.lastModified[i]=w),(w=S.getResponseHeader("etag"))&&(k.etag[i]=w)),204===e||"HEAD"===p.type?x="nocontent":304===e?x="notmodified":(x=b.state,d=b.data,h=!(_=b.error))):(_=x,!e&&x||(x="error",e<0&&(e=0))),S.status=e,S.statusText=(t||x)+"",h?v.resolveWith(f,[d,x,S]):v.rejectWith(f,[S,x,_]),S.statusCode(y),y=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,p,h?d:_]),g.fireWith(f,[S,x]),u&&(m.trigger("ajaxComplete",[S,p]),--k.active||k.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],(function(e,t){k[t]=function(e,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),k.ajax(k.extend({url:e,type:t,dataType:i,data:n,success:r},k.isPlainObject(e)&&e))}})),k.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),k._evalUrl=function(e,t,n){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t,n)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){k(this).wrapInner(e.call(this,t))})):this.each((function(){var t=k(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){k(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){k(this).replaceWith(this.childNodes)})),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(e){}};var Zt={0:200,1223:204},Qt=k.ajaxSettings.xhr();v.cors=!!Qt&&"withCredentials"in Qt,v.ajax=Qt=!!Qt,k.ajaxTransport((function(e){var t,n;if(v.cors||Qt&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Zt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),k.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),k.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=k("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var en,tn=[],nn=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||k.expando+"_"+Lt.guid++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",(function(e,t,n){var i,o,a,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+i):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||k.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?k(r).removeProp(i):r[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,tn.push(i)),a&&g(o)&&o(a[0]),a=o=void 0})),"script"})),v.createHTMLDocument=((en=_.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===en.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=_.implementation.createHTMLDocument("")).createElement("base")).href=_.location.href,t.head.appendChild(r)):t=_),o=!n&&[],(i=U.exec(e))?[t.createElement(i[1])]:(i=Pe([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=kt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},k.expr.pseudos.animated=function(e){return k.grep(k.timers,(function(t){return e===t.elem})).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=k.css(e,"position"),u=k(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=k.css(e,"top"),l=k.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),g(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):u.css(h)}},k.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){k.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===k.css(e,"position");)e=e.offsetParent;return e||me}))}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;k.fn[e]=function(r){return ee(this,(function(e,r,i){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),k.each(["top","left"],(function(e,t){k.cssHooks[t]=et(v.pixelPosition,(function(e,n){if(n)return n=Qe(e,t),Xe.test(n)?k(e).position()[t]+"px":n}))})),k.each({Height:"height",Width:"width"},(function(e,t){k.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){k.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return ee(this,(function(t,n,i){var o;return y(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?k.css(t,n,s):k.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){k.fn[t]=function(e){return this.on(t,e)}})),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){k.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return r=s.call(arguments,2),i=function(){return e.apply(t||this,r.concat(s.call(arguments)))},i.guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=g,k.isWindow=y,k.camelCase=ie,k.type=x,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},k.trim=function(e){return null==e?"":(e+"").replace(rn,"$1")},void 0===(n=function(){return k}.apply(t,[]))||(e.exports=n);var on=r.jQuery,an=r.$;return k.noConflict=function(e){return r.$===k&&(r.$=an),e&&r.jQuery===k&&(r.jQuery=on),k},void 0===i&&(r.jQuery=r.$=k),k}))},915:e=>{"use strict";var t="bfred-it:object-fit-images",n=/(object-fit|object-position)\s*:\s*([-.\w\s%]+)/g,r="undefined"==typeof Image?{style:{"object-position":1}}:new Image,i="object-fit"in r.style,o="object-position"in r.style,a="background-size"in r.style,s="string"==typeof r.currentSrc,l=r.getAttribute,c=r.setAttribute,u=!1;function h(e,t,n){var r="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='"+(t||1)+"' height='"+(n||0)+"'%3E%3C/svg%3E";l.call(e,"src")!==r&&c.call(e,"src",r)}function d(e,t){e.naturalWidth?t(e):setTimeout(d,100,e,t)}function p(e){var r=function(e){for(var t,r=getComputedStyle(e).fontFamily,i={};null!==(t=n.exec(r));)i[t[1]]=t[2];return i}(e),o=e[t];if(r["object-fit"]=r["object-fit"]||"fill",!o.img){if("fill"===r["object-fit"])return;if(!o.skipTest&&i&&!r["object-position"])return}if(!o.img){o.img=new Image(e.width,e.height),o.img.srcset=l.call(e,"data-ofi-srcset")||e.srcset,o.img.src=l.call(e,"data-ofi-src")||e.src,c.call(e,"data-ofi-src",e.src),e.srcset&&c.call(e,"data-ofi-srcset",e.srcset),h(e,e.naturalWidth||e.width,e.naturalHeight||e.height),e.srcset&&(e.srcset="");try{!function(e){var n={get:function(n){return e[t].img[n||"src"]},set:function(n,r){return e[t].img[r||"src"]=n,c.call(e,"data-ofi-"+r,n),p(e),n}};Object.defineProperty(e,"src",n),Object.defineProperty(e,"currentSrc",{get:function(){return n.get("currentSrc")}}),Object.defineProperty(e,"srcset",{get:function(){return n.get("srcset")},set:function(e){return n.set(e,"srcset")}})}(e)}catch(e){window.console&&console.warn("https://bit.ly/ofi-old-browser")}}!function(e){if(e.srcset&&!s&&window.picturefill){var t=window.picturefill._;e[t.ns]&&e[t.ns].evaled||t.fillImg(e,{reselect:!0}),e[t.ns].curSrc||(e[t.ns].supported=!1,t.fillImg(e,{reselect:!0})),e.currentSrc=e[t.ns].curSrc||e.src}}(o.img),e.style.backgroundImage='url("'+(o.img.currentSrc||o.img.src).replace(/"/g,'\\"')+'")',e.style.backgroundPosition=r["object-position"]||"center",e.style.backgroundRepeat="no-repeat",e.style.backgroundOrigin="content-box",/scale-down/.test(r["object-fit"])?d(o.img,(function(){o.img.naturalWidth>e.width||o.img.naturalHeight>e.height?e.style.backgroundSize="contain":e.style.backgroundSize="auto"})):e.style.backgroundSize=r["object-fit"].replace("none","auto").replace("fill","100% 100%"),d(o.img,(function(t){h(e,t.naturalWidth,t.naturalHeight)}))}function f(e,n){var r=!u&&!e;if(n=n||{},e=e||"img",o&&!n.skipTest||!a)return!1;"img"===e?e=document.getElementsByTagName("img"):"string"==typeof e?e=document.querySelectorAll(e):"length"in e||(e=[e]);for(var i=0;i<e.length;i++)e[i][t]=e[i][t]||{skipTest:n.skipTest},p(e[i]);r&&(document.body.addEventListener("load",(function(e){"IMG"===e.target.tagName&&f(e.target,{skipTest:n.skipTest})}),!0),u=!0,e="img"),n.watchMQ&&window.addEventListener("resize",f.bind(null,e,{skipTest:n.skipTest}))}f.supportsObjectFit=i,f.supportsObjectPosition=o,function(){function e(e,n){return e[t]&&e[t].img&&("src"===n||"srcset"===n)?e[t].img:e}o||(HTMLImageElement.prototype.getAttribute=function(t){return l.call(e(this,t),t)},HTMLImageElement.prototype.setAttribute=function(t,n){return c.call(e(this,t),t,String(n))})}(),e.exports=f},1111:(e,t,n)=>{"use strict";n.d(t,{c:()=>c});var r=n(2968),i=n(3089),o=n(6708),a=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function s(e){return e}var l=n(1732),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var a=this.operator,s=function(e,t,n){if(e){if(e instanceof r.v)return e;if(e[i.D])return e[i.D]()}return e||t||n?new r.v(e,t,n):new r.v(o.I)}(e,t,n);if(a?s.add(a.call(s,this.source)):s.add(this.source||l.$.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),l.$.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){l.$.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,i=t.destination,o=t.isStopped;if(n||o)return!1;e=i&&i instanceof r.v?i:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=u(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0===(n=e).length?s:1===n.length?n[0]:function(e){return n.reduce((function(e,t){return t(e)}),e)})(this);var n},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=l.$.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6708:(e,t,n)=>{"use strict";n.d(t,{I:()=>o});var r=n(1732),i=n(9199),o={closed:!0,next:function(e){},error:function(e){if(r.$.useDeprecatedSynchronousErrorHandling)throw e;(0,i.T)(e)},complete:function(){}}},6988:(e,t,n)=>{"use strict";n.d(t,{B7:()=>h});var r=n(5215),i=n(1111),o=n(2968),a=n(348),s=n(731),l=n(293),c=n(3089),u=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.C6(t,e),t}(o.v),h=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.C6(t,e),t.prototype[c.D]=function(){return new u(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.P;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.P;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.P;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.P;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.P;return this.hasError?(e.error(this.thrownError),a.y.EMPTY):this.isStopped?(e.complete(),a.y.EMPTY):(this.observers.push(e),new l.Y(this,e))},t.prototype.asObservable=function(){var e=new i.c;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.c),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.C6(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.y.EMPTY},t}(h)},293:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var r=n(5215),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.C6(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n(348).y)},2968:(e,t,n)=>{"use strict";n.d(t,{v:()=>u});var r=n(5215),i=n(9029),o=n(6708),a=n(348),s=n(3089),l=n(1732),c=n(9199),u=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.I;break;case 1:if(!n){a.destination=o.I;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return r.C6(t,e),t.prototype[s.D]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(a.y),h=function(e){function t(t,n,r,a){var s,l=e.call(this)||this;l._parentSubscriber=t;var c=l;return(0,i.T)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.I&&(c=Object.create(n),(0,i.T)(c.unsubscribe)&&l.add(c.unsubscribe.bind(c)),c.unsubscribe=l.unsubscribe.bind(l))),l._context=c,l._next=s,l._error=r,l._complete=a,l}return r.C6(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;l.$.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=l.$.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.T)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.T)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};l.$.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),l.$.useDeprecatedSynchronousErrorHandling)throw e;(0,c.T)(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!l.$.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return l.$.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):((0,c.T)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},348:(e,t,n)=>{"use strict";n.d(t,{y:()=>a});var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}(),i=n(9029),o=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),a=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n,a=this,l=a._parentOrParents,c=a._ctorUnsubscribe,u=a._unsubscribe,h=a._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,l instanceof e)l.remove(this);else if(null!==l)for(var d=0;d<l.length;++d)l[d].remove(this);if((0,i.T)(u)){c&&(this._unsubscribe=void 0);try{u.call(this)}catch(e){t=e instanceof o?s(e.errors):[e]}}if(r(h)){d=-1;for(var p=h.length;++d<p;){var f=h[d];if(null!==(n=f)&&"object"==typeof n)try{f.unsubscribe()}catch(e){t=t||[],e instanceof o?t=t.concat(s(e.errors)):t.push(e)}}}if(t)throw new o(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function s(e){return e.reduce((function(e,t){return e.concat(t instanceof o?t.errors:t)}),[])}},1732:(e,t,n)=>{"use strict";n.d(t,{$:()=>i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},3089:(e,t,n)=>{"use strict";n.d(t,{D:()=>r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},731:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},9199:(e,t,n)=>{"use strict";function r(e){setTimeout((function(){throw e}),0)}n.d(t,{T:()=>r})},9029:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{T:()=>r})},6019:e=>{e.exports={ScrollMagicPluginGsap:function(e,t,n){var r=t,i="animation.gsap",o=window.console||{},a=Function.prototype.bind.call(o.error||o.log||function(){},o);e||a("("+i+") -> ERROR: The ScrollMagic main module could not be found. Please make sure it's loaded before this plugin or use an asynchronous loader like requirejs."),r||a("("+i+") -> ERROR: TweenLite or TweenMax could not be found. Please make sure GSAP is loaded before ScrollMagic or use an asynchronous loader like requirejs."),e.Scene.addOption("tweenChanges",!1,(function(e){return!!e})),e.Scene.extend((function(){var e,t=this,o=function(){t._log&&(Array.prototype.splice.call(arguments,1,0,"("+i+")","->"),t._log.apply(this,arguments))};t.on("progress.plugin_gsap",(function(){a()})),t.on("destroy.plugin_gsap",(function(e){t.removeTween(e.reset)}));var a=function(){if(e){var n=t.progress(),r=t.state();e.repeat&&-1===e.repeat()?"DURING"===r&&e.paused()?e.play():"DURING"===r||e.paused()||e.pause():n!=e.progress()&&(0===t.duration()?n>0?e.play():e.reverse():t.tweenChanges()&&e.tweenTo?e.tweenTo(n*e.duration()):e.progress(n).pause())}};t.setTween=function(i,s,l){var c;arguments.length>1&&(arguments.length<3&&(l=s,s=1),i=r.to(i,s,l));try{(c=n?new n({smoothChildTiming:!0}).add(i):i).pause()}catch(e){return o(1,"ERROR calling method 'setTween()': Supplied argument is not a valid TweenObject"),t}if(e&&t.removeTween(),e=c,i.repeat&&-1===i.repeat()&&(e.repeat(-1),e.yoyo(i.yoyo())),t.tweenChanges()&&!e.tweenTo&&o(2,"WARNING: tweenChanges will only work if the TimelineMax object is available for ScrollMagic."),e&&t.controller()&&t.triggerElement()&&t.loglevel()>=2){var u=r.getTweensOf(t.triggerElement()),h=t.controller().info("vertical");u.forEach((function(e,t){var n=e.vars.css||e.vars;if(h?void 0!==n.top||void 0!==n.bottom:void 0!==n.left||void 0!==n.right)return o(2,"WARNING: Tweening the position of the trigger element affects the scene timing and should be avoided!"),!1}))}if(parseFloat(r.version)>=1.14)for(var d,p,f=e.getChildren?e.getChildren(!0,!0,!1):[e],m=function(){o(2,"WARNING: tween was overwritten by another. To learn how to avoid this issue see here: https://github.com/janpaepke/ScrollMagic/wiki/WARNING:-tween-was-overwritten-by-another")},v=0;v<f.length;v++)d=f[v],p!==m&&(p=d.vars.onOverwrite,d.vars.onOverwrite=function(){p&&p.apply(this,arguments),m.apply(this,arguments)});return o(3,"added tween"),a(),t},t.removeTween=function(n){return e&&(n&&e.progress(0).pause(),e.kill(),e=void 0,o(3,"removed tween (reset: "+(n?"true":"false")+")")),t}}))}}},2131:function(e,t,n){var r,i;r=function(){"use strict";var e=function(){i.log(2,"(COMPATIBILITY NOTICE) -> As of ScrollMagic 2.0.0 you need to use 'new ScrollMagic.Controller()' to create a new controller instance. Use 'new ScrollMagic.Scene()' to instance a scene.")};e.version="2.0.8","undefined"!=typeof window&&window.addEventListener("mousewheel",void 0);var t="data-scrollmagic-pin-spacer";e.Controller=function(r){var o,a,s="ScrollMagic.Controller",l="REVERSE",c="PAUSED",u=n.defaults,h=this,d=i.extend({},u,r),p=[],f=!1,m=0,v=c,g=!0,y=0,_=!0,b=function(){d.refreshInterval>0&&(a=window.setTimeout(A,d.refreshInterval))},w=function(){return d.vertical?i.get.scrollTop(d.container):i.get.scrollLeft(d.container)},x=function(){return d.vertical?i.get.height(d.container):i.get.width(d.container)},S=this._setScrollPos=function(e){d.vertical?g?window.scrollTo(i.get.scrollLeft(),e):d.container.scrollTop=e:g?window.scrollTo(e,i.get.scrollTop()):d.container.scrollLeft=e},E=function(){if(_&&f){var e=i.type.Array(f)?f:p.slice(0);f=!1;var t=m,n=(m=h.scrollPos())-t;0!==n&&(v=n>0?"FORWARD":l),v===l&&e.reverse(),e.forEach((function(t,n){C(3,"updating Scene "+(n+1)+"/"+e.length+" ("+p.length+" total)"),t.update(!0)})),0===e.length&&d.loglevel>=3&&C(3,"updating 0 Scenes (nothing added to controller)")}},k=function(){o=i.rAF(E)},T=function(e){C(3,"event fired causing an update:",e.type),"resize"==e.type&&(y=x(),v=c),!0!==f&&(f=!0,k())},A=function(){if(!g&&y!=x()){var e;try{e=new Event("resize",{bubbles:!1,cancelable:!1})}catch(t){(e=document.createEvent("Event")).initEvent("resize",!1,!1)}d.container.dispatchEvent(e)}p.forEach((function(e,t){e.refresh()})),b()},C=this._log=function(e,t){d.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+s+") ->"),i.log.apply(window,arguments))};this._options=d;var M=function(e){if(e.length<=1)return e;var t=e.slice(0);return t.sort((function(e,t){return e.scrollOffset()>t.scrollOffset()?1:-1})),t};return this.addScene=function(t){if(i.type.Array(t))t.forEach((function(e,t){h.addScene(e)}));else if(t instanceof e.Scene){if(t.controller()!==h)t.addTo(h);else if(p.indexOf(t)<0){for(var n in p.push(t),p=M(p),t.on("shift.controller_sort",(function(){p=M(p)})),d.globalSceneOptions)t[n]&&t[n].call(t,d.globalSceneOptions[n]);C(3,"adding Scene (now "+p.length+" total)")}}else C(1,"ERROR: invalid argument supplied for '.addScene()'");return h},this.removeScene=function(e){if(i.type.Array(e))e.forEach((function(e,t){h.removeScene(e)}));else{var t=p.indexOf(e);t>-1&&(e.off("shift.controller_sort"),p.splice(t,1),C(3,"removing Scene (now "+p.length+" left)"),e.remove())}return h},this.updateScene=function(t,n){return i.type.Array(t)?t.forEach((function(e,t){h.updateScene(e,n)})):n?t.update(!0):!0!==f&&t instanceof e.Scene&&(-1==(f=f||[]).indexOf(t)&&f.push(t),f=M(f),k()),h},this.update=function(e){return T({type:"resize"}),e&&E(),h},this.scrollTo=function(n,r){if(i.type.Number(n))S.call(d.container,n,r);else if(n instanceof e.Scene)n.controller()===h?h.scrollTo(n.scrollOffset(),r):C(2,"scrollTo(): The supplied scene does not belong to this controller. Scroll cancelled.",n);else if(i.type.Function(n))S=n;else{var o=i.get.elements(n)[0];if(o){for(;o.parentNode.hasAttribute(t);)o=o.parentNode;var a=d.vertical?"top":"left",s=i.get.offset(d.container),l=i.get.offset(o);g||(s[a]-=h.scrollPos()),h.scrollTo(l[a]-s[a],r)}else C(2,"scrollTo(): The supplied argument is invalid. Scroll cancelled.",n)}return h},this.scrollPos=function(e){return arguments.length?(i.type.Function(e)?w=e:C(2,"Provided value for method 'scrollPos' is not a function. To change the current scroll position use 'scrollTo()'."),h):w.call(h)},this.info=function(e){var t={size:y,vertical:d.vertical,scrollPos:m,scrollDirection:v,container:d.container,isDocument:g};return arguments.length?void 0!==t[e]?t[e]:void C(1,'ERROR: option "'+e+'" is not available'):t},this.loglevel=function(e){return arguments.length?(d.loglevel!=e&&(d.loglevel=e),h):d.loglevel},this.enabled=function(e){return arguments.length?(_!=e&&(_=!!e,h.updateScene(p,!0)),h):_},this.destroy=function(e){window.clearTimeout(a);for(var t=p.length;t--;)p[t].destroy(e);return d.container.removeEventListener("resize",T),d.container.removeEventListener("scroll",T),i.cAF(o),C(3,"destroyed "+s+" (reset: "+(e?"true":"false")+")"),null},function(){for(var t in d)u.hasOwnProperty(t)||(C(2,'WARNING: Unknown option "'+t+'"'),delete d[t]);if(d.container=i.get.elements(d.container)[0],!d.container)throw C(1,"ERROR creating object "+s+": No valid scroll container supplied"),s+" init failed.";(g=d.container===window||d.container===document.body||!document.body.contains(d.container))&&(d.container=window),y=x(),d.container.addEventListener("resize",T),d.container.addEventListener("scroll",T);var n=parseInt(d.refreshInterval,10);d.refreshInterval=i.type.Number(n)?n:u.refreshInterval,b(),C(3,"added new "+s+" controller (v"+e.version+")")}(),h};var n={defaults:{container:window,vertical:!0,globalSceneOptions:{},loglevel:2,refreshInterval:100}};e.Controller.addOption=function(e,t){n.defaults[e]=t},e.Controller.extend=function(t){var n=this;e.Controller=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Controller,n),e.Controller.prototype=n.prototype,e.Controller.prototype.constructor=e.Controller},e.Scene=function(n){var o,a,s="ScrollMagic.Scene",l="BEFORE",c="DURING",u="AFTER",h=r.defaults,d=this,p=i.extend({},h,n),f=l,m=0,v={start:0,end:0},g=0,y=!0,_={};this.on=function(e,t){return i.type.Function(t)?(e=e.trim().split(" ")).forEach((function(e){var n=e.split("."),r=n[0],i=n[1];"*"!=r&&(_[r]||(_[r]=[]),_[r].push({namespace:i||"",callback:t}))})):b(1,"ERROR when calling '.on()': Supplied callback for '"+e+"' is not a valid function!"),d},this.off=function(e,t){return e?((e=e.trim().split(" ")).forEach((function(e,n){var r=e.split("."),i=r[0],o=r[1]||"";("*"===i?Object.keys(_):[i]).forEach((function(e){for(var n=_[e]||[],r=n.length;r--;){var i=n[r];!i||o!==i.namespace&&"*"!==o||t&&t!=i.callback||n.splice(r,1)}n.length||delete _[e]}))})),d):(b(1,"ERROR: Invalid event name supplied."),d)},this.trigger=function(t,n){if(t){var r=t.trim().split("."),i=r[0],o=r[1],a=_[i];b(3,"event fired:",i,n?"->":"",n||""),a&&a.forEach((function(t,r){o&&o!==t.namespace||t.callback.call(d,new e.Event(i,t.namespace,d,n))}))}else b(1,"ERROR: Invalid event name supplied.");return d},d.on("change.internal",(function(e){"loglevel"!==e.what&&"tweenChanges"!==e.what&&("triggerElement"===e.what?k():"reverse"===e.what&&d.update())})).on("shift.internal",(function(e){S(),d.update()}));var b=this._log=function(e,t){p.loglevel>=e&&(Array.prototype.splice.call(arguments,1,0,"("+s+") ->"),i.log.apply(window,arguments))};this.addTo=function(t){return t instanceof e.Controller?a!=t&&(a&&a.removeScene(d),a=t,C(),E(!0),k(!0),S(),a.info("container").addEventListener("resize",T),t.addScene(d),d.trigger("add",{controller:a}),b(3,"added "+s+" to controller"),d.update()):b(1,"ERROR: supplied argument of 'addTo()' is not a valid ScrollMagic Controller"),d},this.enabled=function(e){return arguments.length?(y!=e&&(y=!!e,d.update(!0)),d):y},this.remove=function(){if(a){a.info("container").removeEventListener("resize",T);var e=a;a=void 0,e.removeScene(d),d.trigger("remove"),b(3,"removed "+s+" from controller")}return d},this.destroy=function(e){return d.trigger("destroy",{reset:e}),d.remove(),d.off("*.*"),b(3,"destroyed "+s+" (reset: "+(e?"true":"false")+")"),null},this.update=function(e){if(a)if(e)if(a.enabled()&&y){var t,n=a.info("scrollPos");t=p.duration>0?(n-v.start)/(v.end-v.start):n>=v.start?1:0,d.trigger("update",{startPos:v.start,endPos:v.end,scrollPos:n}),d.progress(t)}else w&&f===c&&R(!0);else a.updateScene(d,!1);return d},this.refresh=function(){return E(),k(),d},this.progress=function(e){if(arguments.length){var t=!1,n=f,r=a?a.info("scrollDirection"):"PAUSED",i=p.reverse||e>=m;if(0===p.duration?(t=m!=e,f=0==(m=e<1&&i?0:1)?l:c):e<0&&f!==l&&i?(m=0,f=l,t=!0):e>=0&&e<1&&i?(m=e,f=c,t=!0):e>=1&&f!==u?(m=1,f=u,t=!0):f!==c||i||R(),t){var o={progress:m,state:f,scrollDirection:r},s=f!=n,h=function(e){d.trigger(e,o)};s&&n!==c&&(h("enter"),h(n===l?"start":"end")),h("progress"),s&&f!==c&&(h(f===l?"start":"end"),h("leave"))}return d}return m};var w,x,S=function(){v={start:g+p.offset},a&&p.triggerElement&&(v.start-=a.info("size")*p.triggerHook),v.end=v.start+p.duration},E=function(e){if(o){var t="duration";M(t,o.call(d))&&!e&&(d.trigger("change",{what:t,newval:p[t]}),d.trigger("shift",{reason:t}))}},k=function(e){var n=0,r=p.triggerElement;if(a&&(r||g>0)){if(r)if(r.parentNode){for(var o=a.info(),s=i.get.offset(o.container),l=o.vertical?"top":"left";r.parentNode.hasAttribute(t);)r=r.parentNode;var c=i.get.offset(r);o.isDocument||(s[l]-=a.scrollPos()),n=c[l]-s[l]}else b(2,"WARNING: triggerElement was removed from DOM and will be reset to",void 0),d.triggerElement(void 0);var u=n!=g;g=n,u&&!e&&d.trigger("shift",{reason:"triggerElementPosition"})}},T=function(e){p.triggerHook>0&&d.trigger("shift",{reason:"containerResize"})},A=i.extend(r.validate,{duration:function(e){if(i.type.String(e)&&e.match(/^(\.|\d)*\d+%$/)){var t=parseFloat(e)/100;e=function(){return a?a.info("size")*t:0}}if(i.type.Function(e)){o=e;try{e=parseFloat(o.call(d))}catch(t){e=-1}}if(e=parseFloat(e),!i.type.Number(e)||e<0)throw o?(o=void 0,['Invalid return value of supplied function for option "duration":',e]):['Invalid value for option "duration":',e];return e}}),C=function(e){(e=arguments.length?[e]:Object.keys(A)).forEach((function(e,t){var n;if(A[e])try{n=A[e](p[e])}catch(t){n=h[e];var r=i.type.String(t)?[t]:t;i.type.Array(r)?(r[0]="ERROR: "+r[0],r.unshift(1),b.apply(this,r)):b(1,"ERROR: Problem executing validation callback for option '"+e+"':",t.message)}finally{p[e]=n}}))},M=function(e,t){var n=!1,r=p[e];return p[e]!=t&&(p[e]=t,C(e),n=r!=p[e]),n},L=function(e){d[e]||(d[e]=function(t){return arguments.length?("duration"===e&&(o=void 0),M(e,t)&&(d.trigger("change",{what:e,newval:p[e]}),r.shifts.indexOf(e)>-1&&d.trigger("shift",{reason:e})),d):p[e]})};this.controller=function(){return a},this.state=function(){return f},this.scrollOffset=function(){return v.start},this.triggerPosition=function(){var e=p.offset;return a&&(p.triggerElement?e+=g:e+=a.info("size")*d.triggerHook()),e},d.on("shift.internal",(function(e){var t="duration"===e.reason;(f===u&&t||f===c&&0===p.duration)&&R(),t&&P()})).on("progress.internal",(function(e){R()})).on("add.internal",(function(e){P()})).on("destroy.internal",(function(e){d.removePin(e.reset)}));var R=function(e){if(w&&a){var t=a.info(),n=x.spacer.firstChild;if(e||f!==c){var r={position:x.inFlow?"relative":"absolute",top:0,left:0},o=i.css(n,"position")!=r.position;x.pushFollowers?p.duration>0&&(f===u&&0===parseFloat(i.css(x.spacer,"padding-top"))||f===l&&0===parseFloat(i.css(x.spacer,"padding-bottom")))&&(o=!0):r[t.vertical?"top":"left"]=p.duration*m,i.css(n,r),o&&P()}else{"fixed"!=i.css(n,"position")&&(i.css(n,{position:"fixed"}),P());var s=i.get.offset(x.spacer,!0),h=p.reverse||0===p.duration?t.scrollPos-v.start:Math.round(m*p.duration*10)/10;s[t.vertical?"top":"left"]+=h,i.css(x.spacer.firstChild,{top:s.top,left:s.left})}}},P=function(){if(w&&a&&x.inFlow){var e=f===c,t=a.info("vertical"),n=x.spacer.firstChild,r=i.isMarginCollapseType(i.css(x.spacer,"display")),o={};x.relSize.width||x.relSize.autoFullWidth?e?i.css(w,{width:i.get.width(x.spacer)}):i.css(w,{width:"100%"}):(o["min-width"]=i.get.width(t?w:n,!0,!0),o.width=e?o["min-width"]:"auto"),x.relSize.height?e?i.css(w,{height:i.get.height(x.spacer)-(x.pushFollowers?p.duration:0)}):i.css(w,{height:"100%"}):(o["min-height"]=i.get.height(t?n:w,!0,!r),o.height=e?o["min-height"]:"auto"),x.pushFollowers&&(o["padding"+(t?"Top":"Left")]=p.duration*m,o["padding"+(t?"Bottom":"Right")]=p.duration*(1-m)),i.css(x.spacer,o)}},I=function(){a&&w&&f===c&&!a.info("isDocument")&&R()},D=function(){a&&w&&f===c&&((x.relSize.width||x.relSize.autoFullWidth)&&i.get.width(window)!=i.get.width(x.spacer.parentNode)||x.relSize.height&&i.get.height(window)!=i.get.height(x.spacer.parentNode))&&P()},O=function(e){a&&w&&f===c&&!a.info("isDocument")&&(e.preventDefault(),a._setScrollPos(a.info("scrollPos")-((e.wheelDelta||e[a.info("vertical")?"wheelDeltaY":"wheelDeltaX"])/3||30*-e.detail)))};this.setPin=function(e,n){var r=n&&n.hasOwnProperty("pushFollowers");if(n=i.extend({},{pushFollowers:!0,spacerClass:"scrollmagic-pin-spacer"},n),!(e=i.get.elements(e)[0]))return b(1,"ERROR calling method 'setPin()': Invalid pin element supplied."),d;if("fixed"===i.css(e,"position"))return b(1,"ERROR calling method 'setPin()': Pin does not work with elements that are positioned 'fixed'."),d;if(w){if(w===e)return d;d.removePin()}var o=(w=e).parentNode.style.display,a=["top","left","bottom","right","margin","marginLeft","marginRight","marginTop","marginBottom"];w.parentNode.style.display="none";var s="absolute"!=i.css(w,"position"),l=i.css(w,a.concat(["display"])),c=i.css(w,["width","height"]);w.parentNode.style.display=o,!s&&n.pushFollowers&&(b(2,"WARNING: If the pinned element is positioned absolutely pushFollowers will be disabled."),n.pushFollowers=!1),window.setTimeout((function(){w&&0===p.duration&&r&&n.pushFollowers&&b(2,"WARNING: pushFollowers =",!0,"has no effect, when scene duration is 0.")}),0);var u=w.parentNode.insertBefore(document.createElement("div"),w),h=i.extend(l,{position:s?"relative":"absolute",boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"});if(s||i.extend(h,i.css(w,["width","height"])),i.css(u,h),u.setAttribute(t,""),i.addClass(u,n.spacerClass),x={spacer:u,relSize:{width:"%"===c.width.slice(-1),height:"%"===c.height.slice(-1),autoFullWidth:"auto"===c.width&&s&&i.isMarginCollapseType(l.display)},pushFollowers:n.pushFollowers,inFlow:s},!w.___origStyle){w.___origStyle={};var f=w.style;a.concat(["width","height","position","boxSizing","mozBoxSizing","webkitBoxSizing"]).forEach((function(e){w.___origStyle[e]=f[e]||""}))}return x.relSize.width&&i.css(u,{width:c.width}),x.relSize.height&&i.css(u,{height:c.height}),u.appendChild(w),i.css(w,{position:s?"relative":"absolute",margin:"auto",top:"auto",left:"auto",bottom:"auto",right:"auto"}),(x.relSize.width||x.relSize.autoFullWidth)&&i.css(w,{boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"}),window.addEventListener("scroll",I),window.addEventListener("resize",I),window.addEventListener("resize",D),w.addEventListener("mousewheel",O),w.addEventListener("DOMMouseScroll",O),b(3,"added pin"),R(),d},this.removePin=function(e){if(w){if(f===c&&R(!0),e||!a){var n=x.spacer.firstChild;if(n.hasAttribute(t)){var r=x.spacer.style,o={};["margin","marginLeft","marginRight","marginTop","marginBottom"].forEach((function(e){o[e]=r[e]||""})),i.css(n,o)}x.spacer.parentNode.insertBefore(n,x.spacer),x.spacer.parentNode.removeChild(x.spacer),w.parentNode.hasAttribute(t)||(i.css(w,w.___origStyle),delete w.___origStyle)}window.removeEventListener("scroll",I),window.removeEventListener("resize",I),window.removeEventListener("resize",D),w.removeEventListener("mousewheel",O),w.removeEventListener("DOMMouseScroll",O),w=void 0,b(3,"removed pin (reset: "+(e?"true":"false")+")")}return d};var F,N=[];return d.on("destroy.internal",(function(e){d.removeClassToggle(e.reset)})),this.setClassToggle=function(e,t){var n=i.get.elements(e);return 0!==n.length&&i.type.String(t)?(N.length>0&&d.removeClassToggle(),F=t,N=n,d.on("enter.internal_class leave.internal_class",(function(e){var t="enter"===e.type?i.addClass:i.removeClass;N.forEach((function(e,n){t(e,F)}))})),d):(b(1,"ERROR calling method 'setClassToggle()': Invalid "+(0===n.length?"element":"classes")+" supplied."),d)},this.removeClassToggle=function(e){return e&&N.forEach((function(e,t){i.removeClass(e,F)})),d.off("start.internal_class end.internal_class"),F=void 0,N=[],d},function(){for(var e in p)h.hasOwnProperty(e)||(b(2,'WARNING: Unknown option "'+e+'"'),delete p[e]);for(var t in h)L(t);C()}(),d};var r={defaults:{duration:0,offset:0,triggerElement:void 0,triggerHook:.5,reverse:!0,loglevel:2},validate:{offset:function(e){if(e=parseFloat(e),!i.type.Number(e))throw['Invalid value for option "offset":',e];return e},triggerElement:function(e){if(e=e||void 0){var t=i.get.elements(e)[0];if(!t||!t.parentNode)throw['Element defined in option "triggerElement" was not found:',e];e=t}return e},triggerHook:function(e){var t={onCenter:.5,onEnter:1,onLeave:0};if(i.type.Number(e))e=Math.max(0,Math.min(parseFloat(e),1));else{if(!(e in t))throw['Invalid value for option "triggerHook": ',e];e=t[e]}return e},reverse:function(e){return!!e},loglevel:function(e){if(e=parseInt(e),!i.type.Number(e)||e<0||e>3)throw['Invalid value for option "loglevel":',e];return e}},shifts:["duration","offset","triggerHook"]};e.Scene.addOption=function(t,n,i,o){t in r.defaults?e._util.log(1,"[static] ScrollMagic.Scene -> Cannot add Scene option '"+t+"', because it already exists."):(r.defaults[t]=n,r.validate[t]=i,o&&r.shifts.push(t))},e.Scene.extend=function(t){var n=this;e.Scene=function(){return n.apply(this,arguments),this.$super=i.extend({},this),t.apply(this,arguments)||this},i.extend(e.Scene,n),e.Scene.prototype=n.prototype,e.Scene.prototype.constructor=e.Scene},e.Event=function(e,t,n,r){for(var i in r=r||{})this[i]=r[i];return this.type=e,this.target=this.currentTarget=n,this.namespace=t||"",this.timeStamp=this.timestamp=Date.now(),this};var i=e._util=function(e){var t,n={},r=function(e){return parseFloat(e)||0},i=function(t){return t.currentStyle?t.currentStyle:e.getComputedStyle(t)},o=function(t,n,o,a){if((n=n===document?e:n)===e)a=!1;else if(!f.DomElement(n))return 0;t=t.charAt(0).toUpperCase()+t.substr(1).toLowerCase();var s=(o?n["offset"+t]||n["outer"+t]:n["client"+t]||n["inner"+t])||0;if(o&&a){var l=i(n);s+="Height"===t?r(l.marginTop)+r(l.marginBottom):r(l.marginLeft)+r(l.marginRight)}return s},a=function(e){return e.replace(/^[^a-z]+([a-z])/g,"$1").replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))};n.extend=function(e){for(e=e||{},t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},n.isMarginCollapseType=function(e){return["block","flex","list-item","table","-webkit-box"].indexOf(e)>-1};var s=0,l=["ms","moz","webkit","o"],c=e.requestAnimationFrame,u=e.cancelAnimationFrame;for(t=0;!c&&t<l.length;++t)c=e[l[t]+"RequestAnimationFrame"],u=e[l[t]+"CancelAnimationFrame"]||e[l[t]+"CancelRequestAnimationFrame"];c||(c=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-s)),i=e.setTimeout((function(){t(n+r)}),r);return s=n+r,i}),u||(u=function(t){e.clearTimeout(t)}),n.rAF=c.bind(e),n.cAF=u.bind(e);var h=["error","warn","log"],d=e.console||{};for(d.log=d.log||function(){},t=0;t<h.length;t++){var p=h[t];d[p]||(d[p]=d.log)}n.log=function(e){(e>h.length||e<=0)&&(e=h.length);var t=new Date,n=("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+":"+("0"+t.getSeconds()).slice(-2)+":"+("00"+t.getMilliseconds()).slice(-3),r=h[e-1],i=Array.prototype.splice.call(arguments,1),o=Function.prototype.bind.call(d[r],d);i.unshift(n),o.apply(d,i)};var f=n.type=function(e){return Object.prototype.toString.call(e).replace(/^\[object (.+)\]$/,"$1").toLowerCase()};f.String=function(e){return"string"===f(e)},f.Function=function(e){return"function"===f(e)},f.Array=function(e){return Array.isArray(e)},f.Number=function(e){return!f.Array(e)&&e-parseFloat(e)+1>=0},f.DomElement=function(e){return"object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement||e instanceof SVGElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};var m=n.get={};return m.elements=function(t){var n=[];if(f.String(t))try{t=document.querySelectorAll(t)}catch(e){return n}if("nodelist"===f(t)||f.Array(t)||t instanceof NodeList)for(var r=0,i=n.length=t.length;r<i;r++){var o=t[r];n[r]=f.DomElement(o)?o:m.elements(o)}else(f.DomElement(t)||t===document||t===e)&&(n=[t]);return n},m.scrollTop=function(t){return t&&"number"==typeof t.scrollTop?t.scrollTop:e.pageYOffset||0},m.scrollLeft=function(t){return t&&"number"==typeof t.scrollLeft?t.scrollLeft:e.pageXOffset||0},m.width=function(e,t,n){return o("width",e,t,n)},m.height=function(e,t,n){return o("height",e,t,n)},m.offset=function(e,t){var n={top:0,left:0};if(e&&e.getBoundingClientRect){var r=e.getBoundingClientRect();n.top=r.top,n.left=r.left,t||(n.top+=m.scrollTop(),n.left+=m.scrollLeft())}return n},n.addClass=function(e,t){t&&(e.classList?e.classList.add(t):e.className+=" "+t)},n.removeClass=function(e,t){t&&(e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},n.css=function(e,t){if(f.String(t))return i(e)[a(t)];if(f.Array(t)){var n={},r=i(e);return t.forEach((function(e,t){n[e]=r[a(e)]})),n}for(var o in t){var s=t[o];s==parseFloat(s)&&(s+="px"),e.style[a(o)]=s}},n}(window||{});return e.Scene.prototype.addIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling addIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.removeIndicators=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeIndicators() due to missing Plugin 'debug.addIndicators'. Please make sure to include plugins/debug.addIndicators.js"),this},e.Scene.prototype.setTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.removeTween=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeTween() due to missing Plugin 'animation.gsap'. Please make sure to include plugins/animation.gsap.js"),this},e.Scene.prototype.setVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling setVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e.Scene.prototype.removeVelocity=function(){return e._util.log(1,"(ScrollMagic.Scene) -> ERROR calling removeVelocity() due to missing Plugin 'animation.velocity'. Please make sure to include plugins/animation.velocity.js"),this},e},void 0===(i=r.call(t,n,t,e))||(e.exports=i)},5215:(e,t,n)=>{"use strict";n.d(t,{C6:()=>i});var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}},8624:(e,t,n)=>{"use strict";var r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==n.g&&n.g||{},i="URLSearchParams"in r,o="Symbol"in r&&"iterator"in Symbol,a="FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in r,l="ArrayBuffer"in r;if(l)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return o&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function m(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function v(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function g(e){var t=new FileReader,n=v(t);return t.readAsArrayBuffer(e),n}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():l&&a&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=m(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return m(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(a)return this.blob().then(g);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,n,r,i,o=m(this);if(o)return o;if(this._bodyBlob)return e=this._bodyBlob,n=v(t=new FileReader),i=(r=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?r[1]:"utf-8",t.readAsText(e,i),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=h(e),t=d(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},f.prototype.delete=function(e){delete this.map[h(e)]},f.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},f.prototype.set=function(e,t){this.map[h(e)]=d(t)},f.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),p(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),p(e)},o&&(f.prototype[Symbol.iterator]=f.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,i,o=(t=t||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(i=(n=t.method||this.method||"GET").toUpperCase(),b.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in r)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var a=/([?&])_=[^&]*/;a.test(this.url)?this.url=this.url.replace(a,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function x(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},_.call(w.prototype),_.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var E=[301,302,303,307,308];S.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})};var k=r.DOMException;try{new k}catch(e){(k=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),k.prototype.constructor=k}function T(e,t){return new Promise((function(n,i){var o=new w(e,t);if(o.signal&&o.signal.aborted)return i(new k("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}if(s.onload=function(){var e,t,r={statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();try{t.append(r,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===o.url.indexOf("file://")&&(s.status<200||s.status>599)?r.status=200:r.status=s.status,r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;setTimeout((function(){n(new S(i,r))}),0)},s.onerror=function(){setTimeout((function(){i(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){i(new TypeError("Network request timed out"))}),0)},s.onabort=function(){setTimeout((function(){i(new k("Aborted","AbortError"))}),0)},s.open(o.method,function(e){try{return""===e&&r.location.href?r.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&(a?s.responseType="blob":l&&(s.responseType="arraybuffer")),t&&"object"==typeof t.headers&&!(t.headers instanceof f||r.Headers&&t.headers instanceof r.Headers)){var u=[];Object.getOwnPropertyNames(t.headers).forEach((function(e){u.push(h(e)),s.setRequestHeader(e,d(t.headers[e]))})),o.headers.forEach((function(e,t){-1===u.indexOf(t)&&s.setRequestHeader(t,e)}))}else o.headers.forEach((function(e,t){s.setRequestHeader(t,e)}));o.signal&&(o.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&o.signal.removeEventListener("abort",c)}),s.send(void 0===o._bodyInit?null:o._bodyInit)}))}T.polyfill=!0,r.fetch||(r.fetch=T,r.Headers=f,r.Request=w,r.Response=S)},9437:(e,t,n)=>{"use strict";n.d(t,{$EB:()=>c,$Kf:()=>Ia,$_I:()=>te,$p8:()=>il,B69:()=>Sn,BH$:()=>is,BKk:()=>Mr,CSG:()=>aa,Cfg:()=>Z,CmU:()=>al,DXC:()=>ns,EAD:()=>Na,FCc:()=>rs,GJx:()=>Y,GWd:()=>se,GYF:()=>Da,Gwm:()=>R,HiM:()=>tl,Hit:()=>Cs,Ho_:()=>hs,I46:()=>Pa,I9Y:()=>$e,IUQ:()=>vt,JeP:()=>wa,K52:()=>P,KPJ:()=>Fs,Kzg:()=>sl,Kzv:()=>le,LlO:()=>Cr,LoY:()=>ir,MBL:()=>Ls,N1A:()=>Qa,N5j:()=>Te,NRn:()=>Et,Nwf:()=>vl,O49:()=>xe,ONl:()=>cs,OUM:()=>ne,PJ3:()=>_e,PTz:()=>bt,Pq0:()=>wt,Q1f:()=>Gn,Qev:()=>Oe,RJ4:()=>we,RQf:()=>ie,RiT:()=>Ps,Rkk:()=>ke,S2Q:()=>Ee,THS:()=>Yn,Tap:()=>Hs,U3G:()=>L,V3x:()=>ae,V9B:()=>qn,VCu:()=>va,VT0:()=>he,XIg:()=>u,Y9S:()=>zs,YJl:()=>pa,Z58:()=>xa,ZLX:()=>Wa,Zr2:()=>Me,ZyN:()=>rl,_4j:()=>ds,aHM:()=>js,aVO:()=>sa,bCz:()=>h,bdM:()=>Vr,bkx:()=>re,brA:()=>C,bw0:()=>I,cj9:()=>Ke,dYF:()=>_t,dcC:()=>ue,dwI:()=>Je,eB$:()=>Sa,eHc:()=>T,eHs:()=>ka,eaF:()=>xr,er$:()=>Ce,gPd:()=>mt,ghU:()=>X,hB5:()=>s,hsX:()=>l,hxR:()=>$,i7d:()=>Lr,imn:()=>Nn,ix0:()=>oe,iyt:()=>Gt,jf0:()=>Ae,k6q:()=>Q,kRr:()=>ee,kTW:()=>K,kn4:()=>Jt,lGu:()=>A,lGw:()=>ws,ljd:()=>ye,mrM:()=>Ya,nCl:()=>$s,nWS:()=>gt,nc$:()=>gl,pHI:()=>J,paN:()=>de,ppV:()=>ct,qBx:()=>fs,qUd:()=>ni,qtW:()=>$n,r6x:()=>ol,rYR:()=>Se,sPf:()=>r,tz3:()=>Is,uSd:()=>ps,uWO:()=>ja,ubm:()=>Rr,vxI:()=>Wr,wfO:()=>V,xSv:()=>M,zD7:()=>ll});const r="152",i=1,o=2,a=3,s=0,l=1,c=2,u=0,h=5,d=100,p=101,f=102,m=200,v=201,g=202,y=203,_=204,b=205,w=206,x=207,S=208,E=209,k=210,T=0,A=1,C=2,M=3,L=4,R=5,P=6,I=7,D=0,O=1,F=2,N=0,j=1,B=2,U=3,z=4,G=5,H=301,q=302,V=303,W=306,Y=1e3,X=1001,K=1002,$=1003,J=1004,Z=1005,Q=1006,ee=1007,te=1008,ne=1009,re=1014,ie=1015,oe=1016,ae=1020,se=1023,le=1024,ce=1026,ue=1027,he=1028,de=1030,pe=33776,fe=33777,me=33778,ve=33779,ge=36492,ye=2300,_e=2301,be=2302,we=0,xe=1,Se=2,Ee=3001,ke=3200,Te=3201,Ae="",Ce="srgb",Me="srgb-linear",Le="display-p3",Re=7680,Pe=35044,Ie="300 es",De=1035;class Oe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Fe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ne=1234567;const je=Math.PI/180,Be=180/Math.PI;function Ue(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Fe[255&e]+Fe[e>>8&255]+Fe[e>>16&255]+Fe[e>>24&255]+"-"+Fe[255&t]+Fe[t>>8&255]+"-"+Fe[t>>16&15|64]+Fe[t>>24&255]+"-"+Fe[63&n|128]+Fe[n>>8&255]+"-"+Fe[n>>16&255]+Fe[n>>24&255]+Fe[255&r]+Fe[r>>8&255]+Fe[r>>16&255]+Fe[r>>24&255]).toLowerCase()}function ze(e,t,n){return Math.max(t,Math.min(n,e))}function Ge(e,t){return(e%t+t)%t}function He(e,t,n){return(1-n)*e+n*t}function qe(e){return!(e&e-1)&&0!==e}function Ve(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function We(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function Ye(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Xe(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Ke={DEG2RAD:je,RAD2DEG:Be,generateUUID:Ue,clamp:ze,euclideanModulo:Ge,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:He,damp:function(e,t,n,r){return He(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Ge(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Ne=e);let t=Ne+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*je},radToDeg:function(e){return e*Be},isPowerOfTwo:qe,ceilPowerOfTwo:Ve,floorPowerOfTwo:We,setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),p=o((r-t)/2),f=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*f,l*p,s*c);break;case"YXY":e.set(l*p,s*u,l*f,s*c);break;case"ZYZ":e.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Xe,denormalize:Ye};class $e{constructor(e=0,t=0){$e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ze(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Je{constructor(){Je.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],_=r[7],b=r[2],w=r[5],x=r[8];return i[0]=o*f+a*g+s*b,i[3]=o*m+a*y+s*w,i[6]=o*v+a*_+s*x,i[1]=l*f+c*g+u*b,i[4]=l*m+c*y+u*w,i[7]=l*v+c*_+u*x,i[2]=h*f+d*g+p*b,i[5]=h*m+d*y+p*w,i[8]=h*v+d*_+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(a*n-r*o)*f,e[3]=h*f,e[4]=(c*t-r*s)*f,e[5]=(r*i-a*t)*f,e[6]=d*f,e[7]=(n*s-l*t)*f,e[8]=(o*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Ze.makeScale(e,t)),this}rotate(e){return this.premultiply(Ze.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ze.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ze=new Je;function Qe(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function et(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const tt={};function nt(e){e in tt||(tt[e]=!0,console.warn(e))}function rt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function it(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const ot=(new Je).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),at=(new Je).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),st={[Me]:e=>e,[Ce]:e=>e.convertSRGBToLinear(),[Le]:function(e){return e.convertSRGBToLinear().applyMatrix3(at)}},lt={[Me]:e=>e,[Ce]:e=>e.convertLinearToSRGB(),[Le]:function(e){return e.applyMatrix3(ot).convertLinearToSRGB()}},ct={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Me},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=st[t],i=lt[n];if(void 0===r||void 0===i)throw new Error(`Unsupported color space conversion, "${t}" to "${n}".`);return i(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let ut;class ht{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ut&&(ut=et("canvas")),ut.width=e.width,ut.height=e.height;const n=ut.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ut}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=et("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*rt(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*rt(t[e]/255)):t[e]=rt(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class dt{constructor(e=null){this.isSource=!0,this.uuid=Ue(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(pt(r[t].image)):e.push(pt(r[t]))}else e=pt(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function pt(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ht.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ft=0;class mt extends Oe{constructor(e=mt.DEFAULT_IMAGE,t=mt.DEFAULT_MAPPING,n=X,r=X,i=Q,o=te,a=se,s=ne,l=mt.DEFAULT_ANISOTROPY,c=Ae){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ft++}),this.uuid=Ue(),this.name="",this.source=new dt(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new $e(0,0),this.repeat=new $e(1,1),this.center=new $e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Je,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(nt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ee?Ce:Ae),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Y:e.x=e.x-Math.floor(e.x);break;case X:e.x=e.x<0?0:1;break;case K:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Y:e.y=e.y-Math.floor(e.y);break;case X:e.y=e.y<0?0:1;break;case K:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return nt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ce?Ee:3e3}set encoding(e){nt("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ee?Ce:Ae}}mt.DEFAULT_IMAGE=null,mt.DEFAULT_MAPPING=300,mt.DEFAULT_ANISOTROPY=1;class vt{constructor(e=0,t=0,n=0,r=1){vt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+v-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,g=(v+1)/2,y=(c+h)/4,_=(u+f)/4,b=(p+m)/4;return e>s&&e>g?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):s>g?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=b/r):g<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=_/i,r=b/i),this.set(n,r,i,t),this}let g=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(u-f)/g,this.z=(h-c)/g,this.w=Math.acos((l+d+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gt extends Oe{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new vt(0,0,e,t),this.scissorTest=!1,this.viewport=new vt(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(nt("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Ee?Ce:Ae),this.texture=new mt(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Q,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new dt(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class yt extends mt{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=$,this.minFilter=$,this.wrapR=X,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class _t extends mt{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=$,this.minFilter=$,this.wrapR=X,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bt{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||s!==h||l!==d||c!==p){let e=1-a;const t=s*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return e[t]=a*p+c*u+s*d-l*h,e[t+1]=s*p+c*h+l*u-a*d,e[t+2]=l*p+c*d+a*h-s*u,e[t+3]=c*p-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ze(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class wt{constructor(e=0,t=0,n=0){wt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(St.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(St.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=s*t+o*r-a*n,c=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=l*s+h*-i+c*-a-u*-o,this.y=c*s+h*-o+u*-i-l*-a,this.z=u*s+h*-a+l*-o-c*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return xt.copy(this).projectOnVector(e),this.sub(xt)}reflect(e){return this.sub(xt.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(ze(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xt=new wt,St=new bt;class Et{constructor(e=new wt(1/0,1/0,1/0),t=new wt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Tt.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Tt.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Tt.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),At.copy(e.boundingBox),At.applyMatrix4(e.matrixWorld),this.union(At);else{const n=e.geometry;if(void 0!==n)if(t&&void 0!==n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,r=t.count;n<r;n++)Tt.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(Tt)}else null===n.boundingBox&&n.computeBoundingBox(),At.copy(n.boundingBox),At.applyMatrix4(e.matrixWorld),this.union(At)}const n=e.children;for(let e=0,r=n.length;e<r;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Tt),Tt.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Dt),Ot.subVectors(this.max,Dt),Ct.subVectors(e.a,Dt),Mt.subVectors(e.b,Dt),Lt.subVectors(e.c,Dt),Rt.subVectors(Mt,Ct),Pt.subVectors(Lt,Mt),It.subVectors(Ct,Lt);let t=[0,-Rt.z,Rt.y,0,-Pt.z,Pt.y,0,-It.z,It.y,Rt.z,0,-Rt.x,Pt.z,0,-Pt.x,It.z,0,-It.x,-Rt.y,Rt.x,0,-Pt.y,Pt.x,0,-It.y,It.x,0];return!!jt(t,Ct,Mt,Lt,Ot)&&(t=[1,0,0,0,1,0,0,0,1],!!jt(t,Ct,Mt,Lt,Ot)&&(Ft.crossVectors(Rt,Pt),t=[Ft.x,Ft.y,Ft.z],jt(t,Ct,Mt,Lt,Ot)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tt).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Tt).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(kt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),kt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),kt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),kt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),kt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),kt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),kt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),kt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(kt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const kt=[new wt,new wt,new wt,new wt,new wt,new wt,new wt,new wt],Tt=new wt,At=new Et,Ct=new wt,Mt=new wt,Lt=new wt,Rt=new wt,Pt=new wt,It=new wt,Dt=new wt,Ot=new wt,Ft=new wt,Nt=new wt;function jt(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Nt.fromArray(e,o);const a=i.x*Math.abs(Nt.x)+i.y*Math.abs(Nt.y)+i.z*Math.abs(Nt.z),s=t.dot(Nt),l=n.dot(Nt),c=r.dot(Nt);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const Bt=new Et,Ut=new wt,zt=new wt;class Gt{constructor(e=new wt,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Bt.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Ut.subVectors(e,this.center);const t=Ut.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Ut,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(zt.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Ut.copy(e.center).add(zt)),this.expandByPoint(Ut.copy(e.center).sub(zt))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Ht=new wt,qt=new wt,Vt=new wt,Wt=new wt,Yt=new wt,Xt=new wt,Kt=new wt;class $t{constructor(e=new wt,t=new wt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ht)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ht.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ht.copy(this.origin).addScaledVector(this.direction,t),Ht.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){qt.copy(e).add(t).multiplyScalar(.5),Vt.copy(t).sub(e).normalize(),Wt.copy(this.origin).sub(qt);const i=.5*e.distanceTo(t),o=-this.direction.dot(Vt),a=Wt.dot(this.direction),s=-Wt.dot(Vt),l=Wt.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(qt).addScaledVector(Vt,h),d}intersectSphere(e,t){Ht.subVectors(e.center,this.origin);const n=Ht.dot(this.direction),r=Ht.dot(Ht)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Ht)}intersectTriangle(e,t,n,r,i){Yt.subVectors(t,e),Xt.subVectors(n,e),Kt.crossVectors(Yt,Xt);let o,a=this.direction.dot(Kt);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Wt.subVectors(this.origin,e);const s=o*this.direction.dot(Xt.crossVectors(Wt,Xt));if(s<0)return null;const l=o*this.direction.dot(Yt.cross(Wt));if(l<0)return null;if(s+l>a)return null;const c=-o*Wt.dot(Kt);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Jt{constructor(){Jt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,i,o,a,s,l,c,u,h,d,p,f,m){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Jt).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Zt.setFromMatrixColumn(e,0).length(),i=1/Zt.setFromMatrixColumn(e,1).length(),o=1/Zt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(en,e,tn)}lookAt(e,t,n){const r=this.elements;return on.subVectors(e,t),0===on.lengthSq()&&(on.z=1),on.normalize(),nn.crossVectors(n,on),0===nn.lengthSq()&&(1===Math.abs(n.z)?on.x+=1e-4:on.z+=1e-4,on.normalize(),nn.crossVectors(n,on)),nn.normalize(),rn.crossVectors(on,nn),r[0]=nn.x,r[4]=rn.x,r[8]=on.x,r[1]=nn.y,r[5]=rn.y,r[9]=on.y,r[2]=nn.z,r[6]=rn.z,r[10]=on.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],b=n[15],w=r[0],x=r[4],S=r[8],E=r[12],k=r[1],T=r[5],A=r[9],C=r[13],M=r[2],L=r[6],R=r[10],P=r[14],I=r[3],D=r[7],O=r[11],F=r[15];return i[0]=o*w+a*k+s*M+l*I,i[4]=o*x+a*T+s*L+l*D,i[8]=o*S+a*A+s*R+l*O,i[12]=o*E+a*C+s*P+l*F,i[1]=c*w+u*k+h*M+d*I,i[5]=c*x+u*T+h*L+d*D,i[9]=c*S+u*A+h*R+d*O,i[13]=c*E+u*C+h*P+d*F,i[2]=p*w+f*k+m*M+v*I,i[6]=p*x+f*T+m*L+v*D,i[10]=p*S+f*A+m*R+v*O,i[14]=p*E+f*C+m*P+v*F,i[3]=g*w+y*k+_*M+b*I,i[7]=g*x+y*T+_*L+b*D,i[11]=g*S+y*A+_*R+b*O,i[15]=g*E+y*C+_*P+b*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],v=e[15],g=u*m*l-f*h*l+f*s*d-a*m*d-u*s*v+a*h*v,y=p*h*l-c*m*l-p*s*d+o*m*d+c*s*v-o*h*v,_=c*f*l-p*u*l+p*a*d-o*f*d-c*a*v+o*u*v,b=p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m,w=t*g+n*y+r*_+i*b;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/w;return e[0]=g*x,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*v-n*h*v)*x,e[2]=(a*m*i-f*s*i+f*r*l-n*m*l-a*r*v+n*s*v)*x,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*x,e[4]=y*x,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*v+t*h*v)*x,e[6]=(p*s*i-o*m*i-p*r*l+t*m*l+o*r*v-t*s*v)*x,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*x,e[8]=_*x,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*v-t*u*v)*x,e[10]=(o*f*i-p*a*i+p*n*l-t*f*l-o*n*v+t*a*v)*x,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*x,e[12]=b*x,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*x,e[14]=(p*a*r-o*f*r-p*n*s+t*f*s+o*n*m-t*a*m)*x,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,p=i*u,f=o*c,m=o*u,v=a*u,g=s*l,y=s*c,_=s*u,b=n.x,w=n.y,x=n.z;return r[0]=(1-(f+v))*b,r[1]=(d+_)*b,r[2]=(p-y)*b,r[3]=0,r[4]=(d-_)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(p+y)*x,r[9]=(m-g)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Zt.set(r[0],r[1],r[2]).length();const o=Zt.set(r[4],r[5],r[6]).length(),a=Zt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Qt.copy(this);const s=1/i,l=1/o,c=1/a;return Qt.elements[0]*=s,Qt.elements[1]*=s,Qt.elements[2]*=s,Qt.elements[4]*=l,Qt.elements[5]*=l,Qt.elements[6]*=l,Qt.elements[8]*=c,Qt.elements[9]*=c,Qt.elements[10]*=c,t.setFromRotationMatrix(Qt),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){const a=this.elements,s=2*i/(t-e),l=2*i/(n-r),c=(t+e)/(t-e),u=(n+r)/(n-r),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),l=1/(n-r),c=1/(o-i),u=(t+e)*s,h=(n+r)*l,d=(o+i)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Zt=new wt,Qt=new Jt,en=new wt(0,0,0),tn=new wt(1,1,1),nn=new wt,rn=new wt,on=new wt,an=new Jt,sn=new bt;class ln{constructor(e=0,t=0,n=0,r=ln.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(ze(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-ze(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(ze(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-ze(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(ze(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-ze(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return an.makeRotationFromQuaternion(e),this.setFromRotationMatrix(an,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sn.setFromEuler(this),this.setFromQuaternion(sn,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ln.DEFAULT_ORDER="XYZ";class cn{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return!!(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let un=0;const hn=new wt,dn=new bt,pn=new Jt,fn=new wt,mn=new wt,vn=new wt,gn=new bt,yn=new wt(1,0,0),_n=new wt(0,1,0),bn=new wt(0,0,1),wn={type:"added"},xn={type:"removed"};class Sn extends Oe{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:un++}),this.uuid=Ue(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Sn.DEFAULT_UP.clone();const e=new wt,t=new ln,n=new bt,r=new wt(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Jt},normalMatrix:{value:new Je}}),this.matrix=new Jt,this.matrixWorld=new Jt,this.matrixAutoUpdate=Sn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new cn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return dn.setFromAxisAngle(e,t),this.quaternion.multiply(dn),this}rotateOnWorldAxis(e,t){return dn.setFromAxisAngle(e,t),this.quaternion.premultiply(dn),this}rotateX(e){return this.rotateOnAxis(yn,e)}rotateY(e){return this.rotateOnAxis(_n,e)}rotateZ(e){return this.rotateOnAxis(bn,e)}translateOnAxis(e,t){return hn.copy(e).applyQuaternion(this.quaternion),this.position.add(hn.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(yn,e)}translateY(e){return this.translateOnAxis(_n,e)}translateZ(e){return this.translateOnAxis(bn,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(pn.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?fn.copy(e):fn.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),mn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?pn.lookAt(mn,fn,this.up):pn.lookAt(fn,mn,this.up),this.quaternion.setFromRotationMatrix(pn),r&&(pn.extractRotation(r.matrixWorld),dn.setFromRotationMatrix(pn),this.quaternion.premultiply(dn.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(wn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(xn)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(xn)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),pn.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),pn.multiply(e.parent.matrixWorld)),e.applyMatrix4(pn),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let r=0,i=this.children.length;r<i;r++){const i=this.children[r].getObjectsByProperty(e,t);i.length>0&&(n=n.concat(i))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mn,e,vn),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(mn,gn,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Sn.DEFAULT_UP=new wt(0,1,0),Sn.DEFAULT_MATRIX_AUTO_UPDATE=!0,Sn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const En=new wt,kn=new wt,Tn=new wt,An=new wt,Cn=new wt,Mn=new wt,Ln=new wt,Rn=new wt,Pn=new wt,In=new wt;let Dn=!1;class On{constructor(e=new wt,t=new wt,n=new wt){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),En.subVectors(e,t),r.cross(En);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){En.subVectors(r,t),kn.subVectors(n,t),Tn.subVectors(e,t);const o=En.dot(En),a=En.dot(kn),s=En.dot(Tn),l=kn.dot(kn),c=kn.dot(Tn),u=o*l-a*a;if(0===u)return i.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,An),An.x>=0&&An.y>=0&&An.x+An.y<=1}static getUV(e,t,n,r,i,o,a,s){return!1===Dn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Dn=!0),this.getInterpolation(e,t,n,r,i,o,a,s)}static getInterpolation(e,t,n,r,i,o,a,s){return this.getBarycoord(e,t,n,r,An),s.setScalar(0),s.addScaledVector(i,An.x),s.addScaledVector(o,An.y),s.addScaledVector(a,An.z),s}static isFrontFacing(e,t,n,r){return En.subVectors(n,t),kn.subVectors(e,t),En.cross(kn).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return En.subVectors(this.c,this.b),kn.subVectors(this.a,this.b),.5*En.cross(kn).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return On.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return On.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return!1===Dn&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Dn=!0),On.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}getInterpolation(e,t,n,r,i){return On.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return On.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return On.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;Cn.subVectors(r,n),Mn.subVectors(i,n),Rn.subVectors(e,n);const s=Cn.dot(Rn),l=Mn.dot(Rn);if(s<=0&&l<=0)return t.copy(n);Pn.subVectors(e,r);const c=Cn.dot(Pn),u=Mn.dot(Pn);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(Cn,o);In.subVectors(e,i);const d=Cn.dot(In),p=Mn.dot(In);if(p>=0&&d<=p)return t.copy(i);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),t.copy(n).addScaledVector(Mn,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return Ln.subVectors(i,r),a=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(Ln,a);const v=1/(m+f+h);return o=f*v,a=h*v,t.copy(n).addScaledVector(Cn,o).addScaledVector(Mn,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Fn=0;class Nn extends Oe{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Fn++}),this.uuid=Ue(),this.name="",this.type="Material",this.blending=1,this.side=s,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=d,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=M,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Re,this.stencilZFail=Re,this.stencilZPass=Re,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==s&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const jn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bn={h:0,s:0,l:0},Un={h:0,s:0,l:0};function zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Gn{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ce){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ct.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ct.workingColorSpace){return this.r=e,this.g=t,this.b=n,ct.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ct.workingColorSpace){if(e=Ge(e,1),t=ze(t,0,1),n=ze(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=zn(i,r,e+1/3),this.g=zn(i,r,e),this.b=zn(i,r,e-1/3)}return ct.toWorkingColorSpace(this,r),this}setStyle(e,t=Ce){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ce){const n=jn[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=rt(e.r),this.g=rt(e.g),this.b=rt(e.b),this}copyLinearToSRGB(e){return this.r=it(e.r),this.g=it(e.g),this.b=it(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ce){return ct.fromWorkingColorSpace(Hn.copy(this),e),65536*Math.round(ze(255*Hn.r,0,255))+256*Math.round(ze(255*Hn.g,0,255))+Math.round(ze(255*Hn.b,0,255))}getHexString(e=Ce){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ct.workingColorSpace){ct.fromWorkingColorSpace(Hn.copy(this),t);const n=Hn.r,r=Hn.g,i=Hn.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e,t=ct.workingColorSpace){return ct.fromWorkingColorSpace(Hn.copy(this),t),e.r=Hn.r,e.g=Hn.g,e.b=Hn.b,e}getStyle(e=Ce){ct.fromWorkingColorSpace(Hn.copy(this),e);const t=Hn.r,n=Hn.g,r=Hn.b;return e!==Ce?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Bn),Bn.h+=e,Bn.s+=t,Bn.l+=n,this.setHSL(Bn.h,Bn.s,Bn.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Bn),e.getHSL(Un);const n=He(Bn.h,Un.h,t),r=He(Bn.s,Un.s,t),i=He(Bn.l,Un.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Hn=new Gn;Gn.NAMES=jn;class qn extends Nn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=D,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Vn=new wt,Wn=new $e;class Yn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=Pe,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)Wn.fromBufferAttribute(this,t),Wn.applyMatrix3(e),this.setXY(t,Wn.x,Wn.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Vn.fromBufferAttribute(this,t),Vn.applyMatrix3(e),this.setXYZ(t,Vn.x,Vn.y,Vn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Vn.fromBufferAttribute(this,t),Vn.applyMatrix4(e),this.setXYZ(t,Vn.x,Vn.y,Vn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Vn.fromBufferAttribute(this,t),Vn.applyNormalMatrix(e),this.setXYZ(t,Vn.x,Vn.y,Vn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Vn.fromBufferAttribute(this,t),Vn.transformDirection(e),this.setXYZ(t,Vn.x,Vn.y,Vn.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ye(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xe(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ye(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xe(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ye(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xe(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ye(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xe(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array),r=Xe(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array),r=Xe(r,this.array),i=Xe(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Pe&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Xn extends Yn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Kn extends Yn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class $n extends Yn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let Jn=0;const Zn=new Jt,Qn=new Sn,er=new wt,tr=new Et,nr=new Et,rr=new wt;class ir extends Oe{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Jn++}),this.uuid=Ue(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Qe(e)?Kn:Xn)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Je).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zn.makeRotationFromQuaternion(e),this.applyMatrix4(Zn),this}rotateX(e){return Zn.makeRotationX(e),this.applyMatrix4(Zn),this}rotateY(e){return Zn.makeRotationY(e),this.applyMatrix4(Zn),this}rotateZ(e){return Zn.makeRotationZ(e),this.applyMatrix4(Zn),this}translate(e,t,n){return Zn.makeTranslation(e,t,n),this.applyMatrix4(Zn),this}scale(e,t,n){return Zn.makeScale(e,t,n),this.applyMatrix4(Zn),this}lookAt(e){return Qn.lookAt(e),Qn.updateMatrix(),this.applyMatrix4(Qn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(er).negate(),this.translate(er.x,er.y,er.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new $n(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Et);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new wt(-1/0,-1/0,-1/0),new wt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];tr.setFromBufferAttribute(n),this.morphTargetsRelative?(rr.addVectors(this.boundingBox.min,tr.min),this.boundingBox.expandByPoint(rr),rr.addVectors(this.boundingBox.max,tr.max),this.boundingBox.expandByPoint(rr)):(this.boundingBox.expandByPoint(tr.min),this.boundingBox.expandByPoint(tr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new wt,1/0);if(e){const n=this.boundingSphere.center;if(tr.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];nr.setFromBufferAttribute(n),this.morphTargetsRelative?(rr.addVectors(tr.min,nr.min),tr.expandByPoint(rr),rr.addVectors(tr.max,nr.max),tr.expandByPoint(rr)):(tr.expandByPoint(nr.min),tr.expandByPoint(nr.max))}tr.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)rr.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(rr));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)rr.fromBufferAttribute(o,t),a&&(er.fromBufferAttribute(e,t),rr.add(er)),r=Math.max(r,n.distanceToSquared(rr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,i=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Yn(new Float32Array(4*a),4));const s=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<a;e++)l[e]=new wt,c[e]=new wt;const u=new wt,h=new wt,d=new wt,p=new $e,f=new $e,m=new $e,v=new wt,g=new wt;function y(e,t,n){u.fromArray(r,3*e),h.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(o,2*e),f.fromArray(o,2*t),m.fromArray(o,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const i=1/(f.x*m.y-m.x*f.y);isFinite(i)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(i),g.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(i),l[e].add(v),l[t].add(v),l[n].add(v),c[e].add(g),c[t].add(g),c[n].add(g))}let _=this.groups;0===_.length&&(_=[{start:0,count:n.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)y(n[e+0],n[e+1],n[e+2])}const b=new wt,w=new wt,x=new wt,S=new wt;function E(e){x.fromArray(i,3*e),S.copy(x);const t=l[e];b.copy(t),b.sub(x.multiplyScalar(x.dot(t))).normalize(),w.crossVectors(S,t);const n=w.dot(c[e])<0?-1:1;s[4*e]=b.x,s[4*e+1]=b.y,s[4*e+2]=b.z,s[4*e+3]=n}for(let e=0,t=_.length;e<t;++e){const t=_[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)E(n[e+0]),E(n[e+1]),E(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Yn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new wt,i=new wt,o=new wt,a=new wt,s=new wt,l=new wt,c=new wt,u=new wt;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)rr.fromBufferAttribute(e,t),rr.normalize(),e.setXYZ(t,rr.x,rr.y,rr.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let i=0,l=t.length;i<l;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Yn(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ir,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const or=new Jt,ar=new $t,sr=new Gt,lr=new wt,cr=new wt,ur=new wt,hr=new wt,dr=new wt,pr=new wt,fr=new $e,mr=new $e,vr=new $e,gr=new wt,yr=new wt,_r=new wt,br=new wt,wr=new wt;class xr extends Sn{constructor(e=new ir,t=new qn){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){pr.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(dr.fromBufferAttribute(s,e),o?pr.addScaledVector(dr,r):pr.addScaledVector(dr.sub(t),r))}t.add(pr)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),sr.copy(n.boundingSphere),sr.applyMatrix4(i),ar.copy(e.ray).recast(e.near),!1===sr.containsPoint(ar.origin)){if(null===ar.intersectSphere(sr,lr))return;if(ar.origin.distanceToSquared(lr)>(e.far-e.near)**2)return}or.copy(i).invert(),ar.copy(e.ray).applyMatrix4(or),null!==n.boundingBox&&!1===ar.intersectsBox(n.boundingBox)||this._computeIntersections(e,t)}}_computeIntersections(e,t){let n;const r=this.geometry,i=this.material,o=r.index,a=r.attributes.position,s=r.attributes.uv,l=r.attributes.uv1,c=r.attributes.normal,u=r.groups,h=r.drawRange;if(null!==o)if(Array.isArray(i))for(let r=0,a=u.length;r<a;r++){const a=u[r],d=i[a.materialIndex];for(let r=Math.max(a.start,h.start),i=Math.min(o.count,Math.min(a.start+a.count,h.start+h.count));r<i;r+=3){const i=o.getX(r),u=o.getX(r+1),h=o.getX(r+2);n=Sr(this,d,e,ar,s,l,c,i,u,h),n&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=a.materialIndex,t.push(n))}}else for(let r=Math.max(0,h.start),a=Math.min(o.count,h.start+h.count);r<a;r+=3){const a=o.getX(r),u=o.getX(r+1),h=o.getX(r+2);n=Sr(this,i,e,ar,s,l,c,a,u,h),n&&(n.faceIndex=Math.floor(r/3),t.push(n))}else if(void 0!==a)if(Array.isArray(i))for(let r=0,o=u.length;r<o;r++){const o=u[r],d=i[o.materialIndex];for(let r=Math.max(o.start,h.start),i=Math.min(a.count,Math.min(o.start+o.count,h.start+h.count));r<i;r+=3)n=Sr(this,d,e,ar,s,l,c,r,r+1,r+2),n&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=o.materialIndex,t.push(n))}else for(let r=Math.max(0,h.start),o=Math.min(a.count,h.start+h.count);r<o;r+=3)n=Sr(this,i,e,ar,s,l,c,r,r+1,r+2),n&&(n.faceIndex=Math.floor(r/3),t.push(n))}}function Sr(e,t,n,r,i,o,a,c,u,h){e.getVertexPosition(c,cr),e.getVertexPosition(u,ur),e.getVertexPosition(h,hr);const d=function(e,t,n,r,i,o,a,c){let u;if(u=t.side===l?r.intersectTriangle(a,o,i,!0,c):r.intersectTriangle(i,o,a,t.side===s,c),null===u)return null;wr.copy(c),wr.applyMatrix4(e.matrixWorld);const h=n.ray.origin.distanceTo(wr);return h<n.near||h>n.far?null:{distance:h,point:wr.clone(),object:e}}(e,t,n,r,cr,ur,hr,br);if(d){i&&(fr.fromBufferAttribute(i,c),mr.fromBufferAttribute(i,u),vr.fromBufferAttribute(i,h),d.uv=On.getInterpolation(br,cr,ur,hr,fr,mr,vr,new $e)),o&&(fr.fromBufferAttribute(o,c),mr.fromBufferAttribute(o,u),vr.fromBufferAttribute(o,h),d.uv1=On.getInterpolation(br,cr,ur,hr,fr,mr,vr,new $e),d.uv2=d.uv1),a&&(gr.fromBufferAttribute(a,c),yr.fromBufferAttribute(a,u),_r.fromBufferAttribute(a,h),d.normal=On.getInterpolation(br,cr,ur,hr,gr,yr,_r,new wt),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const e={a:c,b:u,c:h,normal:new wt,materialIndex:0};On.getNormal(cr,ur,hr,e.normal),d.face=e}return d}class Er extends ir{constructor(e=1,t=1,n=1,r=1,i=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,o,p,f,m,v,g){const y=o/m,_=p/v,b=o/2,w=p/2,x=f/2,S=m+1,E=v+1;let k=0,T=0;const A=new wt;for(let o=0;o<E;o++){const a=o*_-w;for(let s=0;s<S;s++){const h=s*y-b;A[e]=h*r,A[t]=a*i,A[n]=x,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(s/m),u.push(1-o/v),k+=1}}for(let e=0;e<v;e++)for(let t=0;t<m;t++){const n=h+t+S*e,r=h+t+S*(e+1),i=h+(t+1)+S*(e+1),o=h+(t+1)+S*e;s.push(n,r,o),s.push(r,i,o),T+=6}a.addGroup(d,T,g),d+=T,h+=k}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new $n(l,3)),this.setAttribute("normal",new $n(c,3)),this.setAttribute("uv",new $n(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Er(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function kr(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Tr(e){const t={};for(let n=0;n<e.length;n++){const r=kr(e[n]);for(const e in r)t[e]=r[e]}return t}function Ar(e){return null===e.getRenderTarget()?e.outputColorSpace:Me}const Cr={clone:kr,merge:Tr};class Mr extends Nn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=kr(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Lr extends Sn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jt,this.projectionMatrix=new Jt,this.projectionMatrixInverse=new Jt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Rr extends Lr{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Be*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*je*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Be*Math.atan(Math.tan(.5*je*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*je*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Pr=-90;class Ir extends Sn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Rr(Pr,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const i=new Rr(Pr,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(-1,0,0),this.add(i);const o=new Rr(Pr,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Rr(Pr,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const s=new Rr(Pr,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(0,0,1),this.add(s);const l=new Rr(Pr,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=N,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class Dr extends mt{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:H,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Or extends gt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(nt("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ee?Ce:Ae),this.texture=new Dr(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Q}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new Er(5,5,5),a=new Mr({name:"CubemapFromEquirect",uniforms:kr(n),vertexShader:r,fragmentShader:i,side:l,blending:u});a.uniforms.tEquirect.value=t;const s=new xr(o,a),c=t.minFilter;return t.minFilter===te&&(t.minFilter=Q),new Ir(1,10,this).update(e,s),t.minFilter=c,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const Fr=new wt,Nr=new wt,jr=new Je;class Br{constructor(e=new wt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Fr.subVectors(n,t).cross(Nr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Fr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||jr.getNormalMatrix(e),r=this.coplanarPoint(Fr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Ur=new Gt,zr=new wt;class Gr{constructor(e=new Br,t=new Br,n=new Br,r=new Br,i=new Br,o=new Br){this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(a-r,u-s,f-h,y-m).normalize(),t[1].setComponents(a+r,u+s,f+h,y+m).normalize(),t[2].setComponents(a+i,u+l,f+d,y+v).normalize(),t[3].setComponents(a-i,u-l,f-d,y-v).normalize(),t[4].setComponents(a-o,u-c,f-p,y-g).normalize(),t[5].setComponents(a+o,u+c,f+p,y+g).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Ur.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Ur.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ur)}intersectsSprite(e){return Ur.center.set(0,0,0),Ur.radius=.7071067811865476,Ur.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ur)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(zr.x=r.normal.x>0?e.max.x:e.min.x,zr.y=r.normal.y>0?e.max.y:e.min.y,zr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zr)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Hr(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function qr(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();let s;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)s=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");s=e.HALF_FLOAT}else s=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)s=e.SHORT;else if(i instanceof Uint32Array)s=e.UNSIGNED_INT;else if(i instanceof Int32Array)s=e.INT;else if(i instanceof Int8Array)s=e.BYTE;else if(i instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version)}}}class Vr extends ir{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],p=[],f=[],m=[];for(let e=0;e<c;e++){const t=e*h-o;for(let n=0;n<l;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/a),m.push(1-e/s)}}for(let e=0;e<s;e++)for(let t=0;t<a;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;d.push(n,r,o),d.push(r,i,o)}this.setIndex(d),this.setAttribute("position",new $n(p,3)),this.setAttribute("normal",new $n(f,3)),this.setAttribute("uv",new $n(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vr(e.width,e.height,e.widthSegments,e.heightSegments)}}const Wr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Yr={common:{diffuse:{value:new Gn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Je},alphaMap:{value:null},alphaMapTransform:{value:new Je},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Je}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Je}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Je}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Je},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Je},normalScale:{value:new $e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Je},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Je}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Je}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Je}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Je}},sprite:{diffuse:{value:new Gn(16777215)},opacity:{value:1},center:{value:new $e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Je},alphaMap:{value:null},alphaTest:{value:0}}},Xr={basic:{uniforms:Tr([Yr.common,Yr.specularmap,Yr.envmap,Yr.aomap,Yr.lightmap,Yr.fog]),vertexShader:Wr.meshbasic_vert,fragmentShader:Wr.meshbasic_frag},lambert:{uniforms:Tr([Yr.common,Yr.specularmap,Yr.envmap,Yr.aomap,Yr.lightmap,Yr.emissivemap,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,Yr.fog,Yr.lights,{emissive:{value:new Gn(0)}}]),vertexShader:Wr.meshlambert_vert,fragmentShader:Wr.meshlambert_frag},phong:{uniforms:Tr([Yr.common,Yr.specularmap,Yr.envmap,Yr.aomap,Yr.lightmap,Yr.emissivemap,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,Yr.fog,Yr.lights,{emissive:{value:new Gn(0)},specular:{value:new Gn(1118481)},shininess:{value:30}}]),vertexShader:Wr.meshphong_vert,fragmentShader:Wr.meshphong_frag},standard:{uniforms:Tr([Yr.common,Yr.envmap,Yr.aomap,Yr.lightmap,Yr.emissivemap,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,Yr.roughnessmap,Yr.metalnessmap,Yr.fog,Yr.lights,{emissive:{value:new Gn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag},toon:{uniforms:Tr([Yr.common,Yr.aomap,Yr.lightmap,Yr.emissivemap,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,Yr.gradientmap,Yr.fog,Yr.lights,{emissive:{value:new Gn(0)}}]),vertexShader:Wr.meshtoon_vert,fragmentShader:Wr.meshtoon_frag},matcap:{uniforms:Tr([Yr.common,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,Yr.fog,{matcap:{value:null}}]),vertexShader:Wr.meshmatcap_vert,fragmentShader:Wr.meshmatcap_frag},points:{uniforms:Tr([Yr.points,Yr.fog]),vertexShader:Wr.points_vert,fragmentShader:Wr.points_frag},dashed:{uniforms:Tr([Yr.common,Yr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wr.linedashed_vert,fragmentShader:Wr.linedashed_frag},depth:{uniforms:Tr([Yr.common,Yr.displacementmap]),vertexShader:Wr.depth_vert,fragmentShader:Wr.depth_frag},normal:{uniforms:Tr([Yr.common,Yr.bumpmap,Yr.normalmap,Yr.displacementmap,{opacity:{value:1}}]),vertexShader:Wr.meshnormal_vert,fragmentShader:Wr.meshnormal_frag},sprite:{uniforms:Tr([Yr.sprite,Yr.fog]),vertexShader:Wr.sprite_vert,fragmentShader:Wr.sprite_frag},background:{uniforms:{uvTransform:{value:new Je},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wr.background_vert,fragmentShader:Wr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Wr.backgroundCube_vert,fragmentShader:Wr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wr.cube_vert,fragmentShader:Wr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wr.equirect_vert,fragmentShader:Wr.equirect_frag},distanceRGBA:{uniforms:Tr([Yr.common,Yr.displacementmap,{referencePosition:{value:new wt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wr.distanceRGBA_vert,fragmentShader:Wr.distanceRGBA_frag},shadow:{uniforms:Tr([Yr.lights,Yr.fog,{color:{value:new Gn(0)},opacity:{value:1}}]),vertexShader:Wr.shadow_vert,fragmentShader:Wr.shadow_frag}};Xr.physical={uniforms:Tr([Xr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Je},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Je},clearcoatNormalScale:{value:new $e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Je},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Je},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Je},sheen:{value:0},sheenColor:{value:new Gn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Je},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Je},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Je},transmissionSamplerSize:{value:new $e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Je},attenuationDistance:{value:0},attenuationColor:{value:new Gn(0)},specularColor:{value:new Gn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Je},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Je}}]),vertexShader:Wr.meshphysical_vert,fragmentShader:Wr.meshphysical_frag};const Kr={r:0,b:0,g:0};function $r(e,t,n,r,i,o,a){const c=new Gn(0);let u,h,d=!0===o?0:1,p=null,f=0,m=null;function v(t,n){t.getRGB(Kr,Ar(e)),r.buffers.color.setClear(Kr.r,Kr.g,Kr.b,n,a)}return{getClearColor:function(){return c},setClearColor:function(e,t=1){c.set(e),d=t,v(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(e){d=e,v(c,d)},render:function(o,g){let y=!1,_=!0===g.isScene?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?n:t).get(_)),null===_?v(c,d):_&&_.isColor&&(v(_,1),y=!0),e.xr.getEnvironmentBlendMode()){case"opaque":y=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,a),y=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,a),y=!0}(e.autoClear||y)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),_&&(_.isCubeTexture||_.mapping===W)?(void 0===h&&(h=new xr(new Er(1,1,1),new Mr({name:"BackgroundCubeMaterial",uniforms:kr(Xr.backgroundCube.uniforms),vertexShader:Xr.backgroundCube.vertexShader,fragmentShader:Xr.backgroundCube.fragmentShader,side:l,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(h)),h.material.uniforms.envMap.value=_,h.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,h.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,h.material.toneMapped=_.colorSpace!==Ce,p===_&&f===_.version&&m===e.toneMapping||(h.material.needsUpdate=!0,p=_,f=_.version,m=e.toneMapping),h.layers.enableAll(),o.unshift(h,h.geometry,h.material,0,0,null)):_&&_.isTexture&&(void 0===u&&(u=new xr(new Vr(2,2),new Mr({name:"BackgroundMaterial",uniforms:kr(Xr.background.uniforms),vertexShader:Xr.background.vertexShader,fragmentShader:Xr.background.fragmentShader,side:s,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Ce,!0===_.matrixAutoUpdate&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),p===_&&f===_.version&&m===e.toneMapping||(u.material.needsUpdate=!0,p=_,f=_.version,m=e.toneMapping),u.layers.enableAll(),o.unshift(u,u.geometry,u.material,0,0,null))}}}function Jr(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},l=p(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){v(e,0)}function v(n,i){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i)}function g(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,i,o,a,s){!0!==r.isWebGL2||i!==e.INT&&i!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function _(){b(),u=!0,c!==l&&(c=l,h(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,_,b){let w=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let l=s[t.id];void 0===l&&(l={},s[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];return void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(_,d,l);c!==t&&(c=t,h(c.object)),w=function(e,t,n,r){const i=c.attributes,o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}return c.attributesNum!==a||c.index!==r}(i,_,d,b),w&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const s=n.getAttributes();for(const t in s)if(s[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}c.attributes=i,c.attributesNum=a,c.index=r}(i,_,d,b)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===d.id&&c.wireframe===e||(c.geometry=_.id,c.program=d.id,c.wireframe=e,w=!0)}null!==b&&n.update(b,e.ELEMENT_ARRAY_BUFFER),(w||u)&&(u=!1,function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const r=c[t];if(r.location>=0){let o=l[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,d=o.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)v(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,l*h,(d+a/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)v(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)m(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)y(r.location+e,a/r.locationSize,u,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,l,d,_),null!==b&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(b).buffer))},reset:_,resetDefaultState:b,dispose:function(){_();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:g}}function Zr(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,a,s),n.update(a,o,s)}}function Qr(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),v=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,_=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:_,floatVertexTextures:y&&_,maxSamples:o?e.getParameter(e.MAX_SAMPLES):0}}function ei(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new Br,s=new Je,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(!i||null===h||0===h.length||o&&!p)o?c(null):(l.value!==n&&(l.value=n,l.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0);else{const e=o?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(h,s,t,u);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function ti(e){let t=new WeakMap;function n(e,t){return t===V?e.mapping=H:304===t&&(e.mapping=q),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===V||304===o){if(t.has(i))return n(t.get(i).texture,i.mapping);{const o=i.image;if(o&&o.height>0){const a=new Or(o.height/2);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class ni extends Lr{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ri=[.125,.215,.35,.446,.526,.582],ii=new ni,oi=new Gn;let ai=null;const si=(1+Math.sqrt(5))/2,li=1/si,ci=[new wt(1,1,1),new wt(-1,1,1),new wt(1,1,-1),new wt(-1,1,-1),new wt(0,si,li),new wt(0,si,-li),new wt(li,0,si),new wt(-li,0,si),new wt(si,li,0),new wt(-si,li,0)];class ui{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){ai=this._renderer.getRenderTarget(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=fi(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=pi(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(ai),e.scissorTest=!1,di(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===H||e.mapping===q?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),ai=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Q,minFilter:Q,generateMipmaps:!1,type:oe,format:se,colorSpace:Me,depthBuffer:!1},r=hi(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=hi(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+ri.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=ri[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,v=1,g=new Float32Array(f*p*d),y=new Float32Array(m*p*d),_=new Float32Array(v*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];_.set(i,v*p*e)}const b=new ir;b.setAttribute("position",new Yn(g,f)),b.setAttribute("uv",new Yn(y,m)),b.setAttribute("faceIndex",new Yn(_,v)),t.push(b),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(20),i=new wt(0,1,0);return new Mr({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:u,depthTest:!1,depthWrite:!1})}(r,e,t)}return r}_compileMaterial(e){const t=new xr(this._lodPlanes[0],e);this._renderer.compile(t,ii)}_sceneToCubeUV(e,t,n,r){const i=new Rr(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,c=s.autoClear,u=s.toneMapping;s.getClearColor(oi),s.toneMapping=N,s.autoClear=!1;const h=new qn({name:"PMREM.Background",side:l,depthWrite:!1,depthTest:!1}),d=new xr(new Er,h);let p=!1;const f=e.background;f?f.isColor&&(h.color.copy(f),e.background=null,p=!0):(h.color.copy(oi),p=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,o[t],0),i.lookAt(a[t],0,0)):1===n?(i.up.set(0,0,o[t]),i.lookAt(0,a[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,a[t]));const l=this._cubeSize;di(r,n*l,t>2?l:0,l,l),s.setRenderTarget(r),p&&s.render(d,i),s.render(e,i)}d.geometry.dispose(),d.material.dispose(),s.toneMapping=u,s.autoClear=c,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===H||e.mapping===q;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=fi()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=pi());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new xr(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;di(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,ii)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=ci[(t-1)%ci.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new xr(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let v=0;for(let e=0;e<20;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?v+=n:e<f&&(v+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/v;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:g}=this;u.dTheta.value=d,u.mipInt.value=g-n;const y=this._sizeLods[r];di(t,3*y*(r>g-4?r-g+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,ii)}}function hi(e,t,n){const r=new gt(e,t,n);return r.texture.mapping=W,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function di(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function pi(){return new Mr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:u,depthTest:!1,depthWrite:!1})}function fi(){return new Mr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:u,depthTest:!1,depthWrite:!1})}function mi(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===V||304===o,s=o===H||o===q;if(a||s){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new ui(e)),r=a?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(a&&o&&o.height>0||s&&o&&function(e){let t=0;for(let n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(o)){null===n&&(n=new ui(e));const o=a?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function vi(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function gi(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new(Qe(n)?Kn:Xn)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function yi(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,r*s,c),n.update(l,o,c)}}function _i(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function bi(e,t){return e[0]-t[0]}function wi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xi(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,a=new vt,s=[];for(let e=0;e<8;e++)s[e]=[e,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let f=o.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const g=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],w=c.morphAttributes.normal||[],x=c.morphAttributes.color||[];let S=0;!0===g&&(S=1),!0===y&&(S=2),!0===_&&(S=3);let E=c.attributes.position.count*S,k=1;E>t.maxTextureSize&&(k=Math.ceil(E/t.maxTextureSize),E=t.maxTextureSize);const T=new Float32Array(E*k*4*p),A=new yt(T,E,k,p);A.type=ie,A.needsUpdate=!0;const C=4*S;for(let L=0;L<p;L++){const R=b[L],P=w[L],I=x[L],D=E*k*4*L;for(let O=0;O<R.count;O++){const F=O*C;!0===g&&(a.fromBufferAttribute(R,O),T[D+F+0]=a.x,T[D+F+1]=a.y,T[D+F+2]=a.z,T[D+F+3]=0),!0===y&&(a.fromBufferAttribute(P,O),T[D+F+4]=a.x,T[D+F+5]=a.y,T[D+F+6]=a.z,T[D+F+7]=0),!0===_&&(a.fromBufferAttribute(I,O),T[D+F+8]=a.x,T[D+F+9]=a.y,T[D+F+10]=a.z,T[D+F+11]=4===I.itemSize?a.w:1)}}function M(){A.dispose(),o.delete(c),c.removeEventListener("dispose",M)}f={count:p,texture:A,size:new $e(E,k)},o.set(c,f),c.addEventListener("dispose",M)}let m=0;for(let N=0;N<h.length;N++)m+=h[N];const v=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",v),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const j=void 0===h?0:h.length;let B=r[c.id];if(void 0===B||B.length!==j){B=[];for(let q=0;q<j;q++)B[q]=[q,0];r[c.id]=B}for(let V=0;V<j;V++){const W=B[V];W[0]=V,W[1]=h[V]}B.sort(wi);for(let Y=0;Y<8;Y++)Y<j&&B[Y][1]?(s[Y][0]=B[Y][0],s[Y][1]=B[Y][1]):(s[Y][0]=Number.MAX_SAFE_INTEGER,s[Y][1]=0);s.sort(bi);const U=c.morphAttributes.position,z=c.morphAttributes.normal;let G=0;for(let X=0;X<8;X++){const K=s[X],$=K[0],J=K[1];$!==Number.MAX_SAFE_INTEGER&&J?(U&&c.getAttribute("morphTarget"+X)!==U[$]&&c.setAttribute("morphTarget"+X,U[$]),z&&c.getAttribute("morphNormal"+X)!==z[$]&&c.setAttribute("morphNormal"+X,z[$]),i[X]=J,G+=J):(U&&!0===c.hasAttribute("morphTarget"+X)&&c.deleteAttribute("morphTarget"+X),z&&!0===c.hasAttribute("morphNormal"+X)&&c.deleteAttribute("morphNormal"+X),i[X]=0)}const H=c.morphTargetsRelative?1:1-G;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Si(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=r.render.frame,l=a.geometry,c=t.get(a,l);return i.get(c)!==s&&(t.update(c),i.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){i=new WeakMap}}}const Ei=new mt,ki=new yt,Ti=new _t,Ai=new Dr,Ci=[],Mi=[],Li=new Float32Array(16),Ri=new Float32Array(9),Pi=new Float32Array(4);function Ii(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Ci[i];if(void 0===o&&(o=new Float32Array(i),Ci[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Di(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Oi(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function Fi(e,t){let n=Mi[t];void 0===n&&(n=new Int32Array(t),Mi[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ni(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function ji(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Di(n,t))return;e.uniform2fv(this.addr,t),Oi(n,t)}}function Bi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Di(n,t))return;e.uniform3fv(this.addr,t),Oi(n,t)}}function Ui(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Di(n,t))return;e.uniform4fv(this.addr,t),Oi(n,t)}}function zi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Di(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Oi(n,t)}else{if(Di(n,r))return;Pi.set(r),e.uniformMatrix2fv(this.addr,!1,Pi),Oi(n,r)}}function Gi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Di(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Oi(n,t)}else{if(Di(n,r))return;Ri.set(r),e.uniformMatrix3fv(this.addr,!1,Ri),Oi(n,r)}}function Hi(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Di(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Oi(n,t)}else{if(Di(n,r))return;Li.set(r),e.uniformMatrix4fv(this.addr,!1,Li),Oi(n,r)}}function qi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Vi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Di(n,t))return;e.uniform2iv(this.addr,t),Oi(n,t)}}function Wi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Di(n,t))return;e.uniform3iv(this.addr,t),Oi(n,t)}}function Yi(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Di(n,t))return;e.uniform4iv(this.addr,t),Oi(n,t)}}function Xi(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ki(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Di(n,t))return;e.uniform2uiv(this.addr,t),Oi(n,t)}}function $i(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Di(n,t))return;e.uniform3uiv(this.addr,t),Oi(n,t)}}function Ji(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Di(n,t))return;e.uniform4uiv(this.addr,t),Oi(n,t)}}function Zi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Ei,i)}function Qi(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ti,i)}function eo(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Ai,i)}function to(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ki,i)}function no(e,t){e.uniform1fv(this.addr,t)}function ro(e,t){const n=Ii(t,this.size,2);e.uniform2fv(this.addr,n)}function io(e,t){const n=Ii(t,this.size,3);e.uniform3fv(this.addr,n)}function oo(e,t){const n=Ii(t,this.size,4);e.uniform4fv(this.addr,n)}function ao(e,t){const n=Ii(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function so(e,t){const n=Ii(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function lo(e,t){const n=Ii(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function co(e,t){e.uniform1iv(this.addr,t)}function uo(e,t){e.uniform2iv(this.addr,t)}function ho(e,t){e.uniform3iv(this.addr,t)}function po(e,t){e.uniform4iv(this.addr,t)}function fo(e,t){e.uniform1uiv(this.addr,t)}function mo(e,t){e.uniform2uiv(this.addr,t)}function vo(e,t){e.uniform3uiv(this.addr,t)}function go(e,t){e.uniform4uiv(this.addr,t)}function yo(e,t,n){const r=this.cache,i=t.length,o=Fi(n,i);Di(r,o)||(e.uniform1iv(this.addr,o),Oi(r,o));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||Ei,o[e])}function _o(e,t,n){const r=this.cache,i=t.length,o=Fi(n,i);Di(r,o)||(e.uniform1iv(this.addr,o),Oi(r,o));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||Ti,o[e])}function bo(e,t,n){const r=this.cache,i=t.length,o=Fi(n,i);Di(r,o)||(e.uniform1iv(this.addr,o),Oi(r,o));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||Ai,o[e])}function wo(e,t,n){const r=this.cache,i=t.length,o=Fi(n,i);Di(r,o)||(e.uniform1iv(this.addr,o),Oi(r,o));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||ki,o[e])}class xo{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ni;case 35664:return ji;case 35665:return Bi;case 35666:return Ui;case 35674:return zi;case 35675:return Gi;case 35676:return Hi;case 5124:case 35670:return qi;case 35667:case 35671:return Vi;case 35668:case 35672:return Wi;case 35669:case 35673:return Yi;case 5125:return Xi;case 36294:return Ki;case 36295:return $i;case 36296:return Ji;case 35678:case 36198:case 36298:case 36306:case 35682:return Zi;case 35679:case 36299:case 36307:return Qi;case 35680:case 36300:case 36308:case 36293:return eo;case 36289:case 36303:case 36311:case 36292:return to}}(t.type)}}class So{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return no;case 35664:return ro;case 35665:return io;case 35666:return oo;case 35674:return ao;case 35675:return so;case 35676:return lo;case 5124:case 35670:return co;case 35667:case 35671:return uo;case 35668:case 35672:return ho;case 35669:case 35673:return po;case 5125:return fo;case 36294:return mo;case 36295:return vo;case 36296:return go;case 35678:case 36198:case 36298:case 36306:case 35682:return yo;case 35679:case 36299:case 36307:return _o;case 35680:case 36300:case 36308:case 36293:return bo;case 36289:case 36303:case 36311:case 36292:return wo}}(t.type)}}class Eo{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const ko=/(\w+)(\])?(\[|\.)?/g;function To(e,t){e.seq.push(t),e.map[t.id]=t}function Ao(e,t,n){const r=e.name,i=r.length;for(ko.lastIndex=0;;){const o=ko.exec(r),a=ko.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){To(n,void 0===c?new xo(s,e,t):new So(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Eo(s),To(n,e)),n=e}}}class Co{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Ao(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function Mo(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let Lo=0;function Ro(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let e=i;e<o;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function Po(e,t){const n=function(e){switch(e){case Me:return["Linear","( value )"];case Ce:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Io(e,t){let n;switch(t){case j:n="Linear";break;case B:n="Reinhard";break;case U:n="OptimizedCineon";break;case z:n="ACESFilmic";break;case G:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Do(e){return""!==e}function Oo(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Fo(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const No=/^[ \t]*#include +<([\w\d./]+)>/gm;function jo(e){return e.replace(No,Bo)}function Bo(e,t){const n=Wr[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return jo(n)}const Uo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zo(e){return e.replace(Uo,Go)}function Go(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ho(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function qo(e,t,n,r){const s=e.getContext(),l=n.defines;let c=n.vertexShader,u=n.fragmentShader;const h=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===i?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===o?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===a&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case H:case q:t="ENVMAP_TYPE_CUBE";break;case W:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===q&&(t="ENVMAP_MODE_REFRACTION"),t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case D:t="ENVMAP_BLENDING_MULTIPLY";break;case O:t="ENVMAP_BLENDING_MIX";break;case F:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),v=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Do).join("\n")}(n),g=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),y=s.createProgram();let _,b,w=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=[g].filter(Do).join("\n"),_.length>0&&(_+="\n"),b=[v,g].filter(Do).join("\n"),b.length>0&&(b+="\n")):(_=[Ho(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Do).join("\n"),b=[v,Ho(n),"#define SHADER_NAME "+n.shaderName,g,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==N?"#define TONE_MAPPING":"",n.toneMapping!==N?Wr.tonemapping_pars_fragment:"",n.toneMapping!==N?Io("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Wr.encodings_pars_fragment,Po("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Do).join("\n")),c=jo(c),c=Oo(c,n),c=Fo(c,n),u=jo(u),u=Oo(u,n),u=Fo(u,n),c=zo(c),u=zo(u),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(w="#version 300 es\n",_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,b=["#define varying in",n.glslVersion===Ie?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Ie?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b);const x=w+_+c,S=w+b+u,E=Mo(s,s.VERTEX_SHADER,x),k=Mo(s,s.FRAGMENT_SHADER,S);if(s.attachShader(y,E),s.attachShader(y,k),void 0!==n.index0AttributeName?s.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(y,0,"position"),s.linkProgram(y),e.debug.checkShaderErrors){const t=s.getProgramInfoLog(y).trim(),n=s.getShaderInfoLog(E).trim(),r=s.getShaderInfoLog(k).trim();let i=!0,o=!0;if(!1===s.getProgramParameter(y,s.LINK_STATUS))if(i=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(s,y,E,k);else{const e=Ro(s,E,"vertex"),n=Ro(s,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(y,s.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==n&&""!==r||(o=!1);o&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:n,prefix:_},fragmentShader:{log:r,prefix:b}})}let T,A;return s.deleteShader(E),s.deleteShader(k),this.getUniforms=function(){return void 0===T&&(T=new Co(s,y)),T},this.getAttributes=function(){return void 0===A&&(A=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(s,y)),A},this.destroy=function(){r.releaseStatesOfProgram(this),s.deleteProgram(y),this.program=void 0},this.name=n.shaderName,this.id=Lo++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=E,this.fragmentShader=k,this}let Vo=0;class Wo{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Yo(e),t.set(e,n)),n}}class Yo{constructor(e){this.id=Vo++,this.code=e,this.usedTimes=0}}function Xo(e,t,n,r,i,o,a){const s=new cn,u=new Wo,h=[],d=i.isWebGL2,p=i.logarithmicDepthBuffer,f=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return 1===e?"uv1":2===e?"uv2":3===e?"uv3":"uv"}return{getParameters:function(o,s,h,y,_){const b=y.fog,w=_.geometry,x=o.isMeshStandardMaterial?y.environment:null,S=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),E=S&&S.mapping===W?S.image.height:null,k=v[o.type];null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead."));const T=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,A=void 0!==T?T.length:0;let C,M,L,R,P=0;if(void 0!==w.morphAttributes.position&&(P=1),void 0!==w.morphAttributes.normal&&(P=2),void 0!==w.morphAttributes.color&&(P=3),k){const e=Xr[k];C=e.vertexShader,M=e.fragmentShader}else C=o.vertexShader,M=o.fragmentShader,u.update(o),L=u.getVertexShaderID(o),R=u.getFragmentShaderID(o);const I=e.getRenderTarget(),D=!0===_.isInstancedMesh,O=!!o.map,F=!!o.matcap,j=!!S,B=!!o.aoMap,U=!!o.lightMap,z=!!o.bumpMap,G=!!o.normalMap,H=!!o.displacementMap,q=!!o.emissiveMap,V=!!o.metalnessMap,Y=!!o.roughnessMap,X=o.clearcoat>0,K=o.iridescence>0,$=o.sheen>0,J=o.transmission>0,Z=X&&!!o.clearcoatMap,Q=X&&!!o.clearcoatNormalMap,ee=X&&!!o.clearcoatRoughnessMap,te=K&&!!o.iridescenceMap,ne=K&&!!o.iridescenceThicknessMap,re=$&&!!o.sheenColorMap,ie=$&&!!o.sheenRoughnessMap,oe=!!o.specularMap,ae=!!o.specularColorMap,se=!!o.specularIntensityMap,le=J&&!!o.transmissionMap,ce=J&&!!o.thicknessMap,ue=!!o.gradientMap,he=!!o.alphaMap,de=o.alphaTest>0,pe=!!o.extensions,fe=!!w.attributes.uv1,me=!!w.attributes.uv2,ve=!!w.attributes.uv3;return{isWebGL2:d,shaderID:k,shaderName:o.type,vertexShader:C,fragmentShader:M,defines:o.defines,customVertexShaderID:L,customFragmentShaderID:R,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:D,instancingColor:D&&null!==_.instanceColor,supportsVertexTextures:f,outputColorSpace:null===I?e.outputColorSpace:!0===I.isXRRenderTarget?I.texture.colorSpace:Me,map:O,matcap:F,envMap:j,envMapMode:j&&S.mapping,envMapCubeUVHeight:E,aoMap:B,lightMap:U,bumpMap:z,normalMap:G,displacementMap:f&&H,emissiveMap:q,normalMapObjectSpace:G&&1===o.normalMapType,normalMapTangentSpace:G&&0===o.normalMapType,metalnessMap:V,roughnessMap:Y,clearcoat:X,clearcoatMap:Z,clearcoatNormalMap:Q,clearcoatRoughnessMap:ee,iridescence:K,iridescenceMap:te,iridescenceThicknessMap:ne,sheen:$,sheenColorMap:re,sheenRoughnessMap:ie,specularMap:oe,specularColorMap:ae,specularIntensityMap:se,transmission:J,transmissionMap:le,thicknessMap:ce,gradientMap:ue,opaque:!1===o.transparent&&1===o.blending,alphaMap:he,alphaTest:de,combine:o.combine,mapUv:O&&g(o.map.channel),aoMapUv:B&&g(o.aoMap.channel),lightMapUv:U&&g(o.lightMap.channel),bumpMapUv:z&&g(o.bumpMap.channel),normalMapUv:G&&g(o.normalMap.channel),displacementMapUv:H&&g(o.displacementMap.channel),emissiveMapUv:q&&g(o.emissiveMap.channel),metalnessMapUv:V&&g(o.metalnessMap.channel),roughnessMapUv:Y&&g(o.roughnessMap.channel),clearcoatMapUv:Z&&g(o.clearcoatMap.channel),clearcoatNormalMapUv:Q&&g(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&g(o.clearcoatRoughnessMap.channel),iridescenceMapUv:te&&g(o.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&g(o.iridescenceThicknessMap.channel),sheenColorMapUv:re&&g(o.sheenColorMap.channel),sheenRoughnessMapUv:ie&&g(o.sheenRoughnessMap.channel),specularMapUv:oe&&g(o.specularMap.channel),specularColorMapUv:ae&&g(o.specularColorMap.channel),specularIntensityMapUv:se&&g(o.specularIntensityMap.channel),transmissionMapUv:le&&g(o.transmissionMap.channel),thicknessMapUv:ce&&g(o.thicknessMap.channel),alphaMapUv:he&&g(o.alphaMap.channel),vertexTangents:G&&!!w.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,vertexUv1s:fe,vertexUv2s:me,vertexUv3s:ve,pointsUvs:!0===_.isPoints&&!!w.attributes.uv&&(O||he),fog:!!b,useFog:!0===o.fog,fogExp2:b&&b.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:A,morphTextureStride:P,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:N,useLegacyLights:e.useLegacyLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===c,flipSided:o.side===l,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:pe&&!0===o.extensions.derivatives,extensionFragDepth:pe&&!0===o.extensions.fragDepth,extensionDrawBuffers:pe&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:pe&&!0===o.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.isWebGL2&&s.enable(0),t.supportsVertexTextures&&s.enable(1),t.instancing&&s.enable(2),t.instancingColor&&s.enable(3),t.matcap&&s.enable(4),t.envMap&&s.enable(5),t.normalMapObjectSpace&&s.enable(6),t.normalMapTangentSpace&&s.enable(7),t.clearcoat&&s.enable(8),t.iridescence&&s.enable(9),t.alphaTest&&s.enable(10),t.vertexColors&&s.enable(11),t.vertexAlphas&&s.enable(12),t.vertexUv1s&&s.enable(13),t.vertexUv2s&&s.enable(14),t.vertexUv3s&&s.enable(15),t.vertexTangents&&s.enable(16),e.push(s.mask),s.disableAll(),t.fog&&s.enable(0),t.useFog&&s.enable(1),t.flatShading&&s.enable(2),t.logarithmicDepthBuffer&&s.enable(3),t.skinning&&s.enable(4),t.morphTargets&&s.enable(5),t.morphNormals&&s.enable(6),t.morphColors&&s.enable(7),t.premultipliedAlpha&&s.enable(8),t.shadowMapEnabled&&s.enable(9),t.useLegacyLights&&s.enable(10),t.doubleSided&&s.enable(11),t.flipSided&&s.enable(12),t.useDepthPacking&&s.enable(13),t.dithering&&s.enable(14),t.transmission&&s.enable(15),t.sheen&&s.enable(16),t.opaque&&s.enable(17),t.pointsUvs&&s.enable(18),e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=v[e.type];let n;if(t){const e=Xr[t];n=Cr.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=h.length;e<t;e++){const t=h[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new qo(e,n,t,o),h.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=h.indexOf(e);h[t]=h[h.length-1],h.pop(),e.destroy()}},releaseShaderCache:function(e){u.remove(e)},programs:h,dispose:function(){u.dispose()}}}function Ko(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function $o(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Jo(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Zo(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||$o),r.length>1&&r.sort(t||Jo),i.length>1&&i.sort(t||Jo)}}}function Qo(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Zo,e.set(t,[i])):n>=r.length?(i=new Zo,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function ea(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new wt,color:new Gn};break;case"SpotLight":n={position:new wt,direction:new wt,color:new Gn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new wt,color:new Gn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new wt,skyColor:new Gn,groundColor:new Gn};break;case"RectAreaLight":n={color:new Gn,position:new wt,halfWidth:new wt,halfHeight:new wt}}return e[t.id]=n,n}}}let ta=0;function na(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function ra(e,t){const n=new ea,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $e,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)i.probe.push(new wt);const o=new wt,a=new Jt,s=new Jt;return{setup:function(o,a){let s=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,v=0,g=0,y=0,_=0;o.sort(na);const b=!0===a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,w=t.intensity,x=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*w*b,l+=a.g*w*b,c+=a.b*w*b;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(w*b),e.distance=x,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&_++),i.spotLightMatrix[d]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,g++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=t.shadow.matrix,v++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*b),e.groundColor.copy(t.groundColor).multiplyScalar(w*b),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=Yr.LTC_FLOAT_1,i.rectAreaLTC2=Yr.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=Yr.LTC_HALF_1,i.rectAreaLTC2=Yr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===p&&w.hemiLength===f&&w.numDirectionalShadows===m&&w.numPointShadows===v&&w.numSpotShadows===g&&w.numSpotMaps===y||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=v,i.pointShadowMap.length=v,i.spotShadow.length=g,i.spotShadowMap.length=g,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=v,i.spotLightMatrix.length=g+y-_,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=_,w.directionalLength=u,w.pointLength=h,w.spotLength=d,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=v,w.numSpotShadows=g,w.numSpotMaps=y,i.version=ta++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),c++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function ia(e,t){const n=new ra(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function oa(e,t){let n=new WeakMap;return{get:function(r,i=0){const o=n.get(r);let a;return void 0===o?(a=new ia(e,t),n.set(r,[a])):i>=o.length?(a=new ia(e,t),o.push(a)):a=o[i],a},dispose:function(){n=new WeakMap}}}class aa extends Nn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ke,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class sa extends Nn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function la(e,t,n){let r=new Gr;const o=new $e,h=new $e,d=new vt,p=new aa({depthPacking:Te}),f=new sa,m={},v=n.maxTextureSize,g={[s]:l,[l]:s,[c]:c},y=new Mr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $e},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const b=new ir;b.setAttribute("position",new Yn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new xr(b,y),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i;let S=this.type;function E(n,r){const i=t.update(w);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new gt(o.x,o.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,y,w,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,_,w,null)}function k(t,n,r,i){let o=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?f:p,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let r=m[e];void 0===r&&(r={},m[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i),o=i}return o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===a?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:g[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial&&(e.properties.get(o).light=r),o}function T(n,i,o,s,l){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&l===a)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let a=0,c=t.length;a<c;a++){const c=t[a],u=i[c.materialIndex];if(u&&u.visible){const t=k(n,u,s,l);e.renderBufferDirect(o,null,r,t,n,c)}}}else if(i.visible){const t=k(n,i,s,l);e.renderBufferDirect(o,null,r,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)T(c[e],i,o,s,l)}this.render=function(t,n,i){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const s=e.getRenderTarget(),l=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),p=e.state;p.setBlending(u),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const f=S!==a&&this.type===a,m=S===a&&this.type!==a;for(let s=0,l=t.length;s<l;s++){const l=t[s],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;o.copy(c.mapSize);const u=c.getFrameExtents();if(o.multiply(u),h.copy(c.mapSize),(o.x>v||o.y>v)&&(o.x>v&&(h.x=Math.floor(v/u.x),o.x=h.x*u.x,c.mapSize.x=h.x),o.y>v&&(h.y=Math.floor(v/u.y),o.y=h.y*u.y,c.mapSize.y=h.y)),null===c.map||!0===f||!0===m){const e=this.type!==a?{minFilter:$,magFilter:$}:{};null!==c.map&&c.map.dispose(),c.map=new gt(o.x,o.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);d.set(h.x*t.x,h.y*t.y,h.x*t.z,h.y*t.w),p.viewport(d),c.updateMatrices(l,e),r=c.getFrustum(),T(n,i,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===a&&E(c,i),c.needsUpdate=!1}S=this.type,x.needsUpdate=!1,e.setRenderTarget(s,l,c)}}function ca(e,t,n){const r=n.isWebGL2,i=new function(){let t=!1;const n=new vt;let r=null;const i=new vt(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?de(e.DEPTH_TEST):pe(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case T:e.depthFunc(e.NEVER);break;case A:e.depthFunc(e.ALWAYS);break;case C:e.depthFunc(e.LESS);break;case M:e.depthFunc(e.LEQUAL);break;case L:e.depthFunc(e.EQUAL);break;case R:e.depthFunc(e.GEQUAL);break;case P:e.depthFunc(e.GREATER);break;case I:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?de(e.STENCIL_TEST):pe(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},s=new WeakMap,D=new WeakMap;let O={},F={},N=new WeakMap,j=[],B=null,U=!1,z=null,G=null,H=null,q=null,V=null,W=null,Y=null,X=!1,K=null,$=null,J=null,Z=null,Q=null;const ee=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let te=!1,ne=0;const re=e.getParameter(e.VERSION);-1!==re.indexOf("WebGL")?(ne=parseFloat(/^WebGL (\d)/.exec(re)[1]),te=ne>=1):-1!==re.indexOf("OpenGL ES")&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),te=ne>=2);let ie=null,oe={};const ae=e.getParameter(e.SCISSOR_BOX),se=e.getParameter(e.VIEWPORT),le=(new vt).fromArray(ae),ce=(new vt).fromArray(se);function ue(t,n,i,o){const a=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<i;s++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a):e.texImage3D(n,0,e.RGBA,1,1,o,0,e.RGBA,e.UNSIGNED_BYTE,a);return s}const he={};function de(t){!0!==O[t]&&(e.enable(t),O[t]=!0)}function pe(t){!1!==O[t]&&(e.disable(t),O[t]=!1)}he[e.TEXTURE_2D]=ue(e.TEXTURE_2D,e.TEXTURE_2D,1),he[e.TEXTURE_CUBE_MAP]=ue(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(he[e.TEXTURE_2D_ARRAY]=ue(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),he[e.TEXTURE_3D]=ue(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),o.setClear(1),a.setClear(0),de(e.DEPTH_TEST),o.setFunc(M),ge(!1),ye(1),de(e.CULL_FACE),ve(u);const fe={[d]:e.FUNC_ADD,[p]:e.FUNC_SUBTRACT,[f]:e.FUNC_REVERSE_SUBTRACT};if(r)fe[103]=e.MIN,fe[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(fe[103]=e.MIN_EXT,fe[104]=e.MAX_EXT)}const me={[m]:e.ZERO,[v]:e.ONE,[g]:e.SRC_COLOR,[_]:e.SRC_ALPHA,[k]:e.SRC_ALPHA_SATURATE,[S]:e.DST_COLOR,[w]:e.DST_ALPHA,[y]:e.ONE_MINUS_SRC_COLOR,[b]:e.ONE_MINUS_SRC_ALPHA,[E]:e.ONE_MINUS_DST_COLOR,[x]:e.ONE_MINUS_DST_ALPHA};function ve(t,n,r,i,o,a,s,l){if(t!==u){if(!1===U&&(de(e.BLEND),U=!0),t===h)o=o||n,a=a||r,s=s||i,n===G&&o===V||(e.blendEquationSeparate(fe[n],fe[o]),G=n,V=o),r===H&&i===q&&a===W&&s===Y||(e.blendFuncSeparate(me[r],me[i],me[a],me[s]),H=r,q=i,W=a,Y=s),z=t,X=!1;else if(t!==z||l!==X){if(G===d&&V===d||(e.blendEquation(e.FUNC_ADD),G=d,V=d),l)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}H=null,q=null,W=null,Y=null,z=t,X=l}}else!0===U&&(pe(e.BLEND),U=!1)}function ge(t){K!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),K=t)}function ye(t){0!==t?(de(e.CULL_FACE),t!==$&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):pe(e.CULL_FACE),$=t}function _e(t,n,r){t?(de(e.POLYGON_OFFSET_FILL),Z===n&&Q===r||(e.polygonOffset(n,r),Z=n,Q=r)):pe(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:o,stencil:a},enable:de,disable:pe,bindFramebuffer:function(t,n){return F[t]!==n&&(e.bindFramebuffer(t,n),F[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(F[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(F[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let o=j,a=!1;if(r)if(o=N.get(i),void 0===o&&(o=[],N.set(i,o)),r.isWebGLMultipleRenderTargets){const t=r.texture;if(o.length!==t.length||o[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)o[n]=e.COLOR_ATTACHMENT0+n;o.length=t.length,a=!0}}else o[0]!==e.COLOR_ATTACHMENT0&&(o[0]=e.COLOR_ATTACHMENT0,a=!0);else o[0]!==e.BACK&&(o[0]=e.BACK,a=!0);a&&(n.isWebGL2?e.drawBuffers(o):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o))},useProgram:function(t){return B!==t&&(e.useProgram(t),B=t,!0)},setBlending:ve,setMaterial:function(t,n){t.side===c?pe(e.CULL_FACE):de(e.CULL_FACE);let r=t.side===l;n&&(r=!r),ge(r),1===t.blending&&!1===t.transparent?ve(u):ve(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const s=t.stencilWrite;a.setTest(s),s&&(a.setMask(t.stencilWriteMask),a.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),a.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),_e(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?de(e.SAMPLE_ALPHA_TO_COVERAGE):pe(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ge,setCullFace:ye,setLineWidth:function(t){t!==J&&(te&&e.lineWidth(t),J=t)},setPolygonOffset:_e,setScissorTest:function(t){t?de(e.SCISSOR_TEST):pe(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+ee-1),ie!==t&&(e.activeTexture(t),ie=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===ie?e.TEXTURE0+ee-1:ie);let i=oe[r];void 0===i&&(i={type:void 0,texture:void 0},oe[r]=i),i.type===t&&i.texture===n||(ie!==r&&(e.activeTexture(r),ie=r),e.bindTexture(t,n||he[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=oe[ie];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=D.get(n);void 0===r&&(r=new WeakMap,D.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=D.get(n).get(t);s.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),s.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===le.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),le.copy(t))},viewport:function(t){!1===ce.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),ce.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),O={},ie=null,oe={},F={},N=new WeakMap,j=[],B=null,U=!1,z=null,G=null,H=null,q=null,V=null,W=null,Y=null,X=!1,K=null,$=null,J=null,Z=null,Q=null,le.set(0,0,e.canvas.width,e.canvas.height),ce.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),a.reset()}}}function ua(e,t,n,r,i,o,a){const s=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,u=i.maxTextureSize,h=i.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,p="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const v=new WeakMap;let g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function y(e,t){return g?new OffscreenCanvas(e,t):et("canvas")}function _(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?We:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===m&&(m=y(o,a));const s=n?y(o,a):m;return s.width=o,s.height=a,s.getContext("2d").drawImage(e,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return qe(e.width)&&qe(e.height)}function w(e,t){return e.generateMipmaps&&t&&e.minFilter!==$&&e.minFilter!==Q}function x(t){e.generateMipmap(t)}function S(n,r,i,o,a=!1){if(!1===s)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;return r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RGBA&&(i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=o===Ce&&!1===a?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function E(e,t,n){return!0===w(e,n)||e.isFramebufferTexture&&e.minFilter!==$&&e.minFilter!==Q?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function k(t){return t===$||t===J||t===Z?e.NEAREST:e.LINEAR}function T(e){const t=e.target;t.removeEventListener("dispose",T),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=v.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&C(e),0===Object.keys(i).length&&v.delete(n)}r.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function A(t){const n=t.target;n.removeEventListener("dispose",A),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),a.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),a.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}function C(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete v.get(i)[n.__cacheKey],a.memory.textures--}let M=0;function L(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void O(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}const R={[Y]:e.REPEAT,[X]:e.CLAMP_TO_EDGE,[K]:e.MIRRORED_REPEAT},P={[$]:e.NEAREST,[J]:e.NEAREST_MIPMAP_NEAREST,[Z]:e.NEAREST_MIPMAP_LINEAR,[Q]:e.LINEAR,[ee]:e.LINEAR_MIPMAP_NEAREST,[te]:e.LINEAR_MIPMAP_LINEAR};function I(n,o,a){if(a?(e.texParameteri(n,e.TEXTURE_WRAP_S,R[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,R[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,R[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===X&&o.wrapT===X||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,k(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,k(o.minFilter)),o.minFilter!==$&&o.minFilter!==Q&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(o.magFilter===$)return;if(o.minFilter!==Z&&o.minFilter!==te)return;if(o.type===ie&&!1===t.has("OES_texture_float_linear"))return;if(!1===s&&o.type===oe&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function D(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T));const i=n.source;let o=v.get(i);void 0===o&&(o={},v.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&C(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function O(t,i,a){let l=e.TEXTURE_2D;(i.isDataArrayTexture||i.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),i.isData3DTexture&&(l=e.TEXTURE_3D);const c=D(t,i),h=i.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+a);const d=r.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!s&&(e.wrapS!==X||e.wrapT!==X||e.minFilter!==$&&e.minFilter!==Q)}(i)&&!1===b(i.image);let r=_(i.image,t,!1,u);r=z(i,r);const p=b(r)||s,f=o.convert(i.format,i.colorSpace);let m,v=o.convert(i.type),g=S(i.internalFormat,f,v,i.colorSpace);I(l,i,p);const y=i.mipmaps,k=s&&!0!==i.isVideoTexture,T=void 0===d.__version||!0===c,A=E(i,r,p);if(i.isDepthTexture)g=e.DEPTH_COMPONENT,s?g=i.type===ie?e.DEPTH_COMPONENT32F:i.type===re?e.DEPTH_COMPONENT24:i.type===ae?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:i.type===ie&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===ce&&g===e.DEPTH_COMPONENT&&1012!==i.type&&i.type!==re&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=re,v=o.convert(i.type)),i.format===ue&&g===e.DEPTH_COMPONENT&&(g=e.DEPTH_STENCIL,i.type!==ae&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=ae,v=o.convert(i.type))),T&&(k?n.texStorage2D(e.TEXTURE_2D,1,g,r.width,r.height):n.texImage2D(e.TEXTURE_2D,0,g,r.width,r.height,0,f,v,null));else if(i.isDataTexture)if(y.length>0&&p){k&&T&&n.texStorage2D(e.TEXTURE_2D,A,g,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,v,m.data):n.texImage2D(e.TEXTURE_2D,t,g,m.width,m.height,0,f,v,m.data);i.generateMipmaps=!1}else k?(T&&n.texStorage2D(e.TEXTURE_2D,A,g,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,r.width,r.height,f,v,r.data)):n.texImage2D(e.TEXTURE_2D,0,g,r.width,r.height,0,f,v,r.data);else if(i.isCompressedTexture)if(i.isCompressedArrayTexture){k&&T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,g,y[0].width,y[0].height,r.depth);for(let t=0,o=y.length;t<o;t++)m=y[t],i.format!==se?null!==f?k?n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,f,m.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,g,m.width,m.height,r.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,r.depth,f,v,m.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,g,m.width,m.height,r.depth,0,f,v,m.data)}else{k&&T&&n.texStorage2D(e.TEXTURE_2D,A,g,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],i.format!==se?null!==f?k?n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,m.data):n.compressedTexImage2D(e.TEXTURE_2D,t,g,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,f,v,m.data):n.texImage2D(e.TEXTURE_2D,t,g,m.width,m.height,0,f,v,m.data)}else if(i.isDataArrayTexture)k?(T&&n.texStorage3D(e.TEXTURE_2D_ARRAY,A,g,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,r.width,r.height,r.depth,f,v,r.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,g,r.width,r.height,r.depth,0,f,v,r.data);else if(i.isData3DTexture)k?(T&&n.texStorage3D(e.TEXTURE_3D,A,g,r.width,r.height,r.depth),n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,r.width,r.height,r.depth,f,v,r.data)):n.texImage3D(e.TEXTURE_3D,0,g,r.width,r.height,r.depth,0,f,v,r.data);else if(i.isFramebufferTexture){if(T)if(k)n.texStorage2D(e.TEXTURE_2D,A,g,r.width,r.height);else{let t=r.width,i=r.height;for(let r=0;r<A;r++)n.texImage2D(e.TEXTURE_2D,r,g,t,i,0,f,v,null),t>>=1,i>>=1}}else if(y.length>0&&p){k&&T&&n.texStorage2D(e.TEXTURE_2D,A,g,y[0].width,y[0].height);for(let t=0,r=y.length;t<r;t++)m=y[t],k?n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,v,m):n.texImage2D(e.TEXTURE_2D,t,g,f,v,m);i.generateMipmaps=!1}else k?(T&&n.texStorage2D(e.TEXTURE_2D,A,g,r.width,r.height),n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,v,r)):n.texImage2D(e.TEXTURE_2D,0,g,f,v,r);w(i,p)&&x(l),d.__version=h.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}function F(t,i,a,s,l){const c=o.convert(a.format,a.colorSpace),u=o.convert(a.type),h=S(a.internalFormat,c,u,a.colorSpace);r.get(i).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,0,h,i.width,i.height,i.depth,0,c,u,null):n.texImage2D(l,0,h,i.width,i.height,0,c,u,null)),n.bindFramebuffer(e.FRAMEBUFFER,t),U(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,s,l,r.get(a).__webglTexture,0,B(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,s,l,r.get(a).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function N(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r||U(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===ie?i=e.DEPTH_COMPONENT32F:t.type===re&&(i=e.DEPTH_COMPONENT24));const r=B(n);U(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=B(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let i=0;i<t.length;i++){const a=t[i],s=o.convert(a.format,a.colorSpace),l=o.convert(a.type),c=S(a.internalFormat,s,l,a.colorSpace),u=B(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,n.width,n.height):U(n)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,c,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function j(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),L(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=B(i);if(i.depthTexture.format===ce)U(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==ue)throw new Error("Unknown depthTexture format");U(i)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),N(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),N(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function B(e){return Math.min(h,e.samples)}function U(e){const n=r.get(e);return s&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function z(e,n){const r=e.colorSpace,i=e.format,o=e.type;return!0===e.isCompressedTexture||e.format===De||r!==Me&&r!==Ae&&(r===Ce?!1===s?!0===t.has("EXT_sRGB")&&i===se?(e.format=De,e.minFilter=Q,e.generateMipmaps=!1):n=ht.sRGBToLinear(n):i===se&&o===ne||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}this.allocateTextureUnit=function(){const e=M;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=L,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?O(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,i){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,i,a){if(6!==i.image.length)return;const l=D(t,i),u=i.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+a),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=i.isCompressedTexture||i.image[0].isCompressedTexture,r=i.image[0]&&i.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||r?r?i.image[e].image:i.image[e]:_(i.image[e],!1,!0,c),d[e]=z(i,d[e]);const p=d[0],f=b(p)||s,m=o.convert(i.format,i.colorSpace),v=o.convert(i.type),g=S(i.internalFormat,m,v,i.colorSpace),y=s&&!0!==i.isVideoTexture,k=void 0===h.__version||!0===l;let T,A=E(i,p,f);if(I(e.TEXTURE_CUBE_MAP,i,f),t){y&&k&&n.texStorage2D(e.TEXTURE_CUBE_MAP,A,g,p.width,p.height);for(let t=0;t<6;t++){T=d[t].mipmaps;for(let r=0;r<T.length;r++){const o=T[r];i.format!==se?null!==m?y?n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,m,o.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,g,o.width,o.height,0,o.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,o.width,o.height,m,v,o.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,g,o.width,o.height,0,m,v,o.data)}}}else{T=i.mipmaps,y&&k&&(T.length>0&&A++,n.texStorage2D(e.TEXTURE_CUBE_MAP,A,g,d[0].width,d[0].height));for(let t=0;t<6;t++)if(r){y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,d[t].width,d[t].height,m,v,d[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,g,d[t].width,d[t].height,0,m,v,d[t].data);for(let r=0;r<T.length;r++){const i=T[r].image[t].image;y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,m,v,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,g,i.width,i.height,0,m,v,i.data)}}else{y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,v,d[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,g,m,v,d[t]);for(let r=0;r<T.length;r++){const i=T[r];y?n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,m,v,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,g,m,v,i.image[t])}}}w(i,f)&&x(e.TEXTURE_CUBE_MAP),h.__version=u.version,i.onUpdate&&i.onUpdate(i)}t.__version=i.version}(a,t,i):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+i)},this.rebindTextures=function(t,n,i){const o=r.get(t);void 0!==n&&F(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==i&&j(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",A),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,p=b(t)||s;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(s&&t.samples>0&&!1===U(t)){const r=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<r.length;n++){const i=r[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const a=o.convert(i.format,i.colorSpace),s=o.convert(i.type),l=S(i.internalFormat,a,s,i.colorSpace,!0===t.isXRRenderTarget),u=B(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),N(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),I(e.TEXTURE_CUBE_MAP,l,p);for(let n=0;n<6;n++)F(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);w(l,p)&&x(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(d){const i=t.texture;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r.get(a);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),I(e.TEXTURE_2D,a,p),F(c.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D),w(a,p)&&x(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(s?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),I(r,l,p),F(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),w(l,p)&&x(r),n.unbindTexture()}t.depthBuffer&&j(t)},this.updateRenderTargetMipmap=function(t){const i=b(t)||s,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,s=o.length;a<s;a++){const s=o[a];if(w(s,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(s).__webglTexture;n.bindTexture(i,o),x(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(s&&t.samples>0&&!1===U(t)){const i=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),h){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),p&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=j,this.setupFrameBufferTexture=F,this.useMultisampledRTT=U}function ha(e,t,n){const r=n.isWebGL2;return{convert:function(n,i=Ae){let o;if(n===ne)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(n===re)return e.UNSIGNED_INT;if(n===ie)return e.FLOAT;if(n===oe)return r?e.HALF_FLOAT:(o=t.get("OES_texture_half_float"),null!==o?o.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===se)return e.RGBA;if(n===le)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===ce)return e.DEPTH_COMPONENT;if(n===ue)return e.DEPTH_STENCIL;if(n===De)return o=t.get("EXT_sRGB"),null!==o?o.SRGB_ALPHA_EXT:null;if(n===he)return e.RED;if(1029===n)return e.RED_INTEGER;if(n===de)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===pe||n===fe||n===me||n===ve)if(i===Ce){if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===o)return null;if(n===pe)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===fe)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===me)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ve)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(o=t.get("WEBGL_compressed_texture_s3tc"),null===o)return null;if(n===pe)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===fe)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===me)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ve)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(o=t.get("WEBGL_compressed_texture_pvrtc"),null===o)return null;if(35840===n)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return o=t.get("WEBGL_compressed_texture_etc1"),null!==o?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(o=t.get("WEBGL_compressed_texture_etc"),null===o)return null;if(37492===n)return i===Ce?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(37496===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(o=t.get("WEBGL_compressed_texture_astc"),null===o)return null;if(37808===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return i===Ce?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===ge){if(o=t.get("EXT_texture_compression_bptc"),null===o)return null;if(n===ge)return i===Ce?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===n||36284===n||36285===n||36286===n){if(o=t.get("EXT_texture_compression_rgtc"),null===o)return null;if(n===ge)return o.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===ae?r?e.UNSIGNED_INT_24_8:(o=t.get("WEBGL_depth_texture"),null!==o?o.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class da extends Rr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class pa extends Sn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fa={type:"move"};class ma{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new pa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new pa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new wt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new wt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new pa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new wt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new wt),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(l,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fa)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new pa;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class va extends mt{constructor(e,t,n,r,i,o,a,s,l,c){if((c=void 0!==c?c:ce)!==ce&&c!==ue)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===ce&&(n=re),void 0===n&&c===ue&&(n=ae),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:$,this.minFilter=void 0!==s?s:$,this.flipY=!1,this.generateMipmaps=!1}}class ga extends Oe{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=t.getContextAttributes();let m=null,v=null;const g=[],y=[],_=new Set,b=new Map,w=new Rr;w.layers.enable(1),w.viewport=new vt;const x=new Rr;x.layers.enable(2),x.viewport=new vt;const S=[w,x],E=new da;E.layers.enable(1),E.layers.enable(2);let k=null,T=null;function A(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=g[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function C(){r.removeEventListener("select",A),r.removeEventListener("selectstart",A),r.removeEventListener("selectend",A),r.removeEventListener("squeeze",A),r.removeEventListener("squeezestart",A),r.removeEventListener("squeezeend",A),r.removeEventListener("end",C),r.removeEventListener("inputsourceschange",M);for(let e=0;e<g.length;e++){const t=y[e];null!==t&&(y[e]=null,g[e].disconnect(t))}k=null,T=null,e.setRenderTarget(m),d=null,h=null,u=null,r=null,v=null,D.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function M(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=y.indexOf(n);r>=0&&(y[r]=null,g[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=y.indexOf(n);if(-1===r){for(let e=0;e<g.length;e++){if(e>=y.length){y.push(n),r=e;break}if(null===y[e]){y[e]=n,r=e;break}}if(-1===r)break}const i=g[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=g[e];return void 0===t&&(t=new ma,g[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=g[e];return void 0===t&&(t=new ma,g[e]=t),t.getGripSpace()},this.getHand=function(e){let t=g[e];return void 0===t&&(t=new ma,g[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(m=e.getRenderTarget(),r.addEventListener("select",A),r.addEventListener("selectstart",A),r.addEventListener("selectend",A),r.addEventListener("squeeze",A),r.addEventListener("squeezestart",A),r.addEventListener("squeezeend",A),r.addEventListener("end",C),r.addEventListener("inputsourceschange",M),!0!==f.xrCompatible&&await t.makeXRCompatible(),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||f.antialias,alpha:!0,depth:f.depth,stencil:f.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),v=new gt(d.framebufferWidth,d.framebufferHeight,{format:se,type:ne,colorSpace:e.outputColorSpace,stencilBuffer:f.stencil})}else{let n=null,o=null,a=null;f.depth&&(a=f.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=f.stencil?ue:ce,o=f.stencil?ae:re);const s={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(s),r.updateRenderState({layers:[h]}),v=new gt(h.textureWidth,h.textureHeight,{format:se,type:ne,depthTexture:new va(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:f.stencil,colorSpace:e.outputColorSpace,samples:f.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const L=new wt,R=new wt;function P(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;E.near=x.near=w.near=e.near,E.far=x.far=w.far=e.far,k===E.near&&T===E.far||(r.updateRenderState({depthNear:E.near,depthFar:E.far}),k=E.near,T=E.far);const t=e.parent,n=E.cameras;P(E,t);for(let e=0;e<n.length;e++)P(n[e],t);2===n.length?function(e,t,n){L.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=L.distanceTo(R),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const v=a+f,g=s+f,y=d-m,_=p+(r-m),b=l*s/g*v,w=c*s/g*v;e.projectionMatrix.makePerspective(y,_,b,w,v,g),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(E,w,x):E.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Be*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,E,t)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return _};let I=null;const D=new Hr;D.setAnimationLoop((function(t,r){if(c=r.getViewerPose(l||o),p=r,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==E.cameras.length&&(E.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(h,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let a=S[r];void 0===a&&(a=new Rr,a.layers.enable(r),a.viewport=new vt,S[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(E.matrix.copy(a.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===n&&E.cameras.push(a)}}for(let e=0;e<g.length;e++){const t=y[e],n=g[e];null!==t&&void 0!==n&&n.update(t,r,l||o)}if(I&&I(t,r),r.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:r.detectedPlanes});let e=null;for(const t of _)r.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)_.delete(t),b.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const e of r.detectedPlanes)if(_.has(e)){const t=b.get(e);e.lastChangedTime>t&&(b.set(e,e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:e}))}else _.add(e),b.set(e,r.lastChangedTime),n.dispatchEvent({type:"planeadded",data:e})}p=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function ya(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===l&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===l&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=t.get(i).envMap;if(o&&(r.envMap.value=o,r.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Ar(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform)),e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));t.get(r).envMap&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===l&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,o,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function _a(e,t,n,r){let i={},o={},a=[];const s=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n){const r=e.value;if(void 0===n[t]){if("number"==typeof r)n[t]=r;else{const e=Array.isArray(r)?r:[r],i=[];for(let t=0;t<e.length;t++)i.push(e[t].clone());n[t]=i}return!0}if("number"==typeof r){if(n[t]!==r)return n[t]=r,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],i=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(i[t]))return n.copy(i[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(function(e){const t=e.uniforms;let n=0;let r=0;for(let e=0,i=t.length;e<i;e++){const i=t[e],o={boundary:0,storage:0},a=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=a.length;e<t;e++){const t=c(a[e]);o.boundary+=t.boundary,o.storage+=t.storage}i.__data=new Float32Array(o.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,e>0&&(r=n%16,0!==r&&16-r-o.boundary<0&&(n+=16-r,i.__offset=n)),n+=o.storage}r=n%16,r>0&&(n+=16-r),e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;o[n.id]!==f&&(function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=r[t];if(!0===l(n,t,o)){const t=n.__offset,r=Array.isArray(n.value)?n.value:[n.value];let i=0;for(let o=0;o<r.length;o++){const a=r[o],s=c(a);"number"==typeof a?(n.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+i,n.__data)):a.isMatrix3?(n.__data[0]=a.elements[0],n.__data[1]=a.elements[1],n.__data[2]=a.elements[2],n.__data[3]=a.elements[0],n.__data[4]=a.elements[3],n.__data[5]=a.elements[4],n.__data[6]=a.elements[5],n.__data[7]=a.elements[0],n.__data[8]=a.elements[6],n.__data[9]=a.elements[7],n.__data[10]=a.elements[8],n.__data[11]=a.elements[0]):(a.toArray(n.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,n.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}function ba(){const e=et("canvas");return e.style.display="block",e}class wa{constructor(e={}){const{canvas:t=ba(),context:n=null,depth:i=!0,stencil:o=!0,alpha:a=!1,antialias:u=!1,premultipliedAlpha:h=!0,preserveDrawingBuffer:d=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:f=!1}=e;let m;this.isWebGLRenderer=!0,m=null!==n?n.getContextAttributes().alpha:a;let v=null,g=null;const y=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Ce,this.useLegacyLights=!0,this.toneMapping=N,this.toneMappingExposure=1;const b=this;let w=!1,x=0,S=0,E=null,k=-1,T=null;const A=new vt,C=new vt;let M=null,L=t.width,R=t.height,P=1,I=null,D=null;const O=new vt(0,0,L,R),F=new vt(0,0,L,R);let j=!1;const B=new Gr;let U=!1,z=!1,G=null;const H=new Jt,q=new wt,V={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function W(){return null===E?P:1}let Y,X,K,$,J,Z,Q,ee,re,ae,le,ce,ue,he,de,pe,fe,me,ve,ge,ye,_e,be,we,xe=n;function Se(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:i,stencil:o,antialias:u,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:p,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Ae,!1),t.addEventListener("webglcontextcreationerror",Le,!1),null===xe){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),xe=Se(t,e),null===xe)throw Se(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xe.getShaderPrecisionFormat&&(xe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ee(){Y=new vi(xe),X=new Qr(xe,Y,e),Y.init(X),_e=new ha(xe,Y,X),K=new ca(xe,Y,X),$=new _i(xe),J=new Ko,Z=new ua(xe,Y,K,J,X,_e,$),Q=new ti(b),ee=new mi(b),re=new qr(xe,X),be=new Jr(xe,Y,re,X),ae=new gi(xe,re,$,be),le=new Si(xe,ae,re,$),ve=new xi(xe,X,Z),pe=new ei(J),ce=new Xo(b,Q,ee,Y,X,be,pe),ue=new ya(b,J),he=new Qo,de=new oa(Y,X),me=new $r(b,Q,ee,K,le,m,h),fe=new la(b,le,X),we=new _a(xe,$,X,K),ge=new Zr(xe,Y,$,X),ye=new yi(xe,Y,$,X),$.programs=ce.programs,b.capabilities=X,b.extensions=Y,b.properties=J,b.renderLists=he,b.shadowMap=fe,b.state=K,b.info=$}Ee();const ke=new ga(b,xe);function Te(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=$.autoReset,t=fe.enabled,n=fe.autoUpdate,r=fe.needsUpdate,i=fe.type;Ee(),$.autoReset=e,fe.enabled=t,fe.autoUpdate=n,fe.needsUpdate=r,fe.type=i}function Le(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Re(e){const t=e.target;t.removeEventListener("dispose",Re),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){ce.releaseProgram(e)})),e.isShaderMaterial&&ce.releaseShaderCache(e))})(e),J.remove(e)}(t)}this.xr=ke,this.getContext=function(){return xe},this.getContextAttributes=function(){return xe.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(L,R,!1))},this.getSize=function(e){return e.set(L,R)},this.setSize=function(e,n,r=!0){ke.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,R=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*P,R*P).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,R=n,P=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(O)},this.setViewport=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),K.viewport(A.copy(O).multiplyScalar(P).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,n,r){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,n,r),K.scissor(C.copy(F).multiplyScalar(P).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){K.setScissorTest(j=e)},this.setOpaqueSort=function(e){I=e},this.setTransparentSort=function(e){D=e},this.getClearColor=function(e){return e.copy(me.getClearColor())},this.setClearColor=function(){me.setClearColor.apply(me,arguments)},this.getClearAlpha=function(){return me.getClearAlpha()},this.setClearAlpha=function(){me.setClearAlpha.apply(me,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;e&&(r|=xe.COLOR_BUFFER_BIT),t&&(r|=xe.DEPTH_BUFFER_BIT),n&&(r|=xe.STENCIL_BUFFER_BIT),xe.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Ae,!1),t.removeEventListener("webglcontextcreationerror",Le,!1),he.dispose(),de.dispose(),J.dispose(),Q.dispose(),ee.dispose(),le.dispose(),be.dispose(),we.dispose(),ce.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",Ie),ke.removeEventListener("sessionend",De),G&&(G.dispose(),G=null),Oe.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=V);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=V),Z.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===E?b.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Me,l=(r.isMeshStandardMaterial?ee:Q).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,f=r.toneMapped?b.toneMapping:N,m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==m?m.length:0,y=J.get(r),_=g.state.lights;if(!0===U&&(!0===z||e!==T)){const t=e===T&&r.id===k;pe.setState(r,e,t)}let w=!1;r.version===y.__version?y.needsLights&&y.lightsStateVersion!==_.state.version||y.outputColorSpace!==s||i.isInstancedMesh&&!1===y.instancing?w=!0:i.isInstancedMesh||!0!==y.instancing?i.isSkinnedMesh&&!1===y.skinning?w=!0:i.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===r.fog&&y.fog!==o?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===pe.numPlanes&&y.numIntersection===pe.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==h||y.morphNormals!==d||y.morphColors!==p||y.toneMapping!==f||!0===X.isWebGL2&&y.morphTargetsCount!==v)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,y.__version=r.version);let x=y.currentProgram;!0===w&&(x=Ue(r,t,i));let S=!1,A=!1,C=!1;const M=x.getUniforms(),L=y.uniforms;if(K.useProgram(x.program)&&(S=!0,A=!0,C=!0),r.id!==k&&(k=r.id,A=!0),S||T!==e){if(M.setValue(xe,"projectionMatrix",e.projectionMatrix),X.logarithmicDepthBuffer&&M.setValue(xe,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),T!==e&&(T=e,A=!0,C=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=M.map.cameraPosition;void 0!==t&&t.setValue(xe,q.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(xe,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&M.setValue(xe,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){M.setOptional(xe,i,"bindMatrix"),M.setOptional(xe,i,"bindMatrixInverse");const e=i.skeleton;e&&(X.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),M.setValue(xe,"boneTexture",e.boneTexture,Z),M.setValue(xe,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=n.morphAttributes;var D,O;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===X.isWebGL2)&&ve.update(i,n,x),(A||y.receiveShadow!==i.receiveShadow)&&(y.receiveShadow=i.receiveShadow,M.setValue(xe,"receiveShadow",i.receiveShadow)),r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),A&&(M.setValue(xe,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(O=C,(D=L).ambientLightColor.needsUpdate=O,D.lightProbe.needsUpdate=O,D.directionalLights.needsUpdate=O,D.directionalLightShadows.needsUpdate=O,D.pointLights.needsUpdate=O,D.pointLightShadows.needsUpdate=O,D.spotLights.needsUpdate=O,D.spotLightShadows.needsUpdate=O,D.rectAreaLights.needsUpdate=O,D.hemisphereLights.needsUpdate=O),o&&!0===r.fog&&ue.refreshFogUniforms(L,o),ue.refreshMaterialUniforms(L,r,P,R,G),Co.upload(xe,y.uniformsList,L,Z)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Co.upload(xe,y.uniformsList,L,Z),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&M.setValue(xe,"center",i.center),M.setValue(xe,"modelViewMatrix",i.modelViewMatrix),M.setValue(xe,"normalMatrix",i.normalMatrix),M.setValue(xe,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(X.isWebGL2){const n=e[t];we.update(n,x),we.bind(n,x)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return x}(e,t,n,r,i);K.setMaterial(r,a);let l=n.index,c=1;!0===r.wireframe&&(l=ae.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),p=Math.min(p,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;be.setup(i,r,s,n,l);let v=ge;if(null!==l&&(m=re.get(l),v=ye,v.setIndex(m)),i.isMesh)!0===r.wireframe?(K.setLineWidth(r.wireframeLinewidth*W()),v.setMode(xe.LINES)):v.setMode(xe.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),K.setLineWidth(e*W()),i.isLineSegments?v.setMode(xe.LINES):i.isLineLoop?v.setMode(xe.LINE_LOOP):v.setMode(xe.LINE_STRIP)}else i.isPoints?v.setMode(xe.POINTS):i.isSprite&&v.setMode(xe.TRIANGLES);if(i.isInstancedMesh)v.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===c&&!1===e.forceSinglePass?(e.side=l,e.needsUpdate=!0,Ue(e,t,n),e.side=s,e.needsUpdate=!0,Ue(e,t,n),e.side=c):Ue(e,t,n)}g=de.get(e),g.init(),_.push(g),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights(b.useLegacyLights),e.traverse((function(t){const r=t.material;if(r)if(Array.isArray(r))for(let i=0;i<r.length;i++)n(r[i],e,t);else n(r,e,t)})),_.pop(),g=null};let Pe=null;function Ie(){Oe.stop()}function De(){Oe.start()}const Oe=new Hr;function Fe(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||B.intersectsSprite(e)){r&&q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=le.update(e),i=e.material;i.visible&&v.push(e,t,i,n,q.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||B.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==$.render.frame&&(e.skeleton.update(),e.skeleton.frame=$.render.frame);const t=le.update(e),i=e.material;if(r&&(null===t.boundingSphere&&t.computeBoundingSphere(),q.copy(t.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&v.push(e,t,s,n,q.z,a)}}else i.visible&&v.push(e,t,i,n,q.z,null)}const i=e.children;for(let e=0,o=i.length;e<o;e++)Fe(i[e],t,n,r)}function Ne(e,t,n,r){const i=e.opaque,o=e.transmissive,a=e.transparent;g.setupLightsView(n),!0===U&&pe.setGlobalState(b.clippingPlanes,n),o.length>0&&function(e,t,n,r){if(null===G){const e=X.isWebGL2;G=new gt(1024,1024,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")?oe:ne,minFilter:te,samples:e&&!0===u?4:0})}const i=b.getRenderTarget();b.setRenderTarget(G),b.clear();const o=b.toneMapping;b.toneMapping=N,je(e,n,r),Z.updateMultisampleRenderTarget(G),Z.updateRenderTargetMipmap(G);let a=!1;for(let e=0,i=t.length;e<i;e++){const i=t[e],o=i.object,s=i.geometry,u=i.material,h=i.group;if(u.side===c&&o.layers.test(r.layers)){const e=u.side;u.side=l,u.needsUpdate=!0,Be(o,n,r,s,u,h),u.side=e,u.needsUpdate=!0,a=!0}}!0===a&&(Z.updateMultisampleRenderTarget(G),Z.updateRenderTargetMipmap(G)),b.setRenderTarget(i),b.toneMapping=o}(i,o,t,n),r&&K.viewport(A.copy(r)),i.length>0&&je(i,t,n),o.length>0&&je(o,t,n),a.length>0&&je(a,t,n),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function je(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Be(a,t,n,s,l,c)}}function Be(e,t,n,r,i,o){e.onBeforeRender(b,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(b,t,n,r,e,o),!0===i.transparent&&i.side===c&&!1===i.forceSinglePass?(i.side=l,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=s,i.needsUpdate=!0,b.renderBufferDirect(n,t,r,i,e,o),i.side=c):b.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(b,t,n,r,i,o)}function Ue(e,t,n){!0!==t.isScene&&(t=V);const r=J.get(e),i=g.state.lights,o=g.state.shadowsArray,a=i.state.version,s=ce.getParameters(e,i.state,o,t,n),l=ce.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:Q).get(e.envMap||r.environment),void 0===c&&(e.addEventListener("dispose",Re),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return ze(e,s),u}else s.uniforms=ce.getUniforms(e),e.onBuild(n,s,b),e.onBeforeCompile(s,b),u=ce.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=pe.uniform),ze(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),p=Co.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=p,u}function ze(e,t){const n=J.get(e);n.outputColorSpace=t.outputColorSpace,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Oe.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!=typeof self&&Oe.setContext(self),this.setAnimationLoop=function(e){Pe=e,ke.setAnimationLoop(e),null===e?Oe.stop():Oe.start()},ke.addEventListener("sessionstart",Ie),ke.addEventListener("sessionend",De),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===ke.enabled&&!0===ke.isPresenting&&(!0===ke.cameraAutoUpdate&&ke.updateCamera(t),t=ke.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,E),g=de.get(e,_.length),g.init(),_.push(g),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),B.setFromProjectionMatrix(H),z=this.localClippingEnabled,U=pe.init(this.clippingPlanes,z),v=he.get(e,y.length),v.init(),y.push(v),Fe(e,t,0,b.sortObjects),v.finish(),!0===b.sortObjects&&v.sort(I,D),!0===U&&pe.beginShadows();const n=g.state.shadowsArray;if(fe.render(n,e,t),!0===U&&pe.endShadows(),!0===this.info.autoReset&&this.info.reset(),me.render(v,e),g.setupLights(b.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ne(v,e,r,r.viewport)}}else Ne(v,e,t);null!==E&&(Z.updateMultisampleRenderTarget(E),Z.updateRenderTargetMipmap(E)),!0===e.isScene&&e.onAfterRender(b,e,t),be.resetDefaultState(),k=-1,T=null,_.pop(),g=_.length>0?_[_.length-1]:null,y.pop(),v=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;const r=J.get(e);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){E=e,x=t,S=n;let r=!0,i=null,o=!1,a=!1;if(e){const n=J.get(e);void 0!==n.__useDefaultFramebuffer?(K.bindFramebuffer(xe.FRAMEBUFFER,null),r=!1):void 0===n.__webglFramebuffer?Z.setupRenderTarget(e):n.__hasExternalTextures&&Z.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const s=e.texture;(s.isData3DTexture||s.isDataArrayTexture||s.isCompressedArrayTexture)&&(a=!0);const l=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=l[t],o=!0):i=X.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:l,A.copy(e.viewport),C.copy(e.scissor),M=e.scissorTest}else A.copy(O).multiplyScalar(P).floor(),C.copy(F).multiplyScalar(P).floor(),M=j;if(K.bindFramebuffer(xe.FRAMEBUFFER,i)&&X.drawBuffers&&r&&K.drawBuffers(e,i),K.viewport(A),K.scissor(C),K.setScissorTest(M),o){const r=J.get(e.texture);xe.framebufferTexture2D(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,xe.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=J.get(e.texture),i=t||0;xe.framebufferTextureLayer(xe.FRAMEBUFFER,xe.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}k=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){K.bindFramebuffer(xe.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(s!==se&&_e.convert(s)!==xe.getParameter(xe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===oe&&(Y.has("EXT_color_buffer_half_float")||X.isWebGL2&&Y.has("EXT_color_buffer_float"));if(!(l===ne||_e.convert(l)===xe.getParameter(xe.IMPLEMENTATION_COLOR_READ_TYPE)||l===ie&&(X.isWebGL2||Y.has("OES_texture_float")||Y.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&xe.readPixels(t,n,r,i,_e.convert(s),_e.convert(l),o)}finally{const e=null!==E?J.get(E).__webglFramebuffer:null;K.bindFramebuffer(xe.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);Z.setTexture2D(t,0),xe.copyTexSubImage2D(xe.TEXTURE_2D,n,0,0,e.x,e.y,i,o),K.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=_e.convert(n.format),s=_e.convert(n.type);Z.setTexture2D(n,0),xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,n.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?xe.texSubImage2D(xe.TEXTURE_2D,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?xe.compressedTexSubImage2D(xe.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):xe.texSubImage2D(xe.TEXTURE_2D,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&xe.generateMipmap(xe.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,l=_e.convert(r.format),c=_e.convert(r.type);let u;if(r.isData3DTexture)Z.setTexture3D(r,0),u=xe.TEXTURE_3D;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(r,0),u=xe.TEXTURE_2D_ARRAY}xe.pixelStorei(xe.UNPACK_FLIP_Y_WEBGL,r.flipY),xe.pixelStorei(xe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),xe.pixelStorei(xe.UNPACK_ALIGNMENT,r.unpackAlignment);const h=xe.getParameter(xe.UNPACK_ROW_LENGTH),d=xe.getParameter(xe.UNPACK_IMAGE_HEIGHT),p=xe.getParameter(xe.UNPACK_SKIP_PIXELS),f=xe.getParameter(xe.UNPACK_SKIP_ROWS),m=xe.getParameter(xe.UNPACK_SKIP_IMAGES),v=n.isCompressedTexture?n.mipmaps[0]:n.image;xe.pixelStorei(xe.UNPACK_ROW_LENGTH,v.width),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,v.height),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,e.min.x),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,e.min.y),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?xe.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xe.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,v.data)):xe.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,l,c,v),xe.pixelStorei(xe.UNPACK_ROW_LENGTH,h),xe.pixelStorei(xe.UNPACK_IMAGE_HEIGHT,d),xe.pixelStorei(xe.UNPACK_SKIP_PIXELS,p),xe.pixelStorei(xe.UNPACK_SKIP_ROWS,f),xe.pixelStorei(xe.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&xe.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){x=0,S=0,E=null,K.reset(),be.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ce?Ee:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ee?Ce:Me}}(class extends wa{}).prototype.isWebGL1Renderer=!0;class xa extends Sn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Sa{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Pe,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Ue()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ue()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ue()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ea=new wt;class ka{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.applyMatrix4(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.applyNormalMatrix(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ea.fromBufferAttribute(this,t),Ea.transformDirection(e),this.setXYZ(t,Ea.x,Ea.y,Ea.z);return this}setX(e,t){return this.normalized&&(t=Xe(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Xe(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Xe(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Xe(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ye(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ye(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ye(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ye(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array),r=Xe(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xe(t,this.array),n=Xe(n,this.array),r=Xe(r,this.array),i=Xe(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Yn(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ka(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Ta=new wt,Aa=new vt,Ca=new vt,Ma=new wt,La=new Jt,Ra=new wt;class Pa extends xr{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Jt,this.bindMatrixInverse=new Jt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Et),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Ra.fromBufferAttribute(t,e),this.applyBoneTransform(e,Ra),this.boundingBox.expandByPoint(Ra)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Gt),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)Ra.fromBufferAttribute(t,e),this.applyBoneTransform(e,Ra),this.boundingSphere.expandByPoint(Ra)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new vt,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Aa.fromBufferAttribute(r.attributes.skinIndex,e),Ca.fromBufferAttribute(r.attributes.skinWeight,e),Ta.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Ca.getComponent(e);if(0!==r){const i=Aa.getComponent(e);La.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Ma.copy(Ta).applyMatrix4(La),r)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Ia extends Sn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Da extends mt{constructor(e=null,t=1,n=1,r,i,o,a,s,l=$,c=$,u,h){super(null,o,a,s,l,c,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Oa=new Jt,Fa=new Jt;class Na{constructor(e=[],t=[]){this.uuid=Ue(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new Jt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new Jt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Fa;Oa.multiplyMatrices(i,t[r]),Oa.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Na(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Ve(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Da(t,e,e,se,ie);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ia),this.bones.push(i),this.boneInverses.push((new Jt).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class ja extends Yn{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ba=new Jt,Ua=new Jt,za=[],Ga=new Et,Ha=new Jt,qa=new xr,Va=new Gt;class Wa extends xr{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new ja(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,Ha)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Et),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ba),Ga.copy(e.boundingBox).applyMatrix4(Ba),this.boundingBox.union(Ga)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Gt),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Ba),Va.copy(e.boundingSphere).applyMatrix4(Ba),this.boundingSphere.union(Va)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(qa.geometry=this.geometry,qa.material=this.material,void 0!==qa.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Va.copy(this.boundingSphere),Va.applyMatrix4(n),!1!==e.ray.intersectsSphere(Va)))for(let i=0;i<r;i++){this.getMatrixAt(i,Ba),Ua.multiplyMatrices(n,Ba),qa.matrixWorld=Ua,qa.raycast(e,za);for(let e=0,n=za.length;e<n;e++){const n=za[e];n.instanceId=i,n.object=this,t.push(n)}za.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new ja(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ya extends Nn{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Gn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Xa=new wt,Ka=new wt,$a=new Jt,Ja=new $t,Za=new Gt;class Qa extends Sn{constructor(e=new ir,t=new Ya){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Xa.fromBufferAttribute(t,e-1),Ka.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Xa.distanceTo(Ka);e.setAttribute("lineDistance",new $n(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Za.copy(n.boundingSphere),Za.applyMatrix4(r),Za.radius+=i,!1===e.ray.intersectsSphere(Za))return;$a.copy(r).invert(),Ja.copy(e.ray).applyMatrix4($a);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new wt,c=new wt,u=new wt,h=new wt,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p)for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);if(l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i),Ja.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(h);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}else for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=d){if(l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1),Ja.distanceSqToSegment(l,c,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const es=new wt,ts=new wt;class ns extends Qa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)es.fromBufferAttribute(t,e),ts.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+es.distanceTo(ts);e.setAttribute("lineDistance",new $n(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class rs extends Qa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class is extends Nn{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Gn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const os=new Jt,as=new $t,ss=new Gt,ls=new wt;class cs extends Sn{constructor(e=new ir,t=new is){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ss.copy(n.boundingSphere),ss.applyMatrix4(r),ss.radius+=i,!1===e.ray.intersectsSphere(ss))return;os.copy(r).invert(),as.copy(e.ray).applyMatrix4(os);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l)for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);ls.fromBufferAttribute(c,i),us(ls,i,s,r,e,t,this)}else for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++)ls.fromBufferAttribute(c,n),us(ls,n,s,r,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function us(e,t,n,r,i,o,a){const s=as.distanceSqToPoint(e);if(s<n){const n=new wt;as.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class hs extends ir{constructor(e=1,t=1,n=1,r=32,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let v=0;function g(n){const i=p,o=new $e,f=new wt;let g=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;const b=p;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*_,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,_,0),o.x=.5*n+.5,o.y=.5*i*_+.5,d.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=b+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),g+=3}l.addGroup(v,g,!0===n?1:2),v+=g}!function(){const o=new wt,g=new wt;let y=0;const _=(t-e)/n;for(let l=0;l<=i;l++){const c=[],v=l/i,y=v*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),f=Math.cos(i);g.x=y*l,g.y=-v*n+m,g.z=y*f,u.push(g.x,g.y,g.z),o.set(l,_,f).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-v),c.push(p++)}f.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],o=f[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(v,y,0),v+=y}(),!1===o&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(c),this.setAttribute("position",new $n(u,3)),this.setAttribute("normal",new $n(h,3)),this.setAttribute("uv",new $n(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hs(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ds extends Nn{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Gn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ps extends ds{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ze(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Gn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Gn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Gn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class fs extends Nn{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new $e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}function ms(e,t,n){return gs(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function vs(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function gs(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ys(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function _s(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function bs(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}class ws{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class xs extends ws{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:i=e,a=2*t-n;break;case 2402:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*n-t;break;case 2402:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let e=0;e!==a;++e)i[e]=v*o[c+e]+g*o[l+e]+y*o[s+e]+_*o[u+e];return i}}class Ss extends ws{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let e=0;e!==a;++e)i[e]=o[l+e]*u+o[s+e]*c;return i}}class Es extends ws{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ks{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=vs(t,this.TimeBufferType),this.values=vs(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:vs(e.times,Array),values:vs(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Es(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ss(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new xs(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case ye:t=this.InterpolantFactoryMethodDiscrete;break;case _e:t=this.InterpolantFactoryMethodLinear;break;case be:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ye;case this.InterpolantFactoryMethodLinear:return _e;case this.InterpolantFactoryMethodSmooth:return be}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=ms(n,i,o),this.values=ms(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&gs(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=ms(this.times),t=ms(this.values),n=this.getValueSize(),r=this.getInterpolation()===be,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=ms(e,0,o),this.values=ms(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=ms(this.times,0),t=ms(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}ks.prototype.TimeBufferType=Float32Array,ks.prototype.ValueBufferType=Float32Array,ks.prototype.DefaultInterpolation=_e;class Ts extends ks{}Ts.prototype.ValueTypeName="bool",Ts.prototype.ValueBufferType=Array,Ts.prototype.DefaultInterpolation=ye,Ts.prototype.InterpolantFactoryMethodLinear=void 0,Ts.prototype.InterpolantFactoryMethodSmooth=void 0;class As extends ks{}As.prototype.ValueTypeName="color";class Cs extends ks{}Cs.prototype.ValueTypeName="number";class Ms extends ws{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let e=l+a;l!==e;l+=4)bt.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Ls extends ks{InterpolantFactoryMethodLinear(e){return new Ms(this.times,this.values,this.getValueSize(),e)}}Ls.prototype.ValueTypeName="quaternion",Ls.prototype.DefaultInterpolation=_e,Ls.prototype.InterpolantFactoryMethodSmooth=void 0;class Rs extends ks{}Rs.prototype.ValueTypeName="string",Rs.prototype.ValueBufferType=Array,Rs.prototype.DefaultInterpolation=ye,Rs.prototype.InterpolantFactoryMethodLinear=void 0,Rs.prototype.InterpolantFactoryMethodSmooth=void 0;class Ps extends ks{}Ps.prototype.ValueTypeName="vector";class Is{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Ue(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(Ds(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(ks.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let a=[],s=[];a.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const l=ys(a);a=_s(a,1,l),s=_s(s,1,l),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new Cs(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];bs(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const i=l[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new Cs(".morphTargetInfluence["+n+"]",e,o))}s=e.length*o}else{const o=".bones["+t[e].name+"]";n(Ps,o+".position",i,"pos",r),n(Ls,o+".quaternion",i,"rot",r),n(Ps,o+".scale",i,"scl",r)}}return 0===r.length?null:new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Ds(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Cs;case"vector":case"vector2":case"vector3":case"vector4":return Ps;case"color":return As;case"quaternion":return Ls;case"bool":case"boolean":return Ts;case"string":return Rs}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];bs(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Os={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Fs{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Ns=new Fs;class js{constructor(e){this.manager=void 0!==e?e:Ns,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Bs={};class Us extends Error{constructor(e,t){super(e),this.response=t}}class zs extends js{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Os.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Bs[e])return void Bs[e].push({onLoad:t,onProgress:n,onError:r});Bs[e]=[],Bs[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Bs[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}});return new Response(l)}throw new Us(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Os.add(e,t);const n=Bs[e];delete Bs[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Bs[e];if(void 0===n)throw this.manager.itemError(e),t;delete Bs[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Gs extends js{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Os.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=et("img");function s(){c(),Os.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Hs extends js{constructor(e){super(e)}load(e,t,n,r){const i=new mt,o=new Gs(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class qs extends Sn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Gn(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const Vs=new Jt,Ws=new wt,Ys=new wt;class Xs{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $e(512,512),this.map=null,this.mapPass=null,this.matrix=new Jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Gr,this._frameExtents=new $e(1,1),this._viewportCount=1,this._viewports=[new vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Ws.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ws),Ys.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Ys),t.updateMatrixWorld(),Vs.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Vs),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(Vs)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Ks extends Xs{constructor(){super(new Rr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Be*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $s extends qs{constructor(e,t,n=0,r=Math.PI/3,i=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new Ks}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Js=new Jt,Zs=new wt,Qs=new wt;class el extends Xs{constructor(){super(new Rr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $e(4,2),this._viewportCount=6,this._viewports=[new vt(2,1,1,1),new vt(0,1,1,1),new vt(3,1,1,1),new vt(1,1,1,1),new vt(3,0,1,1),new vt(1,0,1,1)],this._cubeDirections=[new wt(1,0,0),new wt(-1,0,0),new wt(0,0,1),new wt(0,0,-1),new wt(0,1,0),new wt(0,-1,0)],this._cubeUps=[new wt(0,1,0),new wt(0,1,0),new wt(0,1,0),new wt(0,1,0),new wt(0,0,1),new wt(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Zs.setFromMatrixPosition(e.matrixWorld),n.position.copy(Zs),Qs.copy(n.position),Qs.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Qs),n.updateMatrixWorld(),r.makeTranslation(-Zs.x,-Zs.y,-Zs.z),Js.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Js)}}class tl extends qs{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new el}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class nl extends Xs{constructor(){super(new ni(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class rl extends qs{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Sn.DEFAULT_UP),this.updateMatrix(),this.target=new Sn,this.shadow=new nl}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class il extends qs{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ol{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class al extends ir{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class sl extends js{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Os.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){Os.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}class ll{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=cl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=cl();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function cl(){return("undefined"==typeof performance?Date:performance).now()}const ul="\\[\\]\\.:\\/",hl=new RegExp("["+ul+"]","g"),dl="[^"+ul+"]",pl="[^"+ul.replace("\\.","")+"]",fl=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",dl)+/(WCOD+)?/.source.replace("WCOD",pl)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",dl)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",dl)+"$"),ml=["material","materials","bones","map"];class vl{constructor(e,t,n){this.path=t,this.parsedPath=n||vl.parseTrackName(t),this.node=vl.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new vl.Composite(e,t,n):new vl(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(hl,"")}static parseTrackName(e){const t=fl.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==ml.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=vl.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vl.Composite=class{constructor(e,t,n){const r=n||vl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},vl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vl.prototype.GetterByBindingType=[vl.prototype._getValue_direct,vl.prototype._getValue_array,vl.prototype._getValue_arrayElement,vl.prototype._getValue_toArray],vl.prototype.SetterByBindingTypeAndVersioning=[[vl.prototype._setValue_direct,vl.prototype._setValue_direct_setNeedsUpdate,vl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_array,vl.prototype._setValue_array_setNeedsUpdate,vl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_arrayElement,vl.prototype._setValue_arrayElement_setNeedsUpdate,vl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_fromArray,vl.prototype._setValue_fromArray_setNeedsUpdate,vl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class gl{constructor(e){this.value=e}clone(){return new gl(void 0===this.value.clone?this.value:this.value.clone())}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={},cache={};function importAll(e){e.keys().forEach((function(t){cache[t]=e(t)}))}importAll(__webpack_require__(5436)),Project_Component_Library=__webpack_exports__})();
